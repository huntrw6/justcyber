window.chesscom=window.chesscom||{},window.chesscom.routes=window.chesscom.routes||{},Object.assign(window.chesscom.routes,{web_analysis_board_editor:{tokens:[["text","/analysis"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_analysis_board_editor:{tokens:[["text","/analysis"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_votechess_game:{tokens:[["variable","/","[^/]++","id"],["text","/votechess/game"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_votechess_game:{tokens:[["variable","/","[^/]++","id"],["text","/votechess/game"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_game_get_gif_url:{tokens:[["variable","/","[^/]++","id"],["variable","/","daily|live","type"],["text","/callback/game/gif"]],defaults:{subdomain:"www"},requirements:{type:"daily|live",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_game_callback_create_dyn_gif_url:{tokens:[["text","/callback/game/dyn-gif"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_animation_type:{tokens:[["text","/callback/settings/user/email/animationType"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_board_color:{tokens:[["text","/callback/settings/user/email/boardColor"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_coordinates:{tokens:[["text","/callback/settings/user/email/coordinates"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_callback_dark_mode_toggle:{tokens:[["text","/callback/settings/user/darkModeToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_show_legal_moves_toggle:{tokens:[["text","/callback/settings/user/email/showLegalMovesToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_highlight_last_move_toggle:{tokens:[["text","/callback/settings/user/email/highlightLastMoveToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_is_white_on_bottom_toggle:{tokens:[["text","/callback/settings/user/email/isWhiteOnBottom"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_move_list_display_type:{tokens:[["text","/callback/settings/user/email/moveListDisplayType"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_move_method:{tokens:[["text","/callback/settings/user/email/moveMethod"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_piece:{tokens:[["text","/callback/settings/user/email/pieceStyle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_sound_toggle:{tokens:[["text","/callback/settings/user/email/soundToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_show_timestamps:{tokens:[["text","/callback/settings/user/email/showTimestamps"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_sound_theme:{tokens:[["text","/callback/settings/user/email/soundTheme"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_get_board_settings:{tokens:[["text","/callback/board-settings"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_themes_data_callback:{tokens:[["text","/callback/themes/data"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_article_callback_list_authors:{tokens:[["text","/callback/articles/authors"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_callback_lock_coments:{tokens:[["variable","/","[^/]++","id"],["text","/callback/articles/lock-comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_blog_callback_lock_coments:{tokens:[["variable","/","[^/]++","id"],["text","/callback/blog/lock-comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_news_callback_lock_coments:{tokens:[["variable","/","[^/]++","id"],["text","/callback/news/lock-comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_video_callback_lock_coments:{tokens:[["variable","/","[^/]++","id"],["text","/callback/video/lock-comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_article:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/article"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_blog:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/blog"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_lesson_course:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/lesson_course"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_news:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/news"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_chess_video:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/chess_video"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_content_language:{tokens:[["text","/callback/user/content-language/set"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_article_view:{tokens:[["variable","/","[^/]++","url"],["text","/article/view"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_view:{tokens:[["variable","/","[^/]++","url"],["text","/article/view"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_security_login_and_go:{tokens:[["text","/login_and_go"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_security_login_and_go:{tokens:[["text","/login_and_go"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_survey_callback_vote:{tokens:[["variable","/","\\d+","optionId"],["text","/vote"],["variable","/","\\d+","id"],["text","/callback/survey"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",optionId:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_team_match_view:{tokens:[["variable","/","\\d+","match"],["text","/club/matches"]],defaults:{subdomain:"www"},requirements:{match:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_team_match_view:{tokens:[["variable","/","\\d+","match"],["text","/club/matches"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{match:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tournament_view:{tokens:[["variable","/","[^/]++","url"],["text","/tournament"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tournament_view:{tokens:[["variable","/","[^/]++","url"],["text","/tournament"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_view:{tokens:[["variable","/","[^/]++","username"],["text","/member"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_view:{tokens:[["variable","/","[^/]++","username"],["text","/member"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_2fa_login:{tokens:[["text","/2fa"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_2fa_login:{tokens:[["text","/2fa"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_report_user:{tokens:[["text","/callback/report-user"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tv_callback_report:{tokens:[["variable","/","[^/]++","video"],["variable","/","[^/]++","reason"],["text","/chess-tv/callback/report"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_popup:{tokens:[["variable","/","[^/]++","username"],["text","/callback/user/popup"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_about:{tokens:[["text","/about"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_membership:{tokens:[["text","/membership"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_membership:{tokens:[["text","/membership"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_username_search:{tokens:[["variable","/","[^/]++","username"],["text","/callback/user/search"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_league_division:{tokens:[["variable","/","[\\w]{6,}","division"],["variable","/","\\w+","league"],["text","/leagues"]],defaults:{subdomain:"www"},requirements:{league:"\\w+",division:"[\\w]{6,}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_league_division:{tokens:[["variable","/","[\\w]{6,}","division"],["variable","/","\\w+","league"],["text","/leagues"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{league:"\\w+",division:"[\\w]{6,}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats:{tokens:[["variable","/","[^/]++","username"],["text","/stats"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats:{tokens:[["variable","/","[^/]++","username"],["text","/stats"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tinymce_get_chessdiagram:{tokens:[["text","/tinymce/api/get_diagram"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|admin",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|admin","subdomain"]],methods:[],schemes:["https"]},web_analysis_game_callback_view:{tokens:[["variable","/","[^/]++","uuid"],["text","/callback/analysis"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_content_gifs:{tokens:[["text","/gifs"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_content_gifs:{tokens:[["text","/gifs"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_game_callback_shared:{tokens:[["variable","/","facebook|twitter","type"],["text","/callback/game/shared"]],defaults:{subdomain:"www"},requirements:{type:"facebook|twitter",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tv_callback_set_watched:{tokens:[["variable","/","[^/]++","url"],["text","/chess-tv/callback/set-watched"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_video_callback_set_watched:{tokens:[["variable","/","[^/]++","video"],["text","/video/callback/setWatched"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_play_app_view:{tokens:[["variable","/","ios|iphone|android|huawei","type"],["text","/play/apps"]],defaults:{subdomain:"www"},requirements:{type:"ios|iphone|android|huawei",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_play_app_view:{tokens:[["variable","/","ios|iphone|android|huawei","type"],["text","/play/apps"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{type:"ios|iphone|android|huawei",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_index:{tokens:[["text","/"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_index:{tokens:[["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_security_register:{tokens:[["text","/register"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},i18n_web_security_register:{tokens:[["text","/register"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_friend_accept_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/accept"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["PUT"],schemes:["https"]},web_friend_cancel_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/cancel/request"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_friend_callback_friends_search:{tokens:[["text","/search"],["variable","/","[^/]++","user"],["text","/callback/friends"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_custom_criteria_search:{tokens:[["text","/callback/user/custom-criteria-search"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_friend_decline_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/decline/request"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_friend_registration_invite_link_callback:{tokens:[["text","/callback/friend/registration-invite-link"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]}}),function(){var w6={2117:function(ct,Xt,we){"use strict";we.d(Xt,{$:function(){return zt},A:function(){return Rn},B:function(){return Rr},C:function(){return $i},D:function(){return qs},E:function(){return Ni},F:function(){return Xu},G:function(){return Ct},H:function(){return md},I:function(){return ya},J:function(){return ba},K:function(){return yt},L:function(){return Vc},M:function(){return Ym},N:function(){return Ty},O:function(){return Oy},P:function(){return No},Q:function(){return xy},R:function(){return so},S:function(){return My},T:function(){return Ze},U:function(){return ts},V:function(){return dm},W:function(){return Y8},X:function(){return K8},Y:function(){return Zi},Z:function(){return k},_:function(){return jn},a:function(){return Sr},a$:function(){return up},a0:function(){return Wn},a1:function(){return W8},a2:function(){return zf},a3:function(){return da},a4:function(){return zo},a5:function(){return Gc},a6:function(){return ga},a7:function(){return Su},a8:function(){return fo},a9:function(){return Cl},aA:function(){return kr},aB:function(){return Eu},aC:function(){return Qm},aD:function(){return A0},aE:function(){return Al},aF:function(){return Jm},aG:function(){return i2},aH:function(){return ku},aI:function(){return jr},aJ:function(){return Xf},aK:function(){return Dc},aL:function(){return zc},aM:function(){return yl},aN:function(){return Jf},aO:function(){return jc},aP:function(){return Ba},aQ:function(){return wa},aR:function(){return Iu},aS:function(){return Y2},aT:function(){return f2},aU:function(){return xu},aV:function(){return gm},aW:function(){return e2},aX:function(){return gt},aY:function(){return lp},aZ:function(){return p3},a_:function(){return m3},aa:function(){return Qa},ab:function(){return Xm},ac:function(){return u0},ad:function(){return vm},ae:function(){return ca},af:function(){return n2},ag:function(){return fm},ah:function(){return os},ai:function(){return ro},aj:function(){return wo},ak:function(){return ko},al:function(){return r2},am:function(){return Ko},an:function(){return as},ao:function(){return Rs},ap:function(){return ns},aq:function(){return $y},ar:function(){return mm},as:function(){return u2},at:function(){return r0},au:function(){return c2},av:function(){return s2},aw:function(){return l2},ax:function(){return cm},ay:function(){return Yo},az:function(){return no},b:function(){return Pr},b3:function(){return Io},b6:function(){return $8},b7:function(){return nl},b8:function(){return Ar},b9:function(){return ue},bA:function(){return Ef},bB:function(){return Cp},bC:function(){return nb},bD:function(){return w},bR:function(){return j0},bS:function(){return ji},bX:function(){return T_},ba:function(){return Vo},bh:function(){return fu},bq:function(){return Dd},br:function(){return Hg},bs:function(){return Ug},bu:function(){return It},bv:function(){return sf},bx:function(){return _p},bz:function(){return hc},c:function(){return Ac},c3:function(){return ih},c6:function(){return _d},c7:function(){return gd},c8:function(){return R0},c9:function(){return wh},cA:function(){return be},cB:function(){return gr},cC:function(){return rn},cD:function(){return Yp},cb:function(){return Gt},cc:function(){return On},cd:function(){return pe},ce:function(){return xe},cf:function(){return aa},ch:function(){return sa},cm:function(){return Hr},cn:function(){return wd},co:function(){return Fr},cp:function(){return An},cq:function(){return Qr},cr:function(){return Er},cs:function(){return X8},ct:function(){return Z8},cu:function(){return S},cv:function(){return Nt},cw:function(){return gh},cx:function(){return Sn},cy:function(){return Qe},cz:function(){return or},d:function(){return hn},e:function(){return Yn},f:function(){return q8},g:function(){return he},h:function(){return Cr},i:function(){return Ws},j:function(){return zn},k:function(){return nn},l:function(){return As},m:function(){return Gn},n:function(){return Yl},o:function(){return vd},p:function(){return Py},q:function(){return Cy},r:function(){return f3},s:function(){return Ue},t:function(){return h3},u:function(){return vi},v:function(){return Oe},w:function(){return x},x:function(){return Qh},y:function(){return qp},z:function(){return Cs}});var P=we(5653),se=Object.defineProperty,H=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Fe=(t,r,i)=>r in t?se(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Ee=(t,r)=>{for(var i in r||(r={}))tt.call(r,i)&&Fe(t,i,r[i]);if(Ye)for(var i of Ye(r))je.call(r,i)&&Fe(t,i,r[i]);return t},ze=(t,r)=>H(t,ae(r)),Me=(t,r)=>{var i={};for(var o in t)tt.call(t,o)&&r.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&Ye)for(var o of Ye(t))r.indexOf(o)<0&&je.call(t,o)&&(i[o]=t[o]);return i},Ae;(function(t){t.DefaultRightClickModifierKey="a",function(r){r.Name="accessibility"}(t.Plugin||(t.Plugin={}))})(Ae||(Ae={}));var x;(function(t){(function(r){r.Event="Event",r.State="State"})(t.LogCodes||(t.LogCodes={})),function(r){r.DraggingPiece="draggingPiece",r.HideHoverSquare="hideHoverSquare",r.MachineState="machineState",r.PromotionMove="promotionMove",r.SoundPlayed="soundPlayed",r.SelectedPiece="selectedPiece"}(t.State||(t.State={})),function(r){r.AddMove="AddMove",r.BlinkHighlight="BlinkHighlight",r.ClearMarkings="ClearMarkings",r.CreateContinuation="CreateContinuation",r.CreateGame="CreateGame",r.DeletePosition="DeletePosition",r.DrawAgreed="DrawAgreed",r.DrawClaimed="DrawClaimed",r.GameResigned="GameResigned",r.IllegalMove="IllegalMove",r.LineCommentUpdated="LineCommentUpdated",r.LineUpdated="LineUpdated",r.Load="Load",r.Mark="Mark",r.Move="Move",r.MoveBackward="MoveBackward",r.MoveForward="MoveForward",r.MoveVariation="MoveVariation",r.NodeUpdated="NodeUpdated",r.OutOfTime="OutOfTime",r.PromoteVariation="PromoteVariation",r.Reload="Reload",r.ResetGame="ResetGame",r.ResetToMainLine="ResetToMainLine",r.SelectLineEnd="SelectLineEnd",r.SelectNode="SelectNode",r.SelectLineStart="SelectLineStart",r.SetBoardPosition="SetBoardPosition",r.SetPlayingAs="SetPlayingAs",r.TurnSet="TurnSet",r.Undo="Undo",r.Unmark="Unmark",r.UpdatePGNHeaders="UpdatePGNHeaders"}(t.APIEvents||(t.APIEvents={})),function(r){r.PromotionAreaClosePointerdown="PromotionAreaClosePointerdown",r.PromotionPiecePointerdown="PromotionPiecePointerdown"}(t.BoardEvents||(t.BoardEvents={})),function(r){r.Create="Create",r.Destroy="Destroy",r.ModeChanged="ModeChanged",r.RendererSet="RendererSet",r.RendererSetFailed="RendererSetFailed",r.WebGLAssetsInitialized="WebGLAssetsInitialized",r.StylesSetFailed="StylesSetFailed"}(t.InstanceEvents||(t.InstanceEvents={})),function(r){r.Update="UpdateOptions",r.UpdateMode="UpdateModeOptions"}(t.OptionsEvents||(t.OptionsEvents={})),function(r){r.Play="PlaySound"}(t.SoundEvents||(t.SoundEvents={})),function(r){r.Resize="Resize"}(t.UIEvents||(t.UIEvents={})),function(r){r.MousedownLeft="MousedownLeft",r.MousedownRight="MousedownRight",r.PointerdownLeft="PointerdownLeft",r.PointerdownRight="PointerdownRight",r.Pointermove="Pointermove",r.Pointerup="Pointerup",r.Wheel="Wheel"}(t.UserEvents||(t.UserEvents={}))})(x||(x={}));function Je(t){return function(i){return t===i.type}}function Vt(t=Ae.DefaultRightClickModifierKey){return{beforeState:[{condition:Je(x.UserEvents.PointerdownLeft),handler:r}],name:Ae.Plugin.Name,requires:["keys"]};function r(i,o){const{api:s,queue:l,run:c}=o;return s.keys.isPressed(t)?(l.add(c,ze(Ee({},i),{type:x.UserEvents.PointerdownRight})),!1):!0}}var Zn;(function(t){(function(r){r.Name="analysis-overlay"})(t.Plugin||(t.Plugin={}))})(Zn||(Zn={}));function Ht(t){const r=new Set(Array.isArray(t)?t:Object.values(t));return function(o){return r.has(o.type)}}function an(){let t;return{destroy:r,match:[{condition:Ht([x.APIEvents.Load,x.OptionsEvents.Update,x.InstanceEvents.ModeChanged,x.InstanceEvents.RendererSet]),handler:i}],name:Zn.Plugin.Name};function r(){t?.removeAnalysisOverlay()}function i(o,s){const{options:l,renderer:c}=s;!t&&c&&(t=c),l.overlayInAnalysisMode?t?.addAnalysisOverlay():t?.removeAnalysisOverlay()}}var ie;(function(t){(function(r){r.Name="cheatDetection"})(t.Plugin||(t.Plugin={})),function(r){r.CheatDetectionError="CheatDetectionError"}(t.Events||(t.Events={}))})(ie||(ie={}));var Ot;(function(t){(function(r){r.Milliseconds="Milliseconds",r.Deciseconds="Deciseconds",r.Seconds="Seconds"})(t.Units||(t.Units={}))})(Ot||(Ot={}));var kt;(function(t){(function(r){r.Name="highlights"})(t.Plugin||(t.Plugin={}))})(kt||(kt={}));const gr="highlight";var Ar;(function(t){(function(r){r.Name="arrowKeys"})(t.Plugin||(t.Plugin={})),function(r){r.Left="arrowleft",r.Up="arrowup",r.Right="arrowright",r.Down="arrowdown"}(t.Arrow||(t.Arrow={}))})(Ar||(Ar={}));var fi;(function(t){(function(r){r.Name="arrows"})(t.Plugin||(t.Plugin={}))})(fi||(fi={}));const at="arrow";var Jt;(function(t){(function(r){r.Name="assets"})(t.Plugin||(t.Plugin={}))})(Jt||(Jt={}));var Et;(function(t){(function(r){r.Name="blinking-highlight"})(t.Plugin||(t.Plugin={}))})(Et||(Et={}));var ot;(function(t){(function(r){r.Name="blinking-highlight"})(t.Plugin||(t.Plugin={}))})(ot||(ot={}));var ft;(function(t){(function(r){r.Name="board-size"})(t.Plugin||(t.Plugin={}))})(ft||(ft={}));var Ve;(function(t){t.DefaultKeyToOpenWindow="e",function(r){r.Name="boardImages"}(t.Plugin||(t.Plugin={}))})(Ve||(Ve={}));var Tn;(function(t){(function(r){r.Name="bughouse-api"})(t.Plugin||(t.Plugin={}))})(Tn||(Tn={}));var Wt;(function(t){(function(r){r.Name="bughouse-sibling-board"})(t.Plugin||(t.Plugin={}))})(Wt||(Wt={}));var Mn;(function(t){(function(r){r.Name="clocks"})(t.Plugin||(t.Plugin={})),function(r){r.Blitz="blitz",r.Bullet="bullet",r.Rapid="rapid"}(t.TimeControlTypes||(t.TimeControlTypes={}))})(Mn||(Mn={}));var pr;(function(t){(function(r){r.Name="coordinates"})(t.Plugin||(t.Plugin={}))})(pr||(pr={}));var qr;(function(t){(function(r){r.Name="custom-items"})(t.Plugin||(t.Plugin={})),function(r){r.Root="custom-item"}(t.Classes||(t.Classes={}))})(qr||(qr={}));const Cn="customItem";var jn;(function(t){(function(r){r.Arrows="arrows",r.Effects="effects",r.Pieces="pieces"})(t.Targets||(t.Targets={})),function(r){r.Above="above",r.Below="below"}(t.Positions||(t.Positions={}))})(jn||(jn={}));var Ft;(function(t){t.Image="Image",t.Star="Star",t.TextBox="TextBox"})(Ft||(Ft={}));var At;(function(t){(function(r){r.Name="debug"})(t.Plugin||(t.Plugin={}))})(At||(At={}));var qt;(function(t){t.Name="eco",function(r){r.Update="UpdateECO"}(t.Events||(t.Events={})),function(r){(function(i){i.StartingPosition="A00"})(r.Codes||(r.Codes={})),r.InitialFen="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"}(t.Config||(t.Config={}))})(qt||(qt={}));var Xn;(function(t){(function(r){r.Name="effects"})(t.Plugin||(t.Plugin={}))})(Xn||(Xn={}));const Sn="effect";var pe;(function(t){t.Alternative="Alternative",t.BestMove="BestMove",t.Blunder="Blunder",t.Book="Book",t.Brilliant="Brilliant",t.CheckmateBlack="CheckmateBlack",t.CheckmateWhite="CheckmateWhite",t.Correct="Correct",t.Critical="Critical",t.DrawBlack="DrawBlack",t.DrawWhite="DrawWhite",t.Excellent="Excellent",t.FastWin="FastWin",t.Forced="Forced",t.FreePiece="FreePiece",t.Gamechanger="Gamechanger",t.Good="Good",t.GreatFind="GreatFind",t.Inaccuracy="Inaccuracy",t.Incorrect="Incorrect",t.Mate="Mate",t.Miss="Miss",t.MissedWin="MissedWin",t.Mistake="Mistake",t.ResignBlack="ResignBlack",t.ResignWhite="ResignWhite",t.Sharp="Sharp",t.Takeback="Takeback",t.Threat="Threat",t.TimeoutBlack="TimeoutBlack",t.TimeoutWhite="TimeoutWhite",t.Undo="Undo",t.Winner="Winner",t.WinnerWhite="WinnerWhite",t.Interesting="Interesting",t.Warning="Warning",t.Equal="Equal"})(pe||(pe={}));var C;(function(t){(function(r){r.Name="fade-setup"})(t.Plugin||(t.Plugin={}))})(C||(C={}));var fe;(function(t){(function(r){r.Name="handPieces"})(t.Plugin||(t.Plugin={})),function(r){r.SetHand="SetHand"}(t.Events||(t.Events={}))})(fe||(fe={}));var Z;(function(t){(function(r){r.Name="hml"})(t.Plugin||(t.Plugin={}))})(Z||(Z={}));var Xe;(function(t){(function(r){r.Name="hover-square"})(t.Plugin||(t.Plugin={}))})(Xe||(Xe={}));var De;(function(t){(function(r){r.Name="move-hints"})(t.Plugin||(t.Plugin={}))})(De||(De={}));var ke;(function(t){(function(r){r.Name="performanceMetrics"})(t.Plugin||(t.Plugin={}))})(ke||(ke={}));var $n;(function(t){(function(r){r.Name="pieces"})(t.Plugin||(t.Plugin={}))})($n||($n={}));var j;(function(t){(function(r){r.Name="pregame"})(t.Plugin||(t.Plugin={}))})(j||(j={}));var Se;(function(t){(function(r){r.Premove="Premove"})(t.Events||(t.Events={})),function(r){r.Name="premoves"}(t.Plugin||(t.Plugin={}))})(Se||(Se={}));var Le;(function(t){(function(r){r.Name="reporting"})(t.Plugin||(t.Plugin={}))})(Le||(Le={}));var Ge;(function(t){(function(r){r.Name="scroll-through-moves"})(t.Plugin||(t.Plugin={}))})(Ge||(Ge={}));var ue;(function(t){(function(r){r.Name="sounds"})(t.Plugin||(t.Plugin={})),function(r){r.GameStart="game-start",r.GameEnd="game-end",r.Capture="capture",r.Castle="castle",r.Premove="premove",r.MoveSelf="move-self",r.MoveCheck="move-check",r.MoveOpponent="move-opponent",r.Promote="promote",r.Notify="notify",r.TenSeconds="tenseconds",r.Illegal="illegal"}(t.BoardSounds||(t.BoardSounds={}))})(ue||(ue={}));var st;(function(t){(function(r){r.Updated="ThreatsUpdated"})(t.Events||(t.Events={})),function(r){r.Name="threats"}(t.Plugin||(t.Plugin={}))})(st||(st={}));var Bt;(function(t){(function(r){r.Name="timeControl"})(t.Plugin||(t.Plugin={})),function(r){r.Blitz="blitz",r.Bullet="bullet",r.Rapid="rapid"}(t.Types||(t.Types={})),function(r){r.Null="-",r.Separator="+",r.TimePerMove="/",r.Unset="?"}(t.Header||(t.Header={}))})(Bt||(Bt={}));var Qn;(function(t){(function(r){r.Reset="Reset",r.Start="Start",r.Stop="Stop",r.Tick="Tick"})(t.Actions||(t.Actions={})),function(r){r.End="End",r.Reset="Reset",r.Start="Start",r.Stop="Stop",r.Tick="Tick",r.TimeAdded="TimeAdded"}(t.Events||(t.Events={})),function(r){r.Ended="Ended",r.Going="Going",r.Initial="Initial",r.Stopped="Stopped"}(t.States||(t.States={}))})(Qn||(Qn={}));var qn;(function(t){(function(i){i.Name="validate"})(t.Plugin||(t.Plugin={}));let r;(function(i){i.InvalidPosition="InvalidPosition"})(r=t.ErrorCodes||(t.ErrorCodes={})),t.ErrorMessages={[r.InvalidPosition]:"Board position does not match the FEN from JCE"}})(qn||(qn={}));var ai;(function(t){(function(r){r.Ready="Ready",r.Updated="Updated"})(t.Events||(t.Events={})),function(r){r.Name="vml"}(t.Plugin||(t.Plugin={}))})(ai||(ai={}));var It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get CheatDetection(){return ie},get CustomTimestamps(){return Ot},get Highlights(){return kt},get AnalysisOverlay(){return Zn},get ArrowKeys(){return Ar},get Arrows(){return fi},get Assets(){return Jt},get BlinkingHighlight(){return Et},get BlinkingSquare(){return ot},get BoardSize(){return ft},get BoardImages(){return Ve},get BughouseAPI(){return Tn},get BughouseSiblingBoard(){return Wt},get Clocks(){return Mn},get Coordinates(){return pr},get CustomItems(){return qr},get Debug(){return At},get ECO(){return qt},get Effects(){return Xn},get FadeSetup(){return C},get HandPieces(){return fe},get HML(){return Z},get HoverSquare(){return Xe},get MoveHints(){return De},get PerformanceMetrics(){return ke},get Pieces(){return $n},get Pregame(){return j},get Premoves(){return Se},get Reporting(){return Le},get ScrollThroughMoves(){return Ge},get Sounds(){return ue},get Threats(){return st},get TimeControl(){return Bt},get Timer(){return Qn},get Validate(){return qn},get VML(){return ai}});function Qi(t){let r;return{api:()=>({setKeys:s,resetKeys:l}),create:i,destroy:o,name:Ar.Plugin.Name};function i(f){r=f,s(t)}function o(){r.api.keys.removeOverrides([{key:Ar.Arrow.Up},{key:Ar.Arrow.Down},{key:Ar.Arrow.Left},{key:Ar.Arrow.Right}])}function s(f){const p=c(f);r.api.keys.setOverrides(p)}function l(){const f=c();r.api.keys.setOverrides(f)}function c(f={}){return[{key:Ar.Arrow.Up,callback:p=>{var m;return(m=f[Ar.Arrow.Up])!=null?m:p.selectLineStart}},{key:Ar.Arrow.Down,callback:p=>{var m;return(m=f[Ar.Arrow.Down])!=null?m:p.selectLineEnd}},{key:Ar.Arrow.Left,callback:p=>{var m;return(m=f[Ar.Arrow.Left])!=null?m:p.moveBackward}},{key:Ar.Arrow.Right,callback:p=>{var m;return(m=f[Ar.Arrow.Right])!=null?m:p.moveForward}}]}}var $r;(function(t){t.Alt="alt",t.Ctrl="ctrl",t.None="none",t.Shift="shift"})($r||($r={}));function lo({options:t,rawArrow:r}){var i,o;const{data:{color:s,keyPressed:l,from:c,opacity:f,to:p},key:m,type:v}=r;return{data:{color:(o=(i=ss(l,t))!=null?i:s)!=null?o:t.arrowColors.default,from:c,opacity:f??t.analysisHighlightOpacity,to:p},key:m,type:v}}function ss(t,r){const{arrowColors:i}=r;switch(t){case $r.Alt:return i.alt;case $r.Ctrl:return i.ctrl;case $r.Shift:return i.shift;case $r.None:return i.default;default:return}}function si(t){return function(i){var o,s;return Je(x.APIEvents.Mark)(i)&&((s=(o=i.data).find)==null?void 0:s.call(o,l=>l.type===t))}}function en(t){return function(i){return i.type===t}}function on(t){return function(i){var o,s;return Je(x.APIEvents.Unmark)(i)&&((s=(o=i.data).find)==null?void 0:s.call(o,l=>l.type===t))}}function Kr(t){const{api:r,options:i,renderer:o}=t;if(!r.markings)return;const s=r.markings,c=(i.allowMarkings?s.getAllWhere({types:[at]}):[]).map(f=>lo({rawArrow:f,options:i}));o?.addArrows(c,t)}function wr(){return[{condition:si(at),handler:r},{condition:on(at),handler:i},{condition:Je(x.InstanceEvents.RendererSet),handler:t}];function t(o,s){Kr(s)}function r(o,s){const{options:l,renderer:c}=s,{data:f}=o,p=f.filter(en(at)).map(m=>lo({rawArrow:m,options:l}));c?.addArrows(p,s)}function i(o,s){const{options:l,renderer:c}=s,{data:f}=o,p=f.filter(en(at)).map(m=>lo({rawArrow:m,options:l}));c?.removeArrows(p,s)}}function Ji(){return{match:wr(),name:fi.Plugin.Name,create:Kr,destroy:t};function t(r){const{api:i,renderer:o,options:s}=r;if(!i.markings)return;const f=i.markings.getAllWhere({types:[at]}).map(p=>lo({rawArrow:p,options:s}));o?.removeArrows(f,r)}}var Rr;(function(t){class r extends Error{}t.StylesSetFailed=r,function(i){(function(o){o.Arcade="arcade",o.Default="default",o.Fast="fast",o.Natural="natural",o.None="none",o.Slow="slow"})(i.Types||(i.Types={})),function(o){o[o.Default=180]="Default",o[o.Fast=100]="Fast",o[o.Slow=500]="Slow"}(i.Speeds||(i.Speeds={}))}(t.Animation||(t.Animation={})),function(i){i.Selected="#ffff00",i.Blue="#52b0dc",i.Green="#acce59",i.Orange="#ffaa00",i.Red="#eb6150"}(t.HighlightColors||(t.HighlightColors={})),function(i){i.Analysis="analysis",i.Move="move",i.Selected="selected"}(t.HighlightTypes||(t.HighlightTypes={})),function(i){i.Blue="rgba(72, 193, 249, 0.8)",i.Green="rgba(159, 207, 63, 0.8)",i.Orange="rgba(255, 170, 0, 0.8)",i.Red="rgba(248, 85, 63, 0.8)"}(t.HighlightedArrowColors||(t.HighlightedArrowColors={})),function(i){i.Inside="inside",i.Off="off",i.Outside="outside"}(t.CoordinatesPositions||(t.CoordinatesPositions={})),function(i){i.Click="click",i.Drag="drag",i.DragOnly="drag-only"}(t.MoveMethods||(t.MoveMethods={})),function(i){i.Figurine="figurine",i.Text="text"}(t.MoveListDisplayTypes||(t.MoveListDisplayTypes={})),function(i){i.HoverSquareOutline="hoverSquareOutline"}(t.BooleanOptions||(t.BooleanOptions={})),function(i){i.AnimationType="animationType",i.BoardStyle="boardStyle",i.Coordinates="coordinates",i.DarkMode="darkMode",i.EvaluationBarType="evaluationBarType",i.HighlightLegalMoves="highlightLegalMoves",i.HighlightMoves="highlightMoves",i.MoveListDisplayType="moveListDisplayType",i.PieceStyle="pieceStyle",i.SoundTheme="soundTheme",i.PlaySounds="playSounds"}(t.SaveableOptions||(t.SaveableOptions={}))})(Rr||(Rr={}));function vi(t,r){return{data:r||{},type:t}}function Ua(){return"https://www.chess.com"}function da(t,r=150){return`${Ua()}/chess-themes/pieces/${t}/${r}`}var zo={wp:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA8UExURUxpcUFBQUNDQ0REREREREVFRUVFRUVFRf////j4+O/v7+Li4tPT08TExK+vr5SUlICAgGtra1VVVUZGRh1ZfCsAAAAIdFJOUwAgPF19qsrhYMPqTAAAA+1JREFUeNrtm9vSqyAMhSv1FAmKrPd/132BWs+2u0g6/7Bu25l+k4QQFvTxSEpKSkpKSkpKSkpKSkpKSkpKSvpVZUoplf0UkspLDCpz9SNhyissVOU/QJVjq+opnT4fKWdbo7XWprVDLkWr7AkA6A3VNQ1q2h4AoIQT6Ez9giIiotYBwFOUqqM1FVHTC3IpAGjrLRVR04nlMasOqYh0B6CSqPvihIqILYBCZhHaQyrS3IuksQTQHFIRcSsRLjWk8IiKNFsAWfzKcs05lgEQe3sE0J1RUcPcA1X8HPIpFjF30bOYA6BTKmI20Vt9AfTnwSLN7GIXVwnYcypi5j52iyiB7i2sMipW9RaWFcE6pWokolUC9hxLS9RWAfTXWNFXYg7gMofx+5YCYK6CFb/LPwB0F8ES2BP9BHHaHUQmCAWgPU0hW4nxtAScPqMyIsP8E4A9ziALzfKP8iCNjacSOvk8MuxyaU8ldk70vki7C8WdoDsyeBCv9I1QLOlB+OP+VPeNntRDLIWjD2h3mqqPFiTMSlUO5tZu4+qcjCfoQ9U19cGWaCQCNoXq2Bnh+AEbQkXHR7KGOXbA/AJ0XNdnhg0zcxszYM8pVCdYvoUZG6+tKgCmrqmuqT4fbYZ2Hw+L6UJjv2+jDc7Z1Rz/GiN8tOKdXe0F1nx3jHWCLQDo96jaiB1C4SJcExX3Mc9kxeKazvBK7eLjeCOqWvzumorN4uOIu888XG6DxXOqmJt1lg8qgX6L5YBy/IbIMFgBVm+weplDz8qK2HDZ+ObDnnGz5hKwajaDl6YNVyt5J+xP1v2qgY41L1hc2eucqNfFBdkcMu1wyWaxGnO44XKxre/V9NzSLpcVfKBRAW5/cGADsXDlANr6gMtKVVeGVbDmszIbJ2SOlAA2DkSz6PSFTAp3rhSbxWCaS6xC1+w9r1kMg5FXo8LhHXqzmJ2jcqnq5HVGM1+NMbkUhmcQNf0Q13Oiqi/O1DGt3fyKatZYbaxTRla+qGp6j+t+h8sbgeaK6pXIDvcn0ofK6WuqF5i3BIvs5lqfjMArrBHMe6iVujWBbkjgG1TTfUt350PU3F9afEI1kpn7OsVzemb6CdR4HXRXZ1WzFfghlX9RfI97U81iRf+j7o45On/10P+jIrLhG34GoKdvoIgaFzyNxTBefUHlyysPHSz7LRVRH9gDyMdgfUVFoZ8oVf7h5JdURGE9gMsHzJ80iSxoDpsAVKSDZrEE+hBUREH9OFw/53y/pVYh24MJQkUhrxefAHQYLBNwjrh8NilT8zng6kBcAfefYm6Rfr8U/z6W6wIpLFZI/XWsKqh+4a+xSUlJSUlJSX9R/wAgFdSXQxyROwAAAABJRU5ErkJggg==",wn:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABCUExURUxpcUVFRfj4+EZGRkRERENDQ0VFRUVFRUREREFBQdPT0////5OTk+7u7uHh4V1dXU9PT6SkpG5ubre3t8jIyIKCgji/HX0AAAAKdFJOUwC1//+RRfHebR4QloLCAAAF2ElEQVR42u2c3bacIAyFK/6gKIio7/+qFVBHHcWMhBnbZS66zkV75jvZmxACp3/+PPHEE0888cQTTzxRpHl6P6goHiK/GVWaxfH9uIqR6mZcWsFetDfjSjVVWZY340riWPIBi9yLK7LJKsm9uAbDNxbrTlzaWl15O658AOET1n24BsfX5YxluZI8LX6MRUfHj1iWa4iMJnnxUw3bJdbMpYMm6c8MX5Ml1cBVywVZ9gOygs7r8IU1hOiaXs1wNP8BVfVOZYKLrprQsuSLNjMNjSIHWIaMNSNZlnzTV04qC9ZVtQXLv7YG4564oKzPGGssWFR8iaoqT6lMxkaw8AkzCjYQKg3GGKvkNxJGZyoCiSFhnTLFoggtYQWnsglrdMKykNU1ey/uAK62DttgvHZCAg82CZkHdFa9puqalgO4WB+Qq4hfjbL9QK2ObCBcleYK469k6kinVI1b34+5Bg3VgopPvYLkAN8brqwIU0rbBVY/N1cdoH5Zf9EwB1bywhKvno8REJdej0mIotUvklXNVApWvlhXB7DXfDIcP6meqThsGxrqagB7bTRkseyrXqm+A1dVa/skqIZNQz4Kky5jrxR741lqyMmHwSYZadiNh1xJV4+brnxTtD4PsxiZ3hkoarKWhr8SbHZ9irkdQlsaxl0qMsR0mcM9kEow4VIRM126hWcwquHDhVNF7a4ITcIKaCwtlRPLLMYCS0ICTtYh1miuFqdRNdcVQAltRtxYuqdFUDHa9sqnNdNZuazpC4xCqoBU9oPFCRaGilpCKYB1VICwMFSkH+w6bWc+lbvrvFmLmX9t6IFUXaxgWI2vuUxt4MBFONTJxuH4F1bnaa5iKu8QX+kuunZY64WlzZUg1AbIIrS9fePAmi2vm1TqWRsIrLqPJw7lsNYLS1eub9QGoyDV68NhrReWl+en2gClKsy5WwCwWo/mJh9rA6AySDuHNCMdflJsTXgsRWpvo3e/vVh+eDNNRwv3+GaBJS8vxeJoFW52GGFGfdE8PCHn9cGnQoz3q8cOMQnjZmA7foa2vABhqcu7or1fdUrBOzt2n8bI1Dkm4Qus3gdLlYenYz1+mIYj02VA7tZQrLHoZSx5NGmvl1et6aLM1Rykoa6n9Lq3xO7P3C8uWaN0tVO1MA01VnZ9JVZ7P7OlolGUrN6URScDOIGDZT6ne//mpkq9394nsVvClYY+WLoKya0q5vS5s3Hon0EyAtTQw1s2AXEv1slSe/uGeY4nOwLV0GMlTlzxYgzJjYTRbrfoplony6OcmtVoH9rVDVtI+DaUNXfqkhF4sjyxxseSmqwaOhZhRtj53j2xEuSDZHls1RNYMj9NlFLuSGgdyCEjN4Z1xjBgebQs6sVOOs+mzhsJvdrANRndp6J7VeRMQpwpxEiQ5sn2qbClOr3y2VL51QfYiKkW5EMJsUZJLqrzG583CVEc70v1LiGW448HAQCqdwn9Tq+AUySA6l1C7xp/1vZcpPKv8c7e9XwN7koY0FoFqF4dJCuctai7b3eswpDWMuMJck1CU7WSUBVL8osSmk4yiLUSoIS7yUKYMx/7HfD24SBZwTbEBPRQ5ChZbagNMfNKFmKv9XZ+vO4szymzc9tZLkP9Irfr2rYxUdmwX+o/27brvrLzZHo2IVjbVL1aPUY/Dlkr1VeNvhMKVR70OgTS7PDpoViA8lDk9DglJpRS9otDdPTHxItDo86ZEWZQRnA+vgjfBOfaea3Ve/W7B6hb4Qgl+6YTvPw0+OBHtZ0h4pRRPZAQpU+IccSZY1IpVvqHGWUglQkzAWlLlLAXHylSXZCbVBHw+yT9V1f/FOuZYPT6HRqPx1IG0USDImNhr8sIVpSlwqirufs650KgnPgjWDPzSWC0g5CH3h8GwjSpgDyo/jBa/+Niim4ta67C3/HIVOYJeeqNJbGxuD+WvorFxiL+FeK+WAodSz5YD5a95q+wA8XyQeL/xMppmLjb/zbzxBNPPPHEE0/84/EXqrqgdaE+G+kAAAAASUVORK5CYII=",wb:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABIUExURUxpcUJCQkREREVFRUREREREREVFRUVFRT8/P0RERPj4+EZGRtPT0////6CgoOHh4f39/bKysmRkZFFRUcXFxY+Pj+/v73p6esE377UAAAAKdFJOUwAoZMREiPDfEqnkaJEWAAAFq0lEQVR42u2b2ZajOgxFmzCaGMzM///pRTIhsoF0IBaw+qKHfqjK6ux1JB3LQ/35c8cdd9xxxx13OI3ES66GFITxc4hIPC4E5fnPKeLLgIVPI/zkQlR92TRlW6NgyVWo2i4rUoiyvgZXMGDUzQg1RFMNPxCnY0EHEqpUIZd3AbFyQpUqWV5ALjGkMM1SiiX7gevk6oqGcqdiARbIFZxrpFBZlAqw5NCN4emlpQwsqbHE+ViUqhuo2uflsIYc5rBmn1tbyYBQmjmEgj+54tFNezOH4KanTxGhmUV1gcJ6OURPxGouMkEImB/eYlUXKCyIx/PN1WEXiqtQVUqvPyhWdIEU4gzYp1n2Fiu8CFVbjGv1VcRCqjIbqbRYk2UF4sQmHCbT11wjTbHik2o/1FP8i6rDZSekvSDOopITVWpOpUn0PIXLplJo8MLa0ooz/OqdQRArJwYPa1JVH84V2FQKCz6m3YBT6qE25kXaGTIy0DSEIdEL+MFcSYy7Q1OsluxaobIkbLHrI4cvX3v7mwomeJrDAbvSW/8DB2jQokozusM3cxi8R2nwsmPWIzwM6UhhoVi0D2Gr3Y2/g9z6RxQWlLvMLLHASyO61Z5+2R9T9sIudxSLbllBzub920MGVvDRqqApRLEa0nJQex3Zox1QXpDCWhli4f4+J/ZgbdLSAyZpMfqoJRaUVry2peVPY/BKoSWWXVqSYqGrsu7SwEiVKRYWvFVatUGVKuYZH+q9zUyxMIf0pM23SgvIec9T49FIM+tACxfE5O1auYmV8p6nPl71Xlg5pBXvGa71UrRnlCvG81tTLMwhJEkQdpXaWWz45AoWxBqxSEnPK34a9D2uNpyJpUuLNqJ4DTXmpxquZvTGxTCbHeHajdjOsPRpPcsSFL48a46Vf27E6bT+wVPwfWbncPKHaG3pmfq1Zhm8vKWCH7Esf5CLWC3LnQuOKzOx0pc/+KRdVbpQ80xZ9BdzmC7ZVreIxXK5kSznUPsWueR5LNmWxqJztUsvVXOxNJY5P1QLWMoaFR2WVl18gSXWsRqG4hJjaRULPdaYm7F+BYvjQi+eT1oT1udp641Vua/5+Qxvtr73ae2ZD/wOG7FZEGtaV/6CZS8GDj1ermHRJTFeWhJHteBzPP6wKAR2fqJjBWu2orNjKfw6EsdjFQvf2H2B1UnJ4qcfsPQ2kES5UlrHqjV8aWmEPA5r7MR0Z0jJ04mjb+2k0qXF4Ft6ril2YukcMrg87hwcYLme5n376dH2HHIs1TBH7cUaxeIYbHAM/KkPjbHMqXH9JhbH0Ly8Ld0iFoM/jOPpT2LR3aTTmq9/aUOWHYbel8pfxMpZTriSlUnqWyoOjx8NtdqfQrZzt11ZnKiMmz3X1z397hQat7PujwP3UpVst9bec6N1ESrOx0pim1yUqmS89THfJ26h4n3ZJRYuTv7eg+O5Kd8VGbwWqbptfoWexXyhGH5Z9UYCJf+zT/+bNHYWFf/LXQ+fbW2SCv2d++UuPjhQX1cVeEN9xEMI6Mb1sp9BaaoDXiX5o16dUrJp4NAhH6LV0eO/8IOybJoXFf9jlsR74GvEun5+EfpTccD650hBKOLnzojFg4UtENGqJBWNelXIOHRNFviUA769b3OpVIe3xPPooPLytq/6vqKUvsuWnP5cs2pLqVZI1iNVTdlW438hnDlYoIu8bTYDGQI2vU6l55Cqzrvs5+had1z46q7/BFVY8eGjqnL1VhBsvS9shjT94vymSGek+JjLgb2+n2whzP4Y6brayaCKA/xvQCack31sEu09qVkNFzvGYMP4/mWUDs5Iwp3nR5/GRAeTjti+w/9rODjajZ2XFhbXr6N9tOtU63M4uDbYf5K7Hu1lsX50iMS9P+Aj5+jG2uCnP2J5/yOs3AlWnzuO3gkWR/ybWEnMFH/uuOOOO+644447nMd/5mwuGyzR1rsAAAAASUVORK5CYII=",wr:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA/UExURUxpcUFBQUNDQ0REREREREVFRUVFRUVFRf////j4+O/v7+Li4tPT08XFxbS0tKCgoI+Pj3p6emNjY1NTU0ZGRi8lq24AAAAIdFJOUwAiRmyXweDwOT8tswAABR1JREFUeNrtm2FzozYQht+VsO/aGZxk2v//C3vTnP3h7my0bz9gbIEhloTkuK02M5nYKPDw7mq1SAKoVq1atWrVqlWrVq1atWrVriZ5ziLnExHkU2BZEdmNvtmTdJ+Ntd3NfLk/PhZLREQAoBt89edwiP7Z/hraNwBAMtK3TURbY8xFmr/d9bY6VVIhAESMWAvImcK8XARU1QJYYm07o7IAOLnLN6RCPayrM3bAwTnmxRL7OvyphBgYD4tjAPU+mb597/gWeA8EC8OyTQsAdOoUwGaL3bfL+anjGCUvH2QHdEcA1lojAF4PncuHJS0A13XsL+9wcZNMYh0AOGQxyNBYtTPWGqB9zxtb/NVd3USBUQ9r3J+vXxiArv8kcM5sg3tXGBMgnRdBCk8PTrMM/aPqQesQiJmwphlOgZcrlmAJ6wXQpIwdrBaMh+Yu/9nO3D+B9nJy592VlFer/zx7IfpHnaQMKeFq+eeknv9Tzowju0Cb68Hlm8iIBR9rWa0pFnI78QDIJJO31hgjmCmwSECMMbadSCnAIevgM720A/C2ePsUvHoNfbWYM7ZuUqYSH3iFoyAcqZUX66YbaRiWJlabTZpa+PVR6+Nx/p7C1WqQZkw5mDtv3aqVVJsXiS1ZS5V9TLzNp4li5Vcrpuky1jOpJSikFg9r1LpiHTI7UTNgmZlqYyUWAZvqxfM1xAT7MEYtbJKnc/qnOuRXS/fARlaJZYF9biw4QLYpWtlhmJNrmXP/eTl4EDx9hZHoeSsZ7rtpgO9d/hmbDsBGjlwKn3NWGherZvD7xp5PkX20sm8A9NRdhehnu2QyWpLsZ7T0EiLWGm/yKfMgat8AQDsVIyIhUakESbEGcVRxI4ppdskpdd8pCmEBzWjuDSAx/AznO/+MT3xwXVxPie7vr713SFJJf/Z7Zpr1HHfvLnJaPLZoJgH80JvHwtsiceiS8gXxk/XRtbxMn7IGBlkoX0kpVp0uPIyNLq/K+KeRjGotO3hWMeIBan1YNFH5SVjtx16ZWRMgsCuNdbcep+bIQ9mxbrn4IKw7o8iU6xFYCMiNE66Uhc8EtRgLzoc4MeDm9TmxbtqUxtqFYenKxGVy54cZroSuaLLnh1svlscKrwi4qoQopdYUq7gTA++dXJMh4rE0ye3FYys0UnRNcJno5oznZ8p1MhaBy4BtSSxBqlqRwWUK5YcbfnkWta4ttTxW0m42lsWK6+xMzxDxaiViydNgjdqWxNqlzSjEF4KmWH7w1YpOXKZcflhTCEb3xGS18H9TK7ra8vN8Uaz0HcvPiMWnwuJDsNo1arWlsGKz6YquaIrmBz4K60FqNekR3y/oyGhLCM+/2W+S97ikGBYAPa9tSthOIKJf8oQyrrCJVMv8HplCk3adRrTtN0YuSLLM4tvBBb9gEIhl7Is/6zEsRy+9QCP9Sme/kO27+7vTfFiXdwuoTqmxKVWMGDus8YeteIZgyWYHAJ3r1rxaJI1tAGB/YhYs2bYATifFWjObDYDD8T5XwK6R7Q7Qn6cML2HROSv4EvA6xn21mlfA/Zx0ttA0RJl2068WeO9WY8kfgP5gwrPe/AApvxng2z3pTYiXj5x29KSYFxEBjyGhE4LlnOR5XxCAiHMZsEwbsesqzBzQmpVYErW/Kci6gCgNwFLmxaJmwcpMFfS88S/FQhksZAj5ArZWrbaMWu16J36GVaz/AFbAA5mVx0sRgmWrEwPz2rbQdY+oVq1atWrVqlXLbP8ALD7swRCgEUgAAAAASUVORK5CYII=",wq:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABOUExURUxpcUBAQENDQ0REREREREVFRUREREVFRUVFRUVFRf////j4+PHx8ejo6N7e3tPT08nJyby8vK+vr6CgoJGRkYKCgnBwcGBgYFFRUUZGRknouq0AAAAKdFJOUwAVMlVylLzf7PdB/fgsAAAHtUlEQVR42u1c27akKAxt71qAeBf+/0dngZaSQNVRwbN6ZsxL9+qiZJuE7Gyg+s+fxx577LHHHnvssceiACPCWpzlpZSyyNNPM0dpXkgpyzyLfwtUoiZcrcpcwKJsHyHz5Fdil0tgpT1rWsEh2f3RjBdXjX3bdsO8zIqGLK6ah67t+kn/vbgbV6xySnT09SLKmsnGpb051usI1v8Crkj5amKvdU5CiJ41NSOocLfGCK58mt8KS8VnJMachHUq8XdnxApVbY4gzYyQB3eWyhmAilDegzCqEDZgBKkbIWUZ3essDucknKv8igxnDWgE08hvdFcp5YTmJJy3xqQKOEUjaq7Sq7hvGUopWzQn5XrSd0oXUo5ohII1GA4NX97drlCTVnvyuYArhyY3ppZwzKlTJ9r8yR3A+Z3JlUk5u+ZUNSLeYDE4gqkRXPwqrGXODnirflnuvNdbqoC75oRBbF6WO3lzZ26plOf2nKpwvZd/JWXvGNFvYb6pyPewZmlXiL3M54oGcJA18PK+cppLKagVw8GIkHJohwfo+pDd2JcqasGw1JyFSQSCoRBqerqzeVZ9TQtDpPuDBCyLiYIga3fe2tmolbYHSddv3E2pFmKuTVijvLeBWJ0hJ757Q+DeU3eK8x7kTnfWQatD5O5tpJzbd+5MFgnHWwJSzvul3U9CichV6BV5gr6faFnTv+ftrEnTrbrRJYCyjA8++0dQ2a6pytQhAvttqQmHxJi3II+2HjOfXZ3SakkJdF6B3nZPe6YnrqIPNVd/Wnx9dnk86wyht0jBKvkAi9hRVDGst08HXN5T/OzDFL6utrcUtFZSZBQvpqOYu2NIaqND3Auy8ezp+CrV3+z2lp2p/KhiCKshIH2gIOt3WIqjcd3rDTkwoGd/V6hAUuEqHZuwmI5i6ozhqnkixBJApPTymPpI0fuod56Aq2Ozv6FAYeiJJwIxR1+eTerxWBgL3YKCb+rWJQewauPTEelEs4PoAEkXi/oF/W0jjhCmQ3RxJKhU8jFjaqwT8Wfxd0F3SKwpP8MXomvTmwJdZjoT6sTJfCMASyknYsE6JNYyLZwtGTEbtVwjd78vjCEhsInPrWfrlxYHesTcksX12sjlBiwBBuxRzKAjSY1hDRgWg6/8BdaANxl+gMX2LYZS7TOBVzKjX1jPfjch+QFYk0N0mW+UQRmxFrZ4zboWIjZ1q44EgsWPeUsLegsWSHkLFmtWCZFBCYJhZcjNi7OaI7xoaUH67sbNBTWhV16VIo4hoSCfLWfq5XRIQ0YVejRdlWABVgXK2+XR9rQERqiEfqb1mh/lsa6mQX4egZ9tWHSJoiNIEFYGBEq9Ce4DGlKVnplBd01AR9iwSK1ks3L04PggB13ACAV3K1Ab+c1dCJfuufLIWOdodqrfGfsZwVp2zylQtgrVwUZQKT3RgBxoTDVYoJ0IHaylBcYx1A1C/hlVL44rW/19ObXMrNYGrtIBiy2nKIP171szr8+KZmpWnUWt5UdVxvu0aaYGwYgtNRHvLdbpb/DPsHIzN+pldZ9CpfJr0UwtceFywqqFxFVWu+WtMQAqtpZCKatze4RRpnSTWTXrbsUV2dVJ2SgdsdXNerWuI1Gb7K8CWF440stQUPTpjkyhwtitBT0r6NUxKrbut17aTY1wCq+4YjcsKhwxXHJO63DBQU8yHSxXP+79vc8GM1dq6yj2H2BpOdwAIvTYH0ys3F5wuaNFGue/tus3Wsj9o8f+YGGtLbqsH8mIy13ECdZa0+vxweX9wdTOohUXdSFwYl3Kf+c4jrm8E2c1OeqpeseKHLZaosLBjzcz32oEc+ASx2ExtJ5ZgA3x2FUi6XQGFoGo6LbJ67PHm7s8Q6f5BCwxWuquEZ4b4omTaOh4AtZIrcOWwfv0oLTkhJfxd8J7nlxnH2rnNau340fPw8XI1dtdNbqdAFW+hxoWMXqHMMhxWeJs+jxCGCDh3cR40d5HniLIcVnqbq+uJpYfHX4nRo8QetLhd2K8HsJg58OxWztcC6E3Hf5AjBdRNSLY+bCbGC8lFrgFEOLaVhhUQS9y+RIj21B1Ie/aeBLjllhh6DAQMRqomrC3R3yI0UAViA6DEGNtwBKBb49cJ0YTVR/8nsZVYjRRBaNDX2KkANUN16UuEaOZ7UHp0H2P4BqqRtxwXeo8MTKIKigdXiZGmFah6fAqMWJXBaZD17WsK64KTYcXiNEFKjQdniZGJ6jwdHiKGClzgwpPh67bdSsE3jRt23W9skHZOOo/hr7vu65tmhvpEBEj4203jNMs5BET8zyNQ981N94ejgrpY/kd6zBK8y8uMU18dOTpm5M/H5iZv1ZbAtM2vGZU/erHNqpyv2m7XsXb+GaVhgS23X6cp4HT11mjfJjE+ZuTR3hHyrmvXz5W9+4f6HmhmpqXvy23MrNg5UrfrAxgyw/0QsQxrtT1A/z410HSViPBN9tAt9Tz9U7mC/947LQtz+iChFEJ/dEbkYktSIeTBj0veB98JgFiOJGwNgeIYhVgh9K+GuHb1MeBtr+tOwj+LWkdGBb3b1TTUwfTx4+vE29YIjQs+nfCIv6KMQt1EPUvgCUeWA+s5XZ0H9qCpPwt9t+ElRb32K/8by2PPfbYY4899tj/y/4BGYsA2gPdkaEAAAAASUVORK5CYII=",wk:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABIUExURUxpcUFBQUNDQ0REREREREREREVFRUVFRUVFRf////39/fj4+PHx8eTk5NTU1MnJyb6+vq+vr56enoaGhnNzc2JiYlJSUkZGRt7Q2EcAAAAJdFJOUwAaSmmEosHg8fYyyCoAAAXsSURBVHja7ZvXuqM6DIXpkLjhut7/Tc+FYSeAIQacMudDlxPKvyUhL8meLLvssssuu+yyf8+KheW/gNVhbtWF9Q9iKfow90NYt/to5KewyJ9dWBdWstq+xKq/V+8n1WqG9cUKdmEdru3kgXX/br2f1vb7A+thX8Mim3ZhXVgX1oX1c1j3n8TS/WjsCUb8/av79lLdP2GZ31EQz95SP4NlnzNKfBUrH60F9DMWBVCNP35N0+cA5OQDtED9sbcXZVXVdV1XVTlpHAoAfIKlgXZyZ1FWtb81bctR1O1s+NHWVeF/qwA3LVcSQD4QVc18cNKMN55mWo5kxjfkWdYAZorFARRZllfNyn1tddppxePZzhpjjHXTNwBQy+peVxP/OmuMsY9bu3NgeT08VktGbjcv2ikTUtunl4oZ1nNBNUqKR1VjQg0/duVxqtKHT4v77Xa7T1dAKtSIRmdY6g+J0+VKSaW/rznqMO8qRZdM4x8vDRapNRRUI9nqGi4MAHSHcj9vAECz2+22oRSYcmrhDzjFtsVF7wCgPEolb9tUhBC6JJCUvDJmjnE1ABx/CXXcFHwh2Z1Xlr2RypfdnVwlAPdeKu+vds/3mHdDBMk7jWrsW9UbAP2bfUUI4XZXGAsA+v1UhPWYqo2XznL0/VSEcr2jShQA1LsTy0dRuHh3NYAjH3AWIYyr6OzKvbM+QEUoFy72YywBsE9hcQ10sTG0H8ksQgjnMjaKL2LIeyl7TmOzR0jZC7aeXDwyigUAvuYsod2fxmMvmR5X25WrGecGaCJTi4SdxfSkVdB8eym2EzkvV7AUgDjtYMMxZHbew+gNBbq8OIz16N9eZbwOYlELAHWR+wbQ+0CsfGJez3d1mWdZlpdeUwY/xT4u51tABVNLTfuCoSuS69qzLaepARbC4nHrT7eCRd1cHXldHfKXWU5rikBD6bHipnMdIEMxFAFnV7OR2xNWWwTKYSi3IrGwgiUDX0y+jlWHvnAawrKnsFRgrd+DVYSSKx6r+zRWXBBbQK0FMT+BtZw4EUJ49JfYACaExQKj0B1YeRcYC1AeXbcqwAWLvFm6awdWHbqUcb/45LFyi4QrRHMUq0CoPnAeLbhyADIoIJZtXTRW3i1GrEMMuY1TEFkLmCAWtfP0isXK22CNZ0NqRfU+FQAWFDbczZ4RiZU3QQFBhxgij20xdFicitn0JxKrAWBpMLOEi4yhfwqLmrLEYTUALAuGkOv4dr9Y0WxLriisGoALa5pd7WvWrOiVUXX9TT1jsGoAjoepuNkzG8nDufAoE10ejVVtUUlEZ9b4rLUwPnO9xirDStFTCRf7GT5qV/B9f1xep77EKraouN2741iEXT881Iy+f4VVIHjBQKX3hfAxPF3jsgDqoiw3RHNTlWXZBXuQgUo9Jem+UfNa2jMX3j4P7PqoNSp5ZADuq4RZ4+IuEstsUh3Zxmi3uMSwIWdNKAPVuEu39PdA1bujG+zbXIy9HNrQwDXPVAd3tPNuq3wdnbOdpcqyIjXXM1WTZT/ClYgqMVcyqqRcCakSciWlGrhUKiqRiCoR10hlU1ENOkCmoOL2zEmDIJdIQGX27reekDnxVDotlVfR5iyVPCKwXsscdY5KuEMC67Wc4DOBwIXopZRKKaWUVlpppZRSUsq+F4J7/TBScfOOs4LjJIiJXik9Oy+1as4ao5WUYnfztSe9rMVBc3Zv8xUZxWrjlRNzq45si9RQ9fPjrdFKyV5wxii5BexOKWNc9FJpbZ4p2zJ1AD2QFIzedtqd8v5vZzGhx/xumJHsdsLuXHm0MiWV4bfTdvw02Uoj68SWH+a2AaaRqKYW45mpKQQhEScS7mQBKncdq9kOIR94zmibkU4nCaM/cHNPdVjD/1fiNkVmOZq0hZUpsqtL3VgH97R2l/etseBBM+fX7GJ9Rn/mqOLZ5CoBvONk5/nV0KbGEuclTn1Cw6+eafpdrOL3sFgSLP2DWM0bsOiF9XEsq1JbEqy32P8Tq27fY6kb2csuu+yyyy677LLsP+d98B4+O0hIAAAAAElFTkSuQmCC",bp:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUxpcSQkJCUlJSUlJSUlJSUlJSUlJSUlJSwsK3d0dGZjYlZTUk1KSUVCQjo5OSYmJrRYvAoAAAAJdFJOUwAfN1Z6o8Tg+2/nYHEAAAPpSURBVHja7ZlNTxNRFIZb2gpL4kKX4EbdlcSYuMMYEt3Vf4D+growcVklboDEWU/5BdA/AJxWtioUtiXktluRxApoGejHa+5MP+ZOKb09lxij8+7K4sk5Z87HO0MkEipUqFChQoUKFeqf1s0Hd66J9DADoPbkGkjRp/D02pz1DB29N0XdA5yDtVzhK4CXZqiYhdaGnSOiggVnxoiVgrPqoogKwKkJKg7s2yvkaR0wCWwWdTtLHVVxYtAPFjbaGUrt4mySzbqhhCXL/9wgxcNutYgoXzJIMg3bJp/KqLGbCw1/ikRFC9NMVgLnvspLVgWPmawJ7CspUqGEV0xWEqtZlVXGMXuA/E9RsgR7jOZbarkk6ye3JZp9LOsXk5VpqKWXrBqblf0rWemm+hipyK/XfCvAEvznmEKuj3XK7nsVlRf8vp/AUaBc/HlMoB5IscJerDG01I4Q/P0VyWBbSdFgr0Zm/QUrCGGy72+g6XuIMkX+HYpaOOhlKMom9zEy2w2sKIQwutvST7gVy0tUycxPjFlwJGpHyjJKMZICvnWr/8nIGt4FlnurIl81sIZxQNn4woLDvLVjGWkK/Y1fBmqT3GLtK36iIB8lq2S3gSVbObYF2WKsks2iYdvKgfTG6ITF+rK5uUYBVpnFSioLp50jc0tP9eZaYf1gsMYD296bb97GT6ARPEPuruB065i67b2whAVWs6a9Vz3RVtn7yTMBSZUlvJ/vmOfxMhZvuKNzc3NzGafHqsk/GKzDTKvYYbH9Ukdo5busMzPUGJrUCayKSSNWHHXKd1lm79vjWKZOYBWDq+312BF1AivhreF3gO3O9Iiy2XeAiOV0p1o2mGnpu2Mtqnwn55Z+qbduRAUvjMq16ds3JZOCRS0n69uDwvD7RNa/CKsGHZbC/op/QZfYrzCRGJze3S56K4w7Rvdx4bvbXpILbFO4YQevozPNDKvh/wST987QAq9afZaJ7X9TMqwV9d1KBsZ4lLeAz6plcrMsMQxY3ELdtu1+c1Id+XNmNC29qp3tdyeje9ZHsvCBFNuwEkZ7lnHXqwZTlNpxPevMSM+waV8WlvdqZI2ye2LAhh1oCB9td5TAku4zzNIgVUdwOxk3rNxA1kf9KxJ3qzUYJQPTtU5TWLwqQyLa0k5yHquXtYN/AHSnMipTzF3JIsvRLdfF1RkS0Z5mwcZxOCwsWtc8u0llNQ/qimPNARrU8b7e1xyjtDM0RSJNI2w1skNRVD3Ta4n6ynBWRcsIx3AxPEXa0/JicZyTDmtGi7WowdrSatZE2wteD2tZg7Wuyfrwfbj0bF0CevrjrDd64v6nKFSoUP+zfgN+r0dDyFRp3AAAAABJRU5ErkJggg==",bn:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUxpcSUlJSUlJSUlJSUlJSUlJSUlJSUlJSwsLHd0dGZjYlZTUk5LSkVCQjo5OCYmJvq3tckAAAAJdFJOUwASKUhtlMDg/auJd7sAAAV0SURBVHja7ZlNTxtHGMeNwUmOSEmbK6e2N9Nbb6GKWvXmREFqb05U9UzSF/XoSk0qIhL2vHb7AWz6AYpnnV6LjMXVyMz6CiFh1QL2FrD/1azNendnvDNjVlUOfs7Wz8/b/OeZZ1OpqU1talN7V+zm3cRQHwBLCaFmDeAkIdZHQGKOreD1TkKOpdE3f0vIsQz+NUvtZBy7hgOzVEvGsRvYMoskGceyKJtFkoxjOZhmkSTjWN71WDVg+eMromYKPY9F2gB+WV64CmsO5wNWjbU/ug+ulPrnAxZpejA8W5y46wvYNM0SYxHL3vdc+3RC1ofomaa5QQZmNRjNvT+Z3hRwYJom8a1hG5PCPkE/4JbnGt0HukuTFJG5VSQkCuvo98YdL1skbNsM9lS7iAa2whEOckYd4JEm6/pln3IwA90F3WO9K3CLpcwGftY8iq7QLUJqtKmpQd5RLIlYhFJDT4OusaM4cKPOOWbrOZb11JkQy0CPd8zBsY4KYhAiU66WyDENxSj0vSpaTBzOuVJSB9+qn2uWekLIK8a64HusiY7WJcvStSNk1Vgp76l3/a6XLoex1gRt0VTP/h1seiyDyV9dcJBsdOc1yshS7x7tr7dEvU8d1SBnjJ7HqrWEnc8qqRzkHM446YokzFat5HU8Fx/sUcKoo9iuOWxKWW08VhacUhyrxoI8VuvUc4EO1uqh5FO1hGUvBSccV4SllrCCN8JxtauHCknbKh2WQU8QokVbYVYTf6scIFFHNEKsBkv+iUIVURZUkUZZ1OgoSP2FIPMWz3IwL2/UA0GINRrK/YC1JL383bLgkqVhVs1L/kNpiOditwSsx1Lp2hVkvv2S0ijbxj+yW8MVZR59nkVlTXEbZ4IQ/4IrYBmnstfnlqDnDeDtHs/qSBS1L3QLeNniWA4kD+wzPvOWgR/Qa0XEkLEW4kPcNAVudW+iX+dY7VjVmUNP6NaTGTFrSXJp+Jmnw2y30ZmfQZ8IWPdiFXWzGDjNe8PEP0rNRsYwhqLNWFYOoxBZqfa8UeeU6eOFiPUw/iEbDmPPBtxFFvxaRIHkrH4peDfvr7Lh5L7ncItn2bGHO+9uBAZ5w3uAfu0NGC4nGzKhyKE+Ynko98FAiHoCVrxfWRz6P28CnW+WF4dCtMa3BLXxU6wQ+v/fcHAy799ykYGOKrBmRxM4Dczd+UhHWFQhxlT+8qxYzZHSvQ/UBemSiXQGQ1jD8ZsnXYiO0g2q0F+p1BeA+8YL0V3wH97R8ZdShTOUSqXzANb3AiHOAS+IKF3y6ST91WBH4vufj0iEny6J5njzxOeD7c28n/hDIkyX0gR260v4D/SZAvfouwxRZaBgm+PP7vqLGLc+JkRqdHX3Qy/ImBBVhqbwfsgl40Kkes/udIF/pfkh2lov5dRt3q1RiLbKwDpqjxXerVGI8vkrfDpdMjZEtaE8ILMvRAOiRqsG1uSojw9RsVV5lRWEqNdeOe4kBqpIKU41qmi4JCZErfbKCEIMsJqxNwd3wa3FhajVXnnU41htjcWVKF2B7pJNmJG7MjZdWuqVGS6rrO0GpUcjeztBS9zAoUWPVg1w5q6uH+m1RBariLFVjZa4VQh5MrQg7anqcXxvENs6rVcrZTNgxQrZHk55z9Rg7GMh3lTNcVbcYGu27xT7FIdlM9Z+N9TWrBngtSmzkqPUFjm20ZHarypr1rSB8jDRlUr0NVmtVi6r8SeeKAjquVewOKtWTLOkEGQWu8UNIrVq2XEV1h1EzXbklVxxFVl/yK9IbhIcZ6+k6460QLnG7A2lI8Usv84eY5ZsdcI+diizjqWsNUUWkbIyGqyTKesdZq0fKZoCS93+T9bcj+r2fWpqU5va1HTsP1MAb+04YA6IAAAAAElFTkSuQmCC",bb:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAqUExURUxpcSUlJSUlJSUlJSUlJSUlJSUlJSwsLHd0dGdkZFZTUkVCQjw6OiYmJk6AIV8AAAAIdFJOUwAWNFWCq977e1jxYQAABNNJREFUeNrtmb9v20YUx/XDUlZrSScBGVJkMpCtk4AiuwAXBdqJQIMk3Qg07eAkCHfSyB9ACegc+9hdgk+aGyTSEDsSK4nf/6W4H6QpmSLveETRAHqbnfiD977v3feeTrXaIQ5xiK8qOpWRHtpY/lgN6luweFYF6ggifqiAZQEfyQRYHleR1tgj5C/gqTHrBCuXEEJGWBizbPjnjEUdPDBENbHhaZFgjlNDVguveFqEjvDZkHUP46HIa4IbY+l9IvKi+GLMGiQs00b2MCSxXgvjvKRcdI4/DFldkFh6PDZktfFRsEbGbawdYS3kMh/VWgMhZ02q8AmLF1lFiWwoompOIzvbeO0xlwjNS+wjcj0m15eaeRsxdrlcLytQfu2ec7m+Z009NXIvXHgkkau9MEpr5Q5JIlffoJktwPfEdDFPrTsGVtGXadEpT6gFlE6sCfiuPIwPuGeUT6yHFWsiCaizFOpR8H6WONYOLlzhg1z6OkIyLTmz97FmI08IneCaz+2GBCUd0cKYK8+s/hdui28ImeL3UscncmWJU65SD1eEBKV8rIfXosRAttHi1l/GfOo2fFmibKPDjIy8L6F+C2tRYnzLNrDhPzr66vfwIS6Rcn+Ob5Gp9lJXd+DzQSUBnfDTyNtI2Ia4MChRjESXtbFUkSdxiZx1yosWKP0i7bhEQuV49WOWbifZaikmIqByvOxQsgLNzbWNV1IuzjpOxqvEXdnDhZQrkKMajxd32WstuUJXysVYC171WrKI3obYZBMxlNIL9zpKsbQEazG5blk3/FdvEtZUR7AuxlJ6QqUTxkud8LOXOheQL6XnrM980U9Yequ+HcXSc9Zv6SPE/V9d/Mat9MlxPEmzxMQp2vM/W6yt4yhYj9Wn/kMsfTZLo5HdZOozjjZjjbiEiifIv8sKU6yJ+inqI2kjL4iJY6VZVH0orCiRfh9L2cLsTZolb8cozXKUByzx+hTL3mYtVe+gXdbxHdY8VB77VdJGvshlsFCW1el0OrusY3XWeZrFoxyrucUKjFgNuT7LkKxNFSwq4ir9Cy0WyQmq0ce6AivUmPsClvLc15y1l4MKqM55tDfVsazIyy9Rw3P6KGTdqHv0MJ+l4dFdFMilcXe0b+/VfSzlOy2102TLNVX/GNlMHeSstKRtKx6iKJ+lPvZbF1hWiVpPmr294vO0JjrL7ze3i1tWWmKLUv80lJMWneu8BjT2iS8sVu8xzEJOWpqPYSfZglEpl9ZjWCtzWkVaenKxj7Xh3rQoljWt6GcUGcQlaj6Ptu8WKVH6L8ANZ3f0Y1SJF+Deru/QJK1rTVSthTATNSnzBGaxxFhhMxZns7ez2ewTS0v/DabxHeAgK55pfuf08CfkxIsnGjn9nP7L8IzHVpLPVXNr2vz/v/17djXw3VR4AzqbnfF/XKjB6haAT5dblC3icMRgSkP2CNjsBYk4n6t9Hdlw2EeFgvCmStN/H5HvFsMcFc9nT6FC6MFgd0W5vBwMBgL2TmFmG+wp1BvkLTrkkrVXwfRbWHm5IInz/yw+l/uvxp14XyxYL29f2vKz4u9c+yCKUWzVOWvJLquwkXakyirey9VZ80KWs1FmFV6TqI5V12CF/0/W9OtlRTPFcIpZ6vGfsn7ViNohDnGIQ2jGv7ULQsgUpwsIAAAAAElFTkSuQmCC",br:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUxpcSUlJSUlJSYmJiUlJSYmJiUlJYiGhXh1dW1ramBeXVZTUk1LSkVCQjk3NyYmJt1oLkIAAAAHdFJOUwApUXmew+Gm1HRSAAAEcklEQVR42u2ZvW8cRRjGf7N2QBcRMnM+UlDAnnEoaEj8DxBb9EhBQqJBUESpIKHmP0AIXUOBUuAaKYEORQqJKwoULIsCiRDsoySxbkdHsKXEvpdid897vv2YWR+EYt/uZnefeZ73az4OGmusscYaa6yxo6YcXukaiAb2+JMtvSOxXVo9NtYVSW23rsb2otH73wACEJn03RcuSLS1nf/NfO5o8OZN4NEpUBxc37JLoTKLWlt47Wvg0q1+7ld5gwsf3kx5KPY3bCdEBvHnGuDaL+ddsTo7PSBKngnBOQCLBkLZttDaWHHTOPcQDq63WQq1RQGLyQMNqvfkS169qLl9ftOFl4IHn/ycEFFYFWawGBG8tGUTsZVYwuPPCcESgsIupMMaAoRlGFiso+9HECYfK2xKK/7Zn9OAdfS9JCEU1qDFcKymByfZ7Mb6XHmpBCsAGGamIGQYFuZ9Aa8AEBTosZOTn8NErjsvAGyQxQIFoYTFdZfLSyUAJ7MEBAVrkkJb13qMsaxetlnvBIvl3S4P6+pnCRY/JS6PmejfD4O851iPVhXKGEMLzr7XRe/b2AHaVWPK6+DWxPDdPH6VGit6sfbTWMtq8FJevs937b/ES82Kl/bjFVbqceW1W46lQfG+I9aoFCtOmL4z1lwFlnbGkqsnSkIZAnrPusZxkwulSaTYd95P/MBCocIQMLznXHpqxE5miVcaJBHV1qC6GOtcxq9vcr8PqK7SJh2MxA6CGOqv591bQnCAbCljpp9EYKDb9yjTM1JmH/jtMd9YTwtK0j3mmOWjU5578re+RaIosihzWMwGA38/57GmJQV+N46VDKLuobciFsWnTxzdMci2rd0Lp7qKTBw6VA1eWRtMr3i1sdh24FX4QEa3JydNe1pbK09eKmcPW9Xwi7GOhr4/ThZ9nDgeJXZcjZllUx8fK6qPZQtEyyx4jdF9sVo5uwp7eP7wwtIlkVXeOWGd9hB1ecXw4s0r98Bj62nUNe4hAp8NlszQX1LeDP002loaeyV6Wn5YqjTntCeWlCTxTLCkDq+ZnTuK/SX1/GVLFgI9C17U4dUq4GXLmmHgX9qFrAP3Vlh5HAw82lf2AuUpaZwplpQl6wx5WT+sXmk7bj2t2i5sX6XFHdQoR+uJJTWKe748kbRBnU4ucCyRWN87PlDYttFqcvp2sjuUoRcvRadTMLmBts/dUefKxNEzGg0iibIjuyuuETt7L1Yz2I4mPKS0Me1ufCR9+4YTVuchcH9ju4h1+5VVYPWOA5b6qMdvN8qdcPYiey9OxXT65ubM9/z4XYVDB78un7i3WZ2r7/LgziRzpYw5Erqdr/iiWuP8E/k0drTSmbP/+OghNg7HZb2yXoX1cv/PNUzeNUcGMop45uPh6apcPcd6u1vhLmMY/DHt6imsUBYWHNK5beyzVb5XPXGrDWVbugIrcDhzpufcsIqXR0/WlViu/6WKA9bseM1yHWp5aOz993vfBst5fXQqbUcs87/UuHfZ/dvHNNZYY4352T/ZP4i5JEtsbQAAAABJRU5ErkJggg==",bq:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAzUExURUxpcSYmJiUlJSUlJSUlJSUlJSUlJSUlJS4uLXd0dGZjY1ZTUk5MS0VCQjw6OiYmJh8fH+/JGhMAAAAJdFJOUwAWOFp1lLzg/a0PANwAAAbDSURBVHja7ZvrlqsqDIC3ipqRW9//ac8CvJAQW6ph1l77mPk3pfCZxFyA/vnzyCOPPPLII4888kgnMEJW+nEC7/08DWcrd2qavfcwqf63oIaw4CowcmDdeIzw06+AdZNHAkMxRAEeMra3Zp9U5YzWxqXlRzIkqQqyEXNrri5S6Z+fn0VrrY1/FVxRm27ZRrjXL3AFKrdBBYHXy/vcjmrj3kbYgD41pRopVdIGHMroA9WCRkQu1dKEwWcQlTY2cI3IhIhKa2tfr5y8ibLImsZGZXSZsmxmwYTl2qprTibUGCtfNICTEdpG8rldcEjOvBAs6w+XnqOyFooFmULlwzuvirAoHM6nyYgAHhTaLNir6PCFsuKi3a7PpVRWdHrV0OOBUVaBVY5oj7WUa77DMu2xQgCn0SH6lt+wgm8tzIiANbR0eUZZAWt7/cF7s5Qj3OvVzuWDLgyniiPMT95DSZW9qy0kZBbGhtnbHxRqC+6grLFhXRoyNefwMyoxDFWWbxm21kWpMjyqbMJrAURZofhpWtnEssWi+E2rqWmtTHMjty0gtiJvXTUuG6pAVHvG+hWyFOBpodiiFVwLdXuehPvdAU2IHa8TqmvqWxu9shUcYtfg8qpmKBS6GzHW1HNfOfdHqKzRA8V85vZXrXj3j9BlkjJJP9aN8KHNPA0EuNGjT3u4fVoY+XN3QKdPZ7ajO5v7k1+jRm84wdKlFVUWuJjw/mnuD1R7oxcTMfpul2GZaMWJteGK5WlAzppIqOfqSaMXuXI7ESz8LvZ5Iki6pHObrMJ14R99bSRfsm8a6zyKmD3OL66I8uTDDs+dt7bahLnnShMaVLGngmrgsQzqMOLCQJrI7s3cmsz9TllAvklWRlgaW7EnSRP3FuXcoeeu2Qoom66U+bKHHhCWKfpEc4bFN3TgK5o1VTRdMbP5rC0ecNVF+0TQZ1iKaegMkyf4NsLRXj1hjfns+HlRi2Hx9kO25lTMnSKM/1wjTrEtLrAgcwCCpTMrjvQjimUZLF+LVfYu77Ci186MDVks3NsW79M5lmMaPcieaCRrm72apzZMWOp07n0LY6zwLWCwcpenWMfi1IbaIKxi7uQhNbtMQznzGiD6U6zdioA6kO2T8XRubWu3TTpfmCgpa2aTcRaqe9KNlVjU9fYWpSL7jKV/xFUVcj9d2mosbUixRtqgrMqq6CG7rIc4KvK8jyixdFRnB/wHE+o+XLkNUNUWjSdcU5dtVZLVYyFQ6JlgZT0R6rcr93Kmo7XBXOdYOljRFzZMXjeVVLmuajvbdFIBlua97fuMrdY6k8Hdd3PiWRHut1MLOdV2GdtpE1CukZby2Ip4P2fHnWm3vYar1+srqr1JzVePoStxcVjRiWjcWLGgoDJpC+BVdnsfG0Ugy+xcHYsVrej4f2/PiXZywt7FfOFIbyRGSVzqBCs2C0azxuWo3NXd1I4+fvIf1bPra8PZMNF2mMqsyrq4izMV6THZkcfSwNgwYWEqfXN/sC9TnFtbdA7Lsv/dvkE26+DG/uBc2GXj4gA0Z8P0huJ3et0Qv7w/qEqANWzqarGUymw2vLwTx+XexPUllrtWzNTGiJ2rHsuQ99neig7MPkf2yn2H5crO4Obx4sRpxgDUY2n8XPa2w5eHEsf7+AWW06yy7p0ezHzsvijGCjj8mdNfFyvh8GxilFHW7UON6atwUEMlclzW82XMdRMKOLyo01srEx1OE+MdE9btsl1LjHeUJXWvRSZGWCsWHd4lxosmFLxtM913+p3Kyp0PD/djhLWi0WHv7kGGSvQi112nP6hEr73dTIwGKUvwjP9WYsyorOztkTtOn1OB8O2R64kxp7LSt0cuJ0ZE5cTvaVx0ekTV4JrntRiBqRpcl7qUGDFVk8unFxIjobItrkt9HyMIlHh0uJQYqapa3Wv+zulLqka3wL+JESWUdDq8kBg5KOl0+LXT81CNHL4yMZoTqDbRgU+MxqwUbhMAF/5WaZoOqdOH+4AOgPzw6VQAImbDXz10s78jTX6C1KnpnUZyOR03SZsxv/0YMJwNTrYs4frZiSzx3ryxLucEJamy/WYlOPsO5RRxu57o/TyI5p1wSHkBCLElNCVJ5e4xrWTgvRcK9vtP6CTEfHPT9FNd6hfizFE+paFFrwPzL2tyW/RWht5xrvfWG58WMWOXfpF4BwjD/TgJdSm5DfDszGwQsCHIYmkQsKLkKcZxfD0LvIdWGMv62/3iIHoUdThXfx9L67/O51UDLP3PYo3y8SFiqQfrwfprsbyTFhmsFvJvYqm5jTT7kfUjjzzyyCOPPPL/lf8AtuykcwsccVwAAAAASUVORK5CYII=",bk:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAzUExURUxpcSIiIiUlJSUlJSUlJSUlJSUlJSUlJSUlJYWDgnd0dGNgYFZTUk5MS0NAQDIxMSYmJtBHgnAAAAAJdFJOUwARMVJ8nr7f8e5A/hcAAAUDSURBVHja7ZrrmqMgDIYrB3WLHO7/avcBPCJgwNh29+GbX9Pq+E4SYxLzejU1NTU1Nf17oieRX8AaTSjWsP5BrOnPqvdPYb0XTT+FJaZFDathoeX2Mxb/Xr4/ZKsA64sZrGHV5/YNS2yffQ3rvSX3RdtH769hba6LqWE1rIbVsH4O6z39IpZaJXcwcv30649qtcPSP1RB7KR+Bkv/Dla3aAiwXKQvX36tpu+C0HLBxT92dUIZd2KMkp0VqDFGhlhDcOZy6uHM20iUD8HwY+gZ9VfgQcT74OrmE1kfDk56htMNEX4eyeyu0IehNUljDH29COsT5w3sts3o9re11kpprY9XOIWW7xTZ0b7aaf115LfAOj7/VTUJV54LIYRN5Ac4GWDtv9NKye17KdX85XgjdVDvPjUjBb5armDCZ6FakWTsUTmf19cazJtKxpj2ZPr0cYbJH+DARlrlQBdVKg01k51CywZXhmlnUFpLNeWhPNn5otOlvMHKA8xSaXHoTHGlauxl40oDTHWXqyy30uepPNdQcj92NjOIh6l8fPHCwJqeppozGC1yoXqeymaXY7WRl32ePXgPVpqLzrl9eh6rxFy9N5Z4HksWmKv7mLFsTwm+GZlPDh8wlvWiNmbsgD7UnzGWxVJQL3ofiozh1VWBMO0Lv0MhWO1FkvOh1CZf4xUeLZ0XB2BoJXwo9bFAl9dJKT6nCLBMB6oddNxYAVUe7HywSkQErI7o3YMnhuUuxG1/2K3dlsyWnyN378jmo1USi4KePDLqQ3t+T3b9Y8Y3OuwHafx/kOAx2JjCOlVHpE/Zy1fE3enxfw9rimHJiLFZwlz27iKRdHgDyySw7OnX45r00IZFOsoFi9/CGu5g0ZjDLRZs8DR+GgvmxNSdGMsvJVg85kT4QNrnrXjI83os27XoFBaFZvnEXU+qsXjsUKnAWZ66R/UUN1fQ1sGxqEkZyxZcwOI0/trk3NaBscgYTbyzsXpg36PidY0OoxOKZafkiRwPfgXjiub4PCucsgCx3PQnnuKhdY2vA2W8ZpbBlAWGlaBajQXy4dyQgaY/MKw+XpmtxgL2r8TNSyFcICyermmK2lc/GcnUdyMpwMpSFc1GSDwWzlwALJajKoisZErep4mZ6xrrkqpkHpjIMzsun+4vsahJJyzvwqKpLsm1D47LTfuvsMglVf8qErvmopTlimbG3NpgnmosfZXBc2EvL9o/nftaqqrA2idBAFceS2epal5jDFdpwr+Qk9E+X0Ooqt6SkSyXBAxtpMxSVb7RdkWSxh7/3aV6gGtP1b9eP8KFRIXMhUaFyoVIhch1oLq/pUHG3GP7W1Tz+32FRKWxqJLVyZepkhPGOqoBb/uH3eN6iOqizIFSHboTHPU3wkvdK2UuyxwZFgjbMqfS88+68ymX+kGpysq9pElzKMG6VEZuQaqm+SoJezBNhA8/sJwX2YVJVqWPGyi2C7k574oJId5p+QW0YANtQA0uNq4dQxYlibgtyQ5ojvQ7U0ZP71sS87s8ipizlk28e/KdGkXL8AYDyqqyaU3sTIkgmIVfqcxqOez4H01FazX5hRux3Vu1Wvlwtvv9wo1AWtawaBrDXDwzsKwsKDCia8RurB0WQ3hCK1wsmyV6jNDCX1UcEOqGJzYo70e8xsZCiPmGVfiYfgSLNiyoGtbnsRSyNArWI/o/sfjwjLAb2aampqampqam1195W8+wSJhrTQAAAABJRU5ErkJggg=="},hn;(function(t){(function(i){i[i.DefaultWidth=300]="DefaultWidth",i[i.DefaultHeight=300]="DefaultHeight",i.DefaultDarkSquareColor="#000000",i.DefaultLightSquareColor="#ffffff"})(t.Board||(t.Board={})),function(i){i[i.Opacity=.2]="Opacity"}(t.AnalysisOverlay||(t.AnalysisOverlay={})),function(i){i[i.Opacity=.8]="Opacity",i[i.FrameCropRatio=.9]="FrameCropRatio"}(t.CustomItem||(t.CustomItem={})),function(i){i[i.SizeRatio=.4]="SizeRatio",i[i.OffsetRatio=.44]="OffsetRatio"}(t.Effect||(t.Effect={}));let r;(function(i){i.Color="#000000",i[i.Opacity=.1]="Opacity",i[i.RadiusRatio=.16]="RadiusRatio"})(r=t.MoveHint||(t.MoveHint={})),function(i){i[i.Color=r.Color]="Color",i[i.Opacity=.1]="Opacity",i[i.OuterRadiusRatio=.5]="OuterRadiusRatio",i[i.InnerRadiusRatio=.41]="InnerRadiusRatio"}(t.CaptureHint||(t.CaptureHint={})),function(i){i[i.ImageSize=256]="ImageSize"}(t.SVG||(t.SVG={}))})(hn||(hn={}));var Wn;(function(t){(function(r){r.PIECE_PERSPECTIVE_UNSPECIFIED="PIECE_PERSPECTIVE_UNSPECIFIED",r.TOP_DOWN="TOP_DOWN",r.PSEUDO_3D="PSEUDO_3D",r.REAL_3D="REAL_3D"})(t.Perspective||(t.Perspective={})),t.pieceShortNames=["wk","wq","wr","wb","wn","wp","bk","bq","br","bb","bn","bp"]})(Wn||(Wn={}));function yt(t){return Rt(t.themeAssets),t}function Oe(t){return tn(t.themeAssets),t}function Rt(t){if(!t||t.config.perspective!==Wn.Perspective.REAL_3D)return t;throw new Error("ThemeAssets: Expected 2D assets, received 3D assets")}function tn(t){if(!t||t.config.perspective===Wn.Perspective.REAL_3D)return t;throw new Error("ThemeAssets: Expected 3D assets, received 2D assets")}function dn(t){return ze(Ee({},t),{board:{assets:{background:t.board.assets.background},config:Ee({lightSquareCoordinateHex:hn.Board.DefaultDarkSquareColor,darkSquareCoordinateHex:hn.Board.DefaultLightSquareColor},t.board.config)},pieces:{assets:zo},config:{perspective:Wn.Perspective.TOP_DOWN}})}const Nt=["wp","wn","wb","wr","wq","wk","bp","bn","bb","br","bq","bk"],Gt={"8_bit":["#6a9b41","#f3f3f4","8_bit",".png","#ffff00"],bases:["#c26b38","#efcca1","bases",".jpg","#f5cc2a"],blackwhite:["#667188","#282f3f","translucent",".png","#5b91b3"],blue:["#4D6D92","#ECECD7","blue",".png","#00a5ff"],brown:["#B58863","#F0D9B5","brown",".png","#ffff00"],bubblegum:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],burled_wood:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],checkers:["#e3a6a9","#999999","checkers",".jpg","#fae18a"],dark_wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],dash:["#6b3a27","#bd9257","dash",".jpg","#eca722"],default:["#779952","#edeed1","green",".png","#ffff00"],glass:["#282f3f","#667188","glass",".png","#5b91b3"],graffiti:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],green:["#779952","#edeed1","green",".png","#ffff00"],grey:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],icy_sea:["#7a9db2","#c5d5dc","icy_sea",".jpg","#5ed7f1"],light:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],lolz:["#909898","#e0e9e9","lolz",".jpg","#a3becd"],marble:["#706b66","#c7bdaa","marble",".jpg","#f0db86"],marbleblue:["#c2d7e2","#efefef","marbleblue",".jpg","#65daf7"],marblebrown:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],marblegreen:["#706b66","#c7bdaa","marblegreen",".jpg","#f0db86"],metal:["#6e6e6e","#c9c9c9","metal",".jpg","#a3becd"],natural:["#D08B18","#FCE4B2","tan",".png","#f0e464"],nature:["#8c976e","#c3d1a4","translucent",".png","#eef396"],neon:["#636363","#b9b9b9","neon",".png","#6d90a6"],newspaper:["#5a5956","#5a5956","newspaper",".jpg","#99976e"],orange:["#D08B18","#FCE4B2","orange",".png","#ffff00"],overlay:["#789ebd","#4878a0","overlay",".png","#0d9acf"],parchment:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],pink:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],purple:["#8877B7","#EFEFEF","purple",".png","#7dacc9"],red:["#BA5546","#F0D8BF","red",".png","#f8f893"],sand:["#b8a590","#e5d3c4","sand",".jpg","#e2bc87"],sky:["#c2d7e2","#efefef","sky",".png","#65daf7"],stone:["#666463","#c8c3bd","stone",".jpg","#36525f"],tan:["#D08B18","#FCE4B2","tan",".png","#f7d84a"],tournament:["#316549","#ebece8","tournament",".jpg","#a4c25b"],translucent:["#667188","#282f3f","translucent",".png","#5b91b3"],walnut:["#835f42","#c0a684","walnut",".jpg","#d1a52d"],winboard:["#316549","#ebece8","tournament",".jpg","#a4c25b"],wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],wooddark:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],woodlight:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],woodmid:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],woodolive:["#6e6e6e","#c9c9c9","woodolive",".jpg","#a3becd"]},On={"3d_staunton":{format:"png",isPseudo3d:!0,path:"3d_staunton"},"3dchesskid":{format:"png",isPseudo3d:!0,path:"3d_chesskid"},"3dplastic":{format:"png",isPseudo3d:!0,path:"3d_plastic"},"3dwood":{format:"png",isPseudo3d:!0,path:"3d_wood"},"8_bit":{format:"png",path:"8_bit"},alpha:{format:"png",path:"alpha"},bases:{format:"png",path:"bases"},blindfold:{format:"png",path:"blindfold"},book:{format:"png",path:"book"},bubblegum:{format:"png",path:"bubblegum"},cases:{format:"png",path:"cases"},classic:{format:"png",path:"classic"},club:{format:"png",path:"club"},condal:{format:"png",path:"condal"},dash:{format:"png",path:"dash"},game_room:{format:"png",path:"game_room"},glass:{format:"png",path:"glass"},gothic:{format:"png",path:"gothic"},graffiti:{format:"png",path:"graffiti"},icy_sea:{format:"png",path:"icy_sea"},light:{format:"png",path:"light"},lolz:{format:"png",path:"lolz"},luca:{format:"png",path:"luca"},marble:{format:"png",path:"marble"},maya:{format:"png",path:"maya"},metal:{format:"png",path:"metal"},modern2:{format:"png",path:"modern"},nature:{format:"png",path:"nature"},neo:{format:"png",path:"neo"},neo_wood:{format:"png",path:"neo_wood"},neon:{format:"png",path:"neon"},newspaper:{format:"png",path:"newspaper"},ocean:{format:"png",path:"ocean"},real3d:{format:"png",path:"neo"},sky:{format:"png",path:"sky"},space:{format:"png",path:"space"},tigers:{format:"png",path:"tigers"},tournament:{format:"png",path:"tournament"},vintage:{format:"png",path:"vintage"},wood:{format:"png",path:"wood"}};function re(t){const r=Gt[t];if(!r)return null;const[i,o,s,l,c]=r;return{darkSquareColor:i,lightSquareColor:o,path:s,extension:l,highlightColor:c}}function ee(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return[0,0,0,0,0,0,0,0,0,0].reduce(r=>r+t.charAt(Math.floor(Math.random()*t.length)),"")}function xe(){return{allowMarkings:!0,disableUserMarkings:!1,analysisHighlightColors:{alt:Rr.HighlightColors.Blue,ctrl:Rr.HighlightColors.Orange,default:Rr.HighlightColors.Red,shift:Rr.HighlightColors.Green},analysisHighlightOpacity:.8,animationType:Rr.Animation.Types.Default,arrowColors:{alt:Rr.HighlightedArrowColors.Blue,ctrl:Rr.HighlightedArrowColors.Red,default:Rr.HighlightedArrowColors.Orange,shift:Rr.HighlightedArrowColors.Green},aspectRatio:1,autoClaimDraw:!0,autoPromote:!1,autoResize:!0,boardStyle:"green",captureKeyStrokes:!0,checkBlinkingSquareColor:"#ff0000",coordinates:Rr.CoordinatesPositions.Inside,darkMode:!1,diagramStyle:!0,enabled:!0,fadeSetup:0,flipped:!1,highlightColor:void 0,highlightLegalMoves:!0,highlightMoves:!0,highlightOpacity:.5,hoverSquareOutline:!0,id:ee(),moveListContextMenuEnabled:!0,moveListDisplayType:Rr.MoveListDisplayTypes.Text,moveMethod:Rr.MoveMethods.Drag,overlayInAnalysisMode:!1,pieceStyle:"neo",playSounds:!0,premoveDelay:200,premoveHighlightColor:"#f42a32",premoveHighlightOpacity:.5,rounded:!0,soundTheme:"default",syncEffects:!0,threatSquareColor:"#ff0000",threatSquareOpacity:.8,useSharedStyleTag:!1}}function L(){let t,r,i;return{match:[{condition:Ht([x.InstanceEvents.RendererSet,x.OptionsEvents.Update,x.InstanceEvents.WebGLAssetsInitialized]),handler:o}],create:({options:s})=>{t=s.boardStyle,r=s.pieceStyle,i=s.themeAssets},name:Jt.Plugin.Name};function o(s,l){var c,f;const{options:p,renderer:m,api:v}=l;if(!m||!m.areAssetsLoaded())return;const E=p.pieceStyle!==r||!(0,P.f)(i?.pieces,(c=p.themeAssets)==null?void 0:c.pieces);(p.boardStyle!==t||!(0,P.f)(i?.board,(f=p.themeAssets)==null?void 0:f.board))&&m.updateBoardImage(l);const M=()=>{E&&m.updatePieceBaseImage(l)};if(m.name==="webgl-3d"||!m.getPieceStyles)M();else{const R=m.getPieceStyles();J(R[l.options.pieceStyle],l.options.themeAssets).then(M).catch(D=>{if(D instanceof Rr.StylesSetFailed){if(l.api.emit(x.InstanceEvents.StylesSetFailed,vi(x.InstanceEvents.StylesSetFailed,{message:"Problem updating styles. Will fallback to default.",error:D})),l.options.themeAssets){v.setOptions({themeAssets:dn(l.options.themeAssets)});return}l.options.pieceStyle=xe().pieceStyle,m.updatePieceBaseImage(l,!0)}else E&&M()})}t=p.boardStyle,r=p.pieceStyle,i=p.themeAssets}}function Re({path:t,format:r}){return new Promise(function(i,o){const s=da(t),c=Nt.map(f=>`${s}/${f}.${r}`).map(f=>Ke(f));Promise.all(c).then(()=>i(!0)).catch(f=>{o(new Rr.StylesSetFailed(f.message))})})}function J(t,r){return r?new Promise((i,o)=>{try{Rt(r)}catch{return i(!0)}const s=[];if(Object.keys(r.pieces.assets).forEach(c=>{r.pieces.assets[c]!==zo[c]&&s.push(r.pieces.assets[c])}),s.length===0)return i(!0);const l=s.map(c=>Ke(c));Promise.all(l).then(()=>i(!0)).catch(c=>{o(new Rr.StylesSetFailed(c.message))})}):Re(t)}function Ke(t){return new Promise(function(r,i){const o=new Image;o.addEventListener("load",()=>r(t)),o.addEventListener("error",()=>i(new Error(`Failed to load image: ${t}`))),t||i(new Error(`Unknown url: ${t}`)),o.src=t})}function $e(){return{match:[{condition:Je(x.APIEvents.BlinkHighlight),handler:t}],name:Et.Plugin.Name};function t(r,i){const{renderer:o}=i;o?.blinkHighlights(r.data,i)}}var fn=`.board-disabled *:not(canvas) {
  pointer-events: none;
}`,mt;(function(t){(function(r){r.Name="board-disabled"})(t.Plugin||(t.Plugin={}))})(mt||(mt={}));var gt;(function(t){t.Pseudo3d="pseudo3d",t.Disabled="board-disabled",t.Flipped="flipped"})(gt||(gt={}));var Rn;(function(t){t.All="All",t.Move="Move"})(Rn||(Rn={}));var w;(function(t){(function(r){r.Default="default",r.WebGL2D="webgl-2d",r.WebGL3D="webgl-3d"})(t.Types||(t.Types={})),t.TriggerOptions=[Rr.SaveableOptions.AnimationType,Rr.SaveableOptions.PieceStyle]})(w||(w={}));function O(){return{create:t,match:[{condition:Je(x.OptionsEvents.Update),handler:r}],name:mt.Plugin.Name};function t(i){i.el.classList.toggle(gt.Disabled,!i.options.enabled)}function r(i,o){const{data:s}=i,{el:l,renderer:c}=o;"enabled"in s&&(l.classList.toggle(gt.Disabled,!s.enabled),c?.setBoardEnabled(s.enabled))}}function q(){return{match:[{condition:Ht([x.UIEvents.Resize,x.InstanceEvents.RendererSet]),handler:t}],name:ft.Plugin.Name};function t(r,i){const{renderer:o}=i;o?.resize(i)}}const ge=(0,P.c)({data:ht(),initialState:"idle",states:{changedPiece:{load:et,move:()=>({data:{chosenPiece:void 0,didChangePieces:!0,mouseCoords:[...ge.getData().mouseCoords,ge.getData().tentativeMouseCoords],moveHoldTimes:[...ge.getData().moveHoldTimes,Date.now()-ge.getData().moveHoldTimeStart]},nextState:"idle"})},chosenPiece:{choosePiece:({tentativeMouseCoords:t,moveHoldTimeStart:r})=>({data:{moveHoldTimeStart:r,tentativeMouseCoords:t},nextState:"changedPiece"}),load:et,move:()=>({data:{chosenPiece:void 0,mouseCoords:[...ge.getData().mouseCoords,ge.getData().tentativeMouseCoords],moveHoldTimes:[...ge.getData().moveHoldTimes,Date.now()-ge.getData().moveHoldTimeStart]},nextState:"idle"})},idle:{choosePiece:({chosenPiece:t,moveHoldTimeStart:r,tentativeMouseCoords:i})=>({data:{chosenPiece:t,didChangePieces:!1,moveHoldTimeStart:r,tentativeMouseCoords:i},nextState:"chosenPiece"}),load:et}}});function ht(){return{chosenPiece:"",didChangePieces:!1,mouseCoords:[],moveHoldTimes:[],tentativeMouseCoords:{x:0,y:0}}}function et(){return{data:ht(),nextState:"idle"}}var ne;(function(t){(function(r){r.AddingMarkings="AddingMarkings",r.Idle="Idle",r.PieceDragging="PieceDragging",r.PieceSelected="PieceSelected",r.PromotionAreaShowing="PomotionAreaShowing"})(t.States||(t.States={}))})(ne||(ne={}));var xt;(function(t){t.Name="core"})(xt||(xt={}));function er(t){const r={},i=t.mouseCoords.length/2;return t.mouseCoords.some(o=>{if(!o)return!1;const s=`${o.x}-${o.y}`;return typeof r[s]>"u"?r[s]=0:r[s]+=1,r[s]>=i},{})}function Or({machine:t}){return{get:r};function r(){const i=t.getData();return{didChangePieces:i.didChangePieces,didUseCheatMouse:er(i),moveHoldTimes:i.moveHoldTimes}}}function Vr(){return{api:()=>Or({machine:ge}),match:[{condition:Ht([x.UserEvents.PointerdownLeft,x.UserEvents.Pointerup]),handler:t},{condition:Je(x.APIEvents.Load),handler:r},{condition:Je(x.APIEvents.Move),handler:i}],name:ie.Plugin.Name};function t(o,s){const{mode:l,state:c}=s;if(c.get(x.State.MachineState)===ne.States.PromotionAreaShowing||!o.data||!l.isAllowedToMove())return;const f=c.get(x.State.SelectedPiece)||c.get(x.State.DraggingPiece);if(f&&f!==ge.getData().chosenPiece){if(!o.data.coordsInsideSquare){s.run({type:ie.Events.CheatDetectionError,data:{corePiece:f,cheatDetectionPiece:ge.getData().chosenPiece,eventData:o.data,variant:s.api.getVariant()}});return}ge.transition("choosePiece",{chosenPiece:f,moveHoldTimeStart:Date.now(),tentativeMouseCoords:o.data.coordsInsideSquare})}}function r(){ge.transition("load")}function i(){ge.transition("move")}}function nr(){let t,r=!1;return{match:[{condition:Ht([x.InstanceEvents.RendererSet,x.OptionsEvents.Update]),handler:i}],name:pr.Plugin.Name};function i(o,s){const{options:l,renderer:c}=s;c&&((l.coordinates!==t||l.flipped!==r||o.type===x.InstanceEvents.RendererSet)&&c.setCoordinates({flipped:l.flipped,position:l.coordinates},s),t=l.coordinates,r=l.flipped)}}function ln(t){return{getDefaultStarColor:r};function r(){return t}}function pt(t){return function(){return ln(t)}}function qe(t,r,i){const o=Ee({},t);return o.data[r]=i,o}var vn=`.custom-item {
  background-clip: content-box;
  box-sizing: border-box;
  height: 12.5%;
  opacity: 0.8;
  pointer-events: none;
  position: absolute;
  width: 12.5%;
}

.captured svg {
  -webkit-animation: capture-star 0.5s infinite;
          animation: capture-star 0.5s infinite;
}

@-webkit-keyframes capture-star {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0;
    transform: scale(2);
  }
}

@keyframes capture-star {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0;
    transform: scale(2);
  }
}`;function An(t){return t}function Pr(t){return t*(2-t)}function Sr(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}function Er(t){return--t*t*t+1}function Yn(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}function Hr(t){return Math.sin(t*Math.PI/2)}function Qr(t){return Math.sqrt(1- --t*t)}function Fr(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1}function gn(t){const{animatedProps:r,animatedPropsKeyframes:i,frameInfo:o,isTargetHTMLElement:s,params:l}=t,{keyframes:c,target:f}=l,{elapsedPercentage:p}=o,m=l.easing||An;if(!c)return;let v,E,y,M,R;Object.keys(r).forEach(D=>{for(let W=1;W<i[D].length;W++)if(y=i[D][W-1],M=i[D][W],p>=y&&p<=M){v=c[y][D],E=c[M][D];break}R=(p-y)/(M-y),R=m(R),r[D]=v+(E-v)*R,f&&!s&&(f[D]=r[D])})}function cn(t){const{data:r,keyframes:i,repeat:o,target:s,onEnd:l}=t,c=Kn(i),f=lt(c,i),p={animatedProps:c,animatedPropsKeyframes:f,data:Ee({},r),endCallbacks:[],ended:!1,endTime:0,forcedEnd:!1,frameInfo:{deltaTime:0,elapsedInterval:0,elapsedPercentage:0},isTargetHTMLElement:s instanceof HTMLElement,onEnd:m=>p.endCallbacks.push(m),params:t,repeatCount:o||1,started:!1,startTime:0,keptAlive:!1};return l&&p.endCallbacks.push(l),p}function Kn(t){if(!t)return{};if(!t[0])throw new Error("The animation keyframes must contain values at `0` percentage.");return Ee({},t[0])}function lt(t,r){if(!r)return{};const i=Object.keys(t),o={};return i.forEach(s=>o[s]=[]),Object.keys(r).sort((s,l)=>parseInt(s,10)-parseInt(l,10)).forEach(s=>{i.forEach(l=>{r[s][l]!==void 0&&o[l].push(parseInt(s,10))})}),o}function nn(t=!1){const r=[];let i=0,o=0;return{end:l,endAll:c,play:v,playingAnimationsCount:()=>r.length,update:R};function s(D){const W=(D-o)*.001;r.forEach(Te=>{if(Te.startTime>D)return;const dt=Te.frameInfo;dt.deltaTime=W,!(!Te.started&&!p(Te,D))&&(Te.endTime&&(dt.elapsedInterval=(D-Te.startTime)/(Te.endTime-Te.startTime),dt.elapsedInterval>1&&(dt.elapsedInterval=1),dt.elapsedPercentage=Math.round(dt.elapsedInterval*100)),m(Te),Te.endTime&&Te.endTime<=D&&f(Te))}),o=D,r.length&&!t&&(i=requestAnimationFrame(s))}function l(D){D.ended||r.indexOf(D)<0||(D.frameInfo.elapsedInterval=1,D.frameInfo.elapsedPercentage=100,m(D),f(D,!0))}function c(){[...r].forEach(l)}function f(D,W=!1){const{duration:Te,keepAlive:dt,repeatDelay:Ie}=D.params;if(D.repeatCount--,D.forcedEnd=W,!W&&D.repeatCount>0&&Te&&Te!==1/0){D.startTime=D.endTime+(Ie||0),D.endTime=D.startTime+Te;return}if(!W&&dt){D.keptAlive=!0;return}D.ended=!0,D.endCallbacks.forEach(ut=>ut(D)),E(D)}function p(D,W){const{duration:Te,delay:dt,onStart:Ie}=D.params;return D.startTime||(D.startTime=W+(dt||0),Te&&Te!==1/0&&(D.endTime=D.startTime+Te)),D.startTime>W?!1:(D.started=!0,Ie?.(D),!0)}function m(D){const{onUpdate:W}=D.params;gn(D),W?.(D)}function v(D){const W=cn(D);return r.push(W),!i&&!t&&y(),W}function E(D){const W=r.indexOf(D);W>=0&&r.splice(W,1),!r.length&&!t&&M()}function y(){o=performance.now(),i=requestAnimationFrame(s)}function M(){i&&cancelAnimationFrame(i),i=0}function R(D){s(D)}}function rn(t={}){const r=t;function i(p){if(r[p]===void 0)throw new Error(`Requested object at key ${p} is undefined.`);return r[p]}function o(){return r}function s(p,m){r[p]=m}function l(){return Object.keys(r)}function c(p){return r[p]!==void 0}function f(p){delete r[p]}return{deleteItem:f,get:i,getCollection:o,isDefined:c,keys:l,set:s}}var S;(function(t){t.Arrows="arrows",t.BlinkingHighlights="blinking-highlights",t.CaptureHints="capture-hints",t.Coordinates="coordinates",t.Effects="effects",t.FadeSetup="fade-setup",t.HoverSquare="hover-square",t.MoveHints="move-hints",t.Pieces="pieces",t.PromotionWindow="promotion-window",t.Squares="squares"})(S||(S={}));function me(t,r){return t.split(" ").filter(i=>!i.startsWith(r)).join(" ").trim()}function he(t){return{file:t.toLowerCase().charCodeAt(0)-96,rank:Number(t.charAt(1))}}function be({square:t,el:r}){const i=he(t);i&&(r.className=me(r.className,"square-"),r.classList.add(`square-${i.file}${i.rank}`),r.style.transform="")}function Ue(t,r){return t?(Object.entries(r).forEach(([i,o])=>{const s=`${i.charAt(0).toUpperCase()}${i.slice(1)}`;typeof o>"u"?delete t.dataset[`test${s}`]:t.dataset[`test${s}`]=o}),!0):!1}var Ze;(function(t){t.Anchor="anchor",t.Blinking="blinking",t.Color="color",t.Dragging="dragging",t.Editable="editable",t.Element="element",t.EnPassant="enPassant",t.File="file",t.Figurine="figurine",t.Flipped="flipped",t.Inside="inside",t.Interval="interval",t.LeadingFigurine="leadingFigurine",t.Opacity="opacity",t.Outside="outside",t.Position="position",t.Rank="rank",t.Selected="selected",t.ShortString="shortstring",t.Square="square",t.Star="star",t.TextColor="textColor",t.TextValue="textValue",t.Times="times",t.TrailingFigurine="trailingFigurine",t.Type="type",t.WholeMoveNumber="wholeMoveNumber",t.X="x",t.Y="y"})(Ze||(Ze={}));var zn;(function(t){t.Arrow="arrow",t.BlinkingHighlight="blinking-highlight",t.Board="board",t.CommentLink="comment-link",t.Coordinates="coordinates",t.CustomItem="custom-item",t.Effect="effect",t.FadeInOverlay="fade-in-overlay",t.GameResult="game-result",t.HalfMove="half-move",t.Highlight="highlight",t.Hint="hint",t.HoverSquare="hover-square",t.Move="move",t.Piece="piece",t.PotentialCapture="capture-hint",t.PromotionCloseButton="promotion-close-button",t.PromotionPiece="promotion-piece",t.PromotionWindow="promotion-window",t.Square="square",t.SiblingBoard="sibling-board"})(zn||(zn={}));function K(t){if(!t)return null;const r=t.position===jn.Positions.Below;return t.target===jn.Targets.Arrows?{insertBefore:r,type:S.Arrows}:t.target===jn.Targets.Effects?{insertBefore:r,type:S.Effects}:t.target===jn.Targets.Pieces?{insertBefore:!r,type:r?S.Effects:S.Pieces}:null}const ye=`
<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
  <image x="7.5" y="7.5" width="25" height="25" />
</svg>
`,Be=`
  <svg xmlns="http://www.w3.org/2000/svg" style="fill: #ffa704" viewBox="0 0 40 40">
    <path
      d="M23.12,17.84H16.4a1.11,1.11,0,0,1-1.06-1.43L18.7,5.21a1.11,1.11,0,0,1,2.13,0l3.36,11.2A1.11,1.11,0,0,1,23.12,17.84Z" />
    <path
      d="M27.21,34.11,4.35,16.88a1.11,1.11,0,0,1,.67-2l17.89,0a1.11,1.11,0,0,1,1.06.8l5,17.19A1.11,1.11,0,0,1,27.21,34.11Z" />
    <path
      d="M35.17,16.88,12.31,34.11a1.11,1.11,0,0,1-1.74-1.2l5-17.19a1.11,1.11,0,0,1,1.06-.8l17.89,0A1.11,1.11,0,0,1,35.17,16.88Z" />
  </svg>
`,We=`
<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="5" y="12.5" width="30" height="15" rx="3" fill="inherit" />
  <text fill="#676767" font-size="0.8rem" x="20.5" y="20.5" dominant-baseline="middle" text-anchor="middle"></text>
</svg>
`;var k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Image:ye,Star:Be,TextBox:We});function N({board:t,el:r,options:i}){const o=rn(),s=rn(),l=nn(),c=rn(),f=document.createComment("/Custom Items");return t.addToDom({el:f,insertAfter:!0,type:S.Pieces}),{addCustomItems:p,removeCustomItems:E};function p(R){R.forEach(D=>{const{data:{color:W,image:Te,opacity:dt,text:Ie,type:ut,visualOrder:Tt,frame:rr,removalClass:Fn,square:pn}}=D;s.isDefined(pn)&&v(pn,Fn),c.isDefined(pn)&&l.end(c.get(pn));const Dt=document.createElement("div");if(Dt.classList.add(qr.Classes.Root),rr){Dt.classList.add("custom-item__frame"),rr.imageAnimated&&Dt.classList.add("custom-item__frame--animated");const ar=m(rr);ar&&Dt.appendChild(ar)}else Dt.innerHTML=k[ut],Vn();be({el:Dt,square:pn}),i.test&&Ue(Dt,{[Ze.Color]:W,[Ze.Element]:zn.CustomItem,[Ze.Opacity]:dt,[Ze.Square]:pn,[Ze.Type]:ut});const Qt=K(Tt);Qt?t.addToDom(Ee({el:Dt},Qt)):r.insertBefore(Dt,f),o.set(pn,Dt);function Vn(){const ar=Dt.querySelector("svg");if(ar){if(W&&(ar.style.fill=W),dt&&(ar.style.opacity=String(dt)),Te){const Br=ar.querySelector("image");if(!Br)return;if(Br.setAttribute("href",Te.url),Te.percentOfSquare){const{width:dr}=ar.viewBox.baseVal,Gr=dr*Te.percentOfSquare*.01,lr=(dr-Gr)/2;Object.assign(Br.style,{height:`${Gr}px`,width:`${Gr}px`,x:`${lr}px`,y:`${lr}px`})}}if(Ie){const Br=ar.querySelector("text");if(!Br)return;Br.innerHTML=Ie.value,Ie.color&&(Br.style.fill=Ie.color)}}}})}function m(R){if(!R)return;const D=document.createElement("div"),{imageURL:W,imageAnimated:Te,positionRatioX:dt,positionRatioY:Ie,widthRatio:ut,heightRatio:Tt}=R,rr=dt/ut,Fn=Ie/Tt,pn=1/ut,Dt=1/Tt,Qt=rr/(pn-1)*100,Vn=Fn/(Dt-1)*100,ar=Te?"auto 100%":`${1/ut*100}% ${1/Tt*100}%`;return D.style.backgroundImage=`url(${W})`,D.style.backgroundSize=ar,D.style.backgroundPositionX=`${Qt}%`,D.style.backgroundPositionY=`${Vn}%`,D}function v(R,D="captured"){const W=o.get(R);W&&W.classList.contains(D)&&(y(W,R),clearTimeout(s.get(R)),s.deleteItem(R))}function E(R){R.forEach(D=>{const{data:W}=D,{frame:Te,removalClass:dt="captured",removalTimeout:Ie=250,square:ut}=W,Tt=o.get(ut);Tt&&(Te?.imageAnimated?M({customItemElement:Tt,imageURL:Te.imageURL,square:ut,onAnimationEnd:()=>{c.isDefined(ut)&&c.deleteItem(ut),y(Tt,ut)}}):(Tt.classList.add(dt),s.set(ut,window.setTimeout(()=>{s.isDefined(ut)&&s.deleteItem(ut),Tt&&y(Tt,ut)},Ie))))})}function y(R,D){r.removeChild(R),o.deleteItem(D)}function M({customItemElement:R,imageURL:D,square:W,onAnimationEnd:Te}){const dt=R.querySelector("div");if(!dt){Te();return}const Ie=new Image;Ie.src=D,Ie.onload=()=>{const ut=R.clientHeight,Tt=Math.ceil(Ie.naturalWidth/Ie.naturalHeight),rr=1/Tt,Fn=l.play({duration:Tt/24*1e3,data:{currentFrame:1},onUpdate:()=>{const{data:pn,frameInfo:Dt}=Fn;rr*pn.currentFrame<Dt.elapsedInterval&&(dt.style.backgroundPositionX=`-${ut*pn.currentFrame}px`,pn.currentFrame++)},onEnd:Te});c.set(W,Fn)}}}function B(t){const{api:r,options:i,renderer:o}=t,s=r.markings;o?.extendRenderer(N);const l=i.allowMarkings?s.getAllWhere({types:[Cn]}):[];o?.addCustomItems(l,t)}function Y(){return[{condition:si(Cn),handler:t},{condition:on(Cn),handler:r},{condition:Je(x.InstanceEvents.RendererSet),handler:(i,o)=>B(o)}];function t(i,o){const{api:s,renderer:l}=o,c=s["custom-items"],f=i.data.filter(en(Cn)).map(p=>p.data.color?p:qe(p,"color",c.getDefaultStarColor()));l?.addCustomItems(f,o)}function r(i,o){const{api:s,queue:l,renderer:c}=o,f=i.data.filter(en(Cn));f.forEach(p=>{const m=p.data.removalSound;m&&l.add(s.playSound,m)}),c?.removeCustomItems(f,o)}}var G;(function(t){t.DefaultSquareColor="#ffa704"})(G||(G={}));function ce({defaultStarColor:t=G.DefaultSquareColor}={}){return{create:B,api:pt(t),match:Y(),name:qr.Plugin.Name}}var oe;(function(t){(function(r){r.EntryAdded="EntryAdded"})(t.Events||(t.Events={})),function(r){r.Debug="Debug",r.Error="Error",r.None="None"}(t.Levels||(t.Levels={}))})(oe||(oe={}));function Mt(){let t,r;return{create:i,name:At.Plugin.Name};function i(s){const{api:{logger:l}}=s;l.on(oe.Events.EntryAdded,o)}function o(s){s.code===void 0||s.code===x.LogCodes.State&&JSON.stringify(s.data)===t||s.code===x.LogCodes.Event&&s.data.type===x.UserEvents.Pointermove&&r===x.UserEvents.Pointermove||s.code===x.LogCodes.Event&&s.data.type===x.UIEvents.Resize&&r===x.UIEvents.Resize||(s.code===x.LogCodes.State&&(t=JSON.stringify(s.data)),s.code===x.LogCodes.Event&&(r=s.data.type),console.group(s.code),s.level===oe.Levels.Error?console.error(s.data):console.log(s.data),console.groupEnd())}}var _t=`.effect {
  background-clip: content-box;
  border-radius: 50%;
  box-sizing: border-box;
  height: 12.5%;
  /*rtl:ignore*/
  left: 5.5%;
  padding: 3.75%;
  pointer-events: none;
  position: absolute;
  top: -5.5%;
  width: 12.5%;
  z-index: 1;
}

.effects {
  pointer-events: none;
  position: absolute;
}

.flipped .effects {
  /*rtl:ignore*/
  transform: scale(-1, -1);
}

.tuck-right {
  margin-left: -2%;
}

.tuck-top {
  margin-top: 2%;
}`;function Qe(t){if(!t)return!1;const r=["a","h","1","8"];let i=!1;return r.forEach(o=>{t.includes(o)&&(i=!0)}),i}var X;(function(t){(function(r){r.Background="icon-background",r.Component="icon-component",r.ComponentShadow="icon-component-shadow",r.Shadow="icon-shadow"})(t.ClassNames||(t.ClassNames={}))})(X||(X={}));const rt=`<g id="alternative">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M14.57,4.71l-4.42.2a.2.2,0,0,0-.11,0A.16.16,0,0,0,10,5a.21.21,0,0,0,0,.11.31.31,0,0,0,0,.1l1.4,1.4L8.92,9.13,6.5,6.71,8,5.24a.19.19,0,0,0,0-.1A.14.14,0,0,0,8,5,.15.15,0,0,0,8,4.94a.21.21,0,0,0-.11,0L3.42,4.71l-.08,0-.06,0a.18.18,0,0,0,0,.07.19.19,0,0,0,0,.08l.19,4.42a.15.15,0,0,0,0,.11.18.18,0,0,0,.08.07.25.25,0,0,0,.12,0,.18.18,0,0,0,.09-.06L5.21,8l2.55,2.56v4.49a.29.29,0,0,0,0,.09l0,.07.08,0,.09,0H9.85l.09,0a.18.18,0,0,0,.07,0l.05-.07a.29.29,0,0,0,0-.09V10.57l2.63-2.63,1.55,1.54a.16.16,0,0,0,.09,0,.17.17,0,0,0,.12,0,.18.18,0,0,0,.08-.07.13.13,0,0,0,0-.1l.19-4.43a.19.19,0,0,0,0-.08.18.18,0,0,0,0-.07l-.07,0Z"></path>
      </g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M14.57,4.21l-4.42.2a.2.2,0,0,0-.11,0,.16.16,0,0,0-.07.09.21.21,0,0,0,0,.11.31.31,0,0,0,0,.1l1.4,1.4L8.92,8.63,6.5,6.21,8,4.74a.19.19,0,0,0,0-.1.14.14,0,0,0,0-.11A.15.15,0,0,0,8,4.44a.21.21,0,0,0-.11,0L3.42,4.21l-.08,0-.06,0a.18.18,0,0,0,0,.07.19.19,0,0,0,0,.08l.19,4.42a.15.15,0,0,0,0,.11A.18.18,0,0,0,3.53,9a.25.25,0,0,0,.12,0A.18.18,0,0,0,3.74,9L5.21,7.51l2.55,2.56v4.49a.29.29,0,0,0,0,.09l0,.07.08,0,.09,0H9.85l.09,0a.18.18,0,0,0,.07,0l.05-.07a.29.29,0,0,0,0-.09V10.07l2.63-2.63L14.26,9a.16.16,0,0,0,.09,0,.17.17,0,0,0,.12,0A.18.18,0,0,0,14.55,9a.13.13,0,0,0,0-.1l.19-4.43a.19.19,0,0,0,0-.08.18.18,0,0,0,0-.07l-.07,0Z"></path>
    </g>
  </g>`,bn=`<g id="best">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#96bc4b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path class="${X.ClassNames.ComponentShadow}" opacity="0.2" d="M9,3.43a.5.5,0,0,0-.27.08.46.46,0,0,0-.17.22L7.24,7.17l-3.68.19a.52.52,0,0,0-.26.1.53.53,0,0,0-.16.23.45.45,0,0,0,0,.28.44.44,0,0,0,.15.23l2.86,2.32-1,3.56a.45.45,0,0,0,0,.28.46.46,0,0,0,.17.22.41.41,0,0,0,.26.09.43.43,0,0,0,.27-.08l3.09-2,3.09,2a.46.46,0,0,0,.53,0,.46.46,0,0,0,.17-.22.53.53,0,0,0,0-.28l-1-3.56L14.71,8.2A.44.44,0,0,0,14.86,8a.45.45,0,0,0,0-.28.53.53,0,0,0-.16-.23.52.52,0,0,0-.26-.1l-3.68-.2L9.44,3.73a.46.46,0,0,0-.17-.22A.5.5,0,0,0,9,3.43Z"></path>
    <path class="${X.ClassNames.Component}" fill="#fff" d="M9,2.93A.5.5,0,0,0,8.73,3a.46.46,0,0,0-.17.22L7.24,6.67l-3.68.19A.52.52,0,0,0,3.3,7a.53.53,0,0,0-.16.23.45.45,0,0,0,0,.28.44.44,0,0,0,.15.23L6.15,10l-1,3.56a.45.45,0,0,0,0,.28.46.46,0,0,0,.17.22.41.41,0,0,0,.26.09.43.43,0,0,0,.27-.08l3.09-2,3.09,2a.46.46,0,0,0,.53,0,.46.46,0,0,0,.17-.22.53.53,0,0,0,0-.28l-1-3.56L14.71,7.7a.44.44,0,0,0,.15-.23.45.45,0,0,0,0-.28A.53.53,0,0,0,14.7,7a.52.52,0,0,0-.26-.1l-3.68-.2L9.44,3.23A.46.46,0,0,0,9.27,3,.5.5,0,0,0,9,2.93Z"></path>
  </g>`,Jn=`<g id="blunder">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#ca3431" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M14.74,5.45A2.58,2.58,0,0,0,14,4.54,3.76,3.76,0,0,0,12.89,4a4.07,4.07,0,0,0-1.2-.19A3.92,3.92,0,0,0,10.51,4a5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06l.11-.08a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83V11a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.8a1,1,0,0,1,.26-.7q.27-.28.66-.63A5.79,5.79,0,0,0,14.05,9a4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5.45Z"></path>
      <path d="M12.38,12.65H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V13a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.65Z"></path>
      <path d="M6.79,12.65H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,15a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V13a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.65Z"></path>
      <path d="M8.39,4.54A3.76,3.76,0,0,0,7.3,4a4.07,4.07,0,0,0-1.2-.19A3.92,3.92,0,0,0,4.92,4a5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06l.11-.08a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,6.06a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.9a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83V11a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1A.5.5,0,0,0,7,11V10.8a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9.47c.18-.15.35-.31.52-.48A7,7,0,0,0,9,8.39a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1,2.66,2.66,0,0,0-.29-1.27A2.58,2.58,0,0,0,8.39,4.54Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M14.74,5A2.58,2.58,0,0,0,14,4a3.76,3.76,0,0,0-1.09-.56,4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06L10.37,6a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.3a1,1,0,0,1,.26-.7q.27-.28.66-.63a5.79,5.79,0,0,0,.51-.48,4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M12.38,12.15H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.15Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M6.79,12.15H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,14.51a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.15Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M8.39,4A3.76,3.76,0,0,0,7.3,3.48a4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06L4.78,6a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,5.56a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.4a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1.5.5,0,0,0,0-.12V10.3a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9c.18-.15.35-.31.52-.48A7,7,0,0,0,9,7.89a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1A2.66,2.66,0,0,0,9.15,5,2.58,2.58,0,0,0,8.39,4Z"></path>
    </g>
  </g>`,sr=`<g id="book">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <path class="${X.ClassNames.ComponentShadow}" opacity="0.3" isolation="isolate" d="M8.45,5.9c-1-.75-2.51-1.09-4.83-1.09H2.54v8.71H3.62a8.16,8.16,0,0,1,4.83,1.17Z"></path>
      <path class="${X.ClassNames.ComponentShadow}" opacity="0.3" isolation="isolate" d="M9.54,14.69a8.14,8.14,0,0,1,4.84-1.17h1.08V4.81H14.38c-2.31,0-3.81.34-4.84,1.09Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M8.45,5.4c-1-.75-2.51-1.09-4.83-1.09H3V13h.58a8.09,8.09,0,0,1,4.83,1.17Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M9.54,14.19A8.14,8.14,0,0,1,14.38,13H15V4.31h-.58c-2.31,0-3.81.34-4.84,1.09Z"></path>
    </g>
  </g>`,tr=`<g id="Brilliant">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#1bada6" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M12.57,14.6a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.84A.41.41,0,0,1,10,14.6V12.7a.32.32,0,0,1,.09-.23.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.9A.36.36,0,0,1,10,3.66a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      <path d="M8.07,14.6a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.7a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.67a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.9a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M12.57,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.34A.41.41,0,0,1,10,14.1V12.2A.32.32,0,0,1,10,12a.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.4A.36.36,0,0,1,10,3.16a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M8.07,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2A.31.31,0,0,1,8,12a.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.17a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
  </g>`,wn=`<g id="checkmate_black">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M11.44,8.41h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.86H8.31l.18-2.78H6.94L6.76,6.86H5l-.1,1.55H6.66l-.11,1.68H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.64H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,10.09l.1-1.68H9.89l-.1,1.68Z"></path>
    <path class="${X.ClassNames.ComponentShadow}" fill="#fff" d="M11.44,7.91h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.36H8.31l.18-2.78H6.94L6.76,6.36H5l-.1,1.55H6.66L6.55,9.59H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.14H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.59l.1-1.68H9.89l-.1,1.68Z"></path>
  </g>`,fs=`<g id="checkmate_white">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <circle class="${X.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
    <path class="${X.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M11.44,8.11h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.56H8.31l.18-2.78H6.94L6.76,6.56H5l-.1,1.55H6.66L6.55,9.79H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.34H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.79l.1-1.68H9.89l-.1,1.68Z"></path>
  </g>`,rd=`<g id="correct">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#96bc4b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.ComponentShadow}" opacity="0.2" d="M15.11,6.81,9.45,12.47,7.79,14.13a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.78a.39.39,0,0,1-.11-.28.39.39,0,0,1,.11-.27L4.28,7.85a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09l2.69,2.68,5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.81Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M15.11,6.31,9.45,12,7.79,13.63a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.28A.39.39,0,0,1,2.78,9a.39.39,0,0,1,.11-.27L4.28,7.35a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09L7.52,10l5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.31Z"></path>
    </g>
  </g>`,id=`<g id="critical">
    <g class="${X.ClassNames.Shadow}" opacity="0.3">
      <path d="M17.68,5.2,11.06,16.67a2.37,2.37,0,0,1-4.11,0L.32,5.2A2.38,2.38,0,0,1,2.38,1.64H15.62A2.38,2.38,0,0,1,17.68,5.2Z"></path>
    </g>
    <path class="${X.ClassNames.Background}" fill="#ad5b8c" d="M17.68,4.7,11.06,16.17a2.37,2.37,0,0,1-4.11,0L.32,4.7A2.38,2.38,0,0,1,2.38,1.14H15.62A2.38,2.38,0,0,1,17.68,4.7Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M8.67,3.22,5.9,9.92V10a.14.14,0,0,0,0,.06l0,0,0,0H8.4a.1.1,0,0,1,.09,0,.09.09,0,0,1,0,.08l0,5c0,.11.17.17.21.07L12.1,8V7.92a.14.14,0,0,0,0-.06.09.09,0,0,0-.05,0l-.06,0H9.32a.11.11,0,0,1-.08,0,.12.12,0,0,1,0-.09l-.32-4.4C8.87,3.18,8.71,3.12,8.67,3.22Z"></path>
    </g>
    <path class="${X.ClassNames.Component}" fill="#fff" d="M8.67,2.72,5.9,9.42v.05a.14.14,0,0,0,0,.06l0,0,0,0H8.4a.1.1,0,0,1,.09,0,.09.09,0,0,1,0,.08l0,5c0,.11.17.17.21.07l3.4-7.24V7.42a.14.14,0,0,0,0-.06.09.09,0,0,0-.05,0l-.06,0H9.32a.11.11,0,0,1-.08,0,.12.12,0,0,1,0-.09l-.32-4.4C8.87,2.68,8.71,2.62,8.67,2.72Z"></path>
  </g>`,Fu=`<g id="draw_black">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M2.92,7V5.84c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V7Zm8.87-2.39L7,13.88H5l4.8-9.26ZM9.85,13.88c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,8.26,15,8.78,15,10c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
    <path class="${X.ClassNames.ComponentShadow}" fill="#fff" d="M2.92,6.51V5.34c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.51Zm8.87-2.39L7,13.38H5l4.8-9.26ZM9.85,13.38c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.76,15,8.28,15,9.5c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
  </g>`,od=`<g id="draw_white">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <circle class="${X.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
    <path class="${X.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M2.92,6.61V5.44c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.61Zm8.87-2.39L7,13.48H5l4.8-9.26ZM9.85,13.48c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.86,15,8.38,15,9.6c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
  </g>`,Ul=`<g id="excellent">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#96bc4b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M13.79,11.34c0-.2.4-.53.4-.94S14,9.72,14,9.58a2.06,2.06,0,0,0,.18-.83,1,1,0,0,0-.3-.69,1.13,1.13,0,0,0-.55-.2,10.29,10.29,0,0,1-2.07,0c-.37-.23,0-1.18.18-1.7S11.9,4,10.62,3.7c-.69-.17-.66.37-.78.9-.05.21-.09.43-.13.57A5,5,0,0,1,7.05,8.23a1.57,1.57,0,0,1-.42.18v4.94A7.23,7.23,0,0,1,8,13.53c.52.12.91.25,1.44.33A11.11,11.11,0,0,0,11,14a6.65,6.65,0,0,0,1.18,0,1.09,1.09,0,0,0,1-.59.66.66,0,0,0,.06-.2,1.63,1.63,0,0,1,.07-.3c.13-.28.37-.3.5-.68S13.74,11.53,13.79,11.34Z"></path>
      <path d="M5.49,8.09H4.31a.5.5,0,0,0-.5.5v4.56a.5.5,0,0,0,.5.5H5.49a.5.5,0,0,0,.5-.5V8.59A.5.5,0,0,0,5.49,8.09Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M13.79,10.84c0-.2.4-.53.4-.94S14,9.22,14,9.08a2.06,2.06,0,0,0,.18-.83,1,1,0,0,0-.3-.69,1.13,1.13,0,0,0-.55-.2,10.29,10.29,0,0,1-2.07,0c-.37-.23,0-1.18.18-1.7s.51-2.12-.77-2.43c-.69-.17-.66.37-.78.9-.05.21-.09.43-.13.57A5,5,0,0,1,7.05,7.73a1.57,1.57,0,0,1-.42.18v4.94A7.23,7.23,0,0,1,8,13c.52.12.91.25,1.44.33a11.11,11.11,0,0,0,1.62.16,6.65,6.65,0,0,0,1.18,0,1.09,1.09,0,0,0,1-.59.66.66,0,0,0,.06-.2,1.63,1.63,0,0,1,.07-.3c.13-.28.37-.3.5-.68S13.74,11,13.79,10.84Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M5.49,7.59H4.31a.5.5,0,0,0-.5.5v4.56a.5.5,0,0,0,.5.5H5.49a.5.5,0,0,0,.5-.5V8.09A.5.5,0,0,0,5.49,7.59Z"></path>
    </g>
  </g>`,Us=`<g id="fast_win">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M4.85,4.7,9.67,9.19a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18l-.05.07L4.85,14a.24.24,0,0,1-.11.06.3.3,0,0,1-.13,0A.23.23,0,0,1,4.52,14a.28.28,0,0,1,0-.12v-9a.28.28,0,0,1,0-.12.23.23,0,0,1,.09-.08.3.3,0,0,1,.13,0A.24.24,0,0,1,4.85,4.7Z"></path>
      <path d="M10,4.7l4.82,4.49a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18l-.05.07L10,14a.24.24,0,0,1-.11.06.27.27,0,0,1-.13,0A.18.18,0,0,1,9.7,14a.19.19,0,0,1,0-.12v-9a.19.19,0,0,1,0-.12.18.18,0,0,1,.09-.08.27.27,0,0,1,.13,0A.24.24,0,0,1,10,4.7Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M4.85,4.2,9.67,8.69a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18L9.67,9,4.85,13.5a.24.24,0,0,1-.11.06.3.3,0,0,1-.13,0,.23.23,0,0,1-.09-.08.28.28,0,0,1,0-.12v-9a.28.28,0,0,1,0-.12.23.23,0,0,1,.09-.08.3.3,0,0,1,.13,0A.24.24,0,0,1,4.85,4.2Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M10,4.2l4.82,4.49a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18L14.85,9,10,13.5a.24.24,0,0,1-.11.06.27.27,0,0,1-.13,0,.18.18,0,0,1-.09-.08.19.19,0,0,1,0-.12v-9a.19.19,0,0,1,0-.12.18.18,0,0,1,.09-.08.27.27,0,0,1,.13,0A.24.24,0,0,1,10,4.2Z"></path>
    </g>
  </g>`,ad=`<g id="free_piece">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M9.76,9.66h3.89v4.19a.68.68,0,0,1-.68.68H9.76Z"></path>
      <path d="M4.35,9.66H8.24v4.87H5a.58.58,0,0,1-.26-.06.6.6,0,0,1-.36-.36.58.58,0,0,1,0-.26V9.66Z"></path>
      <path d="M13.39,7H10.13l2-1a.78.78,0,0,0,.29-.25.78.78,0,0,0,.13-.36A.82.82,0,0,0,12.53,5a.87.87,0,0,0-.23-.31l-1.15-1a.76.76,0,0,0-.34-.16.74.74,0,0,0-.39,0,.94.94,0,0,0-.33.2.84.84,0,0,0-.19.33L9.08,7H9l-.83-2.9A.73.73,0,0,0,8,3.81a.79.79,0,0,0-.33-.2.7.7,0,0,0-.38,0,.75.75,0,0,0-.35.16l-1.14,1A.87.87,0,0,0,5.54,5a.71.71,0,0,0,0,.38.78.78,0,0,0,.13.36A.71.71,0,0,0,5.91,6l2,1H4.61a.46.46,0,0,0-.49.44v.87a.47.47,0,0,0,.49.45h8.78a.47.47,0,0,0,.49-.45V7.48A.47.47,0,0,0,13.39,7Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M9.76,14H13a.71.71,0,0,0,.48-.19.72.72,0,0,0,.2-.48V9.16H9.76Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M4.36,13.35a.58.58,0,0,0,0,.26.6.6,0,0,0,.36.36A.58.58,0,0,0,5,14H8.24V9.16H4.36Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M13.39,6.54H10.13l2-1a.78.78,0,0,0,.29-.25.78.78,0,0,0,.13-.36.82.82,0,0,0-.05-.38.87.87,0,0,0-.23-.31l-1.15-1a.76.76,0,0,0-.34-.16.74.74,0,0,0-.39,0,.94.94,0,0,0-.33.2.84.84,0,0,0-.19.33l-.82,2.9H9l-.83-2.9A.73.73,0,0,0,8,3.31a.79.79,0,0,0-.33-.2.7.7,0,0,0-.38,0,.75.75,0,0,0-.35.16l-1.14,1a.87.87,0,0,0-.23.31.71.71,0,0,0,0,.38.78.78,0,0,0,.13.36.71.71,0,0,0,.29.25l2,1H4.61A.46.46,0,0,0,4.12,7v.87a.47.47,0,0,0,.49.45h8.78a.47.47,0,0,0,.49-.45V7A.47.47,0,0,0,13.39,6.54Z"></path>
    </g>
  </g>`,sd=`<path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<path class="${X.ClassNames.Background}" fill="#7979a1" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
<g class="${X.ClassNames.ComponentShadow}" opacity="0.1">
    <polygon points="11.29 11.34 11.29 8.56 7.79 11.3 7.79 11.34 5.39 11.34 9.54 16.5 13.73 11.34 11.29 11.34"></polygon>
    <polygon points="7.83 7.51 7.83 10.32 11.33 7.58 11.33 7.5 13.73 7.5 9.58 2.35 5.39 7.51 7.83 7.51"></polygon>
  </g>
<g>
    <polygon class="${X.ClassNames.Component}" fill="#fff" points="10.9 10.92 10.9 8.13 7.4 10.87 7.4 10.92 5 10.92 9.15 16.07 13.34 10.92 10.9 10.92"></polygon>
    <polygon class="${X.ClassNames.Component}" fill="#fff" points="7.44 7.08 7.44 9.9 10.94 7.16 10.94 7.08 13.34 7.08 9.19 1.93 5 7.08 7.44 7.08"></polygon>
  </g>`,na=`<g id="great_find">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#5c8bb0" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M10.32,14.6a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.7a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.9a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      </g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M10.32,14.1a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
  </g>`,ld=`<g id="forced">
    <g id="fast_win">
      <g>
        <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
        <path class="${X.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
      </g>
    </g>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M14.39,9.07,9,4.31a.31.31,0,0,0-.3,0,.32.32,0,0,0-.13.1.29.29,0,0,0,0,.16V7.42H3.9a.58.58,0,0,0-.19,0,.5.5,0,0,0-.17.11.91.91,0,0,0-.11.16.63.63,0,0,0,0,.19v3.41a.58.58,0,0,0,0,.19.64.64,0,0,0,.11.16.39.39,0,0,0,.17.11.41.41,0,0,0,.19,0H8.5v2.74a.26.26,0,0,0,.16.26.3.3,0,0,0,.16,0A.34.34,0,0,0,9,14.79L14.39,10a.69.69,0,0,0,.16-.22.7.7,0,0,0,0-.52A.69.69,0,0,0,14.39,9.07Z"></path>
    </g>
    <path class="${X.ClassNames.Component}" fill="#fff" d="M14.39,8.57,9,3.81a.31.31,0,0,0-.3,0,.32.32,0,0,0-.13.1A.29.29,0,0,0,8.5,4V6.92H3.9a.58.58,0,0,0-.19,0,.5.5,0,0,0-.17.11.91.91,0,0,0-.11.16.63.63,0,0,0,0,.19v3.41a.58.58,0,0,0,0,.19.64.64,0,0,0,.11.16.39.39,0,0,0,.17.11.41.41,0,0,0,.19,0H8.5v2.74a.26.26,0,0,0,.16.26.3.3,0,0,0,.16,0A.34.34,0,0,0,9,14.29l5.42-4.76a.69.69,0,0,0,.16-.22.7.7,0,0,0,0-.52A.69.69,0,0,0,14.39,8.57Z"></path>
  </g>`,Hl=`<g id="good">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.ComponentShadow}" opacity="0.2" d="M15.11,6.81,9.45,12.47,7.79,14.13a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.78a.39.39,0,0,1-.11-.28.39.39,0,0,1,.11-.27L4.28,7.85a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09l2.69,2.68,5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.81Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M15.11,6.31,9.45,12,7.79,13.63a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.28A.39.39,0,0,1,2.78,9a.39.39,0,0,1,.11-.27L4.28,7.35a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09L7.52,10l5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.31Z"></path>
    </g>
  </g>`,zu=`<g id="inaccuracy">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#f7c045" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M13.66,14.8a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.8V12.9a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,4.1A.5.5,0,0,1,11,3.86l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>
      <path d="M7.65,14.82a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V13a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73A5.58,5.58,0,0,1,9,9a4.85,4.85,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7V11a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27A1.16,1.16,0,0,0,6.49,6,1.61,1.61,0,0,0,6,6.11a3,3,0,0,0-.41.18,1.75,1.75,0,0,0-.29.18l-.11.09A.5.5,0,0,1,5,6.62a.31.31,0,0,1-.21-.13l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.68a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17,3.92,3.92,0,0,1,2.3.75,2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.71,3,3,0,0,1,9.85,7.65Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M13.66,14.3a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.3V12.4a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,3.6A.5.5,0,0,1,11,3.36l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M7.65,14.32a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.49a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6A4.85,4.85,0,0,1,8.48,9a8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24A1.61,1.61,0,0,0,6,5.61a3,3,0,0,0-.41.18A1.75,1.75,0,0,0,5.3,6l-.11.09A.5.5,0,0,1,5,6.12.31.31,0,0,1,4.74,6l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.18a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17A3.92,3.92,0,0,1,8.93,4a2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.21,3,3,0,0,1,9.85,7.15Z"></path>
    </g>
  </g>`,ud=`<g id="incorrect">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#ca3431" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M14,12.51a.57.57,0,0,1,.08.13.39.39,0,0,1,0,.3.5.5,0,0,1-.08.12l-1.38,1.38a.5.5,0,0,1-.12.08l-.15,0-.15,0a.57.57,0,0,1-.13-.08L9,11.37,5.94,14.44a.57.57,0,0,1-.13.08l-.15,0-.15,0a.36.36,0,0,1-.12-.08L4,13.06a.39.39,0,0,1-.11-.27A.41.41,0,0,1,4,12.51L7.07,9.45,4,6.39a.43.43,0,0,1-.11-.28A.39.39,0,0,1,4,5.84L5.39,4.46a.39.39,0,0,1,.27-.11.43.43,0,0,1,.28.11L9,7.52l3.06-3.06a.41.41,0,0,1,.28-.11.39.39,0,0,1,.27.11L14,5.84a.36.36,0,0,1,.08.12.39.39,0,0,1,0,.3.57.57,0,0,1-.08.13L10.92,9.45Z"></path>
    </g>
    <path class="${X.ClassNames.Component}" fill="#f1f2f2" d="M14,12a.57.57,0,0,1,.08.13.39.39,0,0,1,0,.3.5.5,0,0,1-.08.12l-1.38,1.38a.5.5,0,0,1-.12.08l-.15,0-.15,0a.57.57,0,0,1-.13-.08L9,10.87,5.94,13.94a.57.57,0,0,1-.13.08l-.15,0-.15,0a.36.36,0,0,1-.12-.08L4,12.56a.39.39,0,0,1-.11-.27A.41.41,0,0,1,4,12L7.07,9,4,5.89a.43.43,0,0,1-.11-.28A.39.39,0,0,1,4,5.34L5.39,4a.39.39,0,0,1,.27-.11A.43.43,0,0,1,5.94,4L9,7,12.06,4a.41.41,0,0,1,.28-.11.39.39,0,0,1,.27.11L14,5.34a.36.36,0,0,1,.08.12.39.39,0,0,1,0,.3.57.57,0,0,1-.08.13L10.92,9Z"></path>
  </g>`,Ha=`<g id="mate">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M11.44,8.61h1.74l.1-1.55H11.54l.18-2.78H10.17L10,7.06H8.31l.18-2.78H6.94L6.76,7.06H5l-.1,1.55H6.66l-.11,1.68H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.84H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,10.29l.1-1.68H9.89l-.1,1.68Z"></path>
      </g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M11.44,8.11h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.56H8.31l.18-2.78H6.94L6.76,6.56H5l-.1,1.55H6.66L6.55,9.79H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.34H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.79l.1-1.68H9.89l-.1,1.68Z"></path>
    </g>
  </g>`,Uu='<defs><style>.cls-1{fill:#f1f2f2;}.cls-2{fill:#ee6b55;}.cls-3{opacity:.2;}.cls-4{opacity:.3;}</style></defs><g id="incorrect"><path class="cls-4" d="M9,.5C4.03,.5,0,4.53,0,9.5s4.03,9,9,9,9-4.03,9-9S13.97,.5,9,.5Z"/><path class="cls-2" d="M9,0C4.03,0,0,4.03,0,9s4.03,9,9,9,9-4.03,9-9S13.97,0,9,0Z"/><g class="cls-3"><path d="M13.99,12.51s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-1.37,1.37s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-3.06-3.06-3.06,3.06s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-1.37-1.37c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l3.06-3.06-3.06-3.06c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l1.37-1.37c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l3.06,3.06,3.06-3.06c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l1.37,1.37s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-3.06,3.06,3.06,3.06Z"/></g><path class="cls-1" d="M13.99,12.01s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-1.37,1.37s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-3.06-3.06-3.06,3.06s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-1.37-1.37c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l3.06-3.06-3.06-3.06c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l1.37-1.37c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l3.06,3.06,3.06-3.06c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l1.37,1.37s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-3.06,3.06,3.06,3.06Z"/></g>',Gl=`<g id="missed_win">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
        <rect x="2.74" y="8.1" width="12.51" height="3.11" rx="0.36"></rect>
      </g>
      <rect class="${X.ClassNames.Component}" fill="#fff" x="2.74" y="7.6" width="12.51" height="3.11" rx="0.36"></rect>
    </g>
  </g>`,kn=`<g id="mistake">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#e58f2a" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M9.92,15a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08A.31.31,0,0,1,7.39,15V13.19A.32.32,0,0,1,7.48,13l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35A2.42,2.42,0,0,1,7.61,10a2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34.75.75,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07,3,3,0,0,0-.41.18,1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.69L6,5.48a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2,3.07,3.07,0,0,1,.56-.38,5.38,5.38,0,0,1,.89-.37A3.75,3.75,0,0,1,8.9,4a4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.85Z"></path>
      </g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M9.92,14.52a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.69a.32.32,0,0,1,.09-.23l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35a2.42,2.42,0,0,1,.13-.84,2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34A.75.75,0,0,0,9.48,6a1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07A3,3,0,0,0,7.86,6a1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.19L6,5a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2A3.07,3.07,0,0,1,6.81,4a5.38,5.38,0,0,1,.89-.37,3.75,3.75,0,0,1,1.2-.17,4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.35Z"></path>
    </g>
  </g>`,ur=`<g id="resign_black">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <path d="M4.94,6.34H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.78A.62.62,0,0,0,4.94,6.34Z"></path>
      <path d="M12.33,4.48c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69a.46.46,0,0,0,.12-.44c-.21-.78-.8-3-1.1-4.05C12.62,4.44,12.42,4.36,12.33,4.48Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.ComponentShadow}" fill="#fff" d="M4.94,5.74H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.18A.62.62,0,0,0,4.94,5.74Z"></path>
      <path class="${X.ClassNames.ComponentShadow}" fill="#fff" d="M12.33,3.88c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69A.46.46,0,0,0,13.76,8c-.21-.78-.8-3-1.1-4C12.62,3.84,12.42,3.76,12.33,3.88Z"></path>
    </g>
  </g>`,wt=`<g id="resign_white">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <circle class="${X.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
      <g>
        <path d="M4.94,5.74H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.18A.62.62,0,0,0,4.94,5.74Z"></path>
        <path d="M12.33,3.88c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69A.46.46,0,0,0,13.76,8c-.21-.78-.8-3-1.1-4C12.62,3.84,12.42,3.76,12.33,3.88Z"></path>
      </g>
    </g>
    <path class="${X.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
  </g>`,Ne=`<g id="sharp">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#ad5b8c" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M13.37,11.74,9.25,2.81a.22.22,0,0,0-.1-.11.27.27,0,0,0-.28,0,.18.18,0,0,0-.1.11L4.63,11.74a.26.26,0,0,0,0,.15.25.25,0,0,0,.08.14l2.67,2.29.07.09a.3.3,0,0,1,0,.1v1.08a.25.25,0,0,0,.08.18.24.24,0,0,0,.18.07h2.57a.26.26,0,0,0,.18-.07.25.25,0,0,0,.08-.18V14.51a.16.16,0,0,1,0-.1.47.47,0,0,1,.06-.09L13.31,12a.25.25,0,0,0,.08-.14A.26.26,0,0,0,13.37,11.74ZM9,5v8.73a.24.24,0,0,1-.38.17L5.91,11.76a.3.3,0,0,1-.09-.13.22.22,0,0,1,0-.16L8.84,5a.08.08,0,0,1,0,0h.06A.09.09,0,0,1,9,5S9,5,9,5Z"></path>
    </g>
    <path class="${X.ClassNames.Component}" fill="#fff" d="M13.37,11.24,9.25,2.31a.22.22,0,0,0-.1-.11.26.26,0,0,0-.28,0,.18.18,0,0,0-.1.11L4.63,11.24a.26.26,0,0,0,0,.15.25.25,0,0,0,.08.14l2.67,2.29.07.09a.3.3,0,0,1,0,.1v1.08a.25.25,0,0,0,.08.18.24.24,0,0,0,.18.07h2.57a.26.26,0,0,0,.18-.07.25.25,0,0,0,.08-.18V14a.16.16,0,0,1,0-.1.47.47,0,0,1,.06-.09l2.67-2.29a.25.25,0,0,0,.08-.14A.26.26,0,0,0,13.37,11.24ZM9,4.51v8.73a.24.24,0,0,1-.38.17L5.91,11.26a.3.3,0,0,1-.09-.13.22.22,0,0,1,0-.16l3-6.49a.08.08,0,0,1,0,0h.06a.09.09,0,0,1,.05,0S9,4.49,9,4.51Z"></path>
  </g>`,jt=`<g id="take_back">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M3.67,10.38a.25.25,0,0,1,.24-.31L5,9.93a.49.49,0,0,1,.2.05.26.26,0,0,1,.1.2,3.77,3.77,0,0,0,1.26,2.34,3.87,3.87,0,0,0,2.52.94,3.53,3.53,0,0,0,1.47-.31,3.72,3.72,0,0,0,1.22-.81,4.13,4.13,0,0,0,.82-1.2,3.74,3.74,0,0,0,0-3A3.94,3.94,0,0,0,11.77,7a3.72,3.72,0,0,0-1.22-.81,3.53,3.53,0,0,0-1.47-.31,3.43,3.43,0,0,0-1.23.22,3.07,3.07,0,0,0-1.09.6L7.85,7.75c.16.14.22.29.16.38s-.18.16-.4.16H4.45a.33.33,0,0,1-.19,0,1,1,0,0,1-.17-.1A.57.57,0,0,1,4,8a.46.46,0,0,1,0-.21V4.6a.4.4,0,0,1,.16-.38c.11,0,.26,0,.42.17L5.6,5.49a5.93,5.93,0,0,1,1.63-1,5.42,5.42,0,0,1,4,.11A5.17,5.17,0,0,1,12.93,5.8a5.48,5.48,0,0,1,1.16,1.73,5.17,5.17,0,0,1,.44,2.12,5,5,0,0,1-.44,2.12,5.54,5.54,0,0,1-2.88,2.91,5.77,5.77,0,0,1-2.13.42,5.39,5.39,0,0,1-1.94-.37,5.36,5.36,0,0,1-2.85-2.48A5.43,5.43,0,0,1,3.67,10.38Z"></path>
    </g>
    <path class="${X.ClassNames.Component}" fill="#fff" d="M3.67,9.88a.25.25,0,0,1,.24-.31L5,9.43a.49.49,0,0,1,.2.05.26.26,0,0,1,.1.2A3.77,3.77,0,0,0,6.56,12,3.87,3.87,0,0,0,9.08,13a3.53,3.53,0,0,0,1.47-.31,3.72,3.72,0,0,0,1.22-.81,4.13,4.13,0,0,0,.82-1.2,3.74,3.74,0,0,0,0-3,3.94,3.94,0,0,0-.82-1.2,3.72,3.72,0,0,0-1.22-.81,3.53,3.53,0,0,0-1.47-.31,3.43,3.43,0,0,0-1.23.22,3.07,3.07,0,0,0-1.09.6L7.85,7.25c.16.14.22.29.16.38s-.18.16-.4.16H4.45a.33.33,0,0,1-.19,0,1,1,0,0,1-.17-.1A.57.57,0,0,1,4,7.47a.46.46,0,0,1,0-.21V4.1a.4.4,0,0,1,.16-.38c.11-.05.26,0,.42.17L5.6,5A5.93,5.93,0,0,1,7.23,4a5.42,5.42,0,0,1,4,.11A5.17,5.17,0,0,1,12.93,5.3,5.48,5.48,0,0,1,14.09,7a5.17,5.17,0,0,1,.44,2.12,5,5,0,0,1-.44,2.12,5.54,5.54,0,0,1-2.88,2.91,5.77,5.77,0,0,1-2.13.42,5.39,5.39,0,0,1-1.94-.37,5.63,5.63,0,0,1-1.65-1,5.59,5.59,0,0,1-1.2-1.5A5.43,5.43,0,0,1,3.67,9.88Z"></path>
  </g>`,yn=`<g id="threat">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${X.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M15.12,9.65a6.14,6.14,0,0,1-3.78,5.65,6.19,6.19,0,0,1-3.53.35A6.15,6.15,0,0,1,3,10.84,6.11,6.11,0,0,1,9,3.53a6.15,6.15,0,0,1,6.12,6.12ZM5,9.65a4,4,0,0,0,.67,2.22,4.09,4.09,0,0,0,1.79,1.47,4,4,0,0,0,5.22-5.22A4,4,0,0,0,5,9.65Z"></path>
      <path d="M6.75,9.65a2.24,2.24,0,0,0,.38,1.25,2.27,2.27,0,0,0,1,.83,2.22,2.22,0,0,0,1.3.12,2.22,2.22,0,0,0,1.76-1.76,2.22,2.22,0,0,0-.13-1.3,2.25,2.25,0,0,0-4.32.86Z"></path>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M15.12,9.15a6.14,6.14,0,0,1-3.78,5.65,6.19,6.19,0,0,1-3.53.35A6.15,6.15,0,0,1,3,10.34,6.11,6.11,0,0,1,9,3a6.15,6.15,0,0,1,6.12,6.12ZM5,9.15a4,4,0,0,0,.67,2.22,4.09,4.09,0,0,0,1.79,1.47,4,4,0,0,0,5.22-5.22A4,4,0,0,0,5,9.15Z"></path>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M6.75,9.15a2.24,2.24,0,0,0,.38,1.25,2.27,2.27,0,0,0,1,.83,2.22,2.22,0,0,0,1.3.12A2.22,2.22,0,0,0,11.2,9.59a2.22,2.22,0,0,0-.13-1.3,2.25,2.25,0,0,0-4.32.86Z"></path>
    </g>
  </g>`,En=`<path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<path class="${X.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
<path d="M8.57,7.26,8.11,10l.89.86L9.89,10,9.45,7.26ZM9,12.86A3.35,3.35,0,1,1,12.36,9.5,3.34,3.34,0,0,1,9,12.86Zm.7-8.29V4.12h.82V2.79h-3V4.12H8.3v.45a5,5,0,1,0,1.4,0Z"></path>
<path class="${X.ClassNames.ComponentShadow}" fill="#fff" d="M8.57,6.76,8.11,9.48l.89.86.89-.86L9.45,6.76ZM9,12.36A3.35,3.35,0,1,1,12.36,9,3.34,3.34,0,0,1,9,12.36Zm.7-8.29V3.62h.82V2.29h-3V3.62H8.3v.45a5,5,0,1,0,1.4,0Z"></path>`,Kt=`<path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<circle class="${X.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
<path class="${X.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
<path d="M8.57,6.76,8.11,9.48l.89.86.89-.86L9.45,6.76ZM9,12.36A3.35,3.35,0,1,1,12.36,9,3.34,3.34,0,0,1,9,12.36Zm.7-8.29V3.62h.82V2.29h-3V3.62H8.3v.45a5,5,0,1,0,1.4,0Z"></path>`,Zt=`
  <path
    class="${X.ClassNames.Shadow}"
    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"
    opacity=".3"></path>
  <path
    class="${X.ClassNames.Background}"
    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"
    fill="#8a8886"></path>
  <path
    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"
    class="${X.ClassNames.ComponentShadow}"
    opacity=".3"></path>
  <path
    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"
    class="${X.ClassNames.Component}"
    fill="#ffffff"></path>
`,Bn=`<g id="winner">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path class="cls-4" d="M4.35,12.66,2.86,7.72a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,7.34a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21.05L6.27,9.15l.14,0h.14a.31.31,0,0,0,.13-.06A.48.48,0,0,0,6.77,9L8.69,5.54a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18L11.22,9a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21-.05.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.37.37,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.66Z"></path>
    </g>
    <path class="${void 0}" fill-rule="evenodd" d="M4.35,12.06,2.86,7.12a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,6.74a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21,0L6.27,8.55l.14,0h.14a.31.31,0,0,0,.13-.06.48.48,0,0,0,.09-.11L8.69,4.94a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18l1.91,3.48a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21,0,.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.38.38,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.06Z"></path>
  </g>`,xn=`<g id="winner-white" fill="#fff">
    <g>
      <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${X.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
      <path class="cls-4" d="M4.35,12.66,2.86,7.72a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,7.34a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21.05L6.27,9.15l.14,0h.14a.31.31,0,0,0,.13-.06A.48.48,0,0,0,6.77,9L8.69,5.54a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18L11.22,9a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21-.05.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.37.37,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.66Z"></path>
    </g>
    <path class="${void 0}" fill-rule="evenodd" d="M4.35,12.06,2.86,7.12a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,6.74a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21,0L6.27,8.55l.14,0h.14a.31.31,0,0,0,.13-.06.48.48,0,0,0,.09-.11L8.69,4.94a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18l1.91,3.48a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21,0,.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.38.38,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.06Z"></path>
  </g>`,Jr=`<g id="interesting">
    <path class="${X.ClassNames.Shadow}" d="m9 .5a9 9 0 1 0 9 9 9 9 0 0 0 -9-9z" opacity="0.3"></path>
    <path  class="${X.ClassNames.Background}" d="m0 9a9 9 0 1 0 9-9 9 9 0 0 0 -9 9z" fill="#7979a1"></path>
    <g  class="${X.ClassNames.Component}" opacity=".2">
      <path d="m4.75 12.9a.28.28 0 0 1 0-.13.25.25 0 0 1 .08-.1.33.33 0 0 1 .23-.1h2 .12l.11.08a.36.36 0 0 1 .07.1.59.59 0 0 1 0 .13v1.9a.36.36 0 0 1 -.09.24.27.27 0 0 1 -.1.08h-.13-2-.12a.44.44 0 0 1 -.19-.19.28.28 0 0 1 0-.13zm-.06-8.8a.41.41 0 0 1 .08-.24.35.35 0 0 1 .23-.1h2.14.13l.11.08a.5.5 0 0 1 .09.24l-.15 6.77c0 .21-.15.31-.34.31h-1.78a.3.3 0 0 1 -.2-.06.3.3 0 0 1 -.1-.1.31.31 0 0 1 0-.13z"/><path d="m12.39 14.82a.25.25 0 0 1 0 .12.28.28 0 0 1 -.08.11l-.1.07h-.12-1.91a.27.27 0 0 1 -.13 0 .39.39 0 0 1 -.05-.12.35.35 0 0 1 -.08-.22v-1.78a.32.32 0 0 1 .09-.23l.1-.07h.12 1.89a.33.33 0 0 1 .23.09.61.61 0 0 1 .07.1.27.27 0 0 1 0 .13zm2.2-7.17a2.49 2.49 0 0 1 -.36.73 4.51 4.51 0 0 1 -.48.6 6 6 0 0 1 -.52.49q-.39.34-.66.63a1 1 0 0 0 -.27.7v.2a.22.22 0 0 1 0 .12.35.35 0 0 1 -.17.17.2.2 0 0 1 -.11 0h-1.75-.12a.23.23 0 0 1 -.1-.07.26.26 0 0 1 -.07-.1.22.22 0 0 1 .02-.12v-.35a2.41 2.41 0 0 1 .12-.84 2.91 2.91 0 0 1 .33-.66 3.38 3.38 0 0 1 .45-.55l.49-.42a6.55 6.55 0 0 0 .61-.62 1 1 0 0 0 .26-.67.66.66 0 0 0 -.08-.34.64.64 0 0 0 -.18-.27 1.18 1.18 0 0 0 -.77-.28 1.66 1.66 0 0 0 -.49.07 3 3 0 0 0 -.41.18 2.29 2.29 0 0 0 -.29.18l-.1.09a.53.53 0 0 1 -.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.29.29 0 0 1 0-.4 1.36 1.36 0 0 1 .21-.2 3 3 0 0 1 .55-.38 5.87 5.87 0 0 1 .9-.37 3.75 3.75 0 0 1 1.2-.17 4.12 4.12 0 0 1 1.2.19 4 4 0 0 1 1.09.56 2.73 2.73 0 0 1 .77.92 2.7 2.7 0 0 1 .29 1.28 2.72 2.72 0 0 1 -.11.98z"/></g><g fill="#fff"><path d="m4.75 12.4a.28.28 0 0 1 0-.13.25.25 0 0 1 .08-.1.33.33 0 0 1 .23-.1h2 .12l.11.08a.36.36 0 0 1 .07.1.59.59 0 0 1 0 .13v1.9a.36.36 0 0 1 -.09.24.27.27 0 0 1 -.1.08h-.13-2-.12a.44.44 0 0 1 -.19-.19.28.28 0 0 1 0-.13zm-.06-8.8a.41.41 0 0 1 .08-.24.35.35 0 0 1 .23-.1h2.14.13l.11.08a.5.5 0 0 1 .09.24l-.15 6.77c0 .21-.15.31-.34.31h-1.78a.3.3 0 0 1 -.2-.06.3.3 0 0 1 -.07-.1.31.31 0 0 1 0-.13z"/><path d="m12.39 14.32a.25.25 0 0 1 0 .12.28.28 0 0 1 -.08.11l-.1.07h-.12-1.91a.27.27 0 0 1 -.13 0 .39.39 0 0 1 -.1-.08.35.35 0 0 1 -.08-.22v-1.83a.32.32 0 0 1 .09-.23l.1-.07h.12 1.89a.33.33 0 0 1 .23.09.61.61 0 0 1 .07.1.27.27 0 0 1 0 .13zm2.2-7.17a2.49 2.49 0 0 1 -.36.73 4.51 4.51 0 0 1 -.48.6 6 6 0 0 1 -.52.49q-.39.34-.66.63a1 1 0 0 0 -.27.7v.22a.22.22 0 0 1 0 .12.35.35 0 0 1 -.17.17.2.2 0 0 1 -.11 0h-1.75-.12a.23.23 0 0 1 -.1-.07.26.26 0 0 1 -.07-.1.22.22 0 0 1 0-.12v-.35a2.41 2.41 0 0 1 .12-.84 2.91 2.91 0 0 1 .33-.66 3.38 3.38 0 0 1 .45-.55l.49-.42a6.55 6.55 0 0 0 .63-.64 1 1 0 0 0 .26-.67.66.66 0 0 0 -.08-.34.64.64 0 0 0 -.18-.27 1.18 1.18 0 0 0 -.73-.24 1.66 1.66 0 0 0 -.49.07 3 3 0 0 0 -.41.18 2.29 2.29 0 0 0 -.37.21l-.1.09a.53.53 0 0 1 -.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.29.29 0 0 1 0-.4 1.36 1.36 0 0 1 .21-.2 3 3 0 0 1 .55-.38 5.87 5.87 0 0 1 .9-.37 3.75 3.75 0 0 1 1.2-.17 4.12 4.12 0 0 1 1.2.19 4 4 0 0 1 1.16.52 2.73 2.73 0 0 1 .77.92 2.7 2.7 0 0 1 .29 1.28 2.72 2.72 0 0 1 -.14.95z"/>
    </g>
  </g>`,Un=`<g id="warning">
    <g>
      <g class="${X.ClassNames.Shadow}" opacity="0.3">
        <path d="M.32,14.3,6.94,2.83a2.37,2.37,0,0,1,4.11,0L17.68,14.3a2.38,2.38,0,0,1-2.06,3.56H2.38A2.38,2.38,0,0,1,.32,14.3Z"></path>
      </g>
      <path class="${X.ClassNames.Background}" fill="#ec6250" d="M.32,13.8,6.94,2.33a2.37,2.37,0,0,1,4.11,0L17.68,13.8a2.38,2.38,0,0,1-2.06,3.56H2.38A2.38,2.38,0,0,1,.32,13.8Z"></path>
    </g>
    <g>
      <g class="${X.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M10.21,15.19a.5.5,0,0,1,0,.12.26.26,0,0,1-.07.1.31.31,0,0,1-.22.09H8.1a.25.25,0,0,1-.12,0,.31.31,0,0,1-.09-.07.35.35,0,0,1-.08-.22V13.45a.29.29,0,0,1,.09-.21A.22.22,0,0,1,8,13.17l.11,0H9.9a.31.31,0,0,1,.22.09.27.27,0,0,1,.09.21ZM10.1,11.6a.22.22,0,0,1,0,.11.23.23,0,0,1-.07.1.27.27,0,0,1-.21.07H8.18a.29.29,0,0,1-.31-.28L7.73,5.41a.35.35,0,0,1,.08-.22.23.23,0,0,1,.1-.07A.25.25,0,0,1,8,5.1H10a.32.32,0,0,1,.23.09.35.35,0,0,1,.08.22Z"></path>
      </g>
      <path class="${X.ClassNames.Component}" fill="#fff" d="M10.21,14.69a.5.5,0,0,1,0,.12.26.26,0,0,1-.07.1A.31.31,0,0,1,9.9,15H8.1A.25.25,0,0,1,8,15a.31.31,0,0,1-.09-.07.35.35,0,0,1-.08-.22V13a.29.29,0,0,1,.09-.21A.22.22,0,0,1,8,12.67l.11,0H9.9a.31.31,0,0,1,.22.09.27.27,0,0,1,.09.21ZM10.1,11.1a.22.22,0,0,1,0,.11.23.23,0,0,1-.07.1.27.27,0,0,1-.21.07H8.18a.29.29,0,0,1-.31-.28L7.73,4.91a.35.35,0,0,1,.08-.22.23.23,0,0,1,.1-.07A.25.25,0,0,1,8,4.6H10a.32.32,0,0,1,.23.09.35.35,0,0,1,.08.22Z"></path>
    </g>
  </g>`,$t=`<g id="equal">
    <path class="${X.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
    <path class="${X.ClassNames.Background}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
    <g class="${X.ClassNames.ComponentShadow}" opacity="0.4">
      <path d="M5.31,8.36l-.15,0A.57.57,0,0,1,5,8.25.57.57,0,0,1,5,8.12a.4.4,0,0,1,0-.15V6a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V8a.4.4,0,0,1,0,.15.57.57,0,0,1-.08.13.57.57,0,0,1-.13.08l-.15,0Z"/>
      <path d="M5.31,13.36l-.15,0A.57.57,0,0,1,5,13.25.57.57,0,0,1,5,13.12a.4.4,0,0,1,0-.15V11a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V13a.4.4,0,0,1,0,.15.33.33,0,0,1-.21.21l-.15,0Z"/>
    </g>
    <g>
      <path class="${X.ClassNames.Component}" fill="#f1f2f2" d="M5.31,7.86l-.15,0A.57.57,0,0,1,5,7.75.57.57,0,0,1,5,7.62a.4.4,0,0,1,0-.15V5.53a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V7.47a.4.4,0,0,1,0,.15.57.57,0,0,1-.08.13.57.57,0,0,1-.13.08l-.15,0Z"/>
      <path class="${X.ClassNames.Component}" fill="#f1f2f2" d="M5.31,12.86l-.15,0A.57.57,0,0,1,5,12.75.57.57,0,0,1,5,12.62a.4.4,0,0,1,0-.15V10.53a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39v1.94a.4.4,0,0,1,0,.15.33.33,0,0,1-.21.21l-.15,0Z"/>
    </g>
  </g>`,Cr={[pe.Alternative]:rt,[pe.BestMove]:bn,[pe.Blunder]:Jn,[pe.Book]:sr,[pe.Brilliant]:tr,[pe.CheckmateBlack]:wn,[pe.CheckmateWhite]:fs,[pe.Correct]:rd,[pe.Critical]:id,[pe.DrawBlack]:Fu,[pe.DrawWhite]:od,[pe.Excellent]:Ul,[pe.FastWin]:Us,[pe.Forced]:ld,[pe.FreePiece]:ad,[pe.Gamechanger]:sd,[pe.Good]:Hl,[pe.GreatFind]:na,[pe.Inaccuracy]:zu,[pe.Incorrect]:ud,[pe.Mate]:Ha,[pe.Miss]:Uu,[pe.MissedWin]:Gl,[pe.Mistake]:kn,[pe.ResignBlack]:ur,[pe.ResignWhite]:wt,[pe.Sharp]:Ne,[pe.Takeback]:jt,[pe.Threat]:yn,[pe.TimeoutBlack]:En,[pe.TimeoutWhite]:Kt,[pe.Undo]:Zt,[pe.Winner]:Bn,[pe.WinnerWhite]:xn,[pe.Interesting]:Jr,[pe.Warning]:Un,[pe.Equal]:$t};function Gn({className:t="",path:r="",size:i="24",viewBox:o="0 0 18 19"}){return`
    <svg xmlns="http://www.w3.org/2000/svg" class="${t}" width="${i}" height="${i}" viewBox="${o}">
      ${r}
    </svg>
  `}function or({square:t,isFlipped:r,effectEl:i}){const o=zt(t,r);o.top&&i.classList.add("tuck-top"),o.right&&i.classList.add("tuck-right")}function zt(t,r){const i={top:r?"1":"8",right:r?"a":"h"};return{top:t.includes(i.top),right:t.includes(i.right)}}function hi({board:t,el:r,options:i}){const o=document.createComment("/Effects");t.addToDom({el:o,insertAfter:!0,type:S.HoverSquare});const s=new Map;return{addEffects:l,getEffectElements:f,removeEffects:c};function l(p){p.forEach(m=>{const{data:{square:v,type:E},key:y}=m,M=document.createElement("div");M.classList.add("effect"),M.innerHTML=Gn({path:Cr[E],size:"100%"}),be({el:M,square:v}),i.test&&Ue(M,{[Ze.Element]:zn.Effect,[Ze.Square]:v,[Ze.Type]:E}),Qe(v)&&or({square:v,isFlipped:t.el.classList.contains("flipped"),effectEl:M});const R=s.get(y);R&&t.el.removeChild(R),r.insertBefore(M,o),s.set(y,M)})}function c(p){p.forEach(m=>{const{key:v}=m,E=s.get(v);E&&(t.el.removeChild(E),s.delete(v))})}function f(){return s}}function ci(t){const{api:r,options:i,renderer:o}=t;if(o?.extendRenderer(hi),!r.markings)return;const s=r.markings,l=i.allowMarkings?s.getAllWhere({types:[Sn]}):[];o?.addEffects(l,t)}function Vi(){return[{condition:si(Sn),handler:r},{condition:on(Sn),handler:i},{condition:Je(x.InstanceEvents.RendererSet),handler:t}];function t(o,s){ci(s)}function r(o,s){const{renderer:l}=s,c=o.data.filter(en(Sn));l?.addEffects(c,s)}function i(o,s){const{renderer:l}=s,c=o.data.filter(en(Sn));l?.removeEffects(c,s)}}function ji(){return{create:ci,match:Vi(),name:Xn.Plugin.Name,destroy:t};function t(r){const{api:i,renderer:o}=r;if(!i.markings)return;const l=i.markings.getAllWhere({types:[Sn]});o?.removeEffects(l,r)}}function go(){return{match:[{condition:Ht([x.InstanceEvents.RendererSet,x.APIEvents.Load]),handler:t}],name:C.Plugin.Name};function t(r,i){var o;(o=i?.renderer)==null||o.fadeSetup(i)}}var oi;(function(t){t.FlipBoardModifierKey="x",function(r){r.Name="flip-board"}(t.Plugin||(t.Plugin={}))})(oi||(oi={}));var Ci;(function(t){(function(r){r.Name="keys"})(t.Plugin||(t.Plugin={})),function(r){r.Keydown="Keydown",r.Keyup="Keyup"}(t.Events||(t.Events={}))})(Ci||(Ci={}));function ra(t=oi.FlipBoardModifierKey){let r;return{match:[{condition:Ht([x.InstanceEvents.Create,x.InstanceEvents.RendererSet,x.OptionsEvents.Update]),handler:o},{condition:Je(Ci.Events.Keydown),handler:i}],name:oi.Plugin.Name};function i(s,l){const{api:c,options:f,queue:p}=l;s.data===t&&p.add(c.setOptions,{flipped:!f.flipped})}function o(s,l){const{options:c,renderer:f,state:p}=l;if(f){if(c.flipped!==r){f.flipBoard(c.flipped,l);const m=p.get(x.State.PromotionMove);m&&f.openPromotionWindow(m,l)}r=c.flipped}}}function Ki(t){return Object.prototype.toString.call(t)==="[object Object]"}function _i(t,r,{isDuplicateWhen:i}={}){const o=new Set(t);return r.forEach(s=>{if(Ki(s)&&i){const l=t.find(c=>i(c,s));l&&o.delete(l);return}o.delete(s)}),[...o]}function Ui(t,r){return t.key===r.key&&t.data.color===r.data.color}function To(t){const r=new Set(t),i=new Map;return ze(Ee({},r),{addModule:s,getModules:c,removeModule:f,getAll:l,update:p,clearState:o});function o(){i.clear()}function s(m){return r.add(m)}function l(){return Array.from(i.values())}function c(){return Array.from(r)}function f(m){return r.delete(m)}function p(...m){const v=l();o();const E=Array.from(c().reduce((R,D)=>(D(...m).forEach(W=>{R.set(W.data.square,W)}),R),new Map).values());E.forEach(R=>i.set(R.data.square,R));const y=_i(E,v,{isDuplicateWhen:Ui}),M=_i(v,E,{isDuplicateWhen:Ui});return{toAdd:y,toRemove:M}}}function hs(t){return function(){return To(t)}}function Mo(t){const{api:r,renderer:i}=t;if(!r.markings||!r.highlights)return;const o=r.highlights;o.clearState();const{toAdd:s}=o.update({data:{},type:"DummyHighlightInitEventName"},t);i?.addHighlights(s,t)}function oo(t){const r=new Set(Array.isArray(t)?t:Object.values(t));return function(o){return!r.has(o.type)}}function Oo(){return[{condition:oo([x.UserEvents.Pointermove,x.InstanceEvents.RendererSet,x.APIEvents.NodeUpdated]),handler:r},{condition:Je(x.InstanceEvents.RendererSet),handler:t}];function t(i,o){Mo(o)}function r(i,o){const{api:s,renderer:l}=o;if(!l)return;const c=s.highlights,{toAdd:f,toRemove:p}=c.update(i,o);l.removeHighlights(p,o),l.addHighlights(f,o)}}function Hs(t){return{api:hs(t),destroy:r,create:Mo,match:Oo(),name:kt.Plugin.Name};function r(i){const{api:o,renderer:s}=i,l=o.highlights;s?.removeHighlights(l.getAll(),i)}}function gi(...t){return function(i,o){return t.every(s=>s(i,o))}}function cd(t){return function(i,o){var s,l;return!!((l=(s=o.api)==null?void 0:s.getOptions)!=null&&l.call(s)[t])}}function Gs(){const t=(0,P.c)({data:{square:void 0},initialState:"hidden",states:{hidden:{dragPiece:i=>({data:{square:i},nextState:"showing"})},showing:{dragPiece:i=>({data:{square:i},nextState:"showing"}),dropPiece:()=>({nextState:"hidden"}),setOptionToFalse:()=>({nextState:"hidden"})}}});return{match:[{condition:gi(cd(Rr.BooleanOptions.HoverSquareOutline),oo([x.APIEvents.ClearMarkings,Qn.Events.Tick])),handler:r}],name:Xe.Plugin.Name};function r(i,o){const{options:s,renderer:l,state:c}=o,f=c.get(x.State.HideHoverSquare)!==!0&&c.get(x.State.MachineState)!==ne.States.PromotionAreaShowing&&c.get(x.State.DraggingPiece),p=i.data&&(i.data.square||i.data.squareInsideBoard||t.getData().square||f);let m=!1;s.highlightMoves?f?m=t.transition("dragPiece",p):m=t.transition("dropPiece"):m=t.transition("setOptionToFalse"),!(!m||!l)&&(t.getCurrentState()==="hidden"?l.hideHoverSquare(o):l.showHoverSquare(t.getData().square,o))}}function Vl(t){return Array.isArray(t)?t:[t]}function dd(t){return t.reduce((r,i,o,s)=>{if(o%2===0)return r;const l=s[o-1];return r[l]=i,r},{})}var ao;(function(t){t.Alt="a",t.Ctrl="l",t.Custom="c",t.Default="d",t.Shift="s"})(ao||(ao={}));function xo(t){var r;const{color:i,data:o=[],type:s}=t,l=dd(o);Object.keys(l).forEach(v=>{l[v]=decodeURIComponent(l[v])});const c=l,{persistent:f}=c,p=Me(c,["persistent"]),m={key:jl(t.key,t.type),node:!0,data:ze(Ee({},p),{keyPressed:(r=p.keyPressed)!=null?r:Hu(i)}),type:s};return typeof f<"u"&&(m.persistent=f==="true"),m}function jl(t,r){return`${r}|${t}`}function Hu(t){switch(t){case ao.Alt:return $r.Alt;case ao.Default:return $r.None;case ao.Shift:return $r.Shift;case ao.Ctrl:return $r.Ctrl;default:return}}function Vs(t,r){const i=[],o=r??t.markings();return Object.values(o).forEach(s=>{Object.values(s).forEach(l=>{i.push(xo(l))})}),i}function ps(t,r,i){const{key:o}=r,s=t.ids(),l=r.node&&typeof r.node=="object",{move:c,line:f}=r.node;l&&t.selectPosition(c,f);const p=Vs(t,i);return l&&t.selectPosition(s.move,s.line),!!p.find(m=>m.key===o)}function Gu(t,...r){const i=Ee({},t);return r.forEach(o=>{delete i[o]}),i}function $l(t){return Object.entries(t).reduce((r,[i,o])=>(o===void 0||r.push(i,o.toString()),r),[])}function Wl(t){const{data:r,persistent:i}=t,o=i!==void 0?ze(Ee({},r),{persistent:i}):r,s=ju(r.keyPressed),l=s===ao.Custom?o:Gu(o,"color");return Object.keys(l).forEach(c=>{l[c]=encodeURIComponent(l[c])}),{color:s!==ao.Custom?s:void 0,data:$l(l),key:Vu(t),type:t.type}}function Vu(t){const{data:{from:r,square:i,to:o},key:s}=t;return i||(r&&o?`${r}${o}`:s)}function ju(t){switch(t){case $r.Alt:return ao.Alt;case $r.None:return ao.Default;case $r.Shift:return ao.Shift;case $r.Ctrl:return ao.Ctrl;default:return ao.Custom}}var pi;(function(t){(function(r){r.$1="$1",r.$2="$2",r.$3="$3",r.$4="$4",r.$5="$5",r.$6="$6",r.$9="$9",r.$10="$10",r.$11="$11",r.$12="$12",r.$13="$13",r.$14="$14",r.$15="$15",r.$16="$16",r.$17="$17",r.$18="$18",r.$19="$19",r.$22="$22",r.$36="$36",r.$40="$40",r.$146="$146",r.$256="$256"})(t.Nags||(t.Nags={})),function(r){r.$1="!",r.$2="?",r.$3="!!",r.$4="??",r.$5="!?",r.$6="?!",r.$9="\u2612",r.$10="=",r.$11="=",r.$12="=",r.$13="\u221E",r.$14="\u2A72",r.$15="\u2A71",r.$16="\xB1",r.$17="\u2213",r.$18="+-",r.$19="-+",r.$22="\u2A00",r.$40="\u2191",r.$146="N",r.$256="=/\u221E"}(t.Values||(t.Values={})),function(r){r.GreatFind="!",r.Mistake="?",r.Brilliant="!!",r.Blunder="??",r.Interesting="!?",r.Inaccuracy="?!"}(t.Effects||(t.Effects={})),function(r){r.Drawish="=",r.Unclear="\u221E",r.WhiteHasModerateAdvantage="\xB1",r.BlackHasModerateAdvantage="\u2213",r.WhiteHasDecisiveAdvantage="+-",r.BlackHasDecisiveAdvantage="-+",r.PositionInZugzwang="\u2A00",r.WithCompensation="\u2191",r.Novelty="N",r.WithAttack="=/\u221E"}(t.Additional||(t.Additional={}))})(pi||(pi={}));function ql(t,r,i){const o=Wl(r),s=t.ids(),l=r.node&&typeof r.node=="object";if(l){const{move:f,line:p}=r.node;t.selectPosition(f,p)}t.mark(o,!0),pi.Effects[r.data.type]&&i.updateNode(l?r.node:s,{annotation:"",isSync:!0}),l&&t.selectPosition(s.move,s.line)}function fd(t,r,i){const o=Wl(r),s=t.ids(),l=r.node&&typeof r.node=="object";if(l){const{move:v,line:E}=r.node;t.selectPosition(v,E)}t.mark(o);const c=pi.Effects[r.data.type],f=i.getSelectedNode(),p=f?.to===r.data.square,m=f?.annotation===c;c&&p&&!m&&i.updateNode(l?r.node:s,{annotation:c,isSync:!0}),l&&t.selectPosition(s.move,s.line)}const Io=[x.APIEvents.CreateGame,x.APIEvents.DeletePosition,x.APIEvents.Load,x.APIEvents.Move,x.APIEvents.MoveBackward,x.APIEvents.MoveForward,x.APIEvents.MoveVariation,x.APIEvents.PromoteVariation,x.APIEvents.SelectLineEnd,x.APIEvents.SelectLineStart,x.APIEvents.SelectNode,x.APIEvents.Reload,x.APIEvents.ResetToMainLine,x.APIEvents.Undo];function ms(...t){if(t.length===1)return t[0];const r=new Set;for(const i of t)for(const o of i)t.every(s=>s.has(o))&&r.add(o);return r}function hd(...t){const r=new Set;for(const i of t)for(const o of i)r.add(o);return r}function vs({batchCallbacks:t=!0,onEntryAdded:r,onEntryRemoved:i,primaryKey:o="id"}={primaryKey:"id"}){const s=new Map,l=new Map,{flush:c,isBatching:f,stack:p,startBatching:m}=D({added:r,removed:i});function v(Qt){return t&&f()?p("added")(Qt):r?.(Qt)}function E(Qt){return t&&f()?p("removed")(Qt):i?.(Qt)}return{addOne:R,addMany:y(M),batch:y,getAll:W,getManyByTags:ut,getMatchingKeys:Tt,getMap:dt,getMany:Te,getOne:Ie,removeAll:y(rr),removeMany:y(Fn),removeManyByTags:y(pn),removeOne:Dt};function y(Qt){return(...Vn)=>{m();const ar=Qt(...Vn);return c(),ar}}function M(Qt,Vn){return Qt.map((Br,dr)=>R(Br,Vn?.[dr]))}function R(Qt,Vn){const ar=Qt[o],Br=s.get(ar);return Br&&(s.delete(ar),E?.(Br)),Vn?.forEach(dr=>{var Gr;l.get(dr)||l.set(dr,new Set),(Gr=l.get(dr))==null||Gr.add(ar)}),s.set(ar,Qt),v?.(Qt),ar}function D(Qt){let Vn=!1;const ar=new Map;return Object.entries(Qt).forEach(([lr,ki])=>{ki&&ar.set(lr,{callback:ki,entries:new Set})}),{flush:Gr,isBatching(){return Vn},stack:Br,startBatching:dr};function Br(lr){return function(io){var Oi;(Oi=ar.get(lr))==null||Oi.entries.add(io)}}function dr(){Vn=!0}function Gr(){ar.forEach(lr=>{var ki;const io=Array.from(lr.entries.values());io.length&&((ki=lr.callback)==null||ki.call(lr,io),lr.entries.clear()),Vn=!1})}}function W(){return Array.from(s.values())}function Te(Qt){return Qt.map(Vn=>s.get(Vn)).filter(Vn=>Vn!==void 0)}function dt(){return s}function Ie(Qt){return s.get(Qt)}function ut(Qt,Vn={}){return Tt(Qt,Vn).map(ar=>s.get(ar)).filter(ar=>ar!==void 0)}function Tt(Qt,Vn={}){const{matchAll:ar}=Vn,Br=Qt.map(Gr=>l.get(Gr)).filter(Gr=>Gr!==void 0);let dr;return ar?dr=Array.from(ms(...Br)):dr=Array.from(hd(...Br)),dr}function rr(){for(const[Qt,Vn]of s.entries())E?.(Vn);return s.clear(),l.clear(),!0}function Fn(Qt){return Qt.every(Dt)}function pn(Qt,Vn={}){return Tt(Qt,Vn).every(ar=>Dt(ar))}function Dt(Qt){var Vn;const ar=s.get(Qt);ar&&(s.delete(Qt),E?.(ar));const Br=l.entries();for(const[dr,Gr]of Br)Gr.has(Qt)&&Gr.delete(Qt),((Vn=l.get(dr))==null?void 0:Vn.size)===0&&l.delete(dr);return!0}}function Pa(t){const{node:r,persistent:i,tags:o=[],type:s}=t;return[r?"node":"board",i?"persistent":"temporary",...o,s]}function Kl(t){const{from:r,square:i,to:o}=t.data,s=i?[i]:[r,o];for(const l of s)if(!pd(l))return!1;return!0}function pd(t){return/^([a-h][1-8])$/.test(t)}function $u(t,r){const i={a:Object.getOwnPropertyNames(t),b:Object.getOwnPropertyNames(r)};return i.a.length!==i.b.length?!1:i.a.every(o=>t[o]===r[o])}function Wu({generateKey:t=$,context:r,onMarkingAdded:i,onMarkingRemoved:o}={}){const s=vs({batchCallbacks:!0,onEntryAdded:i,onEntryRemoved:o,primaryKey:"key"}),l=vs({batchCallbacks:!0,onEntryAdded:i,onEntryRemoved:o,primaryKey:"id"});return{addOne:p,addMany:c,getMany:s.getMany,getAll:s.getAll,getAllWhere:E,getOne:s.getOne,removeAll:s.removeAll,removeAllWhere:M,removeOne:v,removeMany:m,toggleMany:R,toggleOne:D,factory:{buildStandardAnalysisHighlight:Te,buildStandardArrow:dt}};function c(Ie){return f(Ie)}function f(Ie){return Ie.map(p)}function p(Ie){if(!Kl(Ie))return null;const ut=Pa(Ie);if(Ie.node&&typeof Ie.node=="object"){const Tt=r?.api.getSelectedNode(),rr=Tt?.ids.move===Ie.node.move&&Tt?.ids.line===Ie.node.line,Fn=W(Ie),{move:pn,line:Dt}=Fn.node;if(Fn.id=`${Fn.key}-${pn}|${Dt}`,l.addOne(Fn,ut),rr)Ie.node=!0;else return Fn.key}return s.addOne(W(Ie),ut)}function m(Ie){return Ie.every(v)}function v(Ie,ut){if(typeof Ie!="string"&&Ie.node&&typeof Ie.node=="object")return v(Ie.key,Ie.node),!1;if(ut&&typeof ut=="object"){const{move:Tt,line:rr}=ut;l.removeOne(`${Ie}-${Tt}|${rr}`)}return typeof Ie!="string"?!1:s.removeOne(Ie)}function E(Ie={}){return y(Ie).map(ut=>s.getMap().get(ut)).filter(Boolean)}function y(Ie={}){const{node:ut,persistent:Tt,tags:rr,types:Fn}=Ie;let pn;ut!==void 0&&(pn=ut?"node":"board");let Dt;Tt!==void 0&&(Dt=Tt?"persistent":"temporary");const Qt=[pn,Dt,rr,Fn].filter(ar=>ar!==void 0);if(!Qt.length)return Array.from(s.getMap().keys());const Vn=Qt.map(Vl).map(ar=>new Set(s.getMatchingKeys(ar)));return Array.from(ms(...Vn))}function M(Ie={}){var ut;return((ut=Ie.types)==null?void 0:ut.length)===0&&(Ie.types=void 0),s.removeMany(y(Ie))}function R(Ie){return Ie.map(D)}function D(Ie){const ut=W(Ie),Tt=s.getOne(ut.key);return Tt&&$u(Tt.data,ut.data)?s.removeOne(ut.key):p(ut)}function W(Ie){return ze(Ee({},Ie),{key:Ie.key||t(Ie)})}function Te(Ie,ut=$r.None){const Tt=r?.api.getOptions?r?.api.getOptions():xe();return{data:{keyPressed:ut,opacity:Tt.analysisHighlightOpacity,square:Ie},node:!0,persistent:!1,type:gr}}function dt(Ie,ut,Tt=$r.None){const rr=r?.api.getOptions?r?.api.getOptions():xe();return{data:{keyPressed:Tt,from:Ie,opacity:rr.analysisHighlightOpacity,to:ut},node:!0,persistent:!1,type:at}}}function $(t){const{data:{from:r,square:i,to:o},type:s}=t;if(!i&&!(r&&o))throw new Error('Markings that do not have a "square" property must provide a "from" and "to"');const l=i||`${r}${o}`;return`${s}|${l}`}function le(t){if(!t)return;const r=new Map;return Object.keys(pi.Effects).forEach(i=>{r.set(pi.Effects[i],i)}),r.get(t)}const V=t=>(r,i)=>{i.api.getOptions().syncEffects&&t(r,i)},_e=[{condition:Ht(Io),handler:bt},{condition:Je(x.APIEvents.Mark),handler:V(de)},{condition:Je(x.APIEvents.Unmark),handler:V(ve)},{condition:Je(x.APIEvents.Load),handler:V(Yt)},{condition:Je(x.APIEvents.NodeUpdated),handler:V(St)}];function de(t,r){const{data:i}=t,{game:o}=r.api.getContext();(Array.isArray(i)?i:[i]).forEach(l=>{l.node&&!ps(o,l)&&fd(o,l,r.api)})}function ve(t,r){const{data:i}=t,{game:o}=r.api.getContext();(Array.isArray(i)?i:[i]).forEach(l=>{l.node&&ps(o,l)&&ql(o,l,r.api)})}function bt(t,r){const{api:i,queue:o}=r;t.data.plyDiff===0&&t.data.lineDiff===0||o.add(()=>nt(i))}function Yt(t,r){const{api:i}=r,o=i.getRawLines(),s=[];nt(i),o.forEach(l=>{l.forEach(c=>{const f=le(c.annotation);f&&s.push({data:{square:c.to,type:f},type:Sn,node:c.ids,persistent:!0})})}),i.markings.addMany(s)}function St(t,r){var i,o,s;const{api:l}=r,{ids:c,changes:f}=t.data;if(!("annotation"in f)||f.isSync)return;const p=l.getPosition(c.move,c.line);if(!("to"in p))return;const m=le(f.annotation),v=l.getNodeByIds(c);if(!m&&v?.commands){const E=((s=(o=(i=v.commands.c_effect)==null?void 0:i.split(","))==null?void 0:o.find(R=>R.includes(v.to)))==null?void 0:s.split(";"))||[],y=E[E.length-1];pi.Effects[y]&&l.markings.addOne({data:E,key:v?.to,type:Sn,persistent:!0})}if(!m){const E=$({data:{square:p.to},type:Sn});l.markings.removeOne(E,c);return}l.markings.addOne({data:{square:p.to,type:m},type:Sn,node:c,persistent:!0})}function nt(t){const{game:r}=t.getContext(),i=Vs(r);t.markings.removeAllWhere({node:!0}),i.length&&t.markings.addMany(i)}function Dn(t,r){return t.reduce((i,o)=>(i[+!r(o)].push(o),i),[[],[]])}function cr(t){const{respond:r}=t;return Wu({onMarkingAdded:o=>i("Mark",o),onMarkingRemoved:o=>i("Unmark",o),context:t});function i(o,s){const l={Mark:de,Unmark:ve}[o],c=t.api.getContext().game.ids(),[f,p]=Dn(Vl(s),m=>Ki(m.node)&&c!==m.node);f.length&&l({data:f},t),p.length&&r(x.APIEvents[o],p)}}var yr;(function(t){(function(r){r.Name="markings"})(t.Plugin||(t.Plugin={}))})(yr||(yr={}));function zr(){return{api:cr,match:_e,name:yr.Plugin.Name}}function ti(t){return[...new Set(t)]}var Ct;(function(t){(function(i){i[i.White=1]="White",i[i.Black=2]="Black"})(t.ColorsAsNumbers||(t.ColorsAsNumbers={}));let r;(function(i){i.Bughouse="bughouse",i.Chess="chess",i.Chess960="chess960",i.Crazyhouse="crazyhouse",i.KingOfTheHill="kingofthehill",i.ThreeCheck="threecheck"})(r=t.Variants||(t.Variants={})),t.JCEVariantTypes={[r.Bughouse]:"Bughouse",[r.Chess]:"Chess",[r.Chess960]:"Chess960",[r.Crazyhouse]:"Crazyhouse",[r.ThreeCheck]:"3-check",[r.KingOfTheHill]:"King of the Hill"},function(i){i.White="w",i.Black="b"}(t.ColorsAsLetters||(t.ColorsAsLetters={})),function(i){i.White="white",i.Black="black"}(t.ColorsAsWords||(t.ColorsAsWords={})),t.DefaultTimeControl=5,function(i){i.Black="?",i.Event="?",i.Date="????.??.??",i.Site="?",i.Value="?",i.Result="*",i.Round="?",i.White="?"}(t.EmptyPGNHeaders||(t.EmptyPGNHeaders={})),function(i){(function(o){o[o.Capture=1]="Capture",o[o.BigPawn=2]="BigPawn",o[o.EPCapture=4]="EPCapture",o[o.AnyCapture=5]="AnyCapture",o[o.Promotion=8]="Promotion",o[o.CapturePromotion=9]="CapturePromotion",o[o.KingsideCastle=16]="KingsideCastle",o[o.QueensideCastle=32]="QueensideCastle",o[o.AnyCastle=48]="AnyCastle",o[o.Drop=64]="Drop",o[o.DropOrCapture=69]="DropOrCapture",o[o.DropOrPromote=72]="DropOrPromote"})(i.Flags||(i.Flags={})),function(o){o[o.Capture=0]="Capture",o[o.Castle=1]="Castle",o[o.Check=2]="Check",o[o.Checkmate=3]="Checkmate",o[o.Normal=4]="Normal",o[o.Premove=5]="Premove",o[o.Promotion=6]="Promotion"}(i.Types||(i.Types={}))}(t.Move||(t.Move={})),function(i){(function(o){(function(s){(function(l){(function(c){c.Arrows="arrows",c.Effects="effects",c.Pieces="pieces"})(l.Targets||(l.Targets={})),function(c){c.Above="above",c.Below="below"}(l.Positions||(l.Positions={}))})(s.VisualOrder||(s.VisualOrder={})),function(l){l.Image="Image",l.Star="Star",l.TextBox="TextBox"}(s.Types||(s.Types={}))})(o.CustomItem||(o.CustomItem={})),function(s){s.alt="a",s.custom="c",s.default="d",s.shift="s",s.ctrl="l"}(o.ColorKeys||(o.ColorKeys={})),function(s){s.a="alt",s.c="custom",s.d="default",s.s="shift",s.l="ctrl"}(o.JCEColorsMap||(o.JCEColorsMap={})),function(s){s.Arrow="arrow",s.Effect="effect",s.Square="square",s.CustomItem="customItem"}(o.Types||(o.Types={}))})(i.Marking||(i.Marking={}))}(t.Node||(t.Node={})),function(i){(function(o){o.p="pawn",o.n="knight",o.b="bishop",o.r="rook",o.q="queen",o.k="king"})(i.Names||(i.Names={})),function(o){o.Pawn="p",o.Knight="n",o.Bishop="b",o.Rook="r",o.Queen="q",o.King="k"}(i.Types||(i.Types={}))}(t.Piece||(t.Piece={})),function(i){(function(o){o.Color="#ffff00",o[o.Opacity=.5]="Opacity"})(i.Defaults||(i.Defaults={})),function(o){o.Analysis="analysis",o.Move="move",o.Premove="premove",o.Selection="selection"}(i.Types||(i.Types={}))}(t.Highlight||(t.Highlight={})),function(i){i.Blitz="blitz",i.Bullet="bullet",i.Rapid="rapid"}(t.TimeControlTypes||(t.TimeControlTypes={})),function(i){i.Black="0-1",i.Draw="1/2-1/2",i.None="*",i.White="1-0"}(t.Results||(t.Results={}))})(Ct||(Ct={}));function Pn({addMoveHints:t,addCaptureHints:r,context:i,currentHints:o,getNextHints:s,removeHints:l}){let c=o;const{api:f,mode:p,options:m,state:v}=i;if(!m||!m.highlightLegalMoves||!p.isAllowedToMove())return l([...o],i),c.length=0,c;const E=v.get(x.State.SelectedPiece)||v.get(x.State.DraggingPiece);if(!E)return c.length&&(l(c,i),c=[]),c;const y=v.get(x.State.MachineState)===ne.States.PromotionAreaShowing?[]:f.getLegalMoves().filter(ut=>ut.from===E),M=ti(y.map(ut=>ut.to));M.push(...Ie(y));const R=c.filter(ut=>!M.includes(ut));l(R,i);const D=s(M),W=[],Te=[],dt=f.getPieces().keys();return D.forEach(ut=>{r&&dt.includes(ut)?Te.push(ut):W.push(ut)}),W.length&&t(W,i),Te.length&&r?.(Te,i),c.filter(ut=>!R.includes(ut)).concat(D);function Ie(ut){if(f.getVariant()===Ct.Variants.Chess960||ut.length===0||ut[0].from===void 0)return[];const Tt=f.getPieces().getCollection(),rr=Tt[ut[0].from];return rr?.type!=="k"?[]:ut.reduce((Fn,pn)=>{let Dt;if(pn.san==="O-O-O")Dt=pn.color===Ct.ColorsAsNumbers.White?"a1":"a8";else if(pn.san==="O-O")Dt=pn.color===Ct.ColorsAsNumbers.White?"h1":"h8";else return Fn;const Qt=Tt[Dt];return Qt?.type.toLowerCase()==="r"&&Qt?.color===rr.color&&!Qt?.promoted&&pn.to!==Dt&&Fn.push(Dt),Fn},[])}}function M0(){let t=[];return{match:[{condition:oo([x.UserEvents.Pointermove,Qn.Events.Tick]),handler:i},{condition:Je(x.InstanceEvents.RendererSet),handler:r}],name:De.Plugin.Name};function r(o,s){t=[],i(o,s)}function i(o,s){const{renderer:l}=s;l&&(t=Pn({addMoveHints:l.addMoveHints,addCaptureHints:l.addCaptureHints,context:s,currentHints:t,getNextHints:c=>c.filter(f=>!t.includes(f)),removeHints:l.removeHints}))}}function O0(){return{match:[{condition:Ht(x.APIEvents),handler:r},{condition:Je(x.InstanceEvents.RendererSet),handler:t}],name:$n.Plugin.Name};function t(i,o){const{api:s,renderer:l}=o;l?.loadPieces({pieces:s.getPieces()},o)}function r(i,o){const{renderer:s}=o;if(!s)return;if(i.type===x.APIEvents.IllegalMove){s.illegalMove(!1,o);return}const{plyDiff:l,move:c,pieces:f}=i.data;if(f){s.loadPieces({pieces:f},o);return}if(c&&l===-1){c.san!=="--"&&s.undoMove(c,o);return}c&&s.makeMove(c,o)}}var Zl;(function(t){(function(r){r.StateDesynchronisation="StateDesynchronisation"})(t.ErrorCodes||(t.ErrorCodes={})),function(r){r.Name="rendererErrorCatcher"}(t.Plugin||(t.Plugin={}))})(Zl||(Zl={}));function Ev({context:t,method:r}){return function(...o){try{return r(...o)}catch(s){const{api:l,renderer:c}=t;console.error(`Board position reloaded due to game and renderer state desynchronisation:
`,s),l.logger.log({code:Zl.ErrorCodes.StateDesynchronisation,data:s,level:oe.Levels.Error}),c?.loadPieces({pieces:l.getPieces(),reloadAll:!0},t)}}}const Av=()=>!1;function qu(){let t={};return{create:r,destroy:i,match:[{condition:Je(x.InstanceEvents.RendererSet),handler:(o,s)=>r(s)}],name:Zl.Plugin.Name};function r(o){const{options:s,renderer:l}=o;!l||Av()||s.test||["dragPiece","dropPiece","makeMove","removePiece","undoMove"].forEach(c=>{const f=Ev({context:o,method:l[c]});t[c]=l[c],l[c]=f})}function i(o){const{renderer:s}=o;s&&(Object.keys(t).forEach(l=>{s[l]=t[l]}),t={})}}const md={enPassant:"https://www.chess.com/article/view/how-to-capture-en-passant",soundsDefault:"https://www.chess.com/bundles/web/sounds",soundsTheme:"https://images.chesscomfiles.com/chess-themes/sounds/",webglAssetPaths:"__CHESSCOM_WEBGL_ASSET_PATHS__",webglDataUrl:"https://www.chess.com/bundles/web/images/webgl_data",webglDataUrlDev:"static/webgl_data"};function x0({theme:t="default",type:r,format:i}){return`${md.soundsTheme}_${i.toUpperCase()}_/${t}/${r}.${i}`}function Sv(t,r){return["webm","ogg","mp3","wav"].map(i=>x0({format:i,theme:t,type:r}))}function kv(t,r){return["webm","ogg","mp3","wav"].map(i=>`${t}/${i}/${r}.${i}`)}function Uo(t){return["webm","ogg","mp3","wav"].reduce((i,o)=>(t[o]&&i.push(t[o]),i),[])}function Pv(t){return{[ue.BoardSounds.GameStart]:(0,P.l)(Uo(t.gameStart)),[ue.BoardSounds.GameEnd]:(0,P.l)(Uo(t.gameEnd)),[ue.BoardSounds.Capture]:(0,P.l)(Uo(t.capture)),[ue.BoardSounds.Castle]:(0,P.l)(Uo(t.castle)),[ue.BoardSounds.Premove]:(0,P.l)(Uo(t.premove)),[ue.BoardSounds.MoveSelf]:(0,P.l)(Uo(t.moveSelf)),[ue.BoardSounds.MoveCheck]:(0,P.l)(Uo(t.moveCheck)),[ue.BoardSounds.MoveOpponent]:(0,P.l)(Uo(t.moveOpponent)),[ue.BoardSounds.Promote]:(0,P.l)(Uo(t.promote)),[ue.BoardSounds.Notify]:(0,P.l)(Uo(t.notify)),[ue.BoardSounds.TenSeconds]:(0,P.l)(Uo(t.tenSeconds)),[ue.BoardSounds.Illegal]:(0,P.l)(Uo(t.illegal))}}const I0=[ue.BoardSounds.GameStart,ue.BoardSounds.GameEnd,ue.BoardSounds.Capture,ue.BoardSounds.Castle,ue.BoardSounds.Premove,ue.BoardSounds.MoveSelf,ue.BoardSounds.MoveCheck,ue.BoardSounds.MoveOpponent,ue.BoardSounds.Promote,ue.BoardSounds.Notify,ue.BoardSounds.TenSeconds,ue.BoardSounds.Illegal];function Cv(t){let r=I0,i="default";t&&(r=t.codes,i=t.theme);let o,s=i;return p({codes:r,theme:i,soundAssets:t?.soundAssets}),{destroy:l,getSounds:c,getTheme:f,load:p,loadExtra:m,play:v};function l(){Object.keys(o).forEach(E=>{o[E].unload()})}function c(){return o}function f(){return s}function p(E){s=E.theme,E.soundAssets?o=Pv(E.soundAssets):o=(E.codes||I0).reduce((y,M)=>(y[M]=(0,P.l)(Sv(s,M)),y),{}),(0,P.e)()}function m(E){const y=E.codes.reduce((M,R)=>(M[R]=(0,P.l)(kv(E.baseURL,R)),M),{});Object.keys(y).forEach(M=>{var R;(R=o[M])==null||R.unload(),o[M]=y[M]}),(0,P.e)()}function v(E){const y=o[E],M=f();if(!y)return M;try{return(0,P.p)(y),M}catch{return M}}}function vd(t){return t.flags===void 0?!1:(t.flags&1)===1||t.flags===Ct.Move.Flags.EPCapture}function Yl(t){return t.flags===Ct.Move.Flags.AnyCastle||t.flags===Ct.Move.Flags.KingsideCastle||t.flags===Ct.Move.Flags.QueensideCastle}function Tv(t){return!t||!t.san?!1:["+","#"].includes(t.san.slice(-1))}function js(t){return t.flags===Ct.Move.Flags.Promotion||t.flags===Ct.Move.Flags.CapturePromotion}function Mv(t,r){if(!t||!t.san)return null;let i;return Tv(t)?i=ue.BoardSounds.MoveCheck:t.isPremove?i=ue.BoardSounds.Premove:js(t)?i=ue.BoardSounds.Promote:vd(t)?i=ue.BoardSounds.Capture:Yl(t)?i=ue.BoardSounds.Castle:i=r?ue.BoardSounds.MoveOpponent:ue.BoardSounds.MoveSelf,i}function Ov(t){return function(i){return t!==i.type}}function gd(t){let r=t,i;return{api:()=>({getSoundsInstance:()=>r}),match:[{condition:Ov(x.UserEvents.Pointermove),handler:s}],name:ue.Plugin.Name,create:o};function o(l){var c;i=(c=l.options.themeAssets)==null?void 0:c.sound.assets,r||(r=Cv({theme:l.options.soundTheme,soundAssets:i}))}function s(l,c){var f,p,m;if(!r)return;const{api:v,options:E,state:y}=c,M=E.soundTheme!==r.getTheme()||!(0,P.f)(i,(f=c.options.themeAssets)==null?void 0:f.sound.assets);if(i=(p=c.options.themeAssets)==null?void 0:p.sound.assets,l.type===x.OptionsEvents.Update&&M){r.destroy(),r.load({theme:E.soundTheme,soundAssets:i});return}if(l.type===x.SoundEvents.Play){r.play(l.data.sound),y.set({soundPlayed:l.data.sound});return}if(!E.playSounds||!((m=l.data)!=null&&m.plyDiff))return;let R=v.getSelectedNode();if(l.type===x.APIEvents.MoveBackward&&(R=l.data.move),!R)return;const D=v.getPlayingAs(),W=!!(D&&D!==R.color),Te=Mv(R,W);Te&&(r.play(Te),y.set({soundPlayed:Te}))}}function R0(t){return{create:r,name:Bt.Plugin.Name};function r(i){const{api:o}=i;t&&o.timeControl.set(t)}}function xv(t){return!!(!t||t.isContentEditable||["INPUT","TEXTAREA"].includes(t.tagName))}var Ro;(function(t){(function(r){r.Shift="Shift",r.Control="Control",r.Alt="Alt",r.Meta="Meta"})(t.Modifiers||(t.Modifiers={}))})(Ro||(Ro={}));const Iv=["Escape","Tab","Backspace","Enter","Backlash","Period","Slash","Comma","Space","Delete","Home","End","PageUp","PageDown","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],Rv=[Ro.Modifiers.Meta.toLowerCase(),Ro.Modifiers.Alt.toLowerCase(),Ro.Modifiers.Control.toLowerCase()];function N0(t){let r;if(t)return t.includes("Digit")?r=t.replace("Digit",""):t.includes("Numpad")?r=t.replace("Numpad",""):t.includes("Key")?r=t.replace("Key",""):t.includes(Ro.Modifiers.Control)?r=Ro.Modifiers.Control:t.includes(Ro.Modifiers.Shift)?r=Ro.Modifiers.Shift:t.includes(Ro.Modifiers.Alt)?r=Ro.Modifiers.Alt:t.includes(Ro.Modifiers.Meta)?r=Ro.Modifiers.Meta:Iv.includes(t)&&(r=t),r?.toLowerCase()}function Xl({onKeydown:t,onKeyup:r}={}){let i=!0;const o=new Set;return document.addEventListener("keydown",c),document.addEventListener("keyup",f),window.addEventListener("blur",p),window.addEventListener("contextmenu",p),{isPressed:s,getPressedKeys:l,disable:m,enable:v,destroy:E};function s(y){return o.has(y.toLowerCase())}function l(){return[...o].sort()}function c(y){const M=document.activeElement;if(!i||xv(M))return;const R=N0(y.code);R&&(o.add(R),t?.(R))}function f(y){const M=N0(y.code);M&&(Rv.includes(M)&&o.clear(),o.delete(M),r?.(M))}function p(){o.clear()}function m(){i=!1,o.clear()}function v(){i=!0}function E(){document.removeEventListener("keydown",c),document.removeEventListener("keyup",f),window.removeEventListener("blur",p),window.removeEventListener("contextmenu",p),o.clear()}}function L0(){let t;const r=Xl({onKeydown:c(Ci.Events.Keydown),onKeyup:c(Ci.Events.Keyup)}),i={[Ci.Events.Keydown]:{},[Ci.Events.Keyup]:{}},o={isPressed:r.isPressed,getPressedKeys:r.getPressedKeys,setOverrides:p,removeOverrides:m};return{api:()=>o,create:s,destroy:l,match:[{condition:Je(x.OptionsEvents.Update),handler:v},{condition:Je(Ci.Events.Keydown),handler:f},{condition:Je(Ci.Events.Keyup),handler:f}],name:Ci.Plugin.Name};function s({run:y,options:M}){t=y,E(M.enabled)}function l(){r.destroy()}function c(y){return function(R){t?.(vi(y,R))}}function f(y,M){const{type:R,data:D}=y,W=i[R][D];W&&M.queue.add(W(M.api))}function p(y){y.forEach(({key:M,callback:R,trigger:D=Ci.Events.Keydown})=>{i[D][M]=R})}function m(y){y.forEach(({trigger:M=Ci.Events.Keydown,key:R})=>{delete i[M][R]})}function v(y,M){const{options:R}=M,D=R.captureKeyStrokes&&R.enabled;E(D)}function E(y){y?r.enable():r.disable()}}var Ku;(function(t){t.DefaultAcceptableFrequency=1e3,function(r){r.Name="webgl-context-lost"}(t.Plugin||(t.Plugin={}))})(Ku||(Ku={}));function B0(t=Ku.DefaultAcceptableFrequency){let r,i=0,o=!1,s=!1;return{api:()=>({activateBoard:f}),destroy:y,match:[{condition:Je(x.InstanceEvents.RendererSet),handler:l}],name:Ku.Plugin.Name};function l(M,R){r=R;const{renderer:D}=r,W=D?.name===w.Types.WebGL2D||D?.name===w.Types.WebGL3D;!D||!W||!D.getWebGLCanvas||p(D.getWebGLCanvas())}function c(){if(!r)return;s=!0;const M=i&&Date.now()-i<t;if(i=Date.now(),M){E();return}o&&v()}function f(M=!0){o=M,o&&s&&v()}function p(M){M.removeEventListener("webglcontextlost",c),M.addEventListener("webglcontextlost",c)}function m(M){M.removeEventListener("webglcontextlost",c)}function v(){var M;if(!r||!r.renderer)return;const{renderer:R}=r;(M=R.handleWebGLContextLost)==null||M.call(R),s=!1,R.getWebGLCanvas&&p(R.getWebGLCanvas())}function E(){if(!r)return;const{api:M,renderer:R}=r,D=M.getOptions(),W={animationType:Rr.Animation.Types.Default};R?.name===w.Types.WebGL3D&&(W.pieceStyle="neo",D.themeAssets&&(W.themeAssets=dn(D.themeAssets))),M.setOptions(W)}function y(){!r||!r.renderer||!r.renderer.getWebGLCanvas||m(r.renderer.getWebGLCanvas())}}var eo;(function(t){(function(r){r.Name="recorder"})(t.Plugin||(t.Plugin={})),function(r){r.Idle="Idle",r.Playing="Playing",r.Recording="Recording"}(t.Mode||(t.Mode={}))})(eo||(eo={}));const D0=[{name:"addMoveToEndOfLine"},{name:"agreeDraw"},{name:"blinkSquare"},{name:"claimDraw"},{name:"clearMarkings"},{name:"createContinuation"},{name:"createGame"},{name:"setPlayingAs"},{name:"usePlayingAs"},{name:"deletePosition"},{name:"load"},{name:"mark"},{name:"move"},{name:"moveBackward"},{name:"moveForward"},{name:"moveVariation"},{name:"outOfTime"},{name:"promoteVariation"},{name:"reload"},{name:"resetGame"},{name:"resetToMainLine"},{name:"resign"},{name:"selectLineEnd"},{name:"selectLineStart"},{name:"selectNode"},{name:"setGameDetails"},{name:"setResult"},{name:"setTurn"},{name:"toggleMarking"},{name:"undo"},{name:"unmark"},{name:"updateLineComment"},{name:"updateNode"},{name:"setOptions"},{name:"setMode"},{name:"playSound"},{namespace:"arrowKeys",name:"setKeys"},{namespace:"arrowKeys",name:"resetKeys"},{namespace:"boardImages",name:"mark"},{namespace:"boardImages",name:"unmark"},{namespace:"boardImages",name:"showWindow"},{namespace:"boardImages",name:"hideWindow"},{namespace:"clocks",name:"activate"},{namespace:"clocks",name:"deactivate"},{namespace:"clocks",name:"resetClocks"},{namespace:"clocks",name:"stopClocks"},{namespace:"hml",name:"addDiagramActions"},{namespace:"hml",name:"addCommentLink"},{namespace:"hml",name:"setScrollContainer"},{namespace:"hml",name:"updateNodeLimits"},{namespace:"keys",name:"setOverrides"},{namespace:"keys",name:"removeOverrides"},{namespace:"premoves",name:"cancel"},{namespace:"premoves",name:"consumeNext"},{namespace:"premoves",name:"loadQueue"},{namespace:"premoves",name:"move"},{namespace:"premoves",name:"reload"},{namespace:"threats",name:"enable"},{namespace:"threats",name:"onlyShowThreatsCreatedByColor"},{namespace:"vml",name:"activate"},{namespace:"vml",name:"deactivate"},{namespace:"vml",name:"waitForVMLReady"},{namespace:"markings",name:"addMany"},{namespace:"markings",name:"addOne"},{namespace:"markings",name:"removeAll"},{namespace:"markings",name:"removeAllWhere"},{namespace:"markings",name:"removeMany"},{namespace:"markings",name:"removeOne"},{namespace:"markings",name:"toggleMany"},{namespace:"markings",name:"toggleOne"}];function F0(t,r){const{api:i}=t;return{record:l,play:m,step:v,forward:E,stop:c,init:p,clear:f,get:()=>r,getJSON:o,load:s};function o(){return r.recording?JSON.stringify(r.recording):""}function s(M){const R=JSON.parse(M);return f(),r.recording=R,p()}function l(M=!0){f(),r.recording={modeName:i.getMode().name,variant:i.getVariant(),modeOptions:i.getMode().getOptions(),boardOptions:i.getOptions(),pgn:i.getPGN(),plugins:i.plugins.get().map(R=>R.name),timestamp:new Date().toISOString(),events:[]},r.mode=eo.Mode.Recording,r.recordEvents=M}function c(){return r.mode=eo.Mode.Idle,r.recording.events.length}function f(){r.mode=eo.Mode.Idle,r.lastRecordedEventTime=0,r.recording={events:[],pgn:"",modeName:"",variant:"",modeOptions:{},boardOptions:{},plugins:[],timestamp:""},r.playState={playCounter:0,initDirty:!1,playedEvents:[]}}function p(){if(c(),!r.recording)return 0;r.playState={playCounter:0,playedEvents:[],initDirty:!1};const{pgn:M,events:R}=r.recording;return t.api.load({pgn:M}),t.api.markings.removeAll(),window.location.hostname==="localhost"&&t.api.boardImages&&!t.api.boardImages.isInitialized()&&t.api.boardImages.initDefault(),r.playState.initDirty=!1,R.length}function m({fixedDelay:M,skipEvents:R=!1,verbose:D=!0}={}){c(),r.playState.initDirty&&p(),r.mode=eo.Mode.Playing,r.verbose=D,r.verbose&&console.log("Playing",r.recording.events.length-1),y({fixedDelay:M,skipEvents:R,autoContinue:!0})}function v({fastForwardEvents:M=!1,skipEvents:R=!1,verbose:D=!0}={}){c(),r.mode=eo.Mode.Playing,r.verbose=D,y({fixedDelay:0,skipEvents:R,fastForwardEvents:M,autoContinue:!1})}function E({eventNumber:M,skipEvents:R=!1,verbose:D=!0}){c(),(!r.playState.playCounter||r.playState.playCounter>=M||r.playState.playCounter===r.recording.events.length)&&p(),r.mode=eo.Mode.Playing,r.verbose=D,y({fixedDelay:0,maxEventNumber:M,skipEvents:R,autoContinue:!0})}function y({maxEventNumber:M,fixedDelay:R,skipEvents:D,fastForwardEvents:W,autoContinue:Te}){const dt=r.recording.events[r.playState.playCounter];if(!dt){r.mode=eo.Mode.Idle;return}const{name:Ie,args:ut,namespace:Tt}=dt;Tt?i[Tt][Ie](...ut):Ie==="event"?D?(r.playState.playCounter+=1,r.playState.playedEvents.push(`skipped: ${ut[0].type}`)):i.emit(ut[0].type,ut[0]):i[Ie](...ut);const rr=r.recording.events[r.playState.playCounter];if(r.mode!==eo.Mode.Playing||!rr||!Te&&(!D||!W)||M&&r.playState.playCounter>=M){r.mode=eo.Mode.Idle,!rr&&r.verbose&&console.log("Finished playing");return}let Fn=R??rr.time;D&&rr.name==="event"&&(Fn=0),(Te||(D||W)&&rr.name==="event")&&setTimeout(()=>{y({maxEventNumber:M,fixedDelay:R,skipEvents:D,fastForwardEvents:W,autoContinue:Te})},Fn)}}const Ei={mode:eo.Mode.Idle,recordEvents:!1,lastRecordedEventTime:0,verbose:!1,playState:{playCounter:0,initDirty:!1,playedEvents:[]},recording:{events:[],pgn:"",modeName:"",variant:"",modeOptions:{},boardOptions:{},plugins:[],timestamp:""}};function _d(){return{api:r=>F0(r,Ei),create:r=>setTimeout(()=>t(r)),match:[{condition:()=>Ei.mode===eo.Mode.Recording&&Ei.recordEvents,handler:r=>{Ei.recording.events.push({name:"event",args:[r],time:yd()})}},{condition:()=>Ei.mode===eo.Mode.Playing,handler:r=>{Ei.verbose&&console.log(`${Ei.playState.playCounter} / ${Ei.recording.events.length-1}`,r),Ei.playState.playCounter+=1,Ei.playState.playedEvents.push(r)}}],name:eo.Plugin.Name};function t(r){const{api:i}=r;bd(i);const o=(s,l,c)=>{const p=(Array.isArray(c[0])?c[0]:c).map(v=>v.name),m=s(...c);return p.forEach(v=>{bd(i,v)}),m};r.api.plugins.add=new Proxy(r.api.plugins.add,{apply:o}),r.api.plugins.addMany=new Proxy(r.api.plugins.addMany,{apply:o})}}function bd(t,r){(r?D0.filter(o=>o.namespace===r):D0).forEach(({namespace:o,name:s})=>{if(!o&&!t[s]||o&&!t[o]||o&&t[o]&&!t[o][s])return;const l=Nv(s,o);o?t[o][s]=new Proxy(t[o][s],{apply:l}):t[s]=new Proxy(t[s],{apply:l})})}function Nv(t,r){return function(o,s,l){if(Ei.playState.initDirty=!0,Ei.mode===eo.Mode.Recording){const c=yd(),f=r?{namespace:r}:{};Ei.recording.events.push(Ee({name:t,args:l,time:c},f))}if(Ei.mode===eo.Mode.Playing){const c=Ei.recording.events[Ei.playState.playCounter];if(c&&c.name===t&&(!c.namespace||c.namespace===r)&&JSON.stringify(c.args).substring(0,50)===JSON.stringify(l).substring(0,50)){if(Ei.verbose){const p=c.namespace?`${c.namespace}.${c.name}`:c.name;console.log(`${Ei.playState.playCounter} / ${Ei.recording.events.length-1}`,`${p}`,...c.args)}Ei.playState.playCounter+=1}const f=r?{namespace:r}:{};Ei.playState.playedEvents.push(Ee({name:t,args:l},f))}return o(...l)}}function yd(){const t=Date.now(),r=Ei.lastRecordedEventTime===0?0:t-Ei.lastRecordedEventTime;return Ei.lastRecordedEventTime=t,r}function gs({color:t,type:r,opacity:i,square:o,turn:s}){return{data:{color:t,opacity:i,square:o,turn:s,type:r},key:`${r}|${o}`,type:"highlight"}}function Lv(t,r){switch(t){case $r.Alt:return r.analysisHighlightColors.alt;case $r.Ctrl:return r.analysisHighlightColors.ctrl;case $r.Shift:return r.analysisHighlightColors.shift;case $r.None:return r.analysisHighlightColors.default;default:return}}function Bv(t,r){const{api:i,options:o}=r;return!o||!o.allowMarkings?[]:i.markings.getAllWhere({types:[gr]}).map(({data:{color:s,keyPressed:l,opacity:c,square:f}})=>{var p,m;return gs({color:(m=(p=Lv(l,o))!=null?p:s)!=null?m:o.analysisHighlightColors.default,opacity:c??o.analysisHighlightOpacity,square:f,type:"analysis"})})}const wd="move";function Dv(t,r){const{api:i,options:o}=r,s=[];if(!o||!o.highlightMoves)return s;const l=i.getSelectedNode();return l&&[l.from,l.to].forEach(c=>{var f,p,m,v,E;if(!c)return;const y=gs({color:(E=(v=(p=(f=o.themeAssets)==null?void 0:f.board.config.highlightSquareHex)!=null?p:o.highlightColor)!=null?v:(m=re(o.boardStyle))==null?void 0:m.highlightColor)!=null?E:Rr.HighlightColors.Selected,opacity:o.highlightOpacity,square:c,turn:l.color,type:wd});s.push(y)}),s}function Fv(t,r){var i,o,s,l;const{options:c,state:f}=r;if(!c||!c.highlightMoves)return[];const p=f.get(x.State.SelectedPiece)||f.get(x.State.DraggingPiece);return p?[gs({color:(l=(s=(i=c.themeAssets)==null?void 0:i.board.config.highlightSquareHex)!=null?s:(o=re(c.boardStyle))==null?void 0:o.highlightColor)!=null?l:Rr.HighlightColors.Selected,opacity:c.highlightOpacity,square:p,type:"SelectionHiglight"})]:[]}function z0(t,r){return r._withIDBStore("readwrite",i=>{t.forEach(o=>{i.put(o,o.f)})})}const zv="e2992d839bbeb7eff7ae6145f8bdcdb3";let Ca;const U0="IS_POPULATED",H0="VERSION";function Uv({name:t,table:r}){Ca=new P.S(t,r)}function Ed(){return Ca}async function Hv({ecoPath:t,http:r}){const i=zv,o=await G0(),s=await Vv();if(!o||!s&&i||s!==i)return Gv(i),jv({ecoPath:t,http:r}).then(Ad)}function Ad(){return(0,P.s)(U0,!0,Ca)}function Gv(t){return(0,P.s)(H0,t,Ca)}async function Vv(){return(0,P.g)(H0,Ca).then(String)}async function G0(){return(0,P.g)(U0,Ca).then(Boolean)}async function jv({ecoPath:t,http:r}){return r.get(t).then(i=>{var o,s;z0((s=(o=i?.data)!=null&&o.positions?i.data.positions:i.data)!=null?s:i,Ca)})}function $v(t){return t.reverse().map(r=>r.split(" ").slice(0,3).join(" "))}async function Wv({ecoPath:t,fens:r,http:i}){const o=$v(r);return await Hv({ecoPath:t,http:i}),(await V0(o)).find(Boolean)}function V0(t){return Promise.all(t.map(r=>(0,P.g)(r,Ed())))}function qv(t,r){let i;return{get:()=>i,update:o};async function o(){const{api:s,respond:l}=t;i=await Wv(ze(Ee({},r),{fens:s.getHistoryFENs()})),l(qt.Events.Update,i)}}var Sd;(function(t){t.ECO="chesscom_eco"})(Sd||(Sd={}));var kd;(function(t){t.ECO="eco"})(kd||(kd={}));const Kv={get:t=>fetch(t,{method:"GET"}).then(r=>r.json())};function j0({ecoPath:t="",http:r=Kv,storeData:i={name:Sd.ECO,table:kd.ECO}}={}){if(!("indexedDB"in window))return{name:qt.Name};function o(l){Ed()||Uv(Ee({},i)),s(null,l)}return{api:l=>qv(l,{ecoPath:t,http:r}),create:o,match:[{condition:Ht(Io),handler:s}],name:qt.Name};function s(l,c){c.api.eco.update()}}function Pd(){let t,r=!1;return{create:s,destroy:l,match:[{condition:Je(x.APIEvents.SetPlayingAs),handler:(c,f)=>o(f.api)}],name:j.Plugin.Name,requires:["premoves"]};function i(c){const{api:f}=c;return{get:p,set:m};function p(){return r}function m(v){var E,y,M,R,D;if(r=v,o(f),v===!1){const W=(y=(E=f.getPositionDetails())==null?void 0:E.sideToMove)!=null?y:Ct.ColorsAsNumbers.White;if(f.setTurn(W),((R=(M=f.premoves)==null?void 0:M.getQueue()[0])==null?void 0:R.color)===W){const Te=(D=f.premoves)==null?void 0:D.consumeNext(),dt=Te===null?x.APIEvents.IllegalMove:x.APIEvents.Move;f.getContext().respond(dt,Te)}}}}function o(c){r&&c.setTurn(c.getPlayingAs()===Ct.ColorsAsNumbers.White?Ct.ColorsAsNumbers.Black:Ct.ColorsAsNumbers.White)}function s(c){const{api:f}=c;if(!f.premoves)return"The premoves plugin must be registered in order to use the pregame plugin.";t=f.extendAPI(j.Plugin.Name,{pregame:()=>i(c)})}function l(){t()}}function ia({api:t}){return t.premoves.cancel}function Cd({api:t}){return t.premoves.getLegalMovesForSquare}function Zv({api:t}){return t.premoves.getLegalMoves}function Td({api:t}){return t.premoves.getMove}function Yv({api:t}){return t.premoves.getPieces}function Md({api:t}){return function(...i){var o;const s=(o=i[0])==null?void 0:o.premoves,l=t.getContext().game;s?.forEach(c=>{l.premove.move(c)}),t.premoves.loadQueue(s),i[0].pieces=t.premoves.getPieces()}}function $0({api:t}){return t.premoves.reload}function Xv({api:t}){return t.premoves.move}function W0({api:t}){return function(i){return t.getContext().respond(x.APIEvents.SetBoardPosition,{pieces:t.premoves.getPieces(),holdSelectedPiece:!0}),i}}function _s(t){return t.api.getPlayingAs()!==t.api.getTurn()}function q0(t,r){return!r.userGenerated}function K0(t,r){return!!r.userGenerated}function Qv(t){return t.api.premoves.getQueue().length}function Z0(t){return t.api.premoves.getQueue().length>0}function Jv(t,r){return!!r?.premoves}function e1(){return{moveBackward:{handler:ia,run:"before"},moveForward:{handler:ia,run:"before"},outOfTime:{handler:ia,run:"before"},resign:{handler:ia,run:"before"},selectLineEnd:{handler:ia,run:"before"},selectLineStart:{handler:ia,run:"before"},selectNode:{handler:ia,run:"before"},undo:{handler:ia,run:"before"},agreeDraw:{handler:ia,run:"before"},deletePosition:{handler:ia,run:"before"},getLegalMovesForSquare:{conditions:_s,handler:Cd,run:"instead"},getLegalMoves:{conditions:_s,handler:Zv,run:"instead"},getMove:{conditions:_s,handler:Td,run:"instead"},getPieces:{conditions:Qv,handler:Yv,run:"instead"},load:[{handler:ia,run:"before"},{conditions:Jv,handler:Md,run:"before"}],move:[{conditions:[_s,Z0],handler:$0,run:"before"},{conditions:[_s,K0],handler:Xv,run:"instead"},{conditions:[_s,q0,Z0],handler:W0,run:"after"}]}}function Y0({api:t,canMoveWhenNotPlayerTurn:r,modeOptions:i}){const{canAddMovesToMainLine:o,canMoveWhenGameIsOver:s,canModifyExistingMovesOnMainLine:l}=i;return!!((s||!t.isGameOver())&&(o&&t.isAtEndOfLine()||l)&&(r||t.getPlayingAs()===t.getTurn()))}function bs(t,r){return function(){return Y0({api:r,canMoveWhenNotPlayerTurn:!0,modeOptions:t.getOptions()})}}function Od(){return{isAllowedToMove:bs}}function t1(t){return function(){const{api:i,game:o}=t;return i.premoves.getQueue().length?(o.premove.cancel(),i.reload()):null}}function Ql({api:t,node:r,timestamp:i}){var o;const{game:s,respond:l}=t.getContext(),{line:c,move:f}=r.ids;if(i===null)return(o=r.commands)!=null&&o.timestamp&&delete r.commands.timestamp,l(x.APIEvents.NodeUpdated,{changes:{timestamp:i,node:r}});r.commands||(r.commands={}),s.updateNode({commands:Object.assign(r.commands,{timestamp:`${i}`})},f,c)}const Jl=1;function Ga(t){return Math.round(t/100)}function X0({api:t,node:r}){return t.getNodeByIds({move:r.ids.move-2,line:r.ids.line})}function Q0({api:t,timeControl:r}){const i=t.getLine(0);if(!i)return null;const o=i[i.length-1],s=X0({api:t,node:o}),{baseTime:l,increment:c}=r,f=n1({baseTime:Ga(l),increment:Ga(c),lastNodeTime:s?.time});return f&&o&&(o.time=f),f}function n1({baseTime:t,increment:r,lastNodeTime:i}){return o()-Jl;function o(){return i?i+r:t}}function xd(t){return function(){const{api:i,game:o,mutateGame:s}=t;if(!i.premoves.getQueue().length)return null;if(i.isGameOver())return i.premoves.cancel();i.premoves.reload();const c=s(function(){o.premove.consume()});if(!c||c.plyDiff===0)return null;if(c.consumedPremove=!0,i.premoves.getQueue().length&&(c.pieces=i.premoves.getPieces()),c.move){const f=i.timeControl.get();f&&(Q0({api:i,timeControl:f}),Ql({api:i,node:c.move,timestamp:Jl})),Object.assign(c.move,{animate:!1,userGenerated:!0})}return c.result&&i.setResult(c.result),c}}function r1(t){return function(i){const{game:o}=t,s=o.premove.moves(i);return s?ti(s.filter(l=>typeof i>"u"||l.from===i).map(l=>l.to)):[]}}function i1(t){return function(){const{game:i}=t;return i.premove.moves()||[]}}function o1(t){return function(i){const{game:o}=t,s=o.premove.moves(i.from);let l=s?s.find(c=>c.to===i.to):null;if(!l&&o.premove.getPieces(!0)[i.from].type.toLowerCase()==="k"){const c=[...o.premove.queue];l=o.premove.move(i),l&&(o.premove.cancel(),c.forEach(o.premove.move))}return l?o.moveDetails(Ee({},l)):null}}function a1(t){return function(){const{game:i}=t;return rn(i.premove.getPieces(!0))}}function s1(t){return function(){const{game:i}=t;return i.premove.queue}}function J0(t){return function(i){const{game:o}=t;return o.premove.move(i)?(o.undo(),!0):!1}}function eh(t){return function(i){const{game:o}=t;o.premove.queue.length=0,o.premove.queue.push(...i)}}function l1(t){return function(i){const{api:o,game:s,respond:l}=t;return"tcn"in i||!s.premove.move(i)?null:(o.getOptions().playSounds&&l(x.SoundEvents.Play,{sound:ue.BoardSounds.Premove}),l(x.APIEvents.SetBoardPosition,{pieces:o.premoves.getPieces()}))}}function u1(t){return function(){const{api:i}=t;if(i.premoves.getQueue().length){const o=[...i.premoves.getQueue()];i.reload(),i.premoves.loadQueue(o)}else i.reload()}}function c1(){return function(r){return{cancel:t1(r),consumeNext:xd(r),getLegalMovesForSquare:r1(r),getLegalMoves:i1(r),getMove:o1(r),getPieces:a1(r),getQueue:s1(r),isLegalMove:J0(r),loadQueue:eh(r),move:l1(r),reload:u1(r)}}}function th(t){return t.type===x.APIEvents.Move&&!t.data.consumedPremove}const nh="premove";function rh(t,r){var i;const{api:o,options:s}=r,l=(i=o.premoves)==null?void 0:i.getQueue();if(!s||!s.allowMarkings||!l.length)return[];const c=[];return l.forEach(f=>{if(f.from){const m=gs({color:s.premoveHighlightColor,opacity:s.premoveHighlightOpacity,square:f.from,type:nh});c.push(m)}const p=gs({color:s.premoveHighlightColor,opacity:s.premoveHighlightOpacity,square:f.kingTo||f.to,type:nh});c.push(p)}),c}function ih(){return{api:c1(),apiOverrides:e1(),beforeState:[{condition:Je(x.UserEvents.PointerdownRight),handler:i},{condition:Je(x.APIEvents.Move),handler:o}],create:t,destroy:r,modeOverrides:Od(),name:Se.Plugin.Name};function t(s){const{api:l}=s;l.highlights&&l.highlights.addModule(rh)}function r(s){var l,c;const{api:f}=s;(l=f.premoves)==null||l.cancel(),(c=f.highlights)==null||c.removeModule(rh)}function i(s,l){const{api:c,queue:f}=l;return c.premoves.getQueue().length>0?(f.add(c.premoves.cancel),!1):!0}function o(s,l){const{api:c,queue:f}=l;return c.premoves.getQueue().length&&th(s)?(f.add(function(){const m=c.premoves.consumeNext(),v=m===null?x.APIEvents.IllegalMove:x.APIEvents.Move;c.once(x.APIEvents.Move,()=>{c.getContext().respond(v,ze(Ee({},m),{holdSelectedPiece:!0}))})}),!1):!0}}function d1(t,r){const{requestIdleCallback:i}=window;if(i){i(t,r);return}o(t);function o(s){const l=Date.now();return setTimeout(function(){s({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-l))})},1)}}function f1({onAll:t,onDebug:r,onError:i}){return{create:o,name:Le.Plugin.Name};function o(c){if(!t&&!r&&!i)return;const{api:{logger:f}}=c;f.on(oe.Events.EntryAdded,p=>s(p,f))}function s(c,f){const p=f.get();t&&l({callback:t,entry:c,previousLogs:p}),r&&c.level===oe.Levels.Debug&&l({callback:r,entry:c,previousLogs:p}),i&&c.level===oe.Levels.Error&&l({callback:i,entry:c,previousLogs:p})}function l({callback:c,entry:f,previousLogs:p}){d1(()=>c(f,p))}}var vt;(function(t){(function(r){(function(i){i.ClearAllAnalysis="Clear All Analysis",i.DeleteCommentAfter="Delete Comment After",i.DeleteCommentBefore="Delete Comment Before",i.DeleteLine="Delete Entire Variation",i.DeleteMove="Delete Move",i.InsertCommentAfter="Comment After",i.InsertCommentBefore="Comment Before",i.InsertContinuation="Insert Continuation",i.MoveVariationDown="Move Variation Down",i.MoveVariationUp="Move Variation Up",i.Promote="Promote",i.RemoveAnnotation="Remove Annotation",i.RemoveBegin="Remove Begin",i.RemoveEnd="Remove End",i.RemoveEvaluationAnnotation="Remove Evaluation Annotation",i.RemoveFocus="Remove Focus",i.SetBegin="Set Begin",i.SetEnd="Set End",i.SetFocus="Set Focus"})(r.Actions||(r.Actions={})),function(i){i.BadMove="Bad move",i.BlackHasDecisiveAdvantage="Black has a decisive advantage",i.BlackHasModerateAdvantage="Black has a moderate advantage",i.BlackHasSlightAdvantage="Black has a slight advantage",i.Blunder="Blunder",i.Drawish="Drawish",i.DubiousMove="Dubious move",i.ExcellentMove="Excellent move",i.GoodMove="Good move",i.Miss="Miss",i.Novelty="Novelty",i.Unclear="Unclear",i.PositionInZuqZwang="The position is in zugzwang",i.SpeculativeMove="Speculative move",i.WhiteHasSlightAdvantage="White has a slight advantage",i.WhiteHasModerateAdvantage="White has a moderate advantage",i.WhiteHasDecisiveAdvantage="White has a decisive advantage",i.WithInitiative="With initiative",i.WithCompensation="With compensation",i.WithAttack="With an attack"}(r.Annotations||(r.Annotations={})),function(i){i.B="B",i.K="K",i.N="N",i.P="P",i.Q="Q",i.R="R"}(r.Pieces||(r.Pieces={})),function(i){i.NumberOfDays="numberOfDays",i.NumberOfHours="numberOfHours",i.NumberOfMinutes="numberOfMinutes"}(r.Plural||(r.Plural={})),function(i){i.AddComment="Add Comment..."}(r.Prompt||(r.Prompt={})),function(i){i.EnPassant="En passant is a special pawn move by which a pawn captures another pawn that has advanced two squares.",i.ThreeFoldRepetition="This game ended in a draw because the same position was repeated three times."}(r.Tooltips||(r.Tooltips={}))})(t.Translation||(t.Translation={})),function(r){r.HML="hml",r.VML="vml",r.MOVE_LIST="move-list"}(t.Types||(t.Types={}))})(vt||(vt={}));const $s={[vt.Translation.Prompt.AddComment]:()=>vt.Translation.Prompt.AddComment,[vt.Translation.Annotations.BadMove]:()=>vt.Translation.Annotations.BadMove,[vt.Translation.Annotations.BlackHasDecisiveAdvantage]:()=>vt.Translation.Annotations.BlackHasDecisiveAdvantage,[vt.Translation.Annotations.BlackHasModerateAdvantage]:()=>vt.Translation.Annotations.BlackHasModerateAdvantage,[vt.Translation.Annotations.BlackHasSlightAdvantage]:()=>vt.Translation.Annotations.BlackHasSlightAdvantage,[vt.Translation.Annotations.Blunder]:()=>vt.Translation.Annotations.Blunder,[vt.Translation.Actions.ClearAllAnalysis]:()=>vt.Translation.Actions.ClearAllAnalysis,[vt.Translation.Actions.DeleteCommentAfter]:()=>vt.Translation.Actions.DeleteCommentAfter,[vt.Translation.Actions.DeleteCommentBefore]:()=>vt.Translation.Actions.DeleteCommentBefore,[vt.Translation.Actions.DeleteLine]:()=>vt.Translation.Actions.DeleteLine,[vt.Translation.Actions.DeleteMove]:()=>vt.Translation.Actions.DeleteMove,[vt.Translation.Annotations.Drawish]:()=>vt.Translation.Annotations.Drawish,[vt.Translation.Annotations.DubiousMove]:()=>vt.Translation.Annotations.DubiousMove,[vt.Translation.Annotations.ExcellentMove]:()=>vt.Translation.Annotations.ExcellentMove,[vt.Translation.Tooltips.EnPassant]:()=>vt.Translation.Tooltips.EnPassant,[vt.Translation.Annotations.GoodMove]:()=>vt.Translation.Annotations.GoodMove,[vt.Translation.Actions.InsertCommentAfter]:()=>vt.Translation.Actions.InsertCommentAfter,[vt.Translation.Actions.InsertCommentBefore]:()=>vt.Translation.Actions.InsertCommentBefore,[vt.Translation.Actions.InsertContinuation]:()=>vt.Translation.Actions.InsertContinuation,[vt.Translation.Annotations.Miss]:()=>vt.Translation.Annotations.Miss,[vt.Translation.Actions.MoveVariationDown]:()=>vt.Translation.Actions.MoveVariationDown,[vt.Translation.Actions.MoveVariationUp]:()=>vt.Translation.Actions.MoveVariationUp,[vt.Translation.Annotations.Novelty]:()=>vt.Translation.Annotations.Novelty,[vt.Translation.Pieces.B]:()=>vt.Translation.Pieces.B,[vt.Translation.Pieces.K]:()=>vt.Translation.Pieces.K,[vt.Translation.Pieces.N]:()=>vt.Translation.Pieces.N,[vt.Translation.Pieces.P]:()=>vt.Translation.Pieces.P,[vt.Translation.Pieces.Q]:()=>vt.Translation.Pieces.Q,[vt.Translation.Pieces.R]:()=>vt.Translation.Pieces.R,[vt.Translation.Actions.Promote]:()=>vt.Translation.Actions.Promote,[vt.Translation.Actions.RemoveAnnotation]:()=>vt.Translation.Actions.RemoveAnnotation,[vt.Translation.Actions.RemoveBegin]:()=>vt.Translation.Actions.RemoveBegin,[vt.Translation.Actions.RemoveEnd]:()=>vt.Translation.Actions.RemoveEnd,[vt.Translation.Actions.RemoveEvaluationAnnotation]:()=>vt.Translation.Actions.RemoveEvaluationAnnotation,[vt.Translation.Actions.RemoveFocus]:()=>vt.Translation.Actions.RemoveFocus,[vt.Translation.Actions.SetBegin]:()=>vt.Translation.Actions.SetBegin,[vt.Translation.Actions.SetEnd]:()=>vt.Translation.Actions.SetEnd,[vt.Translation.Actions.SetFocus]:()=>vt.Translation.Actions.SetFocus,[vt.Translation.Annotations.SpeculativeMove]:()=>vt.Translation.Annotations.SpeculativeMove,[vt.Translation.Tooltips.ThreeFoldRepetition]:()=>vt.Translation.Tooltips.ThreeFoldRepetition,[vt.Translation.Annotations.PositionInZuqZwang]:()=>vt.Translation.Annotations.PositionInZuqZwang,[vt.Translation.Annotations.Unclear]:()=>vt.Translation.Annotations.Unclear,[vt.Translation.Annotations.WhiteHasDecisiveAdvantage]:()=>vt.Translation.Annotations.WhiteHasDecisiveAdvantage,[vt.Translation.Annotations.WhiteHasModerateAdvantage]:()=>vt.Translation.Annotations.WhiteHasModerateAdvantage,[vt.Translation.Annotations.WhiteHasSlightAdvantage]:()=>vt.Translation.Annotations.WhiteHasSlightAdvantage,[vt.Translation.Annotations.WithAttack]:()=>vt.Translation.Annotations.WithAttack,[vt.Translation.Annotations.WithCompensation]:()=>vt.Translation.Annotations.WithCompensation,[vt.Translation.Annotations.WithInitiative]:()=>vt.Translation.Annotations.WithInitiative,[vt.Translation.Plural.NumberOfDays]:t=>t===1?`${t} day`:`${t} days`,[vt.Translation.Plural.NumberOfHours]:t=>t===1?`${t} hr`:`${t} hrs`,[vt.Translation.Plural.NumberOfMinutes]:t=>t===1?`${t} min`:`${t} mins`};function Ws(t){return t===Ct.ColorsAsNumbers.Black?Ct.ColorsAsWords.Black:Ct.ColorsAsWords.White}function ha(t,r){return t===r}function oh(t){return t===0}function ah(t){return t>1}function Va(t){return Object.entries(t).reduce((r,[i,o])=>(o&&r.push(i),r),[]).join(" ")}function sh(t){let r,i,o,s,l,c;function f(v,E){return(i==null||E&64)&&(i=!!v[7](v[6])),i?p1:h1}let p=f(t,-1),m=p(t);return{c(){r=(0,P.d)("div"),m.c(),(0,P.h)(r,"data-ply",o=t[0].ply),(0,P.h)(r,"class",s=`node ${t[4]} ${Va({selected:ha(t[0].hash,t[5])})}`)},m(v,E){(0,P.j)(v,r,E),m.m(r,null),l||(c=(0,P.k)(r,"click",t[8]),l=!0)},p(v,E){p===(p=f(v,E))&&m?m.p(v,E):(m.d(1),m=p(v),m&&(m.c(),m.m(r,null))),E&1&&o!==(o=v[0].ply)&&(0,P.h)(r,"data-ply",o),E&49&&s!==(s=`node ${v[4]} ${Va({selected:ha(v[0].hash,v[5])})}`)&&(0,P.h)(r,"class",s)},d(v){v&&(0,P.m)(r),m.d(),l=!1,c()}}}function h1(t){let r=Zu({san:t[0].san,translations:t[3]})+"",i;return{c(){i=(0,P.t)(r)},m(o,s){(0,P.j)(o,i,s)},p(o,s){s&9&&r!==(r=Zu({san:o[0].san,translations:o[3]})+"")&&(0,P.r)(i,r)},d(o){o&&(0,P.m)(i)}}}function p1(t){let r,i,o,s,l=Zu({san:t[0].san,translations:t[3],showFigurine:!0})+"",c;return{c(){r=(0,P.d)("span"),s=(0,P.u)(),c=(0,P.t)(l),(0,P.h)(r,"class",i=`icon-font-chess ${ph(t[0])}-${t[4]}`),(0,P.h)(r,"data-figurine",o=t[0].san[0])},m(f,p){(0,P.j)(f,r,p),(0,P.j)(f,s,p),(0,P.j)(f,c,p)},p(f,p){p&17&&i!==(i=`icon-font-chess ${ph(f[0])}-${f[4]}`)&&(0,P.h)(r,"class",i),p&1&&o!==(o=f[0].san[0])&&(0,P.h)(r,"data-figurine",o),p&9&&l!==(l=Zu({san:f[0].san,translations:f[3],showFigurine:!0})+"")&&(0,P.r)(c,l)},d(f){f&&(0,P.m)(r),f&&(0,P.m)(s),f&&(0,P.m)(c)}}}function m1(t){let r,i=t[0]&&sh(t);return{c(){i&&i.c(),r=(0,P.n)()},m(o,s){i&&i.m(o,s),(0,P.j)(o,r,s)},p(o,[s]){o[0]?i?i.p(o,s):(i=sh(o),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:P.o,o:P.o,d(o){i&&i.d(o),o&&(0,P.m)(r)}}}function v1(t,r,i){let o,s,l=P.o,c=()=>(l(),l=(0,P.q)(R,Ie=>i(5,s=Ie)),R),f,p=P.o,m=()=>(p(),p=(0,P.q)(D,Ie=>i(6,f=Ie)),D);t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>p());var v;let{eventHandlers:E}=r,{node:y}=r,{wholeMoveNumber:M=1}=r,{selectedNode:R}=r;c();let{textType:D}=r;m();let{translations:W}=r;const Te=Ie=>Ie==="figurine";function dt(Ie){var ut;E.clickNode(Ie,(ut=y?.moveNumber)!==null&&ut!==void 0?ut:0)}return t.$$set=Ie=>{"eventHandlers"in Ie&&i(9,E=Ie.eventHandlers),"node"in Ie&&i(0,y=Ie.node),"wholeMoveNumber"in Ie&&i(10,M=Ie.wholeMoveNumber),"selectedNode"in Ie&&c(i(1,R=Ie.selectedNode)),"textType"in Ie&&m(i(2,D=Ie.textType)),"translations"in Ie&&i(3,W=Ie.translations)},t.$$.update=()=>{t.$$.dirty&2049&&i(4,o=Ws(i(11,v=y?.color)!==null&&v!==void 0?v:1))},[y,R,D,W,o,s,f,Te,dt,E,M,v]}class g1 extends P.a{constructor(r){super(),(0,P.i)(this,r,v1,m1,P.b,{eventHandlers:9,node:0,wholeMoveNumber:10,selectedNode:1,textType:2,translations:3})}}function lh(t,r,i){const o=t.slice();return o[6]=r[i],o}function uh(t){let r,i;return r=new g1({props:{eventHandlers:t[3],node:t[6],wholeMoveNumber:t[0],selectedNode:t[2],textType:t[4],translations:t[5]}}),{c(){(0,P.v)(r.$$.fragment)},m(o,s){(0,P.w)(r,o,s),i=!0},p(o,s){const l={};s&8&&(l.eventHandlers=o[3]),s&2&&(l.node=o[6]),s&1&&(l.wholeMoveNumber=o[0]),s&4&&(l.selectedNode=o[2]),s&16&&(l.textType=o[4]),s&32&&(l.translations=o[5]),r.$set(l)},i(o){i||((0,P.x)(r.$$.fragment,o),i=!0)},o(o){(0,P.y)(r.$$.fragment,o),i=!1},d(o){(0,P.z)(r,o)}}}function _1(t){let r,i,o,s,l=t[1],c=[];for(let p=0;p<l.length;p+=1)c[p]=uh(lh(t,l,p));const f=p=>(0,P.y)(c[p],1,1,()=>{c[p]=null});return{c(){r=(0,P.d)("div"),i=(0,P.t)(t[0]),o=(0,P.t)(`.
  
  `);for(let p=0;p<c.length;p+=1)c[p].c();(0,P.h)(r,"class","move"),(0,P.h)(r,"data-whole-move-number",t[0])},m(p,m){(0,P.j)(p,r,m),(0,P.A)(r,i),(0,P.A)(r,o);for(let v=0;v<c.length;v+=1)c[v].m(r,null);s=!0},p(p,[m]){if((!s||m&1)&&(0,P.r)(i,p[0]),m&63){l=p[1];let v;for(v=0;v<l.length;v+=1){const E=lh(p,l,v);c[v]?(c[v].p(E,m),(0,P.x)(c[v],1)):(c[v]=uh(E),c[v].c(),(0,P.x)(c[v],1),c[v].m(r,null))}for((0,P.B)(),v=l.length;v<c.length;v+=1)f(v);(0,P.C)()}(!s||m&1)&&(0,P.h)(r,"data-whole-move-number",p[0])},i(p){if(!s){for(let m=0;m<l.length;m+=1)(0,P.x)(c[m]);s=!0}},o(p){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)(0,P.y)(c[m]);s=!1},d(p){p&&(0,P.m)(r),(0,P.D)(c,p)}}}function ch(t,r,i){let{wholeMoveNumber:o=1}=r,{nodes:s}=r,{selectedNode:l}=r,{eventHandlers:c}=r,{textType:f}=r,{translations:p}=r;return t.$$set=m=>{"wholeMoveNumber"in m&&i(0,o=m.wholeMoveNumber),"nodes"in m&&i(1,s=m.nodes),"selectedNode"in m&&i(2,l=m.selectedNode),"eventHandlers"in m&&i(3,c=m.eventHandlers),"textType"in m&&i(4,f=m.textType),"translations"in m&&i(5,p=m.translations)},[o,s,l,c,f,p]}class b1 extends P.a{constructor(r){super(),(0,P.i)(this,r,ch,_1,P.b,{wholeMoveNumber:0,nodes:1,selectedNode:2,eventHandlers:3,textType:4,translations:5})}}function dh(t,r,i){const o=t.slice();return o[9]=r[i],o[11]=i,o}function fh(t){let r,i;return r=new b1({props:{wholeMoveNumber:t[11]+1,nodes:t[9],selectedNode:t[5],eventHandlers:t[0],textType:t[6],translations:t[1]}}),{c(){(0,P.v)(r.$$.fragment)},m(o,s){(0,P.w)(r,o,s),i=!0},p(o,s){const l={};s&4&&(l.nodes=o[9]),s&1&&(l.eventHandlers=o[0]),s&2&&(l.translations=o[1]),r.$set(l)},i(o){i||((0,P.x)(r.$$.fragment,o),i=!0)},o(o){(0,P.y)(r.$$.fragment,o),i=!1},d(o){(0,P.z)(r,o)}}}function Id(t){let r,i,o;return{c(){r=(0,P.d)("div"),i=(0,P.d)("span"),o=(0,P.t)(t[3]),(0,P.h)(i,"class","game-result"),(0,P.h)(r,"class","move")},m(s,l){(0,P.j)(s,r,l),(0,P.A)(r,i),(0,P.A)(i,o)},p(s,l){l&8&&(0,P.r)(o,s[3])},d(s){s&&(0,P.m)(r)}}}function y1(t){let r,i,o,s=t[2],l=[];for(let p=0;p<s.length;p+=1)l[p]=fh(dh(t,s,p));const c=p=>(0,P.y)(l[p],1,1,()=>{l[p]=null});let f=t[3]&&Id(t);return{c(){for(let p=0;p<l.length;p+=1)l[p].c();r=(0,P.u)(),f&&f.c(),i=(0,P.n)()},m(p,m){for(let v=0;v<l.length;v+=1)l[v].m(p,m);(0,P.j)(p,r,m),f&&f.m(p,m),(0,P.j)(p,i,m),o=!0},p(p,[m]){if(m&103){s=p[2];let v;for(v=0;v<s.length;v+=1){const E=dh(p,s,v);l[v]?(l[v].p(E,m),(0,P.x)(l[v],1)):(l[v]=fh(E),l[v].c(),(0,P.x)(l[v],1),l[v].m(r.parentNode,r))}for((0,P.B)(),v=s.length;v<l.length;v+=1)c(v);(0,P.C)()}p[3]?f?f.p(p,m):(f=Id(p),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},i(p){if(!o){for(let m=0;m<s.length;m+=1)(0,P.x)(l[m]);o=!0}},o(p){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)(0,P.y)(l[m]);o=!1},d(p){(0,P.D)(l,p),p&&(0,P.m)(r),f&&f.d(p),p&&(0,P.m)(i)}}}function w1(t,r,i){let o,s,{data:l}=r,{eventHandlers:c}=r,{translations:f}=r;const{wholeMoves:p,selectedNode:m,textType:v,result:E}=l;return(0,P.E)(t,p,y=>i(2,o=y)),(0,P.E)(t,E,y=>i(3,s=y)),t.$$set=y=>{"data"in y&&i(8,l=y.data),"eventHandlers"in y&&i(0,c=y.eventHandlers),"translations"in y&&i(1,f=y.translations)},[c,f,o,s,p,m,v,E,l]}class E1 extends P.a{constructor(r){super(),(0,P.i)(this,r,w1,y1,P.b,{data:8,eventHandlers:0,translations:1})}}function hh(t,r){const i=document.createDocumentFragment(),o=new t(Object.assign({},r,{target:i}));return r.target.replaceWith(i),o}function eu({ComponentType:t,methods:r,options:i,replaceContainer:o=!0}){const s=o?hh(t,i):new t(i),l={destroy:c,el:i.target,get:f,instance:s,on:p,set:m};return r&&r.length&&r.forEach(v=>{l[v]=s[v]}),l;function c(){s.$destroy()}function f(v){return typeof v=="string"?s.$$.ctx[v]:(0,P.F)(s.$$.ctx,v)}function p(v,E){s.$on(v,E)}function m(v){s.$set(v)}}function A1({options:t,target:r,replaceContainer:i=!1}){return eu({ComponentType:E1,options:ze(Ee({},t),{target:r}),replaceContainer:i})}function Zu({showFigurine:t=!1,san:r="",translations:i}){return r.split("").map(o=>{if(!("NBRQK".includes(o)&&t))return!"NBRQK".includes(o)||!i?o:i?.[o]()}).join("")}function S1(t){return t.reduce((r,i)=>{var o;if(i.wholeMoveNumber){const s=i.wholeMoveNumber-1;return[...r.slice(0,s),[...(o=r[s])!=null?o:[],i],...r.slice(s+1)]}return r},[])}function ph(t){return Ct.Piece.Names[t.san[0].toLowerCase()]}var Ho;(function(t){t.LineStart="lineStart",t.NodeSelected="nodeSelected",t.ResultSelected="resultSelected"})(Ho||(Ho={}));var ja;(function(t){t.LOAD_LINE="LOAD_LINE",t.GO_TO_START="GO_TO_START",t.SELECT_NODE="SELECT_NODE"})(ja||(ja={}));function mh(t){const r=(0,P.c)(t);function i(s,l){r.transition(s,l),r.emit("action",{type:s,value:l,nextState:r.getCurrentState()})}return Object.assign({},r,{send:i,onTransition:s=>r.on("action",s)})}function k1(t){const r=mh(C1(t));return r.onTransition(i=>[P1].forEach(o=>o(i,t))),r}function P1({type:t,value:r,nextState:i},o){var s;const l=o.data.currentState.get(),{setWholeMoves:c,selectNode:f,setResult:p,setState:m}=o.actions;l!==i&&m(i);const v={[ja.LOAD_LINE]:({line:E,result:y,node:M})=>{c(E),f(M),p(y)},[ja.GO_TO_START]:f,[ja.SELECT_NODE]:f};(s=v[t])==null||s.call(v,r,i)}function C1({game:t,data:r}){return{initialState:Ho.LineStart,states:{[Ho.LineStart]:{SELECT_NODE:()=>Ho.NodeSelected,LOAD_LINE:()=>Ho.NodeSelected},[Ho.NodeSelected]:{GO_TO_START:()=>Ho.LineStart,SELECT_NODE:()=>Ho.NodeSelected,LOAD_LINE:()=>Ho.NodeSelected}}}}function uo(t){let r=t;const i=(0,P.G)(r);function o(c){return i.set(r=c)}function s(c){i.update(f=>r=c(f))}function l(){return r}return{set:o,update:s,subscribe:i.subscribe,get:l}}function T1(){const t={currentState:Ho.LineStart,wholeMoves:[],selectedNode:null,textType:Rr.MoveListDisplayTypes.Text,result:null},r={wholeMoves:uo(t.wholeMoves),currentState:uo(t.currentState),selectedNode:uo(t.selectedNode),textType:uo(t.textType),result:uo(t.result)};return{data:r,actions:M1(r)}}function M1({wholeMoves:t,currentState:r,selectedNode:i,textType:o,result:s}){function l(v){r.set(v)}function c(v){s.set(v==="*"?null:v)}function f(v){t.set(S1(v))}function p(v){i.set(v)}function m(v){o.set(v)}return{setTextType:m,setState:l,setWholeMoves:f,selectNode:p,setResult:c}}function O1(t,{game:r,data:i}){return{clickNode(o,s){o.stopPropagation(),r.selectNode(0,s)}}}var A6=`@charset "UTF-8";
[data-tooltip] {
  position: relative;
}
[data-tooltip] body.dark-mode:after, body.dark-mode [data-tooltip]:after {
  background: rgba(0, 0, 0, 0.7);
}
[data-tooltip]:after {
  opacity: 0;
  pointer-events: none;
  position: absolute;
  transition: all 0.16s ease-out 0.08s;
  z-index: 1;
  background: #262421;
  border-radius: 2px;
  color: #fff;
  content: attr(data-tooltip);
  font-size: 1.4rem;
  font-weight: 600;
  max-width: 200px;
  padding: 5px 8px;
  text-align: center;
  white-space: nowrap;
}
[data-tooltip]:before {
  opacity: 0;
  pointer-events: none;
  position: absolute;
  transition: all 0.16s ease-out 0.08s;
  z-index: 1;
  border: 5px solid transparent;
  content: "";
  height: 0;
  width: 0;
}
[data-tooltip]:hover:before, [data-tooltip]:hover:after {
  opacity: 1;
}
[data-tooltip][data-tooltip-position=bottom]:after, [data-tooltip][data-tooltip-position=bottom]:before {
  left: 50%;
  top: 100%;
  transform: translate3d(-50%, -4px, 0);
}
[data-tooltip][data-tooltip-position=bottom]:after {
  margin-top: 10px;
}
[data-tooltip][data-tooltip-position=bottom]:before {
  border-bottom-color: #262421;
}
[data-tooltip][data-tooltip-position=bottom]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=bottom]:before {
  border-bottom-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=bottom]:hover:after, [data-tooltip][data-tooltip-position=bottom]:hover:before {
  transform: translate3d(-50%, 0, 0);
}
[data-tooltip][data-tooltip-position=left]:after, [data-tooltip][data-tooltip-position=left]:before {
  right: 100%;
  top: 50%;
  transform: translate3d(4px, -50%, 0);
}
[data-tooltip][data-tooltip-position=left]:after {
  margin-right: 10px;
}
[data-tooltip][data-tooltip-position=left]:before {
  border-left-color: #262421;
}
[data-tooltip][data-tooltip-position=left]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=left]:before {
  border-left-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=left]:hover:after, [data-tooltip][data-tooltip-position=left]:hover:before {
  transform: translate3d(0, -50%, 0);
}
[data-tooltip][data-tooltip-position=right]:after, [data-tooltip][data-tooltip-position=right]:before {
  left: 100%;
  top: 50%;
  transform: translate3d(-4px, -50%, 0);
}
[data-tooltip][data-tooltip-position=right]:after {
  margin-left: 10px;
}
[data-tooltip][data-tooltip-position=right]:before {
  border-right-color: #262421;
}
[data-tooltip][data-tooltip-position=right]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=right]:before {
  border-right-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=right]:hover:after, [data-tooltip][data-tooltip-position=right]:hover:before {
  transform: translate3d(0, -50%, 0);
}
[data-tooltip][data-tooltip-position=top]:after, [data-tooltip][data-tooltip-position=top]:before {
  bottom: 100%;
  left: 50%;
  transform: translate3d(-50%, 4px, 0);
}
[data-tooltip][data-tooltip-position=top]:after {
  margin-bottom: 10px;
}
[data-tooltip][data-tooltip-position=top]:before {
  border-top-color: #262421;
}
[data-tooltip][data-tooltip-position=top]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=top]:before {
  border-top-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=top]:hover:after, [data-tooltip][data-tooltip-position=top]:hover:before {
  transform: translate3d(-50%, 0, 0);
}
.horizontal-move-list .icon-font-chess:before,
.vertical-move-list .icon-font-chess:before {
  pointer-events: none;
}
.horizontal-move-list .icon-font-chess.knight-black:before,
.vertical-move-list .icon-font-chess.knight-black:before {
  content: "\xC7";
}
.horizontal-move-list .icon-font-chess.knight-white:before,
.vertical-move-list .icon-font-chess.knight-white:before {
  content: "\u0116";
}
.horizontal-move-list .icon-font-chess.bishop-black:before,
.vertical-move-list .icon-font-chess.bishop-black:before {
  content: "\u0102";
}
.horizontal-move-list .icon-font-chess.bishop-white:before,
.vertical-move-list .icon-font-chess.bishop-white:before {
  content: "\xC4";
}
.horizontal-move-list .icon-font-chess.queen-black:before,
.vertical-move-list .icon-font-chess.queen-black:before {
  content: "\u012E";
}
.horizontal-move-list .icon-font-chess.queen-white:before,
.vertical-move-list .icon-font-chess.queen-white:before {
  content: "\u0136";
}
.horizontal-move-list .icon-font-chess.king-black:before,
.vertical-move-list .icon-font-chess.king-black:before {
  content: "\u0100";
}
.horizontal-move-list .icon-font-chess.king-white:before,
.vertical-move-list .icon-font-chess.king-white:before {
  content: "\u0104";
}
.horizontal-move-list .icon-font-chess.rook-black:before,
.vertical-move-list .icon-font-chess.rook-black:before {
  content: "\u013D";
}
.horizontal-move-list .icon-font-chess.rook-white:before,
.vertical-move-list .icon-font-chess.rook-white:before {
  content: "\u013B";
}
.dark-mode .horizontal-move-list .icon-font-chess.knight-black:before,
.dark-mode .vertical-move-list .icon-font-chess.knight-black:before {
  content: "\u0116";
}
.dark-mode .horizontal-move-list .icon-font-chess.knight-white:before,
.dark-mode .vertical-move-list .icon-font-chess.knight-white:before {
  content: "\xC7";
}
.dark-mode .horizontal-move-list .icon-font-chess.bishop-black:before,
.dark-mode .vertical-move-list .icon-font-chess.bishop-black:before {
  content: "\xC4";
}
.dark-mode .horizontal-move-list .icon-font-chess.bishop-white:before,
.dark-mode .vertical-move-list .icon-font-chess.bishop-white:before {
  content: "\u0102";
}
.dark-mode .horizontal-move-list .icon-font-chess.queen-black:before,
.dark-mode .vertical-move-list .icon-font-chess.queen-black:before {
  content: "\u0136";
}
.dark-mode .horizontal-move-list .icon-font-chess.queen-white:before,
.dark-mode .vertical-move-list .icon-font-chess.queen-white:before {
  content: "\u012E";
}
.dark-mode .horizontal-move-list .icon-font-chess.king-black:before,
.dark-mode .vertical-move-list .icon-font-chess.king-black:before {
  content: "\u0104";
}
.dark-mode .horizontal-move-list .icon-font-chess.king-white:before,
.dark-mode .vertical-move-list .icon-font-chess.king-white:before {
  content: "\u0100";
}
.dark-mode .horizontal-move-list .icon-font-chess.rook-black:before,
.dark-mode .vertical-move-list .icon-font-chess.rook-black:before {
  content: "\u013B";
}
.dark-mode .horizontal-move-list .icon-font-chess.rook-white:before,
.dark-mode .vertical-move-list .icon-font-chess.rook-white:before {
  content: "\u013D";
}
:root {
  --nodeBackground: #fff35f;
  --nodeBorder: rgba(0, 0, 0, 0.05);
  --nodeColor: #262421;
  --nodeColorSelected: #262421;
  --nodeNumber: rgba(0, 0, 0, 0.7);
}
:global(.dark-mode) {
  --nodeNumber: rgba(255, 255, 255, 0.5);
  --nodeColor: rgba(255, 255, 255, 0.72);
  --nodeBackground: rgba(255, 255, 0, 0.2);
  --nodeBorder: rgba(255, 255, 0, 0.4);
  --nodeColorSelected: #fff;
}
.move-list {
  --timeBarMaxWidth: 65px;
  --timeMaxValue: 0;
  --whiteNodeSpace: 4rem;
  --blackNodeSpace: 12rem;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.move-list body.dark-mode .move, body.dark-mode .move-list .move {
  color: rgba(255, 255, 255, 0.5);
}
.move-list body.dark-mode .move:nth-child(even), body.dark-mode .move-list .move:nth-child(even) {
  background-color: rgba(255, 255, 255, 0.02);
}
.move-list body.dark-mode .time-white:after, body.dark-mode .move-list .time-white:after {
  background-color: rgba(255, 255, 255, 0.8);
}
.move-list body.dark-mode .time-black:after, body.dark-mode .move-list .time-black:after {
  background-color: rgba(255, 255, 255, 0.2);
}
.move-list .move {
  box-sizing: border-box;
  color: #262421;
  font-size: 13px;
  font-weight: 600;
  height: 30px;
  line-height: 30px;
  overflow: hidden;
  padding: 0 5px 0 15px;
  position: relative;
  width: 100%;
}
.move-list .move:nth-child(even) {
  background-color: #f8f8f8;
}
.move-list .move .node {
  font-weight: 700;
}
.move-list .move .node .icon-font-chess {
  display: inline-block;
  font-size: 2.3rem;
  margin-right: 0.2rem;
  margin-top: -1.3rem;
}
.move-list .move .node .move-info-icon {
  --tooltip-top: 1px;
  cursor: pointer;
  display: inline-block;
  margin-left: 5px;
  margin-top: 0;
  vertical-align: top;
}
.move-list .move .node .move-info-icon:before {
  display: contents;
}
.move-list .move .node .move-info-icon[data-tooltip]:after {
  margin-top: 24px;
  position: fixed;
  top: var(--tooltip-top);
  transform: translateX(-50%);
  transition: opacity 0.16s;
  white-space: initial;
  z-index: 1000;
}
.move-list .move .node .move-info-icon[data-tooltip][data-tooltip-position=top]:after {
  bottom: initial;
  left: initial;
  margin-top: 0;
  right: initial;
  top: initial;
  transform: translate3d(-50%, -100%, 0);
}
.move-list .move .node .move-info-icon .circle-info:before {
  content: ")";
}
.move-list .move .node .move-info-icon .redo:before {
  content: "\u1F22";
}
.move-list [data-ply]:not(.selected) {
  cursor: pointer;
}
.move-list .white,
.move-list .black,
.move-list .game-result {
  height: 24px;
  line-height: 24px;
  min-width: 40px;
  padding: 0 4px;
  position: absolute;
  top: 3px;
}
.move-list .white body.dark-mode, body.dark-mode .move-list .white,
.move-list .black body.dark-mode,
body.dark-mode .move-list .black,
.move-list .game-result body.dark-mode,
body.dark-mode .move-list .game-result {
  color: rgba(255, 255, 255, 0.72);
}
.move-list .white.selected,
.move-list .black.selected,
.move-list .game-result.selected {
  background-color: var(--nodeBackground);
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-color: var(--nodeBorder);
  border-radius: 2px;
  color: var(--nodeColorSelected);
  cursor: default;
}
.move-list .white.selected body.dark-mode, body.dark-mode .move-list .white.selected,
.move-list .black.selected body.dark-mode,
body.dark-mode .move-list .black.selected,
.move-list .game-result.selected body.dark-mode,
body.dark-mode .move-list .game-result.selected {
  background-color: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.1);
}
.move-list.movelist-colored .node {
  color: var(--nodeCustomColor, --nodeColor);
}
.move-list.movelist-colored .node body.dark-mode, body.dark-mode .move-list.movelist-colored .node {
  color: var(--nodeCustomColor, rgba(255, 255, 255, 0.72));
}
.move-list .white {
  left: var(--whiteNodeSpace);
}
.move-list .black {
  left: var(--blackNodeSpace);
}
.move-list .game-result {
  left: var(--whiteNodeSpace);
}
.move-list .time-white,
.move-list .time-black {
  font-size: 10px;
  height: 10px;
  line-height: 10px;
  position: absolute;
  right: 5px;
  width: var(--timestampWidth);
}
.move-list .time-white:after,
.move-list .time-black:after {
  background-clip: content-box;
  border-radius: 2px;
  box-sizing: border-box;
  content: "";
  height: 10px;
  left: -3px;
  max-width: var(--timeBarLimit);
  min-width: 2px;
  position: absolute;
  transform: translateX(-100%);
  width: calc(var(--timeValue) / var(--timeMaxValue) * var(--timeBarMaxWidth));
}
.move-list.timestamps-with-base-time .time-white:after,
.move-list.timestamps-with-base-time .time-black:after {
  width: var(--timeBarWidth);
}
.move-list .time-white {
  top: 4px;
}
.move-list .time-white:after {
  background-color: rgba(0, 0, 0, 0.2);
  top: 0;
}
.move-list .time-black {
  bottom: 3px;
}
.move-list .time-black:after {
  background-color: rgba(0, 0, 0, 0.8);
  bottom: -1px;
}
.toggle-timestamps > .move .time-white,
.toggle-timestamps > .move .time-black {
  color: transparent;
  width: 0;
}
.toggle-timestamps > .move:hover .time-white,
.toggle-timestamps > .move:hover .time-black {
  color: #8b8987;
  width: auto;
}
.toggle-timestamps > .move:hover .time-white body.dark-mode, body.dark-mode .toggle-timestamps > .move:hover .time-white,
.toggle-timestamps > .move:hover .time-black body.dark-mode,
body.dark-mode .toggle-timestamps > .move:hover .time-black {
  color: rgba(255, 255, 255, 0.5);
}
.toggle-timestamps > .move:hover .time-white:after,
.toggle-timestamps > .move:hover .time-black:after {
  visibility: hidden;
}`;function vh({containerEl:t,translations:r=$s,game:i}){const{data:o,actions:s}=T1(),l=k1({data:o,actions:s,game:i}),c=O1(l.send,{data:o,game:i});return{destroy:A1({options:{props:{data:o,eventHandlers:c,translations:r}},target:t}).destroy,setTextType:p=>s.setTextType(p),loadLine:(p,m,v)=>l.send(ja.LOAD_LINE,{line:p,result:m,node:v}),goToStart:()=>l.send(ja.GO_TO_START),selectNode:p=>l.send(ja.SELECT_NODE,{node:p}),setResult:s.setResult}}var Rd;(function(t){(function(r){r.Ready="Ready",r.Updated="Updated"})(t.Events||(t.Events={})),t.Name="move-list"})(Rd||(Rd={}));function Yu(...t){return function(i,o){return!!t.find(s=>s(i,o))}}function x1({containerEl:t,translations:r=$s}){let i;return{api:p=>({getMoveList:()=>i}),create:l,destroy:f,match:[{condition:Ht([...Io]),handler:o},{condition:Je(x.OptionsEvents.Update),handler:s},{condition:Je(x.APIEvents.UpdatePGNHeaders),handler:c}],name:Rd.Name};function o(p,m){var v;const{api:E}=m,y=E.getLine(0),M=E.getResult(),R=(v=E.getSelectedNode())==null?void 0:v.hash;i.loadLine(y,M,R)}function s(p){p.data.moveListDisplayType&&i.setTextType(p.data.moveListDisplayType)}function l(p){i=vh({containerEl:t,game:p.api,translations:r})}function c(p,m){const v=m.api.getResult();i.setResult(v)}function f(){i&&i.destroy()}}const Ta=()=>{};function tu(t=!0){const r=[];let i=!1;return{add:o,clear:s,flush:l,getEntries:c};function o(f,...p){let m=Ta,v=Ta;const E=new Promise((y,M)=>{v=y,m=M});return r.push({fn:f,params:p,reject:m,resolve:v}),t&&i===!1&&l(),E}function s(){i=!1,r.length=0}async function l(){const f=r.shift();if(!f){i=!1;return}i=!0;try{const p=await f.fn(...f.params);return f.resolve(p),l()}catch(p){f.reject(p)}}function c(){return r}}function gh(){let t,r;return{promise:new Promise((i,o)=>{t=i,r=o}),reject:r,resolve:t}}function I1(){let t=!1;const r=gh();return{isReady:()=>t,ready:i,waitForReady:()=>r.promise};function i(o){var s;t=!0,(s=r.resolve)==null||s.call(r,o)}}function R1(t){return function({context:i,event:o,line:s,selectedNode:l,queue:c}){const{data:f,type:p}=o,m=l?.ply;return p===x.APIEvents.AddMove&&f.listMove?t.addNode(f.listMove):f&&f.plyDiff===1&&l?(t.addNode(l),t.selectNode(m)):p===x.APIEvents.CreateGame||p===x.APIEvents.Load||p===x.APIEvents.DeletePosition?t.loadNodes(s):p===x.APIEvents.LineUpdated?(t.loadNodes(s),t.selectNode(m)):f.moveListDisplayType?(t.setMoveListDisplayType(f.moveListDisplayType),t.loadNodes(s,m)):p===x.APIEvents.NodeUpdated&&f.changes&&Object.prototype.hasOwnProperty.call(f.changes,"timestamp")?t.updateTimestamp(f.changes.node):p===x.APIEvents.UpdatePGNHeaders&&f.Result?(t.setResult(f.Result),i.game.inThreefoldRepetition()&&c.add(t.addThreeFoldIcons,s)):m===0?t.deselectNode():p!==x.OptionsEvents.Update&&t.selectNode(m),f.changes&&Object.prototype.hasOwnProperty.call(f.changes,"customColor")&&t.updateNodeColor(f.ids.move+1,f.changes.customColor),m}}var oa;(function(t){(function(r){r.EnPassant="circle-info",r.MoveInfoIcon="move-info-icon",r.ThreeFoldIcon="redo",r.IconFont="icon-font-chess",r.MoveList="move-list"})(t.Classes||(t.Classes={})),function(r){r.EnPassantIcon="span"}(t.Tags||(t.Tags={})),function(r){r.Color="--nodeCustomColor"}(t.CssVariables||(t.CssVariables={}))})(oa||(oa={}));function N1({el:t,value:r,variable:i}){if(r!==void 0)return t.style.setProperty(i,r);t.style.removeProperty(i)}function Nd(t,r){Object.values(oa.CssVariables).forEach(i);function i(o){N1({el:t,value:r,variable:o})}}var di;(function(t){t.Mousedown="mousedown",t.MouseMove="mousemove",t.Mouseup="mouseup",t.PointerDown="pointerdown",t.PointerMove="pointermove",t.PointerUp="pointerup",t.Touchstart="touchstart",t.Touchmove="touchmove",t.Touchend="touchend"})(di||(di={}));const{Pointerdown:No,Pointermove:qs,Pointerup:Xu}=L1();function L1(){const t="onpointerdown"in window,r="ontouchstart"in window;let i,o,s;return t?(i=di.PointerDown,o=di.PointerMove,s=di.PointerUp):r?(i=di.Touchstart,o=di.Touchmove,s=di.Touchend):(i=di.Mousedown,o=di.MouseMove,s=di.Mouseup),{Pointerdown:i,Pointermove:o,Pointerup:s}}function B1(t,r){const i=document.createElement("div"),o=document.createElement(oa.Tags.EnPassantIcon);return i.appendChild(o),i.classList.add(oa.Classes.MoveInfoIcon),o.classList.add(oa.Classes.IconFont,oa.Classes.EnPassant),i.addEventListener(No,l),i.addEventListener("mouseover",s),i.dataset.tooltip=r[vt.Translation.Tooltips.EnPassant](),{el:i,listener:{el:i,eventName:No,handler:l}};function s(){const c=i.getBoundingClientRect().y;i.style.setProperty("--tooltip-top",`${c}px`)}function l(c){c.stopPropagation(),window.open(t,"_blank")}}function D1(t={}){const r=Ee({},t);return{get:i,set:o};function i(){return r}function o(s){Object.assign(r,s)}}function F1(t){return Ct.Piece.Names[t.toLowerCase()]}function z1(t,r){return t.toUpperCase()===t?yi(t,r):t}function yi(t,r){return`<span class="icon-font-chess ${F1(t)}-${r}" data-figurine="${t}"></span>`}function nu({color:t,moveListDisplayType:r,san:i,translations:o}){return i.split("").map(s=>"NBRQK".includes(s)?r===Rr.MoveListDisplayTypes.Figurine?z1(s,t):o[s]():s).join("")}const U1=65;function H1(t,r){const i=r/40,o=t/i;return U1*2/Math.PI*Math.atan(o/3)}function G1(t,r){if(!t)return;const i=t.map(({fen:o})=>o.split(" ").slice(0,2).join(" "));return V1(i).map(o=>r[o])}function V1(t){return t.reduceRight((r,i,o,s)=>((i===s[s.length-1]?r.push(o):r.length)===3&&(s.length=0),r),[])}function j1(t){return`time-${t}`}function Ks(t){return t===Ct.Move.Flags.EPCapture}const _h=7;function ys(t){return`.${t}`}var Wr;(function(t){(function(r){(function(i){i.Ply="data-ply",i.Time="data-time",i.WholeMoveNumber="data-whole-move-number",i.VMLElement="data-vml-element"})(r.Attributes||(r.Attributes={})),function(i){i.TimeBarWidth="--timeBarWidth",i.TimeValue="--timeValue",i.MaxMoveTimeTaken="--timeMaxValue",i.TimestampWidth="--timestampWidth"}(r.CSSVariables||(r.CSSVariables={})),function(i){i.ColorsEnabled="movelist-colored",i.List="vertical-move-list",i.GameResult="game-result",i.Move="move",i.Node="node",i.Selected="selected",i.WithBaseTime="timestamps-with-base-time",i.ToggleTimestamps="toggle-timestamps"}(r.ClassNames||(r.ClassNames={})),function(i){i.Timestamp="timestamp"}(r.ElementTypes||(r.ElementTypes={}))})(t.DOM||(t.DOM={})),function(r){r.SelectNode="SelectNode"}(t.Events||(t.Events={}))})(Wr||(Wr={}));function Ld({containerEl:t,moveListEl:r,nodeEl:i}){if(!r||!i)return;const o=t||r,s=o.getBoundingClientRect(),l=i.getBoundingClientRect(),c=(s.bottom-s.top)/2,f=s.top-l.top+c;o.scrollTop-=f}function $1(t){const{el:r,toggleTimestamps:i}=t,o=[],s=D1(t);return{addMove:l,addNode:c,addTimestamp:f,clearList:p,createList:m,deselectNode:R,destroyList:W,enableColors:Te,getLastPly:dt,getParams:s.get,getResult:Qt,getResultNodeElement:Vn,getTimestamp:ar,hasResultNode:lr,addThreeFoldMoveIcons:xi,removeTimestamp:ki,scrollToSelectedNode:io,selectNode:br,selectNodeElement:Oi,setResultNode:ri,setTimestampValue:qi,setParams:s.set,updateNodeColor:Xo};function l(un){const In=document.createElement("div");return In.classList.add(Wr.DOM.ClassNames.Move),un&&(In.setAttribute(Wr.DOM.Attributes.WholeMoveNumber,`${un}`),In.innerHTML=`${un}.`),r.appendChild(In),In}function c(un){const{color:In,flags:Mr,ids:ii,ply:Ii,san:Fi,wholeMoveNumber:wi}=un;if(!In||!Ii||!Fi||!wi||pn(Ii))return;let fr=ut(wi);fr||(fr=l(wi));const Yi=v({color:Ws(In),moveId:ii.move,isEPCapture:Mr?Ks(Mr):!1,ply:Ii,san:Fi});if(Yi)return un.ply&&Object.prototype.hasOwnProperty.call(un,"customColor")&&Nd(Yi,un.customColor),fr.appendChild(Yi)}function f({baseTime:un,node:In,timestamp:Mr,title:ii,value:Ii}){const{color:Fi,ply:wi,wholeMoveNumber:fr}=In;if(!Fi||!wi||!fr)return;const Yi=ut(fr);if(!Yi)return;const Ns=Br(wi);Ns&&Yi.removeChild(Ns);const za=M(wi);return ii&&po(ii,za),Pi(Fi,za),qi({baseTime:un,ply:wi,timestamp:Mr,value:Ii},za),Yi.appendChild(za),za}function p(){W(),m()}function m(){W(),r.classList.add(Wr.DOM.ClassNames.List),i&&r.classList.add(Wr.DOM.ClassNames.ToggleTimestamps)}function v({color:un,isEPCapture:In,moveId:Mr,ply:ii,san:Ii}){const{EPIconInfoPath:Fi,moveListDisplayType:wi,translations:fr}=s.get(),Yi=document.createElement("div");if(Yi.setAttribute(Wr.DOM.Attributes.Ply,ii.toString()),Yi.classList.add(un,Wr.DOM.ClassNames.Node),Yi.innerHTML=nu({color:un,moveListDisplayType:wi,san:Ii,translations:fr}),In){const{el:za,listener:nv}=B1(Fi,fr);Yi.appendChild(za),o.push({el:za,eventName:No,handler:nv.handler})}return Yi.addEventListener(No,Ns),o.push({eventName:No,handler:Ns}),Yi;function Ns(){r.dispatchEvent(new CustomEvent(Wr.Events.SelectNode,{detail:{ids:{move:Mr,line:0},ply:ii}}))}}function E(un,In){const Mr=document.createElement("span");return Mr.innerHTML=un,Mr.classList.add(In,Wr.DOM.ClassNames.GameResult),Mr}function y(){const{translations:un}=s.get(),In=document.createElement("div"),Mr=document.createElement("span");return In.appendChild(Mr),In.classList.add(oa.Classes.MoveInfoIcon),Mr.classList.add(oa.Classes.IconFont,oa.Classes.ThreeFoldIcon),In.dataset.tooltip=un[vt.Translation.Tooltips.ThreeFoldRepetition](),In.addEventListener("mouseover",ii),In;function ii(){const Ii=In.getBoundingClientRect().y;In.style.setProperty("--tooltip-top",`${Ii}px`)}}function M(un){const In=document.createElement("div");return In.setAttribute(Wr.DOM.Attributes.Ply,un.toString()),In.setAttribute(Wr.DOM.Attributes.VMLElement,Wr.DOM.ElementTypes.Timestamp),In}function R(un){const In=un?pn(un):Gr();In&&D(In)}function D(un){un.classList.remove(Wr.DOM.ClassNames.Selected)}function W(){o.forEach(un=>{r.removeEventListener(un.eventName,un.handler)}),r.classList.remove(Wr.DOM.ClassNames.List),r.innerHTML=""}function Te(un){const{colorsEnabled:In}=s.get();In!==un&&(s.set({colorsEnabled:un}),r.classList[un?"add":"remove"](Wr.DOM.ClassNames.ColorsEnabled))}function dt(){const un=Dt();if(!un.length)return;const In=Fn(un[un.length-1]);if(In)return In}function Ie(){const un=r.style.getPropertyValue(Wr.DOM.CSSVariables.MaxMoveTimeTaken);return un.length?parseFloat(un):null}function ut(un){return r.querySelector(`[${Wr.DOM.Attributes.WholeMoveNumber}="${un}"]`)}function Tt(){return Array.from(r.querySelectorAll(`${ys(Wr.DOM.ClassNames.Move)}`))}function rr(un){return un.classList.contains(Ct.ColorsAsWords.Black)?Ct.ColorsAsNumbers.Black:Ct.ColorsAsNumbers.White}function Fn(un){const In=un.getAttribute(Wr.DOM.Attributes.Ply);return In?parseInt(In,10):null}function pn(un){return r.querySelector(`${ys(Wr.DOM.ClassNames.Node)}[${Wr.DOM.Attributes.Ply}="${un}"]`)}function Dt(){return Array.from(r.querySelectorAll(`${ys(Wr.DOM.ClassNames.Node)}`))}function Qt(){const un=Vn();return un?un.innerText:Ct.Results.None}function Vn(){return r.querySelector(ys(Wr.DOM.ClassNames.GameResult))}function ar(un){const In=Br(un);if(!In)return null;const Mr=In.getAttribute(Wr.DOM.Attributes.Time);return Mr?.length===0?null:parseFloat(Mr)}function Br(un){return r.querySelector(`[${Wr.DOM.Attributes.VMLElement}="${Wr.DOM.ElementTypes.Timestamp}"][${Wr.DOM.Attributes.Ply}="${un}"]`)}function dr(){const un=r.style.getPropertyValue(Wr.DOM.CSSVariables.TimestampWidth);return un.length?parseFloat(un):null}function Gr(){return r.querySelector(ys(Wr.DOM.ClassNames.Selected))}function lr(){return!!r.querySelector(ys(Wr.DOM.ClassNames.GameResult))}function ki(un){const In=Br(un);In&&In.parentNode.removeChild(In)}function io(){const{scrollContainer:un}=s.get(),In=Gr(),Mr=un||r;if(!In){Mr.scrollTop=0;return}Ld({containerEl:Mr,moveListEl:r,nodeEl:In})}function Oi(un){const In=Gr();un!==In&&(In&&D(In),un.classList.add(Wr.DOM.ClassNames.Selected))}function br(un){const In=pn(un);In&&Oi(In)}function Ur(un){if(un===null){r.style.removeProperty(Wr.DOM.CSSVariables.MaxMoveTimeTaken);return}r.style.setProperty(Wr.DOM.CSSVariables.MaxMoveTimeTaken,un.toString())}function ri(un){const In=Vn();if(In!==null){const wi=In.parentNode;if(!wi)return;wi.removeChild(In),wi.childNodes.length===0&&wi.parentNode.removeChild(wi)}if(un===Ct.Results.None)return;const Mr=Dt().slice(-1)[0],ii=!Mr||rr(Mr)===Ct.ColorsAsNumbers.Black?Ct.ColorsAsWords.White:Ct.ColorsAsWords.Black,Ii=ii===Ct.ColorsAsWords.White?l():Tt().slice(-1)[0],Fi=E(un,ii);Ii.appendChild(Fi)}function xi(un){const In=G1(un,Dt());!In||In.length!==3||In.forEach(Mr=>{Mr.querySelector(ys(oa.Classes.MoveInfoIcon))||Mr.appendChild(y())})}function Pi(un,In){In.classList.add(j1(Ws(un)))}function po(un,In){In.title=un}function qi({baseTime:un,ply:In,value:Mr,timestamp:ii},Ii){const Fi=Ii||Br(In);if(!Fi)return;const wi=dr(),fr=Ie();if(Fi.setAttribute(Wr.DOM.Attributes.Time,ii.toString()),Fi.style.setProperty(Wr.DOM.CSSVariables.TimeValue,ii.toString()),Fi.innerHTML=Mr,(!wi||Mr.length*_h>wi)&&Co(Mr.length),un){const Yi=H1(ii,Ga(un));Fi.style.setProperty(Wr.DOM.CSSVariables.TimeBarWidth,`${Yi}px`),r.classList.add(Wr.DOM.ClassNames.WithBaseTime),fr&&Ur(null);return}r.classList.remove(Wr.DOM.ClassNames.WithBaseTime),(!fr||ii>fr)&&Ur(ii)}function Co(un){const In=un*_h;r.style.setProperty(Wr.DOM.CSSVariables.TimestampWidth,`${In}px`)}function Xo(un,In){const Mr=pn(un);Mr&&Nd(Mr,In)}}var Z4=`@charset "UTF-8";
[data-tooltip] {
  position: relative;
}
[data-tooltip] body.dark-mode:after, body.dark-mode [data-tooltip]:after {
  background: rgba(0, 0, 0, 0.7);
}
[data-tooltip]:after {
  opacity: 0;
  pointer-events: none;
  position: absolute;
  transition: all 0.16s ease-out 0.08s;
  z-index: 1;
  background: #262421;
  border-radius: 2px;
  color: #fff;
  content: attr(data-tooltip);
  font-size: 1.4rem;
  font-weight: 600;
  max-width: 200px;
  padding: 5px 8px;
  text-align: center;
  white-space: nowrap;
}
[data-tooltip]:before {
  opacity: 0;
  pointer-events: none;
  position: absolute;
  transition: all 0.16s ease-out 0.08s;
  z-index: 1;
  border: 5px solid transparent;
  content: "";
  height: 0;
  width: 0;
}
[data-tooltip]:hover:before, [data-tooltip]:hover:after {
  opacity: 1;
}
[data-tooltip][data-tooltip-position=bottom]:after, [data-tooltip][data-tooltip-position=bottom]:before {
  left: 50%;
  top: 100%;
  transform: translate3d(-50%, -4px, 0);
}
[data-tooltip][data-tooltip-position=bottom]:after {
  margin-top: 10px;
}
[data-tooltip][data-tooltip-position=bottom]:before {
  border-bottom-color: #262421;
}
[data-tooltip][data-tooltip-position=bottom]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=bottom]:before {
  border-bottom-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=bottom]:hover:after, [data-tooltip][data-tooltip-position=bottom]:hover:before {
  transform: translate3d(-50%, 0, 0);
}
[data-tooltip][data-tooltip-position=left]:after, [data-tooltip][data-tooltip-position=left]:before {
  right: 100%;
  top: 50%;
  transform: translate3d(4px, -50%, 0);
}
[data-tooltip][data-tooltip-position=left]:after {
  margin-right: 10px;
}
[data-tooltip][data-tooltip-position=left]:before {
  border-left-color: #262421;
}
[data-tooltip][data-tooltip-position=left]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=left]:before {
  border-left-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=left]:hover:after, [data-tooltip][data-tooltip-position=left]:hover:before {
  transform: translate3d(0, -50%, 0);
}
[data-tooltip][data-tooltip-position=right]:after, [data-tooltip][data-tooltip-position=right]:before {
  left: 100%;
  top: 50%;
  transform: translate3d(-4px, -50%, 0);
}
[data-tooltip][data-tooltip-position=right]:after {
  margin-left: 10px;
}
[data-tooltip][data-tooltip-position=right]:before {
  border-right-color: #262421;
}
[data-tooltip][data-tooltip-position=right]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=right]:before {
  border-right-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=right]:hover:after, [data-tooltip][data-tooltip-position=right]:hover:before {
  transform: translate3d(0, -50%, 0);
}
[data-tooltip][data-tooltip-position=top]:after, [data-tooltip][data-tooltip-position=top]:before {
  bottom: 100%;
  left: 50%;
  transform: translate3d(-50%, 4px, 0);
}
[data-tooltip][data-tooltip-position=top]:after {
  margin-bottom: 10px;
}
[data-tooltip][data-tooltip-position=top]:before {
  border-top-color: #262421;
}
[data-tooltip][data-tooltip-position=top]:before body.dark-mode, body.dark-mode [data-tooltip][data-tooltip-position=top]:before {
  border-top-color: rgba(0, 0, 0, 0.7);
}
[data-tooltip][data-tooltip-position=top]:hover:after, [data-tooltip][data-tooltip-position=top]:hover:before {
  transform: translate3d(-50%, 0, 0);
}
.horizontal-move-list .icon-font-chess:before,
.vertical-move-list .icon-font-chess:before {
  pointer-events: none;
}
.horizontal-move-list .icon-font-chess.knight-black:before,
.vertical-move-list .icon-font-chess.knight-black:before {
  content: "\xC7";
}
.horizontal-move-list .icon-font-chess.knight-white:before,
.vertical-move-list .icon-font-chess.knight-white:before {
  content: "\u0116";
}
.horizontal-move-list .icon-font-chess.bishop-black:before,
.vertical-move-list .icon-font-chess.bishop-black:before {
  content: "\u0102";
}
.horizontal-move-list .icon-font-chess.bishop-white:before,
.vertical-move-list .icon-font-chess.bishop-white:before {
  content: "\xC4";
}
.horizontal-move-list .icon-font-chess.queen-black:before,
.vertical-move-list .icon-font-chess.queen-black:before {
  content: "\u012E";
}
.horizontal-move-list .icon-font-chess.queen-white:before,
.vertical-move-list .icon-font-chess.queen-white:before {
  content: "\u0136";
}
.horizontal-move-list .icon-font-chess.king-black:before,
.vertical-move-list .icon-font-chess.king-black:before {
  content: "\u0100";
}
.horizontal-move-list .icon-font-chess.king-white:before,
.vertical-move-list .icon-font-chess.king-white:before {
  content: "\u0104";
}
.horizontal-move-list .icon-font-chess.rook-black:before,
.vertical-move-list .icon-font-chess.rook-black:before {
  content: "\u013D";
}
.horizontal-move-list .icon-font-chess.rook-white:before,
.vertical-move-list .icon-font-chess.rook-white:before {
  content: "\u013B";
}
.dark-mode .horizontal-move-list .icon-font-chess.knight-black:before,
.dark-mode .vertical-move-list .icon-font-chess.knight-black:before {
  content: "\u0116";
}
.dark-mode .horizontal-move-list .icon-font-chess.knight-white:before,
.dark-mode .vertical-move-list .icon-font-chess.knight-white:before {
  content: "\xC7";
}
.dark-mode .horizontal-move-list .icon-font-chess.bishop-black:before,
.dark-mode .vertical-move-list .icon-font-chess.bishop-black:before {
  content: "\xC4";
}
.dark-mode .horizontal-move-list .icon-font-chess.bishop-white:before,
.dark-mode .vertical-move-list .icon-font-chess.bishop-white:before {
  content: "\u0102";
}
.dark-mode .horizontal-move-list .icon-font-chess.queen-black:before,
.dark-mode .vertical-move-list .icon-font-chess.queen-black:before {
  content: "\u0136";
}
.dark-mode .horizontal-move-list .icon-font-chess.queen-white:before,
.dark-mode .vertical-move-list .icon-font-chess.queen-white:before {
  content: "\u012E";
}
.dark-mode .horizontal-move-list .icon-font-chess.king-black:before,
.dark-mode .vertical-move-list .icon-font-chess.king-black:before {
  content: "\u0104";
}
.dark-mode .horizontal-move-list .icon-font-chess.king-white:before,
.dark-mode .vertical-move-list .icon-font-chess.king-white:before {
  content: "\u0100";
}
.dark-mode .horizontal-move-list .icon-font-chess.rook-black:before,
.dark-mode .vertical-move-list .icon-font-chess.rook-black:before {
  content: "\u013B";
}
.dark-mode .horizontal-move-list .icon-font-chess.rook-white:before,
.dark-mode .vertical-move-list .icon-font-chess.rook-white:before {
  content: "\u013D";
}
:root {
  --nodeBackground: #fff35f;
  --nodeBorder: rgba(0, 0, 0, 0.05);
  --nodeColor: #262421;
  --nodeColorSelected: #262421;
  --nodeNumber: rgba(0, 0, 0, 0.7);
}
:global(.dark-mode) {
  --nodeNumber: rgba(255, 255, 255, 0.5);
  --nodeColor: rgba(255, 255, 255, 0.72);
  --nodeBackground: rgba(255, 255, 0, 0.2);
  --nodeBorder: rgba(255, 255, 0, 0.4);
  --nodeColorSelected: #fff;
}
.vertical-move-list {
  --timeBarMaxWidth: 65px;
  --timeMaxValue: 0;
  --whiteNodeSpace: 4rem;
  --blackNodeSpace: 12rem;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.vertical-move-list body.dark-mode .move, body.dark-mode .vertical-move-list .move {
  color: rgba(255, 255, 255, 0.5);
}
.vertical-move-list body.dark-mode .move:nth-child(even), body.dark-mode .vertical-move-list .move:nth-child(even) {
  background-color: rgba(255, 255, 255, 0.02);
}
.vertical-move-list body.dark-mode .time-white:after, body.dark-mode .vertical-move-list .time-white:after {
  background-color: rgba(255, 255, 255, 0.8);
}
.vertical-move-list body.dark-mode .time-black:after, body.dark-mode .vertical-move-list .time-black:after {
  background-color: rgba(255, 255, 255, 0.2);
}
.vertical-move-list .move {
  box-sizing: border-box;
  color: #262421;
  font-size: 13px;
  font-weight: 600;
  height: 30px;
  line-height: 30px;
  overflow: hidden;
  padding: 0 5px 0 15px;
  position: relative;
  width: 100%;
}
.vertical-move-list .move:nth-child(even) {
  background-color: #f8f8f8;
}
.vertical-move-list .move .node {
  font-weight: 700;
}
.vertical-move-list .move .node .icon-font-chess {
  display: inline-block;
  font-size: 2.3rem;
  margin-right: 0.2rem;
  margin-top: -1.3rem;
}
.vertical-move-list .move .node .move-info-icon {
  --tooltip-top: 1px;
  cursor: pointer;
  display: inline-block;
  margin-left: 5px;
  margin-top: 0;
  vertical-align: top;
}
.vertical-move-list .move .node .move-info-icon:before {
  display: contents;
}
.vertical-move-list .move .node .move-info-icon[data-tooltip]:after {
  margin-top: 24px;
  position: fixed;
  top: var(--tooltip-top);
  transform: translateX(-50%);
  transition: opacity 0.16s;
  white-space: initial;
  z-index: 1000;
}
.vertical-move-list .move .node .move-info-icon[data-tooltip][data-tooltip-position=top]:after {
  bottom: initial;
  left: initial;
  margin-top: 0;
  right: initial;
  top: initial;
  transform: translate3d(-50%, -100%, 0);
}
.vertical-move-list .move .node .move-info-icon .circle-info:before {
  content: ")";
}
.vertical-move-list .move .node .move-info-icon .redo:before {
  content: "\u1F22";
}
.vertical-move-list [data-ply]:not(.selected) {
  cursor: pointer;
}
.vertical-move-list .white,
.vertical-move-list .black {
  height: 24px;
  line-height: 24px;
  min-width: 40px;
  padding: 0 4px;
  position: absolute;
  top: 3px;
}
.vertical-move-list .white body.dark-mode, body.dark-mode .vertical-move-list .white,
.vertical-move-list .black body.dark-mode,
body.dark-mode .vertical-move-list .black {
  color: rgba(255, 255, 255, 0.72);
}
.vertical-move-list .white.selected,
.vertical-move-list .black.selected {
  background-color: var(--nodeBackground);
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-color: var(--nodeBorder);
  border-radius: 2px;
  color: var(--nodeColorSelected);
  cursor: default;
}
.vertical-move-list .white.selected body.dark-mode, body.dark-mode .vertical-move-list .white.selected,
.vertical-move-list .black.selected body.dark-mode,
body.dark-mode .vertical-move-list .black.selected {
  background-color: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.1);
}
.vertical-move-list.movelist-colored .node {
  color: var(--nodeCustomColor, --nodeColor);
}
.vertical-move-list.movelist-colored .node body.dark-mode, body.dark-mode .vertical-move-list.movelist-colored .node {
  color: var(--nodeCustomColor, rgba(255, 255, 255, 0.72));
}
.vertical-move-list .white {
  left: var(--whiteNodeSpace);
}
.vertical-move-list .black {
  left: var(--blackNodeSpace);
}
.vertical-move-list .time-white,
.vertical-move-list .time-black {
  font-size: 10px;
  height: 10px;
  line-height: 10px;
  position: absolute;
  right: 5px;
  width: var(--timestampWidth);
}
.vertical-move-list .time-white:after,
.vertical-move-list .time-black:after {
  background-clip: content-box;
  border-radius: 2px;
  box-sizing: border-box;
  content: "";
  height: 10px;
  left: -3px;
  max-width: var(--timeBarLimit);
  min-width: 2px;
  position: absolute;
  transform: translateX(-100%);
  width: calc(var(--timeValue) / var(--timeMaxValue) * var(--timeBarMaxWidth));
}
.vertical-move-list.timestamps-with-base-time .time-white:after,
.vertical-move-list.timestamps-with-base-time .time-black:after {
  width: var(--timeBarWidth);
}
.vertical-move-list .time-white {
  top: 4px;
}
.vertical-move-list .time-white:after {
  background-color: rgba(0, 0, 0, 0.2);
  top: 0;
}
.vertical-move-list .time-black {
  bottom: 3px;
}
.vertical-move-list .time-black:after {
  background-color: rgba(0, 0, 0, 0.8);
  bottom: -1px;
}
.toggle-timestamps > .move .time-white,
.toggle-timestamps > .move .time-black {
  color: transparent;
  width: 0;
}
.toggle-timestamps > .move:hover .time-white,
.toggle-timestamps > .move:hover .time-black {
  color: #8b8987;
  width: auto;
}
.toggle-timestamps > .move:hover .time-white body.dark-mode, body.dark-mode .toggle-timestamps > .move:hover .time-white,
.toggle-timestamps > .move:hover .time-black body.dark-mode,
body.dark-mode .toggle-timestamps > .move:hover .time-black {
  color: rgba(255, 255, 255, 0.5);
}
.toggle-timestamps > .move:hover .time-white:after,
.toggle-timestamps > .move:hover .time-black:after {
  visibility: hidden;
}`;function bh(t){const r=Math.ceil(t/10);let i=Math.floor(r/(3600*24)),o=Math.floor(r%(3600*24)/3600),s=Math.ceil(r%3600/60);return s===60&&(s=0,o+=1),o===24&&(o=0,i+=1),{days:i,hours:o,minutes:s}}function S6(t,r){const{days:i,hours:o,minutes:s}=bh(t),l={days:o>0||s>0?", ":"",hours:s>0?", ":""},c=i>0?`${r[vt.Translation.Plural.NumberOfDays](i)}${l.days}`:"",f=o>0?`${r[vt.Translation.Plural.NumberOfHours](o)}${l.hours}`:"",p=s>0?`${r[vt.Translation.Plural.NumberOfMinutes](s)}`:"";return`${c}${f}${p}`}function k6(t,r){const{days:i,hours:o,minutes:s}=bh(t);return i?i>0?`${r[vt.Translation.Plural.NumberOfDays](i)}`:"":o?o>0?`${r[vt.Translation.Plural.NumberOfHours](o)}`:"":s>0?`${r[vt.Translation.Plural.NumberOfMinutes](s)}`:""}function W1(t){const r=Math.floor(t/600),i=((t-r*600)/10).toFixed(1);if(r===0)return i;const o=`0${i}`.substr(-4);return`${r}:${o}`}function q1({formatTimestampAsHumanReadable:t,timestamp:r,translations:i}){return{title:t?S6(r,i):void 0,value:t?k6(r,i):W1(r)}}function yh(t){var r;return(r=t.commands)!=null&&r.timestamp?parseInt(t.commands.timestamp,10):null}function P6({colorsEnabled:t=!1,el:r,epIconInfoPath:i=md.enPassant,getTimeControl:o,formatTimestampAsHumanReadable:s=!1,moveListDisplayType:l=Rr.MoveListDisplayTypes.Text,scrollContainer:c,showResultNode:f=!0,showTimestamps:p=!0,toggleTimestamps:m=!1,translations:v=$s}){let E=o;const y=$1({colorsEnabled:t,el:r,EPIconInfoPath:i,moveListDisplayType:l,scrollContainer:c,toggleTimestamps:m,translations:v});return y.createList(),{addNode:M,addThreeFoldIcons:ut,create:y.createList,deselectNode:y.deselectNode,destroy:y.destroyList,enableColors:y.enableColors,loadNodes:W,selectNode:Te,setMoveListDisplayType:dt,setResult:Ie,setGetTimeControl:Tt,updateNodeColor:y.updateNodeColor,updateTimestamp:rr};function M(Fn){const pn=y.getResult();pn!==Ct.Results.None&&y.setResultNode(Ct.Results.None),y.addNode(Fn),R(Fn),pn!==Ct.Results.None&&y.setResultNode(pn)}function R(Fn){const pn=yh(Fn);if(!pn||!p)return;const{title:Dt,value:Qt}=q1({formatTimestampAsHumanReadable:s,timestamp:pn,translations:v});y.addTimestamp({baseTime:D(),node:Fn,timestamp:pn,title:Dt,value:Qt})}function D(){var Fn;return(Fn=E?.())==null?void 0:Fn.baseTime}function W(Fn,pn){const Dt=y.getResult();y.clearList(),Fn.forEach(Vn=>{y.addNode(Vn),R(Vn)}),Dt!==Ct.Results.None&&y.setResultNode(Dt);const Qt=pn??y.getLastPly();Qt!==void 0&&y.selectNode(Qt),y.scrollToSelectedNode()}function Te(Fn){Fn===void 0?y.deselectNode():typeof Fn=="number"?y.selectNode(Fn):y.selectNodeElement(Fn),y.scrollToSelectedNode()}function dt(Fn){y.setParams({moveListDisplayType:Fn})}function Ie(Fn){if(!f){y.getResult()!==Ct.Results.None&&y.setResultNode(Ct.Results.None);return}y.setResultNode(Fn)}function ut(Fn){y.addThreeFoldMoveIcons(Fn)}function Tt(Fn){E=Fn}function rr(Fn){const{ply:pn}=Fn,Dt=yh(Fn);if(!pn)return;if(Dt===null)return y.removeTimestamp(pn);const{title:Qt,value:Vn}=q1({formatTimestampAsHumanReadable:s,timestamp:Dt,translations:v}),ar=y.getTimestamp(pn);ar?ar!==Dt&&y.setTimestampValue({baseTime:D(),ply:pn,timestamp:Dt,value:Vn}):y.addTimestamp({baseTime:D(),node:Fn,timestamp:Dt,title:Qt,value:Vn})}}var mn;(function(t){(function(r){r.AddMove="AddMove",r.AnalysisEnd="AnalysisEnd",r.AnalysisStart="AnalysisStart"})(t.APIEvents||(t.APIEvents={})),function(r){r.Name="observing"}(t.Plugin||(t.Plugin={}))})(mn||(mn={}));function aa(t){return t?.ids!==void 0}function wh({colorsEnabled:t=!1,displayTimeInClockFormat:r=!0,el:i,emitter:o=(0,P.H)(),formatTimestampAsHumanReadable:s=!r,loadLineOnCreate:l=!0,namespace:c=ai.Plugin.Name,scrollContainer:f,showResultNode:p=!0,showTimestamps:m=!0,toggleTimestamps:v=!1,translations:E=$s}){let y=!0,M;const R=I1(),D=tu(!1),W=P6({el:i,formatTimestampAsHumanReadable:s,getTimeControl:()=>null,scrollContainer:f||i,showResultNode:p,showTimestamps:m,toggleTimestamps:v,translations:E}),Te=R1(W);return{api:pn=>ze(Ee({activate:()=>{rr(!0),Tt(vi(x.APIEvents.Load),pn.api)},deactivate:()=>rr(!1)},o),{getMoveList:()=>W,isActive:()=>!!y,isReady:()=>R.isReady(),waitForVMLReady:R.waitForReady}),create:dt,destroy:Ie,match:[{condition:Fn,handler:(pn,Dt)=>Tt(pn,Dt.api)},{condition:Je(x.OptionsEvents.Update),handler:pn=>{"enabled"in pn.data&&rr(pn.data.enabled)}}],name:c};function dt(pn){var Dt;const{api:Qt}=pn;if(W.setGetTimeControl(Qt.timeControl.get),W.create(),M=ut(Qt),t&&W.enableColors(t),l){const Vn=Qt.getLine(0),ar=(Dt=Qt.getSelectedNode())==null?void 0:Dt.ply,Br=Qt.getOptions().moveListDisplayType;Br===Rr.MoveListDisplayTypes.Figurine&&W.setMoveListDisplayType(Br),Vn?.length&&W.loadNodes(Vn,ar),p&&(W.setResult(Qt.getResult()),Qt.getContext().game.inThreefoldRepetition()&&W.addThreeFoldIcons(Vn))}R.ready(W),o.emit(ai.Events.Ready,W),y=Qt.getOptions().enabled}function Ie(){M?.(),W&&W.destroy()}function ut(pn){return i.addEventListener(Wr.Events.SelectNode,Dt),function(){i.removeEventListener(Wr.Events.SelectNode,Dt)};function Dt({detail:Qt}){if(!y)return;const{ids:Vn}=Qt;pn.selectNode(Vn.line,Vn.move)}}function Tt(pn,Dt){var Qt;const Vn=Dt.getRelativeNode();D.add(Te,{context:Dt.getContext(),event:pn,line:(Qt=Dt.getLine)==null?void 0:Qt.call(Dt,0),selectedNode:aa(Vn)?Vn:void 0,queue:D}),requestAnimationFrame(()=>{requestAnimationFrame(function(){D.flush(),o.emit(ai.Events.Updated,W)})})}function rr(pn){y=pn}function Fn(pn){return y&&Ht([...Io,mn.APIEvents.AddMove,x.APIEvents.LineUpdated,x.APIEvents.NodeUpdated,x.APIEvents.DeletePosition,x.APIEvents.UpdatePGNHeaders,x.InstanceEvents.Create,x.InstanceEvents.ModeChanged,x.OptionsEvents.Update])(pn)}}var Zr;(function(t){(function(r){r.GameResult="game-result",r.Moves="moves"})(t.Placeholders||(t.Placeholders={})),function(r){r.Component="horizontal-move-list",r.MainLine="main",r.Variation="variation"}(t.ClassNames||(t.ClassNames={})),t.ComponentIdentifier="data-id",function(r){r.Copy="copy",r.UpdateNodeLimit="UpdateNodeLimit"}(t.Events||(t.Events={})),function(r){r.Before="(",r.After=")"}(t.VariationParenthesis||(t.VariationParenthesis={})),function(r){r.Begin="begin",r.Focus="focus",r.End="end"}(t.NodeLimitTypes||(t.NodeLimitTypes={}))})(Zr||(Zr={}));var co;(function(t){t.EndOfLineSelected="EndOfLineSelected",t.MiddleOfLineSelected="MiddleOfLineSelected",t.StartingPosition="StartingPosition"})(co||(co={}));function Zs(t){return t.id!==void 0}function K1(t,r){return!t||Zs(t)?co.StartingPosition:t.ids.move===Object.keys(r[t.ids.line]).length-1?co.EndOfLineSelected:co.MiddleOfLineSelected}function Qu({node:t,lines:r}){return K1(t,r)}function Ys(){return{[x.APIEvents.SelectNode]:Qu,[x.APIEvents.Move]:function({component:r,event:i}){const{api:o,dom:s}=r;return o.getMoveNode({line:i.ids.line,move:i.ids.move})?(o.selectNode({line:i.ids.line,move:i.ids.move}),co.MiddleOfLineSelected):i.ids.line!==0?(s.insertVariation({node:i}),co.EndOfLineSelected):(s.insertNode({node:i}),co.EndOfLineSelected)}}}function ru(){return{[x.APIEvents.SelectNode]:Qu,[x.APIEvents.Move]:function({component:r,event:i}){const{api:o,dom:s}=r;return s.insertNode({node:i,nodeToInsertAfter:o.getSelectedNode()}),co.EndOfLineSelected}}}function Z1(){return{[x.APIEvents.SelectNode]:Qu,[x.APIEvents.Move]:function({component:r,event:i}){const{api:o,dom:s}=r;return o.getMoveNode({line:i.ids.line,move:i.ids.move})?(o.selectNode({line:i.ids.line,move:i.ids.move}),co.MiddleOfLineSelected):(s.insertVariation({node:i}),co.EndOfLineSelected)}}}function Y1(){return{initialState:co.StartingPosition,states:{[co.StartingPosition]:Ys(),[co.EndOfLineSelected]:ru(),[co.MiddleOfLineSelected]:Z1()}}}function X1(){return(0,P.c)(Y1())}function Q1(t,r){const i=t.find(o=>o[0](r));if(i)return i[1](r)}const J1={condition:eg,handler:tg};function eg({event:t}){return function(){return t.type===x.APIEvents.AddMove}}function tg({context:t,event:r}){const{moveList:i}=t,{listMove:o}=r.data;if(!o?.ids)return;const s=i.api.getMoveNode({line:0,move:o.ids.move-1});i.dom.insertNode({node:o,nodeToInsertAfter:s})}const ng={condition:rg,handler:ig};function rg({event:t}){return function(){return t.type===x.APIEvents.CreateContinuation}}function ig({context:t,event:r,selectedNode:i}){const{moveList:o,methods:{selectCurrentPosition:s}}=t;if(o.dom.insertVariation({node:r.data.node}),o.api.getMoveNode(r.data.node.ids)){o.api.selectNode(r.data.node.ids);return}s(i)}const og={condition:ag,handler:sg};function ag({event:t}){return function(){return x.APIEvents.UpdatePGNHeaders===t.type&&t.data.Result}}function sg({context:t,coreContext:r}){const{moveList:i}=t;i.dom.setResultNode(r.api.getResult())}var pa;(function(t){(function(r){r.FocusOut="comment-field-focus-out",r.CommentChanged="comment-has-changed"})(t.Events||(t.Events={})),function(r){r.Component="editable-comment"}(t.Classes||(t.Classes={})),function(r){r[r.CommentUpdateDelay=500]="CommentUpdateDelay"}(t.Constants||(t.Constants={}))})(pa||(pa={}));function lg(t){return!!t.getElement().querySelector((0,P.I)(pa.Classes.Component))}const ug={condition:C6,handler:T6};function C6({event:t}){return function(){return t.type===x.APIEvents.LineCommentUpdated}}function T6({context:t,event:r}){const{moveList:i}=t,{data:o}=r;lg(i.dom)||i.dom.updateLineComponent(o.lineId,{initComment:o.comment})}const cg={condition:dg,handler:fg};function dg({event:t}){return function(){return[x.APIEvents.CreateGame,x.APIEvents.CreateContinuation,x.APIEvents.DeletePosition,x.APIEvents.Load,x.APIEvents.MoveVariation,x.APIEvents.PromoteVariation,x.APIEvents.ResetToMainLine].includes(t.type)||t.data.linesReordered}}function fg({context:t,coreContext:r}){const{moveList:i,methods:{destroyContextMenu:o},queue:s}=t,{api:l}=r;o(),s.flush(),i.dom.load(),i.dom.setResultNode(l.getResult())}const M6={condition:hg,handler:pg};function hg({event:t}){return function(){return t.type===x.APIEvents.Move}}function pg({context:t,event:r,selectedNode:i}){const{moveList:o,stateMachine:s,methods:{selectCurrentPosition:l}}=t;if(o.api.getMoveNode(r.data.move.ids)){o.api.selectNode(r.data.move.ids);return}s.transition(x.APIEvents.Move,{component:o,event:r.data.move,selectedNode:i}),l(i)}const mg={condition:Eh,handler:vg};function Eh({event:t}){return function(){return t.type===x.APIEvents.NodeUpdated}}function vg({context:t,event:r}){const{moveList:i}=t,{data:o}=r;lg(i.dom)||o.ids&&i.dom.updateMoveNodeComponent(o.ids,o.changes)}const Ah={condition:gg,handler:_g};function gg({event:t}){return function(){return[x.APIEvents.ResetToMainLine].includes(t.type)}}function _g({context:t}){const{moveList:r}=t;r.dom.load()}const bg={condition:O6,handler:yg};function O6({event:t}){return function(){return t.type===x.OptionsEvents.Update}}function yg({coreContext:t,context:r,event:i}){const{el:o,moveList:s,methods:{destroyContextMenu:l}}=r,c=t.api.getOptions();s.api.setOptions(i.data),c.test&&Ue(o,{[Ze.Editable]:i.data.moveListContextMenuEnabled}),i.data.moveListContextMenuEnabled===!1&&l()}const x6={condition:I6,handler:wg};function I6({event:t}){return function(){return t.type===x.APIEvents.MoveForward||t.type===x.APIEvents.MoveBackward||t.type===x.APIEvents.SelectLineEnd||t.type===x.APIEvents.SelectLineStart||t.type===x.APIEvents.SelectNode||t.type===x.APIEvents.ResetToMainLine}}function wg({context:t,selectedNode:r}){const{methods:{selectCurrentPosition:i}}=t;i(r)}var R6=`@charset "UTF-8";
.horizontal-move-list .icon-font-chess:before,
.vertical-move-list .icon-font-chess:before {
  pointer-events: none;
}
.horizontal-move-list .icon-font-chess.knight-black:before,
.vertical-move-list .icon-font-chess.knight-black:before {
  content: "\xC7";
}
.horizontal-move-list .icon-font-chess.knight-white:before,
.vertical-move-list .icon-font-chess.knight-white:before {
  content: "\u0116";
}
.horizontal-move-list .icon-font-chess.bishop-black:before,
.vertical-move-list .icon-font-chess.bishop-black:before {
  content: "\u0102";
}
.horizontal-move-list .icon-font-chess.bishop-white:before,
.vertical-move-list .icon-font-chess.bishop-white:before {
  content: "\xC4";
}
.horizontal-move-list .icon-font-chess.queen-black:before,
.vertical-move-list .icon-font-chess.queen-black:before {
  content: "\u012E";
}
.horizontal-move-list .icon-font-chess.queen-white:before,
.vertical-move-list .icon-font-chess.queen-white:before {
  content: "\u0136";
}
.horizontal-move-list .icon-font-chess.king-black:before,
.vertical-move-list .icon-font-chess.king-black:before {
  content: "\u0100";
}
.horizontal-move-list .icon-font-chess.king-white:before,
.vertical-move-list .icon-font-chess.king-white:before {
  content: "\u0104";
}
.horizontal-move-list .icon-font-chess.rook-black:before,
.vertical-move-list .icon-font-chess.rook-black:before {
  content: "\u013D";
}
.horizontal-move-list .icon-font-chess.rook-white:before,
.vertical-move-list .icon-font-chess.rook-white:before {
  content: "\u013B";
}
.dark-mode .horizontal-move-list .icon-font-chess.knight-black:before,
.dark-mode .vertical-move-list .icon-font-chess.knight-black:before {
  content: "\u0116";
}
.dark-mode .horizontal-move-list .icon-font-chess.knight-white:before,
.dark-mode .vertical-move-list .icon-font-chess.knight-white:before {
  content: "\xC7";
}
.dark-mode .horizontal-move-list .icon-font-chess.bishop-black:before,
.dark-mode .vertical-move-list .icon-font-chess.bishop-black:before {
  content: "\xC4";
}
.dark-mode .horizontal-move-list .icon-font-chess.bishop-white:before,
.dark-mode .vertical-move-list .icon-font-chess.bishop-white:before {
  content: "\u0102";
}
.dark-mode .horizontal-move-list .icon-font-chess.queen-black:before,
.dark-mode .vertical-move-list .icon-font-chess.queen-black:before {
  content: "\u0136";
}
.dark-mode .horizontal-move-list .icon-font-chess.queen-white:before,
.dark-mode .vertical-move-list .icon-font-chess.queen-white:before {
  content: "\u012E";
}
.dark-mode .horizontal-move-list .icon-font-chess.king-black:before,
.dark-mode .vertical-move-list .icon-font-chess.king-black:before {
  content: "\u0104";
}
.dark-mode .horizontal-move-list .icon-font-chess.king-white:before,
.dark-mode .vertical-move-list .icon-font-chess.king-white:before {
  content: "\u0100";
}
.dark-mode .horizontal-move-list .icon-font-chess.rook-black:before,
.dark-mode .vertical-move-list .icon-font-chess.rook-black:before {
  content: "\u013B";
}
.dark-mode .horizontal-move-list .icon-font-chess.rook-white:before,
.dark-mode .vertical-move-list .icon-font-chess.rook-white:before {
  content: "\u013D";
}
.horizontal-move-list {
  display: block;
  font-size: 1.3rem;
  min-width: 223px;
  overflow-x: hidden;
  overflow-y: auto;
  padding: 10px 15px;
}
.horizontal-move-list .comment {
  color: #0381b8;
}
.horizontal-move-list .comment body.dark-mode, body.dark-mode .horizontal-move-list .comment {
  color: #52b1dc;
}
.horizontal-move-list .game-result-node {
  color: var(--nodeColor);
  margin-left: 5px;
}
.horizontal-move-list .diagram-begin, .horizontal-move-list .diagram-end {
  padding-left: 3px;
}
.variation.main {
  background-color: #f1f1f1;
  display: block;
  margin: 7px -15px;
  padding: 7px 15px;
}
.variation.main body.dark-mode, body.dark-mode .variation.main {
  background-color: rgba(0, 0, 0, 0.1);
}
.variation.main + .move-node .move-number {
  /**
   * To prevent !important usage and extra DOM modification,
   * this rule should contain indent opposite to the
   * \`.move-number\` \`margin-left\` value
   */
  display: inline-block;
  text-indent: -4px;
}
.variation .variation {
  margin-left: 4px;
}
.variation:before {
  color: rgba(0, 0, 0, 0.7);
  content: "(";
}
.variation:after {
  color: rgba(0, 0, 0, 0.7);
  content: ")";
  position: relative;
  z-index: 2;
}
.variation body.dark-mode:before, .variation body.dark-mode:after, body.dark-mode .variation:before, body.dark-mode .variation:after {
  color: rgba(255, 255, 255, 0.5);
}`,Nn;(function(t){(function(r){r.ClearAnalysis="ClearAnalysis",r.DeleteComment="DeleteComment",r.DeleteCommentBefore="DeleteCommentBefore",r.DeleteMove="DeleteMove",r.DeleteVariation="DeleteVariation",r.InsertComment="InsertComment",r.InsertCommentBefore="InsertCommentBefore",r.InsertContinuation="InsertContinuation",r.MoveVariationDown="MoveVariationDown",r.MoveVariationUp="MoveVariationUp",r.PromoteVariation="PromoteVariation",r.RemoveAnnotation="RemoveAnnotation",r.RemoveBegin="RemoveBegin",r.RemoveEnd="RemoveEnd",r.RemoveAdditionalAnnotation="RemoveAdditionalAnnotation",r.RemoveFocus="RemoveFocus",r.SetBegin="SetBegin",r.SetEnd="SetEnd",r.SetFocus="SetFocus"})(t.Actions||(t.Actions={})),function(r){r.AddAnnotation="AddAnnotation",r.AddAdditionalAnnotation="AddAdditionalAnnotation"}(t.AnnotationActions||(t.AnnotationActions={})),function(r){r.Actions="actions",r.Translations="translations"}(t.Keys||(t.Keys={})),function(r){r.ActionClicked="action-clicked",r.AnnotationClicked="annotation-clicked",r.Close="close-context-menu"}(t.Events||(t.Events={})),function(r){r.Name="contextMenu"}(t.Plugin||(t.Plugin={}))})(Nn||(Nn={}));var ws;(function(t){(function(r){r.ActionName="action-name",r.Annotation="annotation",r.AnnotationsContainer="annotations-container",r.Component="move-node-context-menu",r.Divider="divider"})(t.Classes||(t.Classes={}))})(ws||(ws={}));var Ti;(function(t){(function(r){r.Annotation="annotation",r.CustomColor="customColor",r.id="id",r.MoveNumber="moveNumber",r.San="san",r.Selected="selected"})(t.Keys||(t.Keys={})),function(r){r.Annotation="annotation",r.CustomColor="customColor",r.MoveNumber="moveNumber",r.San="san"}(t.TouchableKeys||(t.TouchableKeys={}))})(Ti||(Ti={}));var Hi;(function(t){(function(r){r.Comment="comment",r.GameResultNode="game-result-node",r.IconFont="icon-font-chess",r.MoveNode="move-node",r.MoveNumber="move-number",r.MoveText="move-text",r.Selected="selected",r.StaticComment="static-comment"})(t.Classes||(t.Classes={})),function(r){r[r.TouchDelay=500]="TouchDelay"}(t.Constants||(t.Constants={})),function(r){r.Click="click",r.OpenContextMenu="contextmenu"}(t.Events||(t.Events={}))})(Hi||(Hi={}));class $i extends Error{constructor({code:r,message:i,data:o}){super(i),this.code=r,this.data=o,this.message=i,this.name="ChessError"}}var Ni;(function(t){t.BadData="Bad Data",t.BeforeStateHooksConflict="Before State hooks conflict",t.DOMDoesNotMatchJCE="DOM Does Not Match JCE",t.ElementAlreadyExists="Element Already Exists",t.ElementNotFound="Element Not Found",t.IllegalJCECall="Illegal JCE Call",t.IncorrectMode="Incorrect Mode",t.InvalidStateMachine="Invalid State Machine",t.MissingPluginDependency="Missing Plugin Dependency"})(Ni||(Ni={}));function Eg(){return{action:Nn.Actions.ClearAnalysis,handler:t,isVisible(){return!0},name:vt.Translation.Actions.ClearAllAnalysis};function t(r,{context:{game:i},event:o,moveList:s}){i.hml.contextMenu.requestConfirmation({action:l,data:{event:o},text:"Are you sure you want to clear all analysis?",type:Nn.Actions.ClearAnalysis});function l(){const c=Object.keys(s.api.getNodes()),f=i.getLine(0);if(!f)return;const p={};if(c.length>1)for(let m=c.length-1;m>0;m--){const v=i.getLine(m);if(!v)return;s.dom.removeLine(v),v.parentId===0&&(p[v.atMoveNode]=!0)}Object.keys(s.api.getComments()).forEach(m=>{s.api.getComments()[m].destroy()}),i.resetToMainLine(),f.forEach(m=>{var v,E;const y=[];let M=!1;if(p[m.ids.move]&&y.push(Ti.TouchableKeys.MoveNumber),(m.annotation||m.additionalAnnotation)&&y.push(Ti.TouchableKeys.Annotation),m.comment&&m.color===Ct.ColorsAsNumbers.White&&(M=!0),i.updateNode(m.ids,{additionalAnnotation:void 0,annotation:"",comment:void 0}),(v=r.commands)==null||delete v.href,(E=r.commands)==null||delete E.text,Object.keys(y).length>0||M){const R=s.api.getMoveNode(m.ids);if(!R)throw new $i({code:Ni.ElementNotFound,data:r,message:"No move node found."});y.forEach(D=>{R.touch(D)}),R.touchNextNode()}}),f.initComment&&i.updateLineComment(void 0,f.id)}}}function Sh(){return{action:Nn.Actions.DeleteComment,handler:r,isVisible:t,name:vt.Translation.Actions.DeleteCommentAfter};function t({node:i}){return typeof i.comment=="string"}function r(i,{context:{game:o},moveList:s,moveNodeComponent:l}){o.updateNode(i.ids,{comment:void 0}),s.dom.removeComment(i),l.touchNextNode()}}function Ag(){return{action:Nn.Actions.DeleteCommentBefore,handler:r,isVisible:t,name:vt.Translation.Actions.DeleteCommentBefore};function t({api:i,node:o}){if(o.ids.move===0){const l=i.getLine(o.ids.line);return!!(l&&l.initComment)}const s=i.getNodeByIds(o.previous);return aa(s)&&!!s.comment}function r(i,{context:{game:o},moveList:s,moveNodeComponent:l}){let c=i;const f=o.getLine(i.ids.line);f&&i.ids.move===0?(c=f,o.updateLineComment(void 0,f.id)):(c=o.getNodeByIds(i.previous),o.updateNode(c.ids,{comment:void 0}),l.touch(Ti.TouchableKeys.MoveNumber)),s.dom.removeComment(c)}}function kh(){return{action:Nn.Actions.DeleteMove,handler:r,isVisible:t,name:vt.Translation.Actions.DeleteMove};function t({api:i,node:o}){return o.ids.line===0?i.getMode().getOptions().canModifyExistingMovesOnMainLine:!0}function r(i,{context:{game:o}}){o.deletePosition(i.ids.move,i.ids.line)}}function Sg(){return{action:Nn.Actions.DeleteVariation,handler:r,isVisible:t,name:vt.Translation.Actions.DeleteLine};function t({node:i}){return i.ids.line!==0}function r(i,{context:{game:o},moveList:s}){o.deletePosition(-1,i.ids.line),s.dom.load()}}function Yr(){return{action:Nn.Actions.InsertComment,handler:r,isVisible:t,name:vt.Translation.Actions.InsertCommentAfter};function t({node:i}){return typeof i.comment>"u"}function r(i,{moveList:o}){o.dom.insertEditableComment(i)}}function kg(){return{action:Nn.Actions.InsertCommentBefore,handler:r,isVisible:t,name:vt.Translation.Actions.InsertCommentBefore};function t({api:i,node:o}){if(o.ids.move===0){const l=i.getLine(o.ids.line);return!l||!l.initComment}const s=i.getNodeByIds(o.previous);return aa(s)&&!s.comment}function r(i,{moveList:o,context:s}){const{game:l}=s;let c=i;const f=l.getLine(i.ids.line);i.ids.move===0&&f?c=f:c=l.getNodeByIds(i.previous),o.dom.insertEditableComment(c)}}function Pg(){return{action:Nn.Actions.InsertContinuation,handler:r,isVisible:t,name:vt.Translation.Actions.InsertContinuation};function t({api:i,node:o}){const s=i.getRawLines();return o.ids.move===s[o.ids.line].length-1}function r(i,{context:{game:o}}){o.createContinuation()}}function Cg(t,r){return r.lines?t.ids.line===r.lines[0]:!1}function Tg(){return{action:Nn.Actions.MoveVariationUp,handler:r,isVisible:t,name:vt.Translation.Actions.MoveVariationUp};function t({api:i,node:o}){if(o.ids.line===0)return!1;const s=i.getLine(o.ids.line);if(!s)return!1;const l=i.getNodeByIds({line:s.parentId,move:s.atMoveNode});return l&&l.lines&&l.lines.length>1?!Cg(o,l):!1}function r(i,{context:{game:o}}){o.moveVariation(i.ids.line,!0)}}function Mg(t,r){return r.lines?t.ids.line===r.lines[r.lines.length-1]:!1}function Og(){return{action:Nn.Actions.MoveVariationDown,handler:r,isVisible:t,name:vt.Translation.Actions.MoveVariationDown};function t({api:i,node:o}){if(o.ids.line===0)return!1;const s=i.getLine(o.ids.line);if(!s)return!1;const l=i.getNodeByIds({line:s.parentId,move:s.atMoveNode});return l&&l.lines&&l.lines.length>1?!Mg(o,l):!1}function r(i,{context:{game:o}}){o.moveVariation(i.ids.line,!1)}}var Lo;(function(t){t[t.MainLine=0]="MainLine",t[t.MainLineChild=-1]="MainLineChild",t[t.Parent=1]="Parent"})(Lo||(Lo={}));function Ph(){return{action:Nn.Actions.PromoteVariation,handler:r,isVisible:t,name:vt.Translation.Actions.Promote};function t({api:i,node:o}){const s=o.ids.line;if(s===0)return!1;const l=i.getLine(s);if(!l)return!1;if(l.parentId===0){const{canAddMovesToMainLine:f,canModifyExistingMovesOnMainLine:p}=i.getMode().getOptions();return f&&p}return!0}function r(i,{context:{game:o}}){o.promoteVariation(i.ids.line,Lo.Parent)}}function Ch(){return{action:Nn.Actions.RemoveAnnotation,handler:r,isVisible:t,name:vt.Translation.Actions.RemoveAnnotation};function t({node:i}){return!!i.annotation}function r(i,{context:{game:o},moveNodeComponent:s}){o.updateNode(i.ids,{annotation:void 0}),s.touch(Ti.TouchableKeys.Annotation)}}function Th(){return{action:Nn.Actions.RemoveAdditionalAnnotation,handler:r,isVisible:t,name:vt.Translation.Actions.RemoveEvaluationAnnotation};function t({node:i}){return!!(i.additionalAnnotation&&i.additionalAnnotation.length>0)}function r(i,{context:{game:o},moveNodeComponent:s}){o.updateNode(i.ids,{additionalAnnotation:void 0}),s.touch(Ti.TouchableKeys.Annotation)}}const xg={[Nn.Actions.InsertCommentBefore]:kg(),[Nn.Actions.InsertComment]:Yr(),[Nn.Actions.DeleteCommentBefore]:Ag(),[Nn.Actions.DeleteComment]:Sh(),[Nn.Actions.RemoveAnnotation]:Ch(),[Nn.Actions.RemoveAdditionalAnnotation]:Th(),[Nn.Actions.DeleteVariation]:Sg(),[Nn.Actions.DeleteMove]:kh(),[Nn.Actions.PromoteVariation]:Ph(),[Nn.Actions.MoveVariationDown]:Og(),[Nn.Actions.MoveVariationUp]:Tg(),[Nn.Actions.InsertContinuation]:Pg(),[Nn.Actions.ClearAnalysis]:Eg()};function N6(t){return function(i){Object.keys(i).forEach(o=>{t.contextMenuActions[o]=i[o]})}}function Ig(t){const r=new Map;let i=t;return{cancelConfirmation:o,cancelAllConfirmations:s,confirmAction:l,registerConfirmationCallback:c,requestConfirmation:f};function o(p){r.delete(p)}function s(){r.clear()}function l(p){var m;(m=r.get(p))==null||m(),r.delete(p)}function c(p){i=p}async function f(p){const{action:m,data:v,text:E,type:y}=p;if(r.set(y,m),i)return await i({data:v,text:E,type:y})?l(y):o(y);if(window.confirm(E))return l(y);o(y)}}function iu(t){return Ig(t)}function L6(t){return{api:()=>iu(t),destroy:r,name:Nn.Plugin.Name};function r(i){i&&i.game.hml.contextMenu.cancelAllConfirmations()}}function Rg(t){return function(i){const{contextMenuActions:o,game:s}=t,l=s.getNodeByIds(i);if(!aa(l))throw new $i({code:Ni.BadData,data:i,message:"No move node found"});const c=[];return Object.values(o).forEach(f=>{if(!f)return;f.isVisible({api:s,node:l,options:s.getOptions(),state:t.state})&&c.push(f)}),c}}function Es(t){return function({line:i,move:o}){const{state:s}=t;return s.nodes[i]&&t.state.nodes[i][o]}}function B6(t){return function(){const{state:i}=t;i.selectedNode&&(i.selectedNode.set({[Ti.Keys.Selected]:!1}),i.selectedNode=void 0)}}function Ng(t){return function(i){const{api:o,stateMachine:s}=t;o.resetSelectedNode(),s.transition(x.APIEvents.SelectNode,{lines:o.getNodes(),node:i}),t.scrollContainer.scrollTop=0}}function D6({containerEl:t,moveNode:r,moveListEl:i}){let o;try{o=r.getElement()}catch{}o&&Ld({containerEl:t,moveListEl:i,nodeEl:o})}function $a(t,r){return r.querySelector(`[${Zr.ComponentIdentifier}="line-${t}"]`)}function Mh(t,r=[]){requestAnimationFrame(()=>{requestAnimationFrame(()=>{t(...r)})})}function Lg(t){return function({line:i,move:o}){const{api:s,el:l,scrollContainer:c,state:f,stateMachine:p}=t;if(typeof i>"u"||typeof o>"u")return;s.resetSelectedNode();const m=s.getMoveNode({line:i,move:o});m&&(m.set({[Ti.Keys.Selected]:!0}),f.selectedNode=m,p.transition(x.APIEvents.SelectNode,{lines:s.getNodes(),node:f.selectedNode.getNodeData()}),Mh(()=>{!l.classList.contains(Zr.ClassNames.Component)||m.ids.line!==0&&!$a(m.ids.line,l)||D6({containerEl:c,moveListEl:l,moveNode:m})}))}}function Ju(t,r){Object.keys(t).forEach(i=>{(Object.keys(t[i])||[]).forEach(o=>{r(t[i][o])})})}function ec(t){const r=t.api.getNodes();Ju(r,function(o){o.touch(Ti.TouchableKeys.San)})}function Bg(t){const r=t.state.comments;Object.keys(r).forEach(i=>{r[i][t.options.moveListContextMenuEnabled?"registerClickListeners":"deregisterClickListeners"]()})}function Dg(t){const r={moveListContextMenuEnabled:Bg,moveListDisplayType:ec};return function(o){Object.keys(t.options).forEach(s=>{if(!(s in o))return;const l=t.options[s]!==o[s];t.options[s]=o[s],l&&r[s]&&r[s](t)})}}function Fg(t){return{getComments:()=>t.state.comments,getContext:()=>t,getContextMenuActions:Rg(t),getMoveNode:Es(t),getNodes:()=>t.state.nodes,getOptions:()=>t.options,getSelectedNode:()=>t.state.selectedNode,resetSelectedNode:B6(t),selectLineStart:Ng(t),selectNode:Lg(t),setOptions:Dg(t)}}var F6=':root{--nodeBackground:#fff35f;--nodeBorder:rgba(0, 0, 0, 0.05);--nodeColor:#262421;--nodeColorSelected:#262421;--nodeNumber:rgba(0, 0, 0, 0.7)}.dark-mode{--nodeNumber:rgba(255, 255, 255, 0.5);--nodeColor:rgba(255, 255, 255, 0.72);--nodeBackground:rgba(255, 255, 0, 0.2);--nodeBorder:rgba(255, 255, 0, 0.4);--nodeColorSelected:#fff}.move-node.svelte-66vnx0.svelte-66vnx0{cursor:pointer;line-height:2rem;padding:0;position:relative;z-index:1}.move-node.selected.customColor.svelte-66vnx0 .move-text.svelte-66vnx0{color:#fff}.move-node.selected.svelte-66vnx0 .move-text.svelte-66vnx0{color:var(--nodeCustomColor, var(--nodeColorSelected));position:relative;z-index:1}.move-node.selected.svelte-66vnx0 .move-text.svelte-66vnx0:before{background-color:var(--nodeBackground);border-bottom-style:solid;border-bottom-width:3px;border-color:var(--nodeBorder);border-radius:2px;background-color:var(--nodeCustomColor, var(--nodeBackground));border-width:0 0 3px 0;content:"";height:100%;left:0;margin-left:-2px;position:absolute;top:0;width:calc(100% + 4px);z-index:-1}.move-node.svelte-66vnx0 .hidden.svelte-66vnx0{display:none}.move-node.svelte-66vnx0 .move-number.svelte-66vnx0{color:var(--nodeNumber)}.move-node.svelte-66vnx0 .move-text.svelte-66vnx0{font-weight:700;color:var(--nodeCustomColor, var(--nodeColor));display:inline-block;white-space:pre}.move-node.svelte-66vnx0:not(:first-of-type) .move-number.svelte-66vnx0{margin-left:4px}.move-node.svelte-66vnx0 .move-text .icon-font-chess{display:inline-block;font-size:2.3rem;margin-right:0.2rem;margin-top:-1.3rem}.move-node.svelte-66vnx0 .comment.svelte-66vnx0{cursor:pointer;font-weight:400;margin-left:5px;outline:none;white-space:normal}.move-node.svelte-66vnx0 .comment.svelte-66vnx0:first-child{margin-left:0}';function zg(t){let r,i,o;return{c(){r=(0,P.d)("span"),i=(0,P.t)(t[2]),(0,P.h)(r,"class",o=(0,P.J)(Hi.Classes.MoveNumber)+" svelte-66vnx0")},m(s,l){(0,P.j)(s,r,l),(0,P.A)(r,i)},p(s,l){l&4&&(0,P.r)(i,s[2])},d(s){s&&(0,P.m)(r)}}}function Xs(t){let r,i,o,s,l,c,f=(t[4]||"")+"",p,m,v=t[2]&&zg(t);return{c(){r=(0,P.d)("span"),v&&v.c(),i=(0,P.u)(),o=(0,P.d)("span"),s=new P.N,l=(0,P.n)(),c=new P.N,s.a=l,c.a=null,(0,P.h)(o,"class",(0,P.J)(Hi.Classes.MoveText)+" svelte-66vnx0"),(0,P.h)(r,"data-id",t[1]),(0,P.h)(r,"class",(0,P.J)(Hi.Classes.MoveNode)+" svelte-66vnx0"),(0,P.K)(r,"customColor",t[0]),(0,P.K)(r,"selected",t[5])},m(E,y){(0,P.j)(E,r,y),v&&v.m(r,null),(0,P.A)(r,i),(0,P.A)(r,o),s.m(t[3],o),(0,P.A)(o,l),c.m(f,o),p||(m=[(0,P.k)(r,"click",t[7]),(0,P.k)(r,"contextmenu",t[6]),(0,P.k)(r,"touchstart",t[8]),(0,P.k)(r,"touchend",t[9],{passive:!0})],p=!0)},p(E,[y]){E[2]?v?v.p(E,y):(v=zg(E),v.c(),v.m(r,i)):v&&(v.d(1),v=null),y&8&&s.p(E[3]),y&16&&f!==(f=(E[4]||"")+"")&&c.p(f),y&2&&(0,P.h)(r,"data-id",E[1]),y&1&&(0,P.K)(r,"customColor",E[0]),y&32&&(0,P.K)(r,"selected",E[5])},i:P.o,o:P.o,d(E){E&&(0,P.m)(r),v&&v.d(),p=!1,(0,P.L)(m)}}}function z6(t,r,i){const o=(0,P.M)();let s,{customColor:l}=r,{id:c}=r,{moveListEl:f}=r,{moveNumber:p}=r,{san:m}=r,{annotation:v}=r,{selected:E}=r;function y(Te){Te.preventDefault(),o(Hi.Events.OpenContextMenu)}function M(Te){o(Hi.Events.Click)}function R(Te){M(),s=setTimeout(()=>{y(Te),s=null},Hi.Constants.TouchDelay)}function D(){s&&clearTimeout(s)}function W(Te){const dt=f.querySelector(`[${Zr.ComponentIdentifier}="${c}"]`);dt&&Nd(dt,Te)}return t.$$set=Te=>{"customColor"in Te&&i(0,l=Te.customColor),"id"in Te&&i(1,c=Te.id),"moveListEl"in Te&&i(10,f=Te.moveListEl),"moveNumber"in Te&&i(2,p=Te.moveNumber),"san"in Te&&i(3,m=Te.san),"annotation"in Te&&i(4,v=Te.annotation),"selected"in Te&&i(5,E=Te.selected)},t.$$.update=()=>{t.$$.dirty&1&&W(l)},[l,c,p,m,v,E,y,M,R,D,f]}class U6 extends P.a{constructor(r){super(),(0,P.i)(this,r,z6,Xs,P.b,{customColor:0,id:1,moveListEl:10,moveNumber:2,san:3,annotation:4,selected:5})}}function _r(t,{anchor:r,props:i}){return eu({ComponentType:U6,options:{anchor:r,props:i,target:t},replaceContainer:!1})}function Bd(t){return!!(t&&t.charAt(0)==="$")}const Ai={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$9:"\u2612",$10:"=",$11:"=",$12:"=",$13:"\u221E",$14:"\u2A72",$15:"\u2A71",$16:"\xB1",$17:"\u2213",$18:"+-",$19:"-+",$22:"\u2A00",$23:"\u2A00",$32:"\u27F3",$33:"\u27F3",$36:"\u2192",$37:"\u2192",$40:"\u2191",$41:"\u2191",$44:"\u221E/=",$45:"=/\u221E",$132:"\u21C6",$133:"\u21C6",$146:"N",$256:"=/\u221E"},Ug={"??":"?\\?","!?":"!\\?","-+":"-\\+","\u221E/=":"\u221E\\/\\=","=/\u221E":"=\\/\\\u221E","=":"s=",N:"N\\b"},Hg=["!","?","!!","??","!?","?!","="],Dd=(0,P.O)(Ai),Oh=[{action:Nn.AnnotationActions.AddAnnotation,code:pi.Nags.$1,display:Ai.$1,meaning:vt.Translation.Annotations.GoodMove},{action:Nn.AnnotationActions.AddAnnotation,code:pi.Nags.$2,display:Ai.$2,meaning:vt.Translation.Annotations.BadMove},{action:Nn.AnnotationActions.AddAnnotation,code:pi.Nags.$3,display:Ai.$3,meaning:vt.Translation.Annotations.ExcellentMove},{action:Nn.AnnotationActions.AddAnnotation,code:pi.Nags.$4,display:Ai.$4,meaning:vt.Translation.Annotations.Blunder},{action:Nn.AnnotationActions.AddAnnotation,code:pi.Nags.$5,display:Ai.$5,meaning:vt.Translation.Annotations.SpeculativeMove},{action:Nn.AnnotationActions.AddAnnotation,code:pi.Nags.$6,display:Ai.$6,meaning:vt.Translation.Annotations.DubiousMove},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$9,display:Ai.$9,meaning:vt.Translation.Annotations.Miss},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$10,display:Ai.$10,meaning:vt.Translation.Annotations.Drawish},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$13,display:Ai.$13,meaning:vt.Translation.Annotations.Unclear},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$14,display:Ai.$14,meaning:vt.Translation.Annotations.WhiteHasSlightAdvantage},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$15,display:Ai.$15,meaning:vt.Translation.Annotations.BlackHasSlightAdvantage},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$16,display:Ai.$16,meaning:vt.Translation.Annotations.WhiteHasModerateAdvantage},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$17,display:Ai.$17,meaning:vt.Translation.Annotations.BlackHasModerateAdvantage},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$18,display:Ai.$18,meaning:vt.Translation.Annotations.WhiteHasDecisiveAdvantage},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$19,display:Ai.$19,meaning:vt.Translation.Annotations.BlackHasDecisiveAdvantage},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$22,display:Ai.$22,meaning:vt.Translation.Annotations.PositionInZuqZwang},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$36,display:Ai.$36,meaning:vt.Translation.Annotations.WithInitiative},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$40,display:Ai.$40,meaning:vt.Translation.Annotations.WithCompensation},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$146,display:Ai.$146,meaning:vt.Translation.Annotations.Novelty},{action:Nn.AnnotationActions.AddAdditionalAnnotation,code:pi.Nags.$256,display:Ai.$256,meaning:vt.Translation.Annotations.WithAttack}];function Qs(t){return!t||!Object.prototype.hasOwnProperty.call(Ai,t)&&!Object.prototype.hasOwnProperty.call(Dd,t)?t||"":Bd(t)?Ai[t]:Qs(Dd[t])}function xh(t){let r="";return t.annotation&&(r=`${r}${Qs(t.annotation)}`),t.additionalAnnotation&&t.additionalAnnotation[0]&&(r=`${r}&nbsp;${Qs(t.additionalAnnotation[0])}`),r}function Gg(t,r){return!!(t.color===Ct.ColorsAsNumbers.White||t.ids&&t.ids.move===0||r&&typeof r.comment=="string"||r&&r.lines&&r.lines.length)}function Vg({color:t,ply:r,startingMoveNumber:i=1}){let o;return t===Ct.ColorsAsNumbers.White?o=Math.ceil(r/2+1):o=Math.floor(r/2+1),o+(i-1)}function jg(t,r){return!!(t.color===Ct.ColorsAsNumbers.Black&&(r&&typeof r.comment=="string"||r&&r.lines&&r.lines.length||t.ids&&t.ids.move===0))}function $g({node:t,previous:r,startingMoveNumber:i=1}){let o="";if(!t)return o;const s=Vg({color:t.color,ply:t.moveNumber,startingMoveNumber:i});return Gg(t,r)&&(o+=`${s}.`,jg(t,r)&&(o+="..")),o}const Fd={[Ti.Keys.MoveNumber]:function({game:r,node:i}){var o;return $g({node:i,previous:i?.previous&&(o=r.getNodeByIds(i.previous))!=null?o:void 0,startingMoveNumber:r.getStartingMoveNumber()})},[Ti.Keys.Annotation]:function({node:r}){return xh(r)},[Ti.Keys.CustomColor]:function({node:r}){return r.customColor},[Ti.Keys.San]:function({moveList:r,node:i,translations:o}){return nu({color:Ws(i?.color),moveListDisplayType:r.getOptions().moveListDisplayType,san:i?.san,translations:o})}};function Wg({moveList:t,game:r,node:i,options:o,emitter:s,translations:l}){if(Zs(i))throw new $i({code:Ni.BadData,data:i,message:"Invalid move ids."});const c=_r(o.target,{anchor:o.anchor,props:{annotation:xh(i),id:v(),moveListEl:t.dom.getElement(),moveNumber:Fd[Ti.Keys.MoveNumber](p()),san:Fd[Ti.Keys.San](p()),selected:!1}}),f={addNodeStyles:Te,destroy:c.destroy,getElement:m,getId:v,getNodeData:E,ids:i.ids,insertBeforeNode:D,insertAfterNode:W,removeNodeStyles:dt,set:c.set,touch:M,touchNextNode:R};return y(),f;function p(){return{game:{getNodeByIds:r.getNodeByIds,getStartingMoveNumber:r.getStartingMoveNumber},moveList:{getOptions:t.api.getOptions},node:E(),translations:l}}function m(){var Ie;const ut=t.dom.getElement(),Tt=`[${Zr.ComponentIdentifier}="${v()}"]`,rr=(Ie=ut.querySelector(Tt))!=null?Ie:c.el.querySelector(Tt);if(!rr)throw new $i({code:Ni.ElementNotFound,data:i.ids,message:`Move node element was not found for ${i.ids.line}-${i.ids.move}.`});return rr}function v(){const Ie=i.ids;return`move-node-${Ie.line}-${Ie.move}`}function E(){return r.getNodeByIds(i.ids)}function y(){c.on(Hi.Events.Click,function(){t.api.getOptions().enabled&&r.selectNode(i.ids.line,i.ids.move)}),c.on(Hi.Events.OpenContextMenu,function(){t.api.getOptions().moveListContextMenuEnabled&&(r.selectNode(i.ids.line,i.ids.move),s.emit(Hi.Events.OpenContextMenu,{node:i}))})}function M(Ie){c.set({[Ie]:Fd[Ie](p())})}function R(Ie=[Ti.TouchableKeys.MoveNumber]){const ut=t.api.getMoveNode({line:i.ids.line,move:i.ids.move+1});ut&&Ie.forEach(Tt=>ut.touch(Tt))}function D(Ie){const ut=m();ut.parentNode&&ut.parentNode.insertBefore(Ie,ut)}function W(Ie){const ut=t.dom.getElement(),Tt=m();Tt.nextElementSibling?ut.insertBefore(Ie,Tt.nextElementSibling):ut.appendChild(Ie)}function Te(Ie){const ut=m();Ie&&Object.assign(ut.style,Ie)}function dt(){m().removeAttribute("style")}}function H6(t){return function(i,o){var s;const{game:l,getComponent:c,state:f,stateMachine:p,translations:m}=t,v=i.ids;return typeof f.nodes[v.line]>"u"&&(f.nodes[v.line]={}),typeof f.nodes[v.line][v.move]<"u"&&f.nodes[v.line][v.move].destroy(),f.nodes[v.line][v.move]=Wg({emitter:p,game:l,moveList:(s=c())!=null?s:t.el,node:i,options:o,translations:m}),f.nodes[v.line][v.move]}}function qg(t){t.preventDefault()}function Li(t){return function(){const{dom:i,el:o,queue:s}=t;o.classList.remove(Zr.ClassNames.Component),o.removeEventListener("contextmenu",qg),i.reset(),s.clear()}}function Ih(t){const r=document.createElement("textarea");return r.innerHTML=t.replace(/&nbsp;/g," "),r.value}function Kg(t,r){if(r){const i=["br"],o=i.map(c=>`\\/${c}`),s=i.concat(o).join("|"),l=new RegExp(`<(?!${s}s*/?)[^>]+>`,"g");return t.replace(l,"")}return t.replace(/<\/?[^>]+(>|$)/g,"")}function Zg(t){let r;return r=Ih(Kg(t)),r===" "&&(r=""),r}var Yg=".editable-comment.svelte-1toz211{cursor:pointer;font-weight:400;margin-left:5px;outline:none;white-space:normal;color:#52b1dc;display:inline-block}.editable-comment.svelte-1toz211:first-child{margin-left:0}.editable-comment.svelte-1toz211::-moz-selection{background:#cfeaf3}.editable-comment.svelte-1toz211::selection{background:#cfeaf3}.editable-comment[contenteditable=true].svelte-1toz211:empty:before{color:#8b8987;content:attr(placeholder);display:inline}";function zd(t){let r,i,o,s,l;return{c(){r=(0,P.d)("span"),i=(0,P.t)(t[2]),(0,P.h)(r,"class",(0,P.J)(pa.Classes.Component)+" svelte-1toz211"),(0,P.h)(r,"contenteditable","true"),(0,P.h)(r,"placeholder",o=t[0]["Add Comment..."]())},m(c,f){(0,P.j)(c,r,f),(0,P.A)(r,i),t[7](r),s||(l=[(0,P.k)(r,"focusin",t[3]),(0,P.k)(r,"focusout",t[4]),(0,P.k)(r,"input",t[5])],s=!0)},p(c,[f]){f&4&&(0,P.r)(i,c[2]),f&1&&o!==(o=c[0]["Add Comment..."]())&&(0,P.h)(r,"placeholder",o)},i:P.o,o:P.o,d(c){c&&(0,P.m)(r),t[7](null),s=!1,(0,P.L)(l)}}}function Xg(t,r,i){let o;const s=(0,P.M)();let{comment:l=""}=r,{translations:c}=r,f;function p(){l&&document.execCommand("selectAll",!1,null)}function m(){s(pa.Events.FocusOut,f.innerHTML)}function v(){s(pa.Events.CommentChanged,f.innerHTML)}(0,P.P)(()=>{f.focus()});function E(y){P.Q[y?"unshift":"push"](()=>{f=y,i(1,f)})}return t.$$set=y=>{"comment"in y&&i(6,l=y.comment),"translations"in y&&i(0,c=y.translations)},t.$$.update=()=>{t.$$.dirty&64&&i(2,o=l||"")},[c,f,o,p,m,v,l,E]}class Qg extends P.a{constructor(r){super(),(0,P.i)(this,r,Xg,zd,P.b,{comment:6,translations:0})}}function G6(t,{anchor:r,props:i}){return eu({ComponentType:Qg,options:{anchor:r,props:i,target:t},replaceContainer:!1})}function V6(t,{api:r,comment:i,moveList:o,noUIUpdates:s}){r.updateLineComment(typeof i=="string"&&i.length>0?i:void 0,t.id),!s&&t.initComment&&(t.id===0?o.dom.getElement():$a(t.id,o.dom.getElement())).prepend(o.dom.addComment(t))}function Jg(t,{moveList:r,api:i}){let o,s;t.id===0?s=r.dom.getElement():s=$a(t.id,r.dom.getElement());const l=r.api.getMoveNode({line:t.id,move:0});return l&&(o=l.getElement()),{anchor:o,comment:t.initComment,element:s,handler:function(f,p){V6(t,{api:i,comment:f,moveList:r,noUIUpdates:p})}}}function j6(t,{api:r,comment:i,moveList:o,noUIUpdates:s}){r.updateNode(t.ids,{comment:typeof i=="string"&&i.length>0?i:void 0}),!s&&(t.getNodeData().comment&&t.getElement().appendChild(o.dom.addComment(t.getNodeData())),t.touchNextNode())}function $6(t,{moveList:r,api:i}){const o=r.api.getMoveNode(t.ids);if(!o)throw new $i({code:Ni.ElementNotFound,data:t,message:"No move node found."});return{comment:t.comment,element:o.getElement(),handler:function(l,c){j6(o,{api:i,comment:l,moveList:r,noUIUpdates:c})}}}function W6(t){return function(i){const{dom:o,game:s,getComponent:l,translations:c}=t;let f,p;if(aa(i))f=$6(i,{api:s,moveList:l()});else if(Zs(i))f=Jg(i,{api:s,moveList:l()});else throw new $i({code:Ni.BadData,data:i,message:"No line or node found"});o.removeEditableComment(),t.editableCommentComponent=G6(f.element,{anchor:f.anchor,props:{comment:f.comment,translations:c}}),t.editableCommentComponent.on(pa.Events.CommentChanged,function({detail:E}){clearTimeout(p),p=window.setTimeout(()=>{m(E)},pa.Constants.CommentUpdateDelay)}),t.editableCommentComponent.on(pa.Events.FocusOut,function({detail:E}){clearTimeout(p);const y=Zg(E);f.handler(y),t.dom.removeEditableComment()});function m(v=""){const E=Zg(v);f.handler(E,!0)}}}var Y4=`.comment {
  cursor: pointer;
  font-weight: 400;
  margin-left: 5px;
  outline: none;
  white-space: normal;
}
.comment:first-child {
  margin-left: 0;
}`,ou;(function(t){(function(r){r.Click="click"})(t.Events||(t.Events={}))})(ou||(ou={}));function Rh(t){if(Zs(t))return`line-comment-${t.id}`;if(aa(t))return`move-node-comment-${t.ids.line}-${t.ids.move}`;throw new $i({code:Ni.BadData,data:t,message:"No line or node found"})}function Nh(t){return t.split(" ").map(r=>Bd(r)?Qs(r):r).join(" ")}function q6({commentLinkData:t,lineOrNode:r,context:i}){const o=Rh(r);let s=!1,l,c,f;if(Zs(r))l=Nh(r.initComment),f={line:r.id,move:0};else if(aa(r))l=r.comment?Nh(r.comment):r.comment,f=r.ids;else throw new $i({code:Ni.BadData,data:r,message:"No line or node found"});return p(),{deregisterClickListeners:E,destroy:m,getElement:()=>c,getId:()=>o,registerClickListeners:v};function p(){var R;const D=t?"a":"span";c=document.createElement(D),c.setAttribute(Zr.ComponentIdentifier,o),c.innerHTML=Kg(((R=t?.text)!=null?R:l)||"",!0),c.classList.add(Hi.Classes.Comment,Hi.Classes.StaticComment),t&&(c.setAttribute("href",t.href),c.setAttribute("target","_blank")),i.editingEnabled&&!t&&v()}function m(){E(),i.removeCommentFromMoveList(o)}function v(){s||(c.addEventListener("click",y,{once:!0}),c.addEventListener("contextmenu",M),s=!0)}function E(){c.removeEventListener("click",y),c.removeEventListener("contextmenu",M),s=!1}function y(){m(),i.emitter.emit(ou.Events.Click,r)}function M(R){R.preventDefault(),i.emitter.emit(Hi.Events.OpenContextMenu,{node:{ids:f}})}}function K6(t){return function(i,o=!0,s){const{dom:l,options:c,state:f,stateMachine:p}=t,m=!!("isCommentEnabled"in i?i.isCommentEnabled:o),v=q6({commentLinkData:s??null,lineOrNode:i,context:{editingEnabled:c.moveListContextMenuEnabled&&m,emitter:p,removeCommentFromMoveList(){l.removeComment(i)}}});return f.comments[v.getId()]&&l.removeComment(i),f.comments[v.getId()]=v,v.getElement()}}function Ud(t){return t===0}function Z6(t){return function({node:i,nodeToInsertAfter:o}){const{dom:s,el:l,placeholders:c}=t,f=c[Zr.Placeholders.Moves],p=Ud(i.ids.line)?f:void 0;let m=l;if(o){const v=o.getElement();if(!v)throw new $i({code:Ni.ElementNotFound,message:"Node element does not exist."});m=v.parentNode}s.addNode(i,{anchor:p,target:m})}}function Lh(t,...r){const i=document.createElement("span");return i.setAttribute(Zr.ComponentIdentifier,`line-${t}`),i.classList.add(...r),i}function e_(t){return function({node:i}){const{api:o,dom:s,el:l,game:c}=t,f=i.ids,p=c.getRawLines()[f.line],m={line:p.parentId,move:p.atMoveNode},v=o.getMoveNode({line:m.line,move:m.move+1}),E=c.getNodeByIds(m);if(!E)throw new $i({code:Ni.ElementNotFound,message:"Anchor node element for variation not found."});let y=l;const M=Lh(p.id,Zr.ClassNames.Variation);if(E.ids.line===0&&M.classList.add(Zr.ClassNames.MainLine),s.addNode(i,{target:M}),E.lines&&E.lines.length>1)y=$a(E.lines[E.lines.length-2],l);else{const R=o.getMoveNode(E.ids);R&&(y=R.getElement())}y&&y.after(M),typeof v<"u"&&v.touch(Ti.TouchableKeys.MoveNumber)}}function mr(t,r){return r.lines?r.lines.reduce((i,o)=>(i.push(t[o]),i),[]):[]}function Bh({api:t,depth:r,parentLineEl:i,lines:o,line:s}){let l;r===1?l=document.createDocumentFragment():l=Lh(s.id,Zr.ClassNames.Variation),s.initComment&&l.appendChild(t.addComment(s)),s.forEach(c=>{const f=t.addNode(c,{target:l});c.comment&&f.getElement().appendChild(t.addComment(c)),c.lines&&mr(o,c).forEach(p=>{Bh({api:t,depth:r+1,line:p,lines:o,parentLineEl:l})})}),i.appendChild(l)}function t_({dom:t,game:r}){r.getRawLines().forEach(o=>{o.forEach(s=>{const l=r.getNodeByIds(s.ids);if(!l)return;const c=l.customColor;c&&t.updateMoveNodeComponent(s.ids,{customColor:c})})})}function n_(t){return function(){const{api:i,dom:o,el:s,game:l,placeholders:c}=t,f=c[Zr.Placeholders.Moves];o.reset();const p=l.getRawLines();p[0].initComment&&s.insertBefore(o.addComment(p[0]),f),p[0].forEach(v=>{var E,y;const M=o.addNode(v,{anchor:f,target:s});if(v.comment&&M.getElement().appendChild(o.addComment(v)),(E=v.commands)!=null&&E.text&&((y=v.commands)!=null&&y.href)){const{text:R,href:D}=v.commands;l.hml.addCommentLink({node:v,text:R,href:D})}v.lines&&mr(p,v).forEach(R=>{const D=Lh(R.id,Zr.ClassNames.Variation,Zr.ClassNames.MainLine);Bh({api:{addComment:o.addComment,addNode:o.addNode},depth:1,line:R,lines:p,parentLineEl:D}),s.insertBefore(D,f)})});const m=l.getSelectedNode();m&&i.selectNode(m.ids),t_(t),t.state.nodeLimit&&t.game.hml.updateNodeLimits(t.state.nodeLimit)}}function Dh(t,r){const i=r.querySelector(`[${Zr.ComponentIdentifier}="${Rh(t)}"`);i&&i.parentNode&&i.parentNode.removeChild(i)}function Y6(t){return function(i){const{state:o}=t,s=Rh(i),l=t.el;o.comments[s]&&(Dh(i,l),delete o.comments[s])}}function r_(t){return function(){if(typeof t.editableCommentComponent<"u"){try{t.editableCommentComponent.destroy()}catch{}t.editableCommentComponent=void 0}}}function X6(t){return function(i){const{api:o,dom:s,el:l,state:c}=t,f=i.id;if(typeof c.nodes[f]>"u")throw new $i({code:Ni.BadData,data:i,message:`No line with id ${f} found`});c.nodes[f][0]&&s.removeNode({line:f,move:0});const p=$a(f,l);p&&p.parentNode.removeChild(p),delete c.nodes[f];let m;typeof i.atMoveNode<"u"&&typeof i.parentId<"u"&&(m=o.getMoveNode({line:i.parentId,move:i.atMoveNode+1})),m&&m.touch(Ti.TouchableKeys.MoveNumber)}}function vr({el:t,game:r,state:i}){const o=r.getRawLines();Object.keys(i.nodes).forEach(s=>{var l;if(o[s])return;Object.values(i.nodes[s]).forEach(f=>f.destroy()),(l=$a(Number(s),t))==null||l.remove(),delete i.nodes[s]})}function ei(t){return function({line:i,move:o}){const{api:s,state:l}=t,c=s.getMoveNode({line:i,move:o});if(!c)return;const f=Object.keys(l.nodes[c.ids.line]).length-1;if(l.nodes[c.ids.line][c.ids.move]!==l.nodes[c.ids.line][f])for(let m=f;m>c.ids.move;m--)l.nodes[c.ids.line][m].destroy(),delete l.nodes[c.ids.line][m];c.destroy(),delete l.nodes[c.ids.line][c.ids.move],vr(t);const p=s.getMoveNode({line:c.ids.line,move:c.ids.move+1});p&&p.touch(Ti.TouchableKeys.MoveNumber)}}function Xr(t){return function(){const{dom:i,el:o,state:s,placeholders:l}=t;i.removeEditableComment(),o.innerHTML="",s.comments={},s.nodes={},s.selectedNode=void 0,o.appendChild(l[Zr.Placeholders.Moves]),o.appendChild(l[Zr.Placeholders.GameResult])}}function Hd(t){return function(i){var o;const{el:s}=t,l=s.querySelector(`.${Hi.Classes.GameResultNode}`),c=t.placeholders[Zr.Placeholders.GameResult];if(l&&((o=l.parentElement)==null||o.removeChild(l)),i===Ct.Results.None)return;const f=document.createElement("span");f.classList.add(Hi.Classes.GameResultNode),f.innerText=i,s.insertBefore(f,c)}}function i_(t){return function(i,o){var s;const{dom:l,game:c}=t,f=c.getLine(i);if(!f)return;const{initComment:p}=o;if(p!==void 0){const m=f.id===0?(s=l?.getElement())!=null?s:t.el:$a(f.id,t.el);m?.prepend(l.addComment(f))}}}function Dr(t){return function(i,o){const{api:s,dom:l,game:c}=t,f=c.getNodeByIds(i),p=s.getMoveNode(i);if(!f||!p)return;const m=p?.getElement(),v=[],{additionalAnnotation:E,annotation:y,comment:M,customColor:R,isCommentEnabled:D}=o;if((E!==void 0||y!==void 0)&&v.push(Ti.TouchableKeys.Annotation),M!==void 0)if(M==="")l.removeComment(f);else{const W=p.getNodeData(),Te=l.addComment(W,D??!0);m.appendChild(Te)}R!==void 0&&v.push(Ti.TouchableKeys.CustomColor),v.forEach(W=>p.touch(W))}}function _o(t){const{el:r,placeholders:i}=t;return r.classList.add(Zr.ClassNames.Component),r.addEventListener("contextmenu",qg),r.appendChild(i[Zr.Placeholders.Moves]),r.appendChild(i[Zr.Placeholders.GameResult]),{addComment:K6(t),addNode:H6(t),destroy:Li(t),getElement:()=>r,insertEditableComment:W6(t),insertNode:Z6(t),insertVariation:e_(t),load:n_(t),removeComment:Y6(t),removeEditableComment:r_(t),removeLine:X6(t),removeNode:ei(t),reset:Xr(t),setResultNode:Hd(t),setScrollContainer:o=>t.scrollContainer=o,updateLineComponent:i_(t),updateMoveNodeComponent:Dr(t)}}var Wa;(function(t){(function(r){r.PluginAdded="PluginAdded",r.PluginRemoved="PluginRemoved",r.ContextSet="ContextSet"})(t.Events||(t.Events={}))})(Wa||(Wa={}));function Gd(t=[],r,i=(0,P.H)()){const o=new Map;let s=r;return c(t),ze(Ee({add:l,addMany:c,destroy:f},i),{getAll:p,getContext:m,getOne:v,has:o.has.bind(o),remove:E,setContext:y});function l(M){var R;return M.name?(o.has(M.name)&&E(M.name),o.set(M.name,M),(R=M.create)==null||R.call(M,s),i.emit(Wa.Events.PluginAdded,M),!0):!1}function c(M){return!M||M.length===0?!1:(Array.isArray(M)?M:[M]).reduce(function(W,Te){return l(Te)||(W=!1),W},!0)}function f(){o.forEach(M=>E(M.name))}function p(){return[...o.values()]}function m(){return s}function v(M){return o.get(M)}function E(M){var R;const D=o.get(M);return D?((R=D.destroy)==null||R.call(D,s),o.delete(M),i.emit(Wa.Events.PluginRemoved,D),!0):!1}function y(M){s=M,i.emit(Wa.Events.ContextSet,s)}}function Fh(t,r){return function(o,s){const l=t[o];return t[o]=s(r),function(){var f,p;(p=(f=t[o]).destroy)==null||p.call(f),t[o]=l}}}function Ma(t,r,i){const o=Fh(r,i),s=new Map;return t.on(Wa.Events.PluginAdded,function(c){if(c.api){const f=o(c.name,c.api);f&&s.set(c.name,f)}}),t.on(Wa.Events.PluginRemoved,function(c){const f=s.get(c.name);f?.(),s.delete(c.name)}),t}function tc(t,r){const i=Gd([],r);return Ma(i,t,r)}function o_({el:t,game:r,nodeLimit:i,options:o,plugins:s=[L6()],stateMachineListeners:l,stateMachine:c,queue:f,placeholders:p,scrollContainer:m,translations:v=$s}){const E={},y={api:E,contextMenuActions:xg,dom:{getElement:()=>t},editableCommentComponent:void 0,el:t,game:r,getComponent:dt,options:o,queue:f,placeholders:p,scrollContainer:m,state:{comments:{},nodes:{},nodeLimit:i,selectedNode:void 0},stateMachine:c,stateMachineListeners:l,translations:v},{dom:M,game:R}=y,D=tc(R.hml,y);D.addMany(s),Object.assign(E,Ee({},Fg(y))),Object.assign(M,Ee({},_o(y))),R.extendAPI(Z.Plugin.Name,{addContextMenuActions(){return N6(y)}});const W={api:E,destroy:Te,dom:M,plugins:D};return W;function Te(){D.destroy()}function dt(){return W}}function a_({context:t,coreContext:r}){var i,o;const{el:s,nodeLimit:l,scrollContainer:c,translations:f}=t,{api:p}=r,m=p.getOptions();(o=(i=t.moveList)==null?void 0:i.destroy)==null||o.call(i),t.methods.destroy(),t.stateMachineListeners.push([ou.Events.Click,t.methods.handleCommentClick]),t.stateMachine.on(ou.Events.Click,t.methods.handleCommentClick),t.moveList=o_({el:s,game:p,nodeLimit:l,options:{enabled:m.enabled,moveListContextMenuEnabled:m.moveListContextMenuEnabled,moveListDisplayType:m.moveListDisplayType},queue:t.queue,placeholders:t.placeholders,scrollContainer:c,stateMachine:t.stateMachine,stateMachineListeners:t.stateMachineListeners,translations:f}),t.moveList.dom.load(),t.moveList.dom.setResultNode(p.getResult())}function s_({node:t,game:r,data:i,moveNodeComponent:o}){const s=Qs(i),c=o.getNodeData().annotation===s?void 0:s;r.updateNode(t.ids,{annotation:c}),o.touch(Ti.TouchableKeys.Annotation)}function l_({node:t,game:r,data:i,moveNodeComponent:o}){const s=Qs(i),l=o.getNodeData().additionalAnnotation,f=l?.[0]===s?void 0:[s];r.updateNode(t.ids,{additionalAnnotation:f}),o.touch(Ti.TouchableKeys.Annotation)}function u_(t,r){return function({action:o,data:s,event:l,moveNode:c}){const f=r.api.getMoveNode(c.ids);if(!f)throw new $i({code:Ni.BadData,data:c.ids,message:"No move node found."});o.handler(c,{context:t,data:s,moveList:r,moveNodeComponent:f,event:l}),t.queue.flush()}}var Q6=".move-node-context-menu.svelte-n9uqrg.svelte-n9uqrg{background-color:#fff;border:1px solid rgba(0, 0, 0, 0.15);border-radius:4px;box-shadow:0 6px 12px rgba(0, 0, 0, 0.175);color:#000000;font-size:1.4rem;list-style:none;margin:2px 0 0;min-width:16rem;padding:5px 0;position:fixed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1000}.move-node-context-menu.svelte-n9uqrg .action-name.svelte-n9uqrg{padding:0.5rem 2rem}.move-node-context-menu.svelte-n9uqrg .action-name.svelte-n9uqrg,.move-node-context-menu.svelte-n9uqrg .annotation.svelte-n9uqrg{cursor:pointer;display:block}.move-node-context-menu.svelte-n9uqrg .action-name.svelte-n9uqrg:hover,.move-node-context-menu.svelte-n9uqrg .annotation.svelte-n9uqrg:hover{background-color:#f1f1f1}.move-node-context-menu.svelte-n9uqrg .annotations-container.svelte-n9uqrg{display:grid;grid-template-columns:1fr 1fr 1fr 1fr}.move-node-context-menu.svelte-n9uqrg .annotation.svelte-n9uqrg{display:inline-block;padding:3px;text-align:center}.move-node-context-menu.svelte-n9uqrg .divider.svelte-n9uqrg{background-color:#f1f1f1;height:1px}";function c_(t,r,i){const o=t.slice();return o[9]=r[i],o}function zh(t,r,i){const o=t.slice();return o[12]=r[i],o}function d_(t){let r,i=(t[1][t[12].name]?t[1][t[12].name]():t[12].name)+"",o,s,l,c;function f(...p){return t[6](t[12],...p)}return{c(){r=(0,P.d)("span"),o=(0,P.t)(i),(0,P.h)(r,"class",s=(0,P.J)(ws.Classes.ActionName)+" svelte-n9uqrg")},m(p,m){(0,P.j)(p,r,m),(0,P.A)(r,o),l||(c=(0,P.k)(r,"click",f),l=!0)},p(p,m){t=p,m&3&&i!==(i=(t[1][t[12].name]?t[1][t[12].name]():t[12].name)+"")&&(0,P.r)(o,i)},d(p){p&&(0,P.m)(r),l=!1,c()}}}function Vd(t){let r,i=t[9].display+"",o,s,l,c,f,p;function m(){return t[7](t[9])}return{c(){r=(0,P.d)("span"),o=(0,P.t)(i),s=(0,P.u)(),(0,P.h)(r,"alt",l=t[1][t[9].meaning]()),(0,P.h)(r,"class",c=(0,P.J)(ws.Classes.Annotation)+" svelte-n9uqrg")},m(v,E){(0,P.j)(v,r,E),(0,P.A)(r,o),(0,P.A)(r,s),f||(p=(0,P.k)(r,"click",m),f=!0)},p(v,E){t=v,E&2&&l!==(l=t[1][t[9].meaning]())&&(0,P.h)(r,"alt",l)},d(v){v&&(0,P.m)(r),f=!1,p()}}}function f_(t){let r,i,o,s,l,c,f,p,m=t[0],v=[];for(let M=0;M<m.length;M+=1)v[M]=d_(zh(t,m,M));let E=Oh,y=[];for(let M=0;M<E.length;M+=1)y[M]=Vd(c_(t,E,M));return{c(){r=(0,P.d)("div");for(let M=0;M<v.length;M+=1)v[M].c();i=(0,P.u)(),o=(0,P.d)("div"),s=(0,P.u)(),l=(0,P.d)("div");for(let M=0;M<y.length;M+=1)y[M].c();c=(0,P.u)(),(0,P.h)(o,"class",(0,P.J)(ws.Classes.Divider)+" svelte-n9uqrg"),(0,P.h)(l,"class",(0,P.J)(ws.Classes.AnnotationsContainer)+" svelte-n9uqrg"),(0,P.h)(r,"class",(0,P.J)(ws.Classes.Component)+" svelte-n9uqrg")},m(M,R){(0,P.j)(M,r,R);for(let D=0;D<v.length;D+=1)v[D].m(r,null);(0,P.A)(r,i),(0,P.A)(r,o),(0,P.A)(r,s),(0,P.A)(r,l);for(let D=0;D<y.length;D+=1)y[D].m(l,null);(0,P.A)(r,c),t[8](r),f||(p=(0,P.k)(document.body,"click",t[4]),f=!0)},p(M,[R]){if(R&11){m=M[0];let D;for(D=0;D<m.length;D+=1){const W=zh(M,m,D);v[D]?v[D].p(W,R):(v[D]=d_(W),v[D].c(),v[D].m(r,i))}for(;D<v.length;D+=1)v[D].d(1);v.length=m.length}if(R&10){E=Oh;let D;for(D=0;D<E.length;D+=1){const W=c_(M,E,D);y[D]?y[D].p(W,R):(y[D]=Vd(W),y[D].c(),y[D].m(l,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=E.length}},i:P.o,o:P.o,d(M){M&&(0,P.m)(r),(0,P.D)(v,M),(0,P.D)(y,M),t[8](null),f=!1,p()}}}function h_(t,r,i){let{actions:o}=r,{translations:s}=r;const l=(0,P.M)();let c;function f(){return c}function p(y){y.target.classList.contains(ws.Classes.Component)||l(Nn.Events.Close)}const m=(y,M)=>l(Nn.Events.ActionClicked,{action:y,event:M}),v=y=>l(Nn.Events.AnnotationClicked,{action:y.action,data:y.code});function E(y){P.Q[y?"unshift":"push"](()=>{c=y,i(2,c)})}return t.$$set=y=>{"actions"in y&&i(0,o=y.actions),"translations"in y&&i(1,s=y.translations)},[o,s,c,l,p,f,m,v,E]}class p_ extends P.a{constructor(r){super(),(0,P.i)(this,r,h_,f_,P.b,{actions:0,translations:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function jd(t,{anchor:r,props:i}){return eu({ComponentType:p_,methods:["getElement"],options:{anchor:r,props:i,target:t},replaceContainer:!1})}function m_({contextMenu:t,moveNode:r,padding:i={x:10,y:20}}){const o=r.y+i.y-window.pageYOffset,s=window.innerHeight-t.height,l={left:0,top:0};return l.top=Math.min(o,s),l.bottom=l.top+t.height,r.x>window.innerWidth-t.width?l.left=r.x+r.width-t.width:(o<s&&(i.x=0),l.left=r.x+i.x),l}function v_(t,r){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{i=null,t(...s)},r)}}function g_(t){let r;return function(...o){r&&cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=null,t(...o)})}}function Uh({actions:t,el:r,moveNode:i,emitter:o,translations:s}){const l=i?.getElement(),c=jd(l?.parentElement||r,{anchor:l,props:{actions:t,translations:s}});return m(),p(),{destroy:c.destroy};function f(v){return function({detail:y}){o.emit(v,{action:y.action,data:y.data,event:y.event,moveNode:i.getNodeData()})}}function p(){c.on(Nn.Events.ActionClicked,f(Nn.Events.ActionClicked)),c.on(Nn.Events.AnnotationClicked,f(Nn.Events.AnnotationClicked)),c.on(Nn.Events.Close,()=>o.emit(Nn.Events.Close)),r.addEventListener("scroll",v_(m,50))}function m(){const v=c?.getElement();if(!v)return;const{left:E,top:y}=m_({contextMenu:v.getBoundingClientRect(),moveNode:l?.getBoundingClientRect()||r.getBoundingClientRect()});v.style.left=`${E}px`,v.style.top=`${y}px`}}function __(t){const{el:r,moveList:i,stateMachine:o,methods:{destroyContextMenu:s},translations:l}=t;t.stateMachineListeners.push([Nn.Events.ActionClicked,c],[Nn.Events.AnnotationClicked,f],[Nn.Events.Close,s],[Hi.Events.OpenContextMenu,p]),o.on(Nn.Events.Close,s),o.on(Nn.Events.ActionClicked,c),o.on(Nn.Events.AnnotationClicked,f),o.on(Hi.Events.OpenContextMenu,p);function c(m){s(),u_(i.api.getContext(),i)(m)}function f({action:m,data:v,moveNode:E}){s();const y=i.api.getMoveNode(E.ids);if(!y)throw new $i({code:Ni.BadData,data:E.ids,message:"No move node found."});const M={data:v,game:i.api.getContext().game,moveNodeComponent:y,node:E};m===Nn.AnnotationActions.AddAnnotation?s_(M):m===Nn.AnnotationActions.AddAdditionalAnnotation&&l_(M)}function p(m){var v;i.api.selectNode(m.node.ids);const E=i.api.getContextMenuActions(m.node.ids);s(),t.contextMenu=Uh({actions:E,el:(v=t.scrollContainer)!=null?v:r,emitter:o,moveNode:i.api.getMoveNode(m.node.ids),translations:l})}}const Hh={condition:b_,handler:Gh};function b_({context:t,event:r}){return function(){return r.type===x.InstanceEvents.Create||r.type===x.InstanceEvents.ModeChanged||!t.moveList||Object.entries(t.moveList).length===0}}function Gh({context:t,coreContext:r}){a_({context:t,coreContext:r}),t.enableContextMenu&&__(t)}function y_(t,r){return function(o){o.selectedNode=Ee({},o.coreContext.api.getRelativeNode()),t.add(r,o)}}function nc({conditionParams:t,handlerContext:r}){const{queue:i}=r.context,o=[J1,ng,og,Hh,ug,cg,M6,mg,Ah,x6,bg].map(({condition:s,handler:l})=>[s(t),y_(i,l)]);Q1(o,r),Mh(function(){i.flush()})}function xr(t){return function(i){if(i){if(Zs(i)){t.moveList.api.selectLineStart(i);return}aa(i)&&t.moveList.api.selectNode(i.ids)}}}function J6(t){return function(){var i,o;t.stateMachineListeners.forEach(([s,l])=>{t.stateMachine.off({handler:l,type:s})}),t.stateMachineListeners=[],!(!t.moveList||!((o=(i=t.moveList)==null?void 0:i.dom)!=null&&o.destroy))&&(t.moveList.dom.destroy(),t.moveList.plugins.destroy())}}function w_(t){return function(){t.contextMenu&&(t.contextMenu.destroy(),t.contextMenu=void 0)}}const ew=Zr.VariationParenthesis.Before,E_=Zr.VariationParenthesis.After;function Js({api:t,el:r,win:i=window}){const o=i.getSelection(),s=o?.anchorNode,l=o?.focusNode;if(!s||!l)return null;const c=t.getPGN(),f=Go({moveList:r,node:s,pgn:c}),p=Go({moveList:r,node:l,pgn:c});if(f===null||p===null)return null;const m=Math.min(f,p),v=Math.max(f,p),E=f<p?l:s,y=Wd($d(E)).length,M=v+y-m;let R=c.substr(m,M);return R=tw({lastIndex:v+y,pgn:c,pgnPiece:R}),nw(R),R}function tw({lastIndex:t,pgn:r,pgnPiece:i}){const o=new RegExp(`\\${ew}`,"g"),s=(i.match(o)||[]).length;let l=i;for(let c=0;c<s&&r[t+c]===E_;c++)l+=E_;return l}function nw(t){const r=document.createElement("textarea");document.body.append(r),r.value=t,r.focus(),r.select(),document.execCommand("cut"),r.remove()}function Go({moveList:t,pgn:r,node:i}){const o=$d(i),s=Wd(o);let l=A_(t,o)||0;return r.split("").findIndex((c,f)=>{if(r.substr(f,s.length)===s){if(l===0)return f;l--}return!1})}function $d(t){var r;return!t.parentNode||(r=t?.classList)!=null&&r.contains(Hi.Classes.MoveNode)?t:$d(t.parentNode)}function A_(t,r){return Array.from(t.querySelectorAll(`.${Hi.Classes.MoveNode}`)).filter(s=>s.textContent===r.textContent).findIndex(s=>s===r)}function Wd(t){const r=t.querySelector(`.${Hi.Classes.MoveNumber}`),i=t.querySelector(`.${Hi.Classes.MoveText}`),o=t.querySelector(`.${Hi.Classes.Comment}`);let s="";return r&&(s+=`${r.textContent} `),i&&(s+=i.textContent),o&&(s+=` {${o.textContent}}`),s}function rw({context:t,el:r}){return function(o){var s;if((s=o.target.classList)==null?void 0:s.contains(pa.Classes.Component))return;Js({api:t.api,el:r})&&o.preventDefault()}}function iw(t){return function(i){t.moveList.dom.insertEditableComment(i)}}function au({action:t,nodeLimit:r}){const i=t.includes("Set");return{action:Nn.Actions[t],handler:s,isVisible:o,name:vt.Translation.Actions[t]};function o({state:l}){var c,f;const p=(c=l.nodeLimit)==null?void 0:c[r],m=p?.move===((f=l.selectedNode)==null?void 0:f.getNodeData().move);return i?!p||!m:!!(p&&m)}function s(l,{moveList:c,moveNodeComponent:f}){S_({limitType:r,isSettingNodeLimits:i,moveList:c,moveNodeComponent:f,node:l})}}const ow={[Nn.Actions.SetBegin]:au({action:Nn.Actions.SetBegin,nodeLimit:Zr.NodeLimitTypes.Begin}),[Nn.Actions.SetFocus]:au({action:Nn.Actions.SetFocus,nodeLimit:Zr.NodeLimitTypes.Focus}),[Nn.Actions.SetEnd]:au({action:Nn.Actions.SetEnd,nodeLimit:Zr.NodeLimitTypes.End}),[Nn.Actions.RemoveBegin]:au({action:Nn.Actions.RemoveBegin,nodeLimit:Zr.NodeLimitTypes.Begin}),[Nn.Actions.RemoveFocus]:au({action:Nn.Actions.RemoveFocus,nodeLimit:Zr.NodeLimitTypes.Focus}),[Nn.Actions.RemoveEnd]:au({action:Nn.Actions.RemoveEnd,nodeLimit:Zr.NodeLimitTypes.End})};function aw(t,r){const{api:i}=t;return function(){i.addContextMenuActions(ow),P_(t,r)}}function S_({limitType:t,isSettingNodeLimits:r,moveList:i,moveNodeComponent:o,node:s}){var l,c;const f=i.api.getContext(),p=(l=f.state.nodeLimit)==null?void 0:l[t],{respond:m}=f.game.getContext();let v;p&&(v=i.api.getMoveNode({line:p.ids.line,move:p.ids.move})),r?sw({limitType:t,moveList:i,moveNodeComponent:o,node:s}):((c=f.state.nodeLimit)==null||delete c[t],k_({limitType:t,moveList:i,moveNodeComponent:o})),v&&k_({limitType:t,moveList:i,moveNodeComponent:v}),m(Zr.Events.UpdateNodeLimit,{isSettingNodeLimits:r,limitType:t,node:s})}function sw({limitType:t,moveList:r,moveNodeComponent:i,node:o}){const s=r.api.getContext();if(s.state.nodeLimit&&(s.state.nodeLimit[t]=o),t===Zr.NodeLimitTypes.Focus){i.addNodeStyles({fontStyle:"italic"});return}const l=document.createElement("span"),c=`diagram-${t}`,f=t===Zr.NodeLimitTypes.Begin?"[[":"]]";l.classList.add(c),l.innerHTML=f,t===Zr.NodeLimitTypes.Begin?i.insertBeforeNode(l):t===Zr.NodeLimitTypes.End&&i.insertAfterNode(l)}function k_({limitType:t,moveList:r,moveNodeComponent:i}){const o=r.dom.getElement().querySelector(`.diagram-${t}`);o?o.remove():i.removeNodeStyles()}function lw(t,r){return function(o){const{moveList:s}=r;t.api.getDiagramNodeLimits||P_(t,r),Object.entries(o).forEach(([l,c])=>{const f=s.api.getMoveNode({line:c.ids.line,move:c.ids.move});S_({limitType:l,isSettingNodeLimits:!0,moveList:s,moveNodeComponent:f,node:c})})}}function P_(t,r){var i;const o=r.moveList.api.getContext();o.state.nodeLimit=(i=t.api.getDiagramNodeLimits)!=null?i:{},r.methods.destroyDiagramActions=t.api.extendAPI(Z.Plugin.Name,{getDiagramNodeLimits(){var s;return(s=o?.state.nodeLimit)!=null?s:{}}})}function C_(t,r){return function({node:o,text:s,href:l}){var c,f;const p=r.moveList.dom.addComment(o,!1,{text:s,href:l});t.api.getOptions().test&&Ue(p,{[Ze.Element]:zn.CommentLink}),o.commands||(o.commands={}),t.api.updateNode(o.ids,{commands:Object.assign(o.commands,{href:`${l}`,text:`${s}`})}),o.ids.line===0?(c=r.moveList.api.getMoveNode(o.ids))==null||c.getElement().appendChild(p):(f=$a(o.ids.line,r.el))==null||f.append(p)}}function uw(t){return function(i){t.scrollContainer=i,t.moveList.dom.setScrollContainer(i)}}function cw(t,r){return{addDiagramActions:aw(t,r),addCommentLink:C_(t,r),setScrollContainer:uw(r),updateNodeLimits:lw(t,r)}}function T_({el:t,enableContextMenu:r=!0,nodeLimit:i,scrollContainer:o,translations:s=$s}){const l={[Zr.Placeholders.GameResult]:document.createComment("/Game Result"),[Zr.Placeholders.Moves]:document.createComment("/Moves")},c={contextMenu:void 0,el:t,enableContextMenu:r,methods:{destroy:Ta,destroyContextMenu:Ta,destroyDiagramActions:Ta,handleCommentClick:Ta,handleCopy:Ta,selectCurrentPosition:Ta},moveList:{},nodeLimit:i,queue:tu(!1),placeholders:l,scrollContainer:o||t,stateMachine:X1(),stateMachineListeners:[],translations:s};return{api:M=>cw(M,c),create:p,destroy:m,match:[{condition:Ht([x.APIEvents.AddMove,x.APIEvents.CreateContinuation,x.APIEvents.CreateGame,x.APIEvents.DeletePosition,x.APIEvents.LineCommentUpdated,x.APIEvents.Load,x.APIEvents.Move,x.APIEvents.MoveBackward,x.APIEvents.MoveForward,x.APIEvents.MoveVariation,x.APIEvents.NodeUpdated,x.APIEvents.PromoteVariation,x.APIEvents.ResetToMainLine,x.APIEvents.SelectLineEnd,x.APIEvents.SelectLineStart,x.APIEvents.SelectNode,x.APIEvents.Undo,x.APIEvents.UpdatePGNHeaders,x.InstanceEvents.Create,x.OptionsEvents.Update]),handler:y},{condition:Je(x.InstanceEvents.ModeChanged),handler:f}],name:Z.Plugin.Name};function f(M,R){m(),E(R),v(),y({data:null,type:x.InstanceEvents.ModeChanged},R)}function p(M){m(),E(M),v(),y({data:null,type:x.APIEvents.Load},M)}function m(){var M,R;c.queue.clear(),c.methods.destroy(),(R=(M=c.methods).destroyDiagramActions)==null||R.call(M),t.removeEventListener(Zr.Events.Copy,c.methods.handleCopy)}function v(){t.addEventListener(Zr.Events.Copy,c.methods.handleCopy)}function E(M){c.methods.destroy=J6(c),c.methods.destroyContextMenu=w_(c),c.methods.handleCommentClick=iw(c),c.methods.handleCopy=rw({context:M,el:t}),c.methods.selectCurrentPosition=xr(c)}function y(M,R){nc({conditionParams:{context:c,event:M},handlerContext:{context:c,coreContext:R,event:M}})}}var X4=`/* stylelint-disable */
.board-images {
  position: absolute;
  -ms-overflow-style: none;
  /* IE and Edge */
}
.board-images ::-webkit-scrollbar {
  /* Chrome */
  display: none;
}
.board-images:not(.board-images--palette) {
  z-index: 10;
}
.board-images:not(.board-images--palette) .board-images__window {
  border-radius: 1.25rem;
}
.board-images__title {
  white-space: nowrap;
  position: absolute;
  opacity: 0.8;
  font-size: small;
  pointer-events: none;
  left: 0;
  right: 0;
  width: 100%;
  top: 0;
  padding: 0.5rem 0;
  text-align: center;
  background-color: white;
  border-radius: 1.25rem;
  color: #312e2b;
}
.board-images__window {
  width: 100%;
  height: 100%;
  padding: 3%;
  background-color: white;
  box-shadow: 0 7px 9.5px 0.5px rgba(0, 0, 0, 0.2);
  overflow: scroll;
  scrollbar-width: none;
  /* hide scrollbar Firefox */
}
.board-images__window-body > div:not(:last-child) {
  border-bottom: 1px solid lightgray;
}
.board-images__hover-container {
  position: relative;
}
.board-images__effects-container {
  width: 100%;
}
.board-images__effect {
  border: 2px solid transparent;
  border-radius: 3px;
  cursor: pointer;
  padding: 3%;
  display: inline-flex;
}
.board-images__effect.selected {
  border: 2px solid #85a94e;
}
.board-images__break {
  display: inline-flex;
}
.board-images__image {
  width: 100%;
  cursor: pointer;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.board-images__hover {
  border: 2px solid #85a94e;
  border-radius: 3px;
  position: absolute;
  pointer-events: none;
}
.board-images__close-button {
  position: absolute;
  width: 15%;
  height: 0;
  padding-bottom: 15%;
  top: 0;
  pointer-events: none;
}
.board-images__close-button > div {
  pointer-events: auto;
  cursor: pointer;
  position: absolute;
  height: 100%;
  width: 100%;
  top: -50%;
}
.board-images.horizontal-overflow .board-images__close-button {
  right: 0;
}
.board-images.horizontal-overflow .board-images__close-button > div {
  right: -50%;
}
.board-images:not(.horizontal-overflow) .board-images__close-button {
  left: 0;
}
.board-images:not(.horizontal-overflow) .board-images__close-button > div {
  left: -50%;
}
.board-images--hidden {
  display: none;
}
.board .custom-item__frame {
  opacity: 1;
  overflow: hidden;
}
.board .custom-item__frame div {
  width: 115%;
  height: 115%;
  margin: -7.5%;
  filter: drop-shadow(0 0.5rem 0 rgba(0, 0, 0, 0.3));
  opacity: 1;
}
.board .custom-item__frame--animated div {
  width: 100%;
  height: 100%;
  margin: 0;
}
.board .custom-item__frame--disappear {
  transition: opacity 500ms;
  opacity: 0;
}`;function dw(t){return function(){t.boardImages.setFrames(),t.boardImages.clearMarkings(),t.boardImages.hideWindow(),t.boardImages.setWindow(),t.boardImages.setHotkeys()}}function fw(t){return function(){return[...t.values()]}}function M_(t){const{id:r,itemsPerRow:i,rows:o,itemsConfiguration:s=[]}=t;return[...Array(i*o)].map((c,f)=>{const p=s[f],{name:m,animatedImageURL:v=void 0,removalSoundBaseURL:E=void 0}=typeof p=="object"?p:{name:p??`${r}-${f}`},y=f%i,M=Math.floor(f/i);return{name:m,frameId:r,xIndex:y,yIndex:M,animatedImageURL:v,removalSoundBaseURL:E}})}function Vh(t){const r=new Image;return r.src=t,r}function O_({api:t,framesMap:r,shortcuts:i}){return function(l=[]){r.clear(),i.clear(),l.forEach(c=>{r.set(c.id,c),Vh(c.imageURL)}),l.map(M_).forEach(c=>{c.forEach(f=>{i.set(f),f.animatedImageURL&&Vh(f.animatedImageURL)})}),o()};function o(){const s=i.getAsArray().filter(f=>f.removalSoundBaseURL);if(!s.length)return;const l=s.reduce((f,p)=>{var m;const{name:v,removalSoundBaseURL:E=""}=p,y=(m=f[E])!=null?m:[];return y.push(v),f[E]=y,f},{}),c=Object.keys(l);if(c.length){const f=t.sounds.getSoundsInstance();c.forEach(p=>{f.loadExtra({baseURL:p,codes:l[p]})})}}}function qd(t){return function(){return t.getAsArray()}}function x_(t){return function(i){return t.find({name:i})}}function su({xIndex:t,yIndex:r,frameId:i}){return`frameId=${i}, xIndex=${t}, yIndex=${r}`}function Kd(t){if("xIndex"in t){const{xIndex:r,yIndex:i,frameId:o}=t;return`Marking shortcut: '${su({xIndex:r,yIndex:i,frameId:o})}' not found`}return`Marking shortcut: '${t.name}' not found`}function jh(t,r){return`Frame: '${t}' not found (frames available: ${r.join(", ")})`}function I_(t){return`Hotkey combination already in use: ${t.join(", ")})`}function R_({markings:t,framesMap:r,shortcuts:i}){const o=[],s=[];return t.forEach(l=>{const{model:c}=l;(Array.isArray(l.square)?l.square:[l.square]).forEach(p=>{if(typeof c=="string"){const E={data:{square:p,type:pe[c]},type:"effect",persistent:!0,node:!0};o.push({square:p,input:l,marking:E});return}const{customMarking:m,itemDisappears:v}=N_({model:c,shortcuts:i,framesMap:r,square:p});o.push({square:p,input:l,marking:m}),v&&s.push(p)})}),{resultMarkings:o,disappearingMarkingSquares:s}}function N_({model:t,shortcuts:r,framesMap:i,square:o}){var s;const l=r.find(t);if(!l)throw new Error(Kd(t));const c=i.get(l.frameId);if(!c)throw new Error(jh(l.frameId,[...i.keys()]));const{xIndex:f,yIndex:p,animatedImageURL:m,removalSoundBaseURL:v,name:E}=l,{itemsPerRow:y,rows:M,imageURL:R}=c,D=m?{imageAnimated:!0,imageURL:m,positionRatioX:0,positionRatioY:0,widthRatio:1,heightRatio:1}:{imageURL:R,positionRatioX:f/y,positionRatioY:p/M,widthRatio:1/y,heightRatio:1/M};return{customMarking:{data:{square:o,type:Ft.Image,removalTimeout:2e3,removalClass:m?void 0:"custom-item__frame--disappear",removalSound:v?E:void 0,frame:D},type:"customItem",persistent:!0},itemDisappears:(s=t.autoRemove)!=null?s:!1}}function Zd({api:t,markedSquares:r,framesMap:i,shortcuts:o}){return function(c){const f=Array.isArray(c)?c:[c],{resultMarkings:p,disappearingMarkingSquares:m}=R_({markings:f,framesMap:i,shortcuts:o});let v;p.length&&(v=s(p.map(E=>E.marking))),p.forEach((E,y)=>{var M;const{input:R,marking:D,square:W}=E,Te=(M=v?.[y])!=null?M:"";Te.length&&D.type!=="effect"&&r.set(W,{input:R,marking:ze(Ee({},D),{key:Te})})}),m.length&&setTimeout(()=>{t.boardImages.unmark(m)},1500)};function s(l){var c;return l.length?l.length>1?t.markings.addMany(l).map(p=>p??""):[(c=t.markings.addOne(l[0]))!=null?c:""]:[]}}function L_(t,r){return function(o){const s=Array.isArray(o)?o:[o],l=[];s.forEach(c=>{const f=r.get(c);f&&(l.push(f.marking.key),r.delete(c))}),l.length&&(l.length>1?t.markings.removeMany(l):t.markings.removeOne(l[0]))}}function hw(t){return function(){return[...t.values()].map(i=>i.input)}}function B_(t,r){return function(){const o=[...t.keys()];o.length&&r.boardImages.unmark(o)}}function pw(t){return function(i){return t.has(i)}}function mw(t){return function(){return t.boardImages.getFrames().length>0}}function D_(t){return function(){return t.window}}function F_({boardImagesDOM:t,framesMap:r,windowState:i,hotkeysMap:o,shortcuts:s,showCloseButton:l,api:c}){return function(M){var R,D;i.window=M,t.clearElement(),M&&(t.setSize(M.widthPercent/((R=M.boardContainerAspectRatio)!=null?R:1),M.heightPercent),t.setWindow({elements:f((D=M.elements)!=null?D:[]),elementClickedCallback:M.paletteMode?E:v,closeButtonCallback:l?c.boardImages.hideWindow:void 0,addTitleElement:!M.paletteMode,addHoverElement:M.paletteMode}))};function f(y){const M=new Map,R=D=>[...D,"left click"].join(" + ");return[...o.values()].forEach(D=>{const{keys:W,model:Te}=D;if(typeof Te=="string")M.set(Te,R(W));else{const dt=s.find(Te);if(dt){const{xIndex:Ie,yIndex:ut,frameId:Tt}=dt;M.set(su({xIndex:Ie,yIndex:ut,frameId:Tt}),R(W))}}}),y.map(D=>{if("frameId"in D)return p(D,M);{const{effects:W,id:Te,emptyItemsPerRow:dt,itemsPerRow:Ie}=D,ut=W.map(Tt=>{if(typeof Tt=="string"){const rr=M.get(Tt);return rr?{title:rr,type:Tt}:Tt}else return Tt});return{id:Te,emptyItemsPerRow:dt,itemsPerRow:Ie,effects:ut}}})}function p(y,M){const R=r.get(y.frameId);if(!R){const Tt=jh(y.frameId,[...r.keys()]);throw new Error(Tt)}const{frameId:D,emptyItemsPerRow:W,itemsAutoRemove:Te}=y,{itemsPerRow:dt,rows:Ie,imageURL:ut}=R;return{id:D,emptyItemsPerRow:W,itemsPerRow:dt,rows:Ie,imageURL:ut,itemsAutoRemove:Te,titles:m(R,M)}}function m(y,M){const{itemsPerRow:R,rows:D,id:W}=y;return[...Array(R*D)].map((Te,dt)=>{var Ie;const ut=dt%R,Tt=Math.floor(dt/R),rr=su({xIndex:ut,yIndex:Tt,frameId:W});return(Ie=M.get(rr))!=null?Ie:""})}function v(y){i.windowPosition&&("type"in y?c.boardImages.mark({square:i.windowPosition,model:y.type}):c.boardImages.mark({square:i.windowPosition,model:y}),c.boardImages.hideWindow())}function E(y){const M=c.boardImages.getSelectedMarking();if("type"in y)y.type===M?c.boardImages.selectMarking():c.boardImages.selectMarking(y.type);else{const R=M;y.frameId===R?.frameId&&y.yIndex===R?.yIndex&&y.xIndex===R?.xIndex?c.boardImages.selectMarking():c.boardImages.selectMarking(y)}}}function As(t,r){return Math.min(Math.max(t,r.min),r.max)}function $h({squareCoords:t,heightInPercent:r,widthInPercent:i,allowOverflow:o}){let s=!1,l=t.x,c=t.y;return o||(c+r>100&&(c=As(100-r,{min:0,max:100})),l+i>100&&(l=As(l-i-(t.centered?0:12.5),{min:0,max:100}),s=!0)),{top:c,left:l,overflows:s}}function rc({windowState:t,api:r,boardImagesDOM:i}){return function(s){var l;const{window:c,windowPosition:f}=t;if(!c)return;if(!s){i.showWindow();return}const{square:p,squareCoords:m,allowWindowOverflow:v=!1}=s;if(f){const R=r.markings.getAllWhere({types:[gr]}).find(D=>D.data.square===f);R&&r.markings.removeOne(R.key)}t.windowPosition=p,r.markings.addOne({data:{square:p,color:Rr.HighlightColors.Selected,opacity:.5},persistent:!0,type:gr});const{top:E,left:y,overflows:M}=$h({squareCoords:m,heightInPercent:c.heightPercent,widthInPercent:c.widthPercent/((l=c.boardContainerAspectRatio)!=null?l:1),allowOverflow:v});i.setPosition(E,y,M),i.showWindow()}}function Wh({state:t,api:r,boardImagesDOM:i}){return function(){const{window:s,windowPosition:l}=t.windowState;if(s){if(l){const c=r.markings.getAllWhere({types:[gr]}).find(f=>f.data.square===l);c&&r.markings.removeOne(c.key),t.windowState.windowPosition=void 0,i.setPosition()}t.selectedMarking&&r.boardImages.selectMarking(),i.hideWindow()}}}function qh(t,r){return function(o){const s=r.isVisible();if(!o){s?t.boardImages.hideWindow():t.boardImages.showWindow();return}const{square:l,squareCoords:c,allowWindowOverflow:f=!1}=o,p=t.boardImages.getWindowPosition();l===p?t.boardImages.hideWindow():t.boardImages.showWindow({square:l,squareCoords:c,allowWindowOverflow:f})}}function Kh(t){return function(){const{window:i,windowPosition:o}=t;if(!(!i||i.paletteMode))return o}}function Yd({imagesBaseURL:t,soundsBaseURL:r,paletteMode:i,boardContainerAspectRatio:o}){const s={heightPercent:i?100:50,widthPercent:i?100:40,boardContainerAspectRatio:o,paletteMode:i,elements:[{id:"effects",itemsPerRow:5,effects:[pe.Brilliant,pe.GreatFind,pe.BestMove,pe.Excellent,pe.Inaccuracy,pe.Mistake,pe.Miss,pe.Blunder,pe.Equal,pe.Correct,pe.Interesting,pe.Incorrect,pe.Book,pe.Warning,pe.WinnerWhite]},{frameId:"objective-markers"},{frameId:"emotive-markers",itemsAutoRemove:!0}]},l=`${t}/animated-images`,c=[{id:"objective-markers",imageURL:`${t}/objective-markers.png`,rows:1,itemsPerRow:5,itemsConfiguration:[{name:"star",animatedImageURL:`${l}/star.png`,removalSoundBaseURL:r},{name:"coin",animatedImageURL:`${l}/coin.png`,removalSoundBaseURL:r},{name:"target",animatedImageURL:`${l}/target.png`,removalSoundBaseURL:r},{name:"skull",animatedImageURL:`${l}/skull.png`,removalSoundBaseURL:r},{name:"bomb",animatedImageURL:`${l}/bomb.png`,removalSoundBaseURL:r}]},{id:"emotive-markers",imageURL:`${t}/emotive-markers.png`,rows:17,itemsPerRow:5,itemsConfiguration:["happy","sad","wut","wink","cry","cheeky","meh","bigsmile","cringe","mad","blush","shock","dead","sleepy","tongue","lol","crying","horror","love","nerd","glasses","mustache","kisses","mindblow","stareyes","sick","devil","ghost","scream","facepalm","thumbsup","thumbsdown","worship","wave","clap","knuckles","muscle","donkey","clock","fire","troll","donut","earth","panda","unicorn","shakehands","resign","gameover","bullet","blitz","skewer","fork","pin","fish","trophy","arena","puzzle","computer","scc","tt","tilt","960","doubleexclam","doublequestion","10","1","12","hype","gg","rip","present","gold","stockfish","lc0","komodo","danny","omg","robert","hikaru","anna","alexandra","andrea","levy","eric","aman"]}],f=[{keys:["B"],model:pe.Brilliant},{keys:["G"],model:pe.GreatFind},{keys:["B","E"],model:pe.BestMove},{keys:["G","D"],model:pe.Excellent},{keys:["K"],model:pe.Correct},{keys:["E","Q"],model:pe.Equal},{keys:["I"],model:pe.Interesting},{keys:["D"],model:pe.Inaccuracy},{keys:["M"],model:pe.Mistake},{keys:["L"],model:pe.Blunder},{keys:["W"],model:pe.Incorrect},{keys:["O"],model:pe.Book},{keys:["H"],model:pe.Warning},{keys:["shift","8"],model:pe.WinnerWhite},{keys:["S"],model:{name:"star"}},{keys:["C"],model:{name:"coin"}},{keys:["T"],model:{name:"target"}},{keys:["S","K"],model:{name:"skull"}},{keys:["F"],model:{name:"bomb"}},{keys:["0"],model:{name:"happy",autoRemove:!0}},{keys:["shift","S"],model:{name:"sad",autoRemove:!0}},{keys:["shift","W"],model:{name:"wut",autoRemove:!0}},{keys:["shift","0"],model:{name:"wink",autoRemove:!0}},{keys:["shift","R"],model:{name:"cry",autoRemove:!0}},{keys:["shift","Q"],model:{name:"cheeky",autoRemove:!0}},{keys:["shift","E"],model:{name:"meh",autoRemove:!0}},{keys:["shift","B"],model:{name:"bigsmile",autoRemove:!0}},{keys:["shift","C"],model:{name:"cringe",autoRemove:!0}},{keys:["shift","1"],model:{name:"mad",autoRemove:!0}},{keys:["shift","U"],model:{name:"blush",autoRemove:!0}},{keys:["shift","O"],model:{name:"shock",autoRemove:!0}},{keys:["shift","D"],model:{name:"dead",autoRemove:!0}},{keys:["S","E"],model:{name:"sleepy",autoRemove:!0}},{keys:["shift","P"],model:{name:"tongue",autoRemove:!0}},{keys:["shift","L"],model:{name:"lol",autoRemove:!0}},{keys:["shift","I"],model:{name:"crying",autoRemove:!0}},{keys:["shift","H"],model:{name:"horror",autoRemove:!0}},{keys:["shift","V"],model:{name:"love",autoRemove:!0}},{keys:["shift","N"],model:{name:"nerd",autoRemove:!0}},{keys:["shift","G"],model:{name:"glasses",autoRemove:!0}},{keys:["shift","T"],model:{name:"mustache",autoRemove:!0}},{keys:["shift","K"],model:{name:"kisses",autoRemove:!0}},{keys:["shift","M"],model:{name:"mindblow",autoRemove:!0}},{keys:["shift","Y"],model:{name:"stareyes",autoRemove:!0}},{keys:["S","I"],model:{name:"sick",autoRemove:!0}},{keys:["D","V"],model:{name:"devil",autoRemove:!0}},{keys:["G","H"],model:{name:"ghost",autoRemove:!0}},{keys:["shift","J"],model:{name:"scream",autoRemove:!0}},{keys:["shift","F"],model:{name:"facepalm",autoRemove:!0}},{keys:["arrowup"],model:{name:"thumbsup",autoRemove:!0}},{keys:["arrowdown"],model:{name:"thumbsdown",autoRemove:!0}},{keys:["I","P"],model:{name:"worship",autoRemove:!0}},{keys:["W","V"],model:{name:"wave",autoRemove:!0}},{keys:["L","P"],model:{name:"clap",autoRemove:!0}},{keys:["K","N"],model:{name:"knuckles",autoRemove:!0}},{keys:["M","U"],model:{name:"muscle",autoRemove:!0}},{keys:["D","K"],model:{name:"donkey",autoRemove:!0}},{keys:["L","K"],model:{name:"clock",autoRemove:!0}},{keys:["F","R"],model:{name:"fire",autoRemove:!0}},{keys:["T","R"],model:{name:"troll",autoRemove:!0}},{keys:["N","T"],model:{name:"donut",autoRemove:!0}},{keys:["E","T"],model:{name:"earth",autoRemove:!0}},{keys:["P","N"],model:{name:"panda",autoRemove:!0}},{keys:["U","I"],model:{name:"unicorn",autoRemove:!0}},{keys:["S","H"],model:{name:"shakehands",autoRemove:!0}},{keys:["R","E"],model:{name:"resign",autoRemove:!0}},{keys:["G","M"],model:{name:"gameover",autoRemove:!0}},{keys:["B","U"],model:{name:"bullet",autoRemove:!0}},{keys:["B","T"],model:{name:"blitz",autoRemove:!0}},{keys:["W","E"],model:{name:"skewer",autoRemove:!0}},{keys:["R","R"],model:{name:"fork",autoRemove:!0}},{keys:["I","N"],model:{name:"pin",autoRemove:!0}},{keys:["H","I"],model:{name:"fish",autoRemove:!0}},{keys:["H","Y"],model:{name:"trophy",autoRemove:!0}},{keys:["A","R"],model:{name:"arena",autoRemove:!0}},{keys:["U","L"],model:{name:"puzzle",autoRemove:!0}},{keys:["M","P"],model:{name:"computer",autoRemove:!0}},{keys:["S","C"],model:{name:"scc",autoRemove:!0}},{keys:["T","Y"],model:{name:"tt",autoRemove:!0}},{keys:["T","L"],model:{name:"tilt",autoRemove:!0}},{keys:["9"],model:{name:"960",autoRemove:!0}},{keys:["2"],model:{name:"doubleexclam",autoRemove:!0}},{keys:["3"],model:{name:"doublequestion",autoRemove:!0}},{keys:["J"],model:{name:"10",autoRemove:!0}},{keys:["Q"],model:{name:"1",autoRemove:!0}},{keys:["V"],model:{name:"12",autoRemove:!0}},{keys:["Y"],model:{name:"hype",autoRemove:!0}},{keys:["G","E"],model:{name:"gg",autoRemove:!0}},{keys:["R","I"],model:{name:"rip",autoRemove:!0}},{keys:["P"],model:{name:"present",autoRemove:!0}},{keys:["G","L"],model:{name:"gold",autoRemove:!0}},{keys:["S","T"],model:{name:"stockfish",autoRemove:!0}},{keys:["L","0"],model:{name:"lc0",autoRemove:!0}},{keys:["K","O"],model:{name:"komodo",autoRemove:!0}},{keys:["D","N"],model:{name:"danny",autoRemove:!0}},{keys:["O","M"],model:{name:"omg",autoRemove:!0}},{keys:["R","B"],model:{name:"robert",autoRemove:!0}},{keys:["H","K"],model:{name:"hikaru",autoRemove:!0}},{keys:["N","R"],model:{name:"anna",autoRemove:!0}},{keys:["D","R"],model:{name:"alexandra",autoRemove:!0}},{keys:["E","A"],model:{name:"andrea",autoRemove:!0}},{keys:["L","Y"],model:{name:"levy",autoRemove:!0}},{keys:["E","C"],model:{name:"eric",autoRemove:!0}},{keys:["M","N"],model:{name:"aman",autoRemove:!0}}];return{defaultFrames:c,defaultWindow:s,defaultHotkeys:i?[]:f}}function Zh({api:t,boardImagesDOM:r,imagesBaseURL:i,soundsBaseURL:o,paletteContainer:s}){return function(c={}){var f,p,m,v,E;const y=window.location.href.replace(window.location.search,""),M=!!s,{defaultFrames:R,defaultWindow:D,defaultHotkeys:W}=Yd({imagesBaseURL:(p=(f=c.imagesBaseURL)!=null?f:i)!=null?p:`${y}/static/test`,soundsBaseURL:(v=(m=c.soundsBaseURL)!=null?m:o)!=null?v:`${y}/static/test/sounds`,paletteMode:M,boardContainerAspectRatio:(E=c.boardContainerAspectRatio)!=null?E:1});t.boardImages.reset(),t.boardImages.setFrames(R),t.boardImages.setWindow(D),t.boardImages.setHotkeys(W),s&&(r.resetBoardElement(s),r.showWindow())}}function z_(t,r){return function(){t.boardImages.reset(),r.getElement().remove()}}function Yh(t){return[...t.map(r=>r.toLowerCase())].sort().join("-")}function Xd({hotkeysMap:t,windowState:r,api:i}){return function(s=[]){t.clear(),s.forEach(l=>{const c=Yh(l.keys);if(t.has(c))throw new Error(I_(l.keys));t.set(c,l)}),i.boardImages.setWindow(r.window)}}function vw(t){return function(){return[...t.values()]}}function gw(t){return function(i){return t.get(Yh(i))}}function _w(t,r){return function(o){t.selectedMarking=o,o||r.clearSelection()}}function bw(t){return function(){return t.selectedMarking}}function yw(t){return function(){return t}}const ww=`
<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19">
  <defs>
    <style>
      .cls-1 {
        opacity: 0.3;
      }

      .cls-2 {
        fill: #f8f8f8;
      }

      .cls-3 {
        fill: #8a8886;
      }
    </style>
  </defs>
  <g>
    <path class="cls-1" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
    <circle class="cls-2" cx="9" cy="9" r="8.5"/>
    <path class="cls-2" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
    <path class="cls-3" d="M13.37,12a.53.53,0,0,1,0,.78l-.59.61a.56.56,0,0,1-.4.17.54.54,0,0,1-.4-.17l-3-3-3,3a.58.58,0,0,1-.4.17.54.54,0,0,1-.39-.17l-.59-.59a.54.54,0,0,1-.17-.4.52.52,0,0,1,.17-.4l3-3-3-3a.52.52,0,0,1-.17-.4.54.54,0,0,1,.17-.4l.59-.59a.56.56,0,0,1,.8,0l3,3,3-3a.58.58,0,0,1,.4-.17.56.56,0,0,1,.4.17l.59.59a.54.54,0,0,1,.17.41.5.5,0,0,1-.17.39l-3,3,3,3Z"/>
  </g>
</svg>
`;function Ew({element:t,elements:r,addCloseButton:i,addTitleElement:o,addHoverElement:s}){const l=document.createElement("div");l.className="board-images__window";const c=document.createElement("div");c.className="board-images__window-body";const f=document.createElement("div");f.className="board-images__close-button";const p=document.createElement("div");p.innerHTML=ww,f.appendChild(p);const m=document.createElement("div");m.className="board-images__title";const v=r.map(E=>"effects"in E?ic(E):U_(E,s));return v.forEach(E=>{c.appendChild(E.container)}),l.appendChild(c),t.appendChild(l),o&&t.appendChild(m),i&&t.appendChild(f),{closeButton:i?f:void 0,titleElement:m,domElements:v,windowElement:l}}function ic(t){const{id:r,effects:i,itemsPerRow:o,emptyItemsPerRow:s=0}=t,l=o+s,c=document.createElement("div");c.className="board-images__effects-container";const f=i.map((p,m)=>{const v=typeof p=="string"?p:p.type,E=document.createElement("div");if(E.className="board-images__effect",typeof p=="object"&&p.title&&E.setAttribute("custom-title",p.title),E.style.width=`${100/l}%`,E.innerHTML=Gn({path:Cr[v],size:"100%"}),s>0&&m/o>0&&m%o===0){const y=document.createElement("div");y.className="board-images__break",y.style.width=`${100*(s/l)}%`,c.append(y)}return c.append(E),{container:E,type:v}});return{id:r,container:c,domEffects:f}}function U_(t,r){const{id:i,itemsPerRow:o,rows:s,imageURL:l,emptyItemsPerRow:c=0,itemsAutoRemove:f,titles:p}=t,m=o+c,v=document.createElement("div");v.className="board-images__hover-container",v.style.width=`${100*(o/m)}%`;const E=document.createElement("div");E.className="board-images__hover",E.style.width=`${100/o}%`,E.style.height=`${100/s}%`,E.style.display="none";const y=document.createElement("img");return y.className="board-images__image",y.src=l,y.draggable=!1,v.appendChild(y),r&&v.appendChild(E),{id:i,container:v,imageElement:y,hoverElement:E,itemsPerRow:o,rows:s,itemsAutoRemove:f,titles:p}}function H_({offsetX:t,offsetY:r,itemsPerRow:i,rows:o,width:s,height:l}){const c=s/i,f=l/o,p=As(t,{min:0,max:s}),m=As(r,{min:0,max:l});return{xIndex:As(Math.floor(p/c),{min:0,max:i-1}),yIndex:As(Math.floor(m/f),{min:0,max:o-1})}}const Xh=-1,oc=-1;let ac=Xh,Qd=oc;function Qh({clientX:t,clientY:r,pointer:i,type:o,touches:s}){return(o===di.Touchmove||o===di.Touchstart)&&s.length>0&&(ac=s[0].clientX,Qd=s[0].clientY),o===di.Touchend?{x:ac,y:Qd}:i?{x:i.x,y:i.y}:s&&s.length>0?{x:s[0].clientX,y:s[0].clientY}:{x:t??Xh,y:r??oc}}function Jh({itemsPerRow:t,rows:r,imageElement:i,event:o}){const{width:s,height:l}=i;let c,f;if("offsetX"in o)c=o.offsetX,f=o.offsetY;else{const{x:p,y:m}=Qh(o);c=p,f=m}return H_({offsetX:c,offsetY:f,itemsPerRow:t,rows:r,width:s,height:l})}function G_({windowElement:t,titleElement:r,domElements:i,elementClickedCallback:o,allowToggling:s,closeButton:l,closeButtonCallback:c}){var f;t.addEventListener("contextmenu",y=>(y.stopPropagation(),y.preventDefault(),!1)),(f=l?.firstChild)==null||f.addEventListener(No,y=>{y.stopPropagation(),c?.()});let p;const m=y=>(s&&p?.xIndex===y.xIndex&&p?.yIndex===y.yIndex&&p?.frameId===y.frameId?p=void 0:p=y,p),v=()=>{i.filter(y=>"hoverElement"in y).map(y=>y.hoverElement).forEach(y=>{y&&(y.style.display="none")}),i.filter(y=>"domEffects"in y).map(y=>y.domEffects).forEach(y=>{y.forEach(M=>M.container.classList.remove("selected"))})},E=()=>{r.style.display="none",r.innerHTML=""};i.forEach(y=>{"domEffects"in y?V_({domElement:y,titleElement:r,hideTitle:E,clearSelection:v,elementClickedCallback:o,allowToggling:s}):j_({domElement:y,titleElement:r,hideTitle:E,clearSelection:v,elementClickedCallback:o,toggleEmoji:m})})}function V_({domElement:t,titleElement:r,hideTitle:i,clearSelection:o,elementClickedCallback:s,allowToggling:l}){const{domEffects:c,id:f}=t;c.forEach((p,m)=>{const{container:v,type:E}=p,y=v.getAttribute("custom-title");v.addEventListener(No,M=>{if(M.stopPropagation(),l){const R=v.classList.contains("selected");o(),v.classList.toggle("selected",!R)}s({effectsId:f,index:m,type:E})}),y&&(v.addEventListener(qs,()=>{r.innerHTML=y,r.style.display=""}),v.addEventListener("pointerout",i))})}function j_({domElement:t,titleElement:r,hideTitle:i,clearSelection:o,elementClickedCallback:s,toggleEmoji:l}){const{container:c,imageElement:f,hoverElement:p,id:m,itemsPerRow:v,rows:E,itemsAutoRemove:y,titles:M=[]}=t;c.addEventListener(No,R=>{R.stopPropagation();const{xIndex:D,yIndex:W}=Jh({itemsPerRow:v,rows:E,imageElement:f,event:R});if(s({frameId:m,xIndex:D,yIndex:W,autoRemove:y}),p){const Te=l({xIndex:D,yIndex:W,frameId:m});o(),Te&&(p.style.display="block",p.style.left=`${D/v*100}%`,p.style.top=`${W/E*100}%`)}}),f.addEventListener(qs,R=>{var D;i();const{xIndex:W,yIndex:Te}=Jh({itemsPerRow:v,rows:E,imageElement:f,event:R});r.innerHTML=(D=M[W+Te*v])!=null?D:"",r.style.display=""}),f.addEventListener("pointerout",i)}function Aw(t){return function(i){const{elements:o,elementClickedCallback:s,closeButtonCallback:l,addTitleElement:c=!0,addHoverElement:f=!1}=i,{closeButton:p,titleElement:m,domElements:v,windowElement:E}=Ew({element:t,elements:o,addCloseButton:!!l,addTitleElement:c,addHoverElement:f});G_({windowElement:E,titleElement:m,domElements:v,elementClickedCallback:s,allowToggling:f,closeButton:p,closeButtonCallback:l})}}function ep(t){return function(){t.classList.remove("board-images--hidden")}}function Sw(t){return function(){t.classList.add("board-images--hidden")}}function tp(t){return function(i,o){t.style.width=i?`${i}%`:"",t.style.height=o?`${o}%`:""}}function $_(t){const r="horizontal-overflow";return function(o,s,l){t.classList.contains(r)&&t.classList.remove(r),t.style.top=o?`${o}%`:"",t.style.left=s?`${s}%`:"",l&&t.classList.add(r)}}function W_(t){return function(){t.innerHTML=""}}function q_(t){return function(i){t.remove(),i.appendChild(t)}}function np(t){return function(){return!t.classList.contains("board-images--hidden")}}function K_(t){return function(){t.querySelectorAll(".board-images__hover").forEach(i=>{i.style.display="none"}),t.querySelectorAll(".board-images__effect.selected").forEach(i=>{i.classList.remove("selected")})}}function Z_(t){const r=i();return{showWindow:ep(r),hideWindow:Sw(r),setWindow:Aw(r),setSize:tp(r),setPosition:$_(r),getElement:yw(r),clearElement:W_(r),resetBoardElement:q_(r),isVisible:np(r),clearSelection:K_(r)};function i(){const o=document.createElement("div");return o.className="board-images",o.classList.add("board-images--hidden"),t&&o.classList.add("board-images--palette"),o.addEventListener("pointerdown",s=>{s.stopPropagation()}),o.addEventListener("wheel",s=>{s.stopPropagation()}),o}}function Y_({items:t=[],keys:r=[],createKey:i}={}){if(!i&&!r.length)throw new Error("Need to specify at least one key or createKey function");const o=!r.includes("id")&&i?["id",...r]:r,s=o.map(()=>new Map);t.forEach(m=>{c(m)});function l(m){let v;const E=s.find(y=>{let M=!1;const R=o.find(W=>{const Te=m[W];return Te&&(M=!0),Te&&y.has(Te)});if(R)return v=m[R],!0;const D=i?.(m);if(!M&&!D)throw new Error("Could not find a key or create a key with passed in parameter");return D&&y.has(D)?(v=D,!0):!1});return v&&E?.get(v)}function c(m){o.forEach((v,E)=>{var y;const M=(y=m[v])!=null?y:i?.(m);M&&s[E].set(M,m)})}function f(){var m;return[...(m=s[0])==null?void 0:m.values()]}function p(){s.forEach(m=>m.clear())}return{find:l,set:c,getAsArray:f,clear:p}}function X_({context:t,imagesBaseURL:r,soundsBaseURL:i,showCloseButton:o,paletteContainer:s}){const l=t.api,c=new Map,f=new Map,p=new Map,m=Y_({keys:["id","name"],createKey:su}),v={windowPosition:void 0,window:void 0},E=Z_(!!s),y={framesMap:c,markedSquares:f,hotkeysMap:p,shortcuts:m,windowState:v};return M(E);function M(R){const D=gw(p),W=vw(p),Te=fw(c),dt=O_({api:l,framesMap:c,shortcuts:m}),Ie=qd(m),ut=x_(m),Tt=L_(l,f),rr=Zd({api:l,markedSquares:f,framesMap:c,shortcuts:m}),Fn=pw(f),pn=hw(f),Dt=B_(f,l),Qt=D_(v),Vn=Wh({state:y,api:l,boardImagesDOM:R}),ar=mw(l),Br=F_({boardImagesDOM:R,framesMap:c,windowState:v,hotkeysMap:p,shortcuts:m,showCloseButton:o,api:l}),dr=Xd({windowState:v,hotkeysMap:p,api:l}),Gr=rc({windowState:v,api:l,boardImagesDOM:R}),lr=Kh(v),ki=qh(l,R),io=dw(l),Oi=Zh({api:l,boardImagesDOM:E,imagesBaseURL:r,soundsBaseURL:i,paletteContainer:s}),br=z_(l,R),Ur=_w(y,R),ri=bw(y);return{initDefault:Oi,reset:io,destroy:br,isInitialized:ar,getFrames:Te,setFrames:dt,getAllMarkingShortcuts:Ie,getMarkingShortcut:ut,setHotkeys:dr,getHotkeys:W,getHotkey:D,mark:rr,unmark:Tt,isMarked:Fn,getMarkings:pn,clearMarkings:Dt,selectMarking:Ur,getSelectedMarking:ri,getWindow:Qt,setWindow:Br,showWindow:Gr,hideWindow:Vn,toggleWindow:ki,getWindowPosition:lr,dom:R}}}function ma(t){return function(i,o){return t in i.data&&typeof i.data[t]<"u"&&i.data[t]!==null}}function Jd(t){return function(i,o){return o.api.keys.getPressedKeys().includes(t)}}function rp({context:t,squares:r=[],whereOptions:i}){const o=t.api,s=Array.isArray(r)?r:[r],l=i?o.markings.getAllWhere(i):o.markings.getAll();return s.length>0?l.filter(c=>s.includes(c.data.square)):l}function lu({getSquares:t,whereOptions:r}){return function(o,s){return rp({context:s,squares:t?.(o,s),whereOptions:r}).length>0}}function uu({getSquares:t,whereOptions:r}){return function(o,s){return rp({context:s,squares:t?.(o,s),whereOptions:r}).length===0}}function ef({getSquares:t}){return function(i,o){const s=t(i,o);if(!s)return!1;const l=Array.isArray(s)?s:[s],c=o.api;return!!l.find(f=>c.boardImages.isMarked(f))}}function el(t,r){return r.api.keys.getPressedKeys().length>0}function tl(t,r){return!el(t,r)}function sc(t,r){const i=r.api,o=i.keys.getPressedKeys();return!!i.boardImages.getHotkey(o)}function Q_(t,r){return!!r.api.boardImages.getWindowPosition()}function kw(t,r){return!r.api.boardImages.isInitialized()}function Bo(t,r){return r.api.boardImages.isInitialized()}function cu(t,r){return!!r.api.boardImages.getSelectedMarking()}function J_({getValue:t,ignoreFirstValue:r=!1}){let i,o=!1;return function(l,c){const f=t(l,c);if(r&&!o)return o=!0,i=f,!1;const p=i!==f;return i=f,p}}function Oa(t,r){const{queue:i}=r,o=r.api;return i.add(o.boardImages.hideWindow),!1}function ip({square:t,el:r,renderer:i,boardFlipped:o=!1}){if(!i)return{x:0,y:0};const s=i.getCoordsFromSquare(t,o);return i.name===w.Types.WebGL2D?{x:s.x/r.clientWidth*100+6.25,y:s.y/r.clientHeight*100-6.25}:i.name===w.Types.WebGL3D?{x:s.x/r.clientWidth*100,y:s.y/r.clientHeight*100,centered:!0}:{x:(s.x+100)/800*100,y:s.y/800*100}}function tf({getContainer:t}){return function(i,o){const s=t(i,o);if(!s)return;const{queue:l,renderer:c,options:f}=o,p=o.api,m=p.boardImages.getWindowPosition();if(!m)return;const v=ip({square:m,el:s,renderer:c,boardFlipped:f.flipped});l.add(p.boardImages.showWindow,{square:m,squareCoords:v})}}function e3({getContainer:t}){return function(i,o){const s=t(i,o);if(!s)return!0;const{renderer:l}=o,c=o.api;return c.boardImages.initDefault({boardContainerAspectRatio:l?.getBoardContainerAspectRatio()}),c.boardImages.dom.resetBoardElement(s),!0}}function nf({getSquares:t}){return function(i,o){const s=t?.(i,o),{queue:l}=o,c=o.api;return s?l.add(c.boardImages.unmark,s):l.add(c.boardImages.clearMarkings),!1}}function t3({getSquare:t}){return function(i,o){const s=t(i,o);if(!s)return!0;const{queue:l}=o,c=o.api,f=c.keys.getPressedKeys(),p=c.boardImages.getHotkey(f);return p?(l.add(c.boardImages.mark,{square:s,model:p.model}),!1):!0}}function n3({getSquares:t,whereOptions:r}){return function(o,s){const l=t?.(o,s),{queue:c}=s,f=s.api,p=r?f.markings.getAllWhere(r):f.markings.getAll(),m=Array.isArray(l)?l:[l],E=(l?p.filter(y=>m.includes(y.data.square)):p).map(y=>y.key);return E.length?(E.length===1?c.add(f.markings.removeOne,E[0]):E.length>1&&c.add(f.markings.removeMany,E),!1):!0}}function Pw({getContainer:t,getSquare:r}){return function(o,s){const l=t(o,s),c=r(o,s);if(!l||!c)return!0;const{queue:f,renderer:p,options:m}=s,v=s.api,E=ip({square:c,el:l,renderer:p,boardFlipped:m.flipped});return f.add(v.boardImages.toggleWindow,{square:c,squareCoords:E}),!1}}function Cw({getSquares:t,getMarking:r}){return function(o,s){const l=t(o,s),c=r(o,s);if(!l||!c)return!0;const{queue:f}=s,p=s.api,m={model:c,square:l};return f.add(p.boardImages.mark,m),!1}}function Tw(t,r){const{queue:i}=r,o=r.api;return i.add(o.boardImages.selectMarking),!1}function Mw(t,r){return t.data}function to(...t){return function(i,o){const l=t.map(c=>c.includes(".")?c.split(".").reduce((f,p)=>f?.[p],i.data):c.length>0?i.data[c]:i.data).filter(c=>typeof c<"u");if(l.length!==0)return l.length>1?l:l[0]}}function du(t){return function(i,o){return t??o.el}}function Ow(){return function(r,i){return i.api.boardImages.getSelectedMarking()}}const Wi="square",xa="move",op="move.to",rf="move.rookTo",r3="flipped";function i3(t){return[{condition:gi(Ht(Io),ma(xa),Bo,ef({getSquares:to(op,rf)})),handler:nf({getSquares:to(op,rf)})},{condition:gi(Je(x.InstanceEvents.RendererSet),J_({getValue:Mw,ignoreFirstValue:!0}),Bo),handler:e3({getContainer:du(t)})}]}function o3(t){return[{condition:gi(Je(x.OptionsEvents.Update),ma(r3),Bo,Q_),handler:tf({getContainer:du(t)})}]}function a3({keyToOpenWindow:t,useLeftClick:r,container:i}){const o=r?x.UserEvents.PointerdownLeft:x.UserEvents.PointerdownRight;return[{condition:gi(Je(o),el,ma(Wi),kw),handler:e3({getContainer:du(i)})},{condition:gi(Je(o),el,ma(Wi),Bo,uu({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn,Cn]}}),Jd(t)),handler:Pw({getContainer:du(i),getSquare:to(Wi)})},{condition:gi(Ht([x.UserEvents.PointerdownLeft,x.UserEvents.PointerdownRight]),tl,Bo,Q_),handler:Oa}]}function s3({keyToOpenWindow:t,useLeftClick:r}){const i=r?x.UserEvents.PointerdownLeft:x.UserEvents.PointerdownRight;return[{condition:gi(Je(i),el,ma(Wi),Bo,uu({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn,Cn]}}),sc),handler:t3({getSquare:to(Wi)})},{condition:gi(Je(i),el,ma(Wi),Bo,ef({getSquares:to(Wi)}),Yu(Jd(t),sc)),handler:nf({getSquares:to(Wi)})},{condition:gi(Je(i),el,ma(Wi),Bo,lu({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn]}}),Yu(Jd(t),sc)),handler:n3({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn]}})}]}function l3(t){const r=t?x.UserEvents.PointerdownLeft:x.UserEvents.PointerdownRight,i=t?x.UserEvents.PointerdownRight:x.UserEvents.PointerdownLeft;return[{condition:gi(Je(i),Bo,cu),handler:Tw},{condition:gi(Je(r),ma(Wi),tl,Bo,uu({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn,Cn]}}),cu),handler:Cw({getSquares:to(Wi),getMarking:Ow()})},{condition:gi(Je(r),ma(Wi),tl,Bo,ef({getSquares:to(Wi)}),cu),handler:nf({getSquares:to(Wi)})},{condition:gi(Je(r),ma(Wi),tl,Bo,lu({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn]}}),cu),handler:n3({getSquares:to(Wi),whereOptions:{persistent:!0,types:[Sn]}})}]}function u3({keyToOpenWindow:t=Ve.DefaultKeyToOpenWindow,imagesBaseURL:r,soundsBaseURL:i,useLeftClick:o=!0,paletteContainer:s}={}){const{commonBeforeHandlers:l,windowBeforeHandlers:c,commonHandlers:f,windowHandlers:p,paletteModeBeforeHandlers:m}=M(),v=!!s;return{api:R=>X_({context:R,imagesBaseURL:r,soundsBaseURL:i,showCloseButton:!v,paletteContainer:s}),beforeState:[...v?m:c,...l],match:[...v?[]:p,...f],name:Ve.Plugin.Name,requires:["keys","custom-items","effects","sounds"],create:E,destroy:y};function E(R){R.api.boardImages.dom.resetBoardElement(s??R.el)}function y(R){R.api.boardImages.destroy()}function M(){return{commonBeforeHandlers:s3({keyToOpenWindow:t,useLeftClick:o}),windowBeforeHandlers:a3({keyToOpenWindow:t,useLeftClick:o,container:s}),commonHandlers:i3(s),windowHandlers:o3(s),paletteModeBeforeHandlers:l3(o)}}}function c3(){return[L(),q(),O0(),qu()]}function nl({exclude:t}={}){const r={[Ci.Plugin.Name]:L0,[Ae.Plugin.Name]:Vt,[Ar.Plugin.Name]:Qi,[fi.Plugin.Name]:Ji,[Et.Plugin.Name]:$e,[pr.Plugin.Name]:nr,[oi.Plugin.Name]:ra,[kt.Plugin.Name]:Hs,[Xe.Plugin.Name]:Gs,[yr.Plugin.Name]:zr,[mt.Plugin.Name]:O,[De.Plugin.Name]:M0,[ue.Plugin.Name]:gd};t&&t.forEach(s=>{delete r[s]});const i=[Fv,Dv,Bv],o=[...c3()];return Object.keys(r).forEach(s=>s===kt.Plugin.Name?o.push(r[s](i)):o.push(r[s]())),o}function ap(){return[...nl(),go(),ji(),ce(),Vr()]}function d3(){return[...ap(),an(),Mt(),_d()]}var xw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",createAnalysisOverlayPlugin:an,createArrowKeysPlugin:Qi,createArrowsPlugin:Ji,createAssetsPlugin:L,createBlinkingHighlightPlugin:$e,createBoardDisabledPlugin:O,createBoardSizePlugin:q,createCheatDetectionPlugin:Vr,createCoordinatesPlugin:nr,createCustomItemsPlugin:ce,createDebugPlugin:Mt,createEffectsPlugin:ji,createFadeSetupPlugin:go,createFlipBoardPlugin:ra,createHighlightsPlugin:Hs,createHoverSquarePlugin:Gs,createMoveHintsPlugin:M0,createPiecesPlugin:O0,createRendererErrorCatcherPlugin:qu,createSoundsPlugin:gd,createTimeControlPlugin:R0,createKeysPlugin:L0,createWebGLContextLostPlugin:B0,createRecorderPlugin:_d,createMinimalPlugins:c3,createStandardPlugins:nl,createPremiumPlugins:ap,createKitchenSinkPlugins:d3,createEcoPlugin:j0,createPregamePlugin:Pd,createPremovesPlugin:ih,createReportingPlugin:f1,createMoveListPlugin:x1,createVerticalMoveListPlugin:wh,createHorizontalMoveListPlugin:T_,createBoardImagesPlugin:u3});const sp=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*((\d|\.)+))?\)$/;function f3(t){if(t.search("rgb")===-1)return t;const r=t.match(sp);return`#${of(r[1])}${of(r[2])}${of(r[3])}`}function h3(t){return t.search("rgba")===-1?1:parseFloat(t.match(sp)[4])}function of(t){return`0${parseInt(t,10).toString(16)}`.slice(-2)}function lp(t,r){return window.getComputedStyle(t,r).backgroundImage}function p3(t,r){if(!r.themeAssets){const[o,s]=t.split("/").pop().split(".")[0];return af(o,s)}let i="?";return Object.keys(r.themeAssets.pieces.assets).forEach(o=>{var s;t===`url("${(s=r.themeAssets)==null?void 0:s.pieces.assets[o]}")`&&(i=af(o[0],o[1]))}),i==="?"&&Object.keys(zo).forEach(o=>{t===`url("${zo[o]}")`&&(i=af(o[0],o[1]))}),i}function af(t,r){return t==="w"?r.toUpperCase():r}function m3(t){return{file:t.toLowerCase().charCodeAt(0)-96,rank:Number(t.charAt(1))}}function up(t){if(!(!t||!t.file||!t.rank||t.file>8||t.rank>8))return`${String.fromCharCode(96+t.file)}${t.rank.toString()}`}function cp(t,r){return function(o){const s=Object.entries(o).map(([l,c])=>{var f;if(!c||!((f=t.overridableMethods)!=null&&f.includes(l)))return;const p=t[l];return t[l]=c(t,r),function(){t[l]=p}});return function(){s.map(c=>c?.())}}}function dp({base:t,initialOptions:r}){return function(o){const s=Object.keys(r).reduce((m,v)=>(m[v]=r[v].default,m),{}),l=t({api:o,options:s}),c=cp(l,o);return Object.assign(l,{extendMode:c,getOptions:f,setOption:p});function f(){return s}function p(m,v){var E;if(!((E=r[m])!=null&&E.editable)){fp(m);return}s[m]=v,o.emit(x.OptionsEvents.UpdateMode,vi(x.OptionsEvents.UpdateMode,{[m]:v}))}}}function Ss(t,r){return function(o={}){const s=Object.keys(o).reduce((l,c)=>{var f;return(f=r[c])!=null&&f.editable?Object.assign(l,{[c]:{default:o[c],editable:!0}}):fp(c),l},r);return dp({base:t,initialOptions:s})}}function fp(t){console.warn(`${t} is not an editable option in this mode.`)}function hp({api:t,followAlternateLines:r=!1,mv:i}){const{game:o,mutateGame:s}=t.getContext(),l=s(function(){o.moveForward(r,i)});return l?.plyDiff?(o.moveBackward(),!0):!1}function Iw({canAddMovesToMainLine:t,isAtEndOfLine:r,node:i}){var o;const s=aa(i)?(o=i?.ids)==null?void 0:o.line:i?.id;return!t&&r&&s===0}function rl(t,r){let i;if(typeof t=="string")i=P.R.sanToObj(t,r);else if("san"in t)if("to"in t)i=t;else{const o=t,{san:s}=o,l=Me(o,["san"]),c=P.R.sanToObj(s,r);i=c!==null?Ee(Ee({},c),l):null}else if("tcn"in t){const o=t,{tcn:s}=o,l=Me(o,["tcn"]);i=Ee(Ee({},P.R.decodeTCN(s)[0]),l)}else i=t;return i?Ee({animate:!0},i):null}function v3(t){const{api:r}=t,i=r.move;return function(s){const l=rl(s,r.getFEN());if(!l)return i(s);const c=r.isAtEndOfLine(),{canAddMovesToMainLine:f}=r.getMode().getOptions();if(hp({api:r,followAlternateLines:!0,mv:l}))return i(s);if(Iw({canAddMovesToMainLine:f,isAtEndOfLine:c,node:r.getRelativeNode()}))return p();return i(s);function p(){return r.createContinuation()?i(s):null}}}var pp;(function(t){(function(r){r.Name="analysis"})(t.Plugin||(t.Plugin={}))})(pp||(pp={}));function g3(){return{apiOverrides:{move:v3},name:pp.Plugin.Name}}var sa;(function(t){(function(r){r.Analysis="analysis",r.CaptureTheStar="capture-the-star",r.Explorer="exploring",r.GuessTheMove="guess-the-move",r.PassiveObserving="passive-observing",r.Observing="observing",r.Playing="playing",r.Setup="setup"})(t.Types||(t.Types={}))})(sa||(sa={}));function Rw({api:t}){return{isAllowedToMove:r,name:sa.Types.Analysis,plugins:[g3(),an()]};function r(){var i;const{canAddMovesToMainLine:o}=t.getMode().getOptions();return o||!!t.getSelectedNode()||((i=t.getLine(0))==null?void 0:i.length)}}const _3=Ss(Rw,{canAddMovesToMainLine:{default:!0,editable:!0},canInteractWithPieces:{default:!0,editable:!0},canMoveWhenGameIsOver:{default:!0,editable:!1},canModifyExistingMovesOnMainLine:{default:!0,editable:!0}});var sf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:_3}),lc;(function(t){(function(r){r.Completed="CTSCompleted"})(t.Events||(t.Events={})),function(r){r.Name="captureTheStar"}(t.Plugin||(t.Plugin={}))})(lc||(lc={}));function mp(t){return function(i){t.config.set("items",i)}}function Nw(t){return function(){var i;return((i=t.getHistorySANs())==null?void 0:i.length)-1||0}}function ks(t,r){return function(){const o=t.captureTheStar;return{completed:r.status.get("completed")||!1,completedMoveCount:r.status.get("completedMoveCount"),itemsRemaining:o.getNumItemsRemaining(),moveCount:o.getCurrentMoveCount()}}}function lf(t){return function r(i={}){const{api:o,game:s}=t,l=o.markings,{previousNode:c}=i;let f=[];if(c){const p=s.ids();s.moveBackward(),f=r(),s.selectPosition(p.move,p.line)}else f=l.getAllWhere({types:[Cn]});return f}}function b3(t){return function(){return t.captureTheStar.getItems().map(o=>o.data.square)}}const uf={noFromSquareOnMoveObj:'Move object has no "from" square.',cannotLoadWithoutItems:"Cannot load without any items.",cannotLoadWithoutPiece:"Cannot load without a piece.",configurationMissingForItem:"Configuration missing for custom item"};function Lw(t,r){const{file:i,rank:o}=he(t),{file:s,rank:l}=he(r),c="abcdefgh",f="12345678";if(i===s)return cf(o,l).map(v=>`${c.charAt(i-1)}${f.charAt(v-1)}`);if(o===l)return cf(i,s).map(v=>`${c.charAt(v-1)}${f.charAt(o-1)}`);if(Math.abs(s-i)!==Math.abs(l-o))throw new Error("Squares are not on same file, rank, or diagonal");const p=cf(i,s),m=cf(o,l);return p.reduce((v,E,y)=>(v.push(`${c.charAt(E-1)}${f.charAt(m[y]-1)}`),v),[])}function cf(t,r){const[i,o]=[t,r].sort();return Array(o-i-1).fill(void 0).map((s,l)=>i+l+1)}function Bw(t){return function(i){const o=t.captureTheStar,{from:s,to:l}=i;if(!s)throw new Error(uf.noFromSquareOnMoveObj);let c=[];return i.piece.toLowerCase()==="n"?c=[l]:c=[l,...Lw(s,l)],o.getItems({previousNode:!0}).filter(f=>!c.includes(f.data.square))}}function uc(t){return function(){const i=t.captureTheStar;return Object.keys(i.getItems()).length}}function cc(t){return function(){return!!t.status.get("completed")}}function y3(t,r,i){const o=t?.[i];if(!Ft[i]&&!o)return null;const s={data:{square:r,type:o?Ft.Image:Ft.Star},node:!0,persistent:!0,type:Cn,key:`cts-${r}`};return o&&(s.data.image={url:o}),s}function Dw(t,r){return function(o){const{items:s,piece:l}=o,{api:c,game:f,respond:p}=t,m=c.captureTheStar,v=c.markings;if(!Object.keys(s).length)throw new Error(uf.cannotLoadWithoutItems);if(!l)throw new Error(uf.cannotLoadWithoutPiece);return c.clearMarkings(),f.load("8/8/8/8/8/8/8/8"),f.put(l,l.square),Object.entries(s).forEach(([E,y])=>{const M=y3(r.config.get("items"),E,y);if(!M)throw new Error(uf.configurationMissingForItem);v.addOne(M)}),c.setPlayingAs(l.color),c.setTurn(l.color),m.resetPuzzleStatus(),p(x.APIEvents.Load,{pieces:c.getPieces()})}}function w3(t){return function(){t.status.set("completed",!1),t.status.delete("completedMoveCount")}}function E3(t,r){return function(){const o=t.captureTheStar;o.getNumItemsRemaining()===0&&!o.isCompleted()&&(r.status.set("completed",!0),r.status.set("completedMoveCount",o.getCurrentMoveCount()),o.emit(lc.Events.Completed,o.getData()))}}function A3(t){const{api:r}=t,i=(0,P.H)(),o=l();o.config.set("items",{});const s=w3(o);return s(),ze(Ee({configureItems:mp(o),getCurrentMoveCount:Nw(r),getData:ks(r,o),getItems:lf(t),getItemSquares:b3(r),getNextItems:Bw(r),getNumItemsRemaining:uc(r)},i),{isCompleted:cc(o),load:Dw(t,o),resetPuzzleStatus:s,updatePuzzleStatus:E3(r,o)});function l(){return{config:new Map,status:new Map}}}function fu(t){return t===Ct.ColorsAsNumbers.Black?Ct.ColorsAsNumbers.White:Ct.ColorsAsNumbers.Black}function S3(t,r){const i=fu(r.color)===Ct.ColorsAsNumbers.Black?"p":"P",o=r.color===Ct.ColorsAsNumbers.Black?r.type:r.type.toUpperCase(),s=new Array(8).fill(void 0).map(()=>new Array(8).fill("."));return s[8-r.rank][r.file-1]=o,t.reduce((l,c)=>{const{file:f,rank:p}=he(c);return!f||!p||(l[8-p][f-1]=i),l},s).map(l=>l.join("").replace(/(\.+)/g,c=>c.length.toString())).join("/")}function k3(t,r){return[...new Map(t.map(i=>[i[r],i])).values()]}function il(t){const{api:r,game:i}=t,o=r.getLegalMoves;return function(){const l=r.captureTheStar;if(!r.getPlayingAs())return[];const f=o(),p=i.getPieces(!1)[0];if(!p||p.type!=="p")return f;const m=S3(l.getItemSquares(),p),v=P.R.getLegalMoves(m);return k3([...f,...v],"san")}}function P3(t){const{api:r}=t,i=r.getMove;return function(s){var l;const c=i(s);return c||((l=r.getLegalMoves().find(f=>f.to===s.to))!=null?l:null)}}function df(t){const{api:r,game:i}=t,o=r.move;return function(l){if(!r.isAtEndOfLine())return r.selectLineEnd();const c=rl(l,r.getFEN());return!c||!c.userGenerated||!("flags"in c)||vd(c)&&c.piece==="p"&&i.put({type:"p",color:fu(c.color)},c.to),o(l)}}function ff(t){return function(){var i;const{respond:o,game:s,mutateGame:l}=t,c=l(function(){s.moveBackward()});return!c||c.lineDiff===0&&c.plyDiff===0?o(x.APIEvents.MoveBackward,null):((i=c.move)!=null&&i.captured&&(c.move.captured=void 0),o(x.APIEvents.MoveBackward,c))}}function C3(t){return{api:A3,apiOverrides:{getLegalMoves:il,getMove:P3,move:df,moveBackward:ff},create:r,match:[{condition:Ht(Io),handler:o},{condition:Je(x.APIEvents.Move),handler:i}],name:lc.Plugin.Name};function r(s){const{api:l}=s,c=l.captureTheStar;t&&c.configureItems(t.items)}function i(s,l){const{api:c,queue:f}=l,p=c.captureTheStar,m=c.markings,v=c.getContext().game,E=p.getNextItems(s.data.move);f.add(function(){f.add(function(){m.addMany(E),v.turn(c.getPlayingAs()),p.updatePuzzleStatus()})})}function o(s,l){const{api:c,queue:f}=l,p=c.getPlayingAs();p&&f.add(c.setTurn,p)}}function hu(t){return function(){t.isAtEndOfLine()||t.selectLineEnd()}}function T3({api:t}){return{isAllowedToMove:r,handleIllegalMove:hu(t),name:sa.Types.CaptureTheStar,plugins:[C3()],usePlayingAs:!0};function r(){return!0}}const M3=Ss(T3,{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var hf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:M3});function pf(t){return aa(t)?{line:t.ids.line,move:t.ids.move+1}:{line:0,move:0}}function O3(t){const{api:r}=t,i=r.move;return function(s){if(r.isAtEndOfLine())return i(s);const{line:l,move:c}=pf(r.getRelativeNode());return r.deletePosition(c,l),i(s)}}var mf;(function(t){(function(r){r.Name="exploring"})(t.Plugin||(t.Plugin={}))})(mf||(mf={}));function vp(){return{apiOverrides:{move:O3},name:mf.Plugin.Name}}function x3(){return{isAllowedToMove:t,name:sa.Types.Explorer,plugins:[vp()]};function t(){return!0}}const gp=Ss(x3,{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!0,editable:!1}});var _p=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:gp}),va;(function(t){(function(r){r.Name="guessTheMove"})(t.Plugin||(t.Plugin={})),function(r){r.CancelGuess="CancelGuess",r.GuessConfirmed="GuessConfirmed",r.GuessMade="GuessMade"}(t.APIEvents||(t.APIEvents={})),function(r){r.Correct="#96bc4b",r.Incorrect="#c93430"}(t.Colors||(t.Colors={}))})(va||(va={}));function I3(t){let r=[];return{cancel:i,confirm:o,get:s,getActiveGuess:l,guess:f,reset:p};function i(){const{api:m,respond:v}=t,E=l();E&&(r.pop(),v(x.APIEvents.SetBoardPosition,{pieces:m.getPieces()}),v(va.APIEvents.CancelGuess,E))}function o(m){const{respond:v}=t,E=c();E&&(Object.assign(E,{confirmed:!0,correct:m}),v(va.APIEvents.GuessConfirmed,E))}function s(){return r}function l(){const m=c();return m?.confirmed?void 0:m}function c(){return r[r.length-1]}function f(m){var v,E;const{api:y,respond:M}=t,R=ze(Ee({},m),{confirmed:!1,correct:!1,ids:(E=(v=y.getSelectedNode())==null?void 0:v.ids)!=null?E:{line:0,move:0}});r.push(R),M(va.APIEvents.GuessMade,R)}function p(){r=[]}}function vf(t){const{api:r,game:i,respond:o}=t,s=r.move;return function(p){const m=rl(p,r.getFEN());return m?m.userGenerated?c(m):l(m):o(x.APIEvents.IllegalMove)};function l(f){const p=Ee({},f),m=r.guessTheMove.getActiveGuess(),v=r.getMove(f);if(!v||!m)return r.isAtEndOfLine()?s(f):r.addMoveToEndOfLine(p);const E=v.color===r.getPlayingAs()&&v.san===m.san;return f.animate=!E,r.reload(),s(f),r.guessTheMove.confirm(E)}function c(f){if(r.isLegalMove(f)){const p=i.move(f);if(!p)return o(x.APIEvents.IllegalMove);r.guessTheMove.guess(p);const m=Ee({},r.getPieces());return i.undo(),o(x.APIEvents.SetBoardPosition,{pieces:m})}return o(x.APIEvents.IllegalMove)}}const bp="gtm";function gf(t,r){var i;const{api:o,options:s}=r,l=(i=o.guessTheMove)==null?void 0:i.getActiveGuess();if(!s||!s.allowMarkings||!l)return[];const c=[];if(l.from){const p=gs({color:s.premoveHighlightColor,opacity:s.premoveHighlightOpacity,square:l.from,type:bp});c.push(p)}const f=gs({color:s.premoveHighlightColor,opacity:s.premoveHighlightOpacity,square:l.kingTo||l.to,type:bp});return c.push(f),c}function dc(){let t=!1;return{api:I3,apiOverrides:{move:vf},beforeState:[{condition:Je(x.UserEvents.PointerdownRight),handler:i}],destroy:o,match:[{condition:Ht(Io),handler:l},{condition:Ht(va.APIEvents),handler:r},{condition:Je(va.APIEvents.GuessConfirmed),handler:s}],name:va.Plugin.Name};function r(c,f){var p,m,v;if(t)return;const{api:E}=f;(p=E.highlights)==null||p.addModule(gf),((v=(m=E.highlights)==null?void 0:m.getModules())!=null?v:[]).find(y=>y.name==="getGuessTheMoveHighlights")&&(t=!0)}function i(c,{api:f,queue:p}){return f.guessTheMove.getActiveGuess()?(p.add(f.guessTheMove.cancel),!1):!0}function o(c){var f;const{api:p}=c;(f=p.highlights)==null||f.removeModule(gf)}function s(c,f){const{api:p}=f,{correct:m,ids:v}=c.data;p.updateNode(v,{customColor:m?va.Colors.Correct:va.Colors.Incorrect})}function l(c,f){const{api:p,queue:m}=f;c.type===x.APIEvents.Load&&p.guessTheMove.reset();const v=p.getTurn();m.add(p.setPlayingAs,v)}}function fc({api:t}){return{isAllowedToMove:r,handleIllegalMove:hu(t),name:sa.Types.GuessTheMove,plugins:[dc()],usePlayingAs:!0};function r(){return t.guessTheMove&&t.isAtEndOfLine()&&!t.guessTheMove.getActiveGuess()}}const pu=Ss(fc,{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var yp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:pu});function R3(t){const{api:r,respond:i}=t,o=r.load;return function(l,c){const f=r.observing;return f.setCachedPGN(""),f.isAnalyzing()&&(f.clearCachedIds(),i(mn.APIEvents.AnalysisEnd)),o(l,c)}}function qa(t){return!!(t&&"san"in t&&t.san==="--")}function N3({move:t,api:r,game:i}){const o=r.observing,s=i.ids();i.selectPosition(0,0),i.createVariation(),i.move(t);const l=r.getRawLines().length-1;i.promoteVariation(l,0),i.deletePosition(0,l);const{playSounds:c}=r.getOptions();c&&r.setOptions({playSounds:!1});const f=o.getCachedIds();f&&o.clearCachedIds(),r.load({pgn:r.getPGN()}),c&&r.setOptions({playSounds:!0}),f&&o.setCachedIds(f.move,f.line),r.selectNode(s.line,s.move)}function L3(t){const{api:r,respond:i,game:o}=t,s=r.move;return function(p){const m=r.observing.getCachedPGN();m&&r.load({pgn:m});const v=rl(p,r.getFEN());return v?v.userGenerated?l(v):c(v):s(p)};function l(f){var p;const m=r.observing,{move:v,line:E}=o.ids(),y=m.isAnalyzing(),M=Ud(E);((p=r.getLine(0))==null?void 0:p.length)===0&&o.move("--");const R=r.getNodeByIds({line:0,move:0});if(qa(R)&&qa(r.getSelectedNode())&&r.selectNode(0,-1),qa(R)&&"san"in f){const Te=P.R.sanToObj(f.san,r.getFEN());Object.assign(f,Te),f.san=""}M&&!hp({api:r,followAlternateLines:!0,mv:f})&&r.isAtEndOfLine()&&r.createContinuation();const D=s(f);if(D?.type!==x.APIEvents.Move)return D;const W=Ud(o.ids().line);return M&&!W&&!y&&(m.setCachedIds(v,E),i(mn.APIEvents.AnalysisStart)),D}function c(f){const p=r.observing,m=qa(r.getNodeByIds({line:0,move:0})),v=r.getLine(0);if(m&&v?.length===1){N3({move:f,api:r,game:o});return}return p.isAnalyzing()||!r.isAtEndOfLine()?r.addMoveToEndOfLine(f,0):s(f,!1)}}function B3({api:t}){const r=t.moveForward;return function(o,s){return r(l(),s);function l(){return o??(t.observing.isAnalyzing()?void 0:!1)}}}function D3(t){const{api:r}=t;return function(o,s){const l=r.observing;if(!l.isAnalyzing())return;if(qa(r.getNodeByIds({line:0,move:0}))){const f=r.getPGN();r.load({pgn:"*"}),l.setCachedPGN(f);return}const c=l.getCachedIds();o?r.load(o,s):r.load({pgn:r.getPGN()}),c&&r.selectNode(c.line,c.move)}}function F3(t){let r,i="";return{clearCachedIds:o,getCachedIds:s,isAnalyzing:l,restorePosition:D3(t),setCachedIds:c,setCachedPGN:f,getCachedPGN:p};function o(){r=void 0}function s(){return r}function l(){return!!r}function c(m,v){r={move:m,line:v}}function f(m){i=m}function p(){return i}}function z3({data:t}){return t.lineDiff!==void 0&&t.lineDiff!==0}function U3(t,r){return!wp(t,r)}function wp(t,{api:r}){return r.observing.isAnalyzing()}function ol(t,r){const{api:i}=r;return qa(i.getNodeByIds({line:0,move:0}))}function Ep(t,r){const{api:i}=r;return!qa(i.getNodeByIds({line:0,move:0}))}function _f(t,r){const{api:i}=r;return qa(i.getSelectedNode())}function H3(t,r){var i,o;const{api:s}=r,l=s.getSelectedNode();return((i=l?.ids)==null?void 0:i.line)===0&&((o=l?.ids)==null?void 0:o.move)===-1}function G3(t,r){const{api:i}=r,o=i.getSelectedNode();return!!(o&&o.ids.line!==0)}function bf(t,r){const{api:i}=r,o=i.getLine(1);return!o||o.length===0}function V3(t,r){var i;const{data:o}=t;return((i=o.line)==null?void 0:i.atMoveNode)===0}function al(t,r){const{api:i,queue:o}=r;if(i.observing.isAnalyzing())return;o.add(function(){const c=s();c&&(i.observing.setCachedIds(c.move,c.line),i.getContext().respond(mn.APIEvents.AnalysisStart))});function s(){var l;const c=(l=i.getSelectedNode())==null?void 0:l.ids;if(!c)return;if(c.line===0)return c;let f=i.getLine(c.line);for(;f.parentId&&f.parentId>1;)f=i.getLine(f.parentId);return{line:f.parentId,move:f.atMoveNode}}}function j3(t,r){const{api:i,queue:o}=r;o.add(function(){i.selectNode(1,0)})}function yf(t,r){const{api:i,queue:o}=r,s=i.getLine(1);if(s){const l=Math.max(...s.map(c=>c.moveNumber));o.add(function(){i.selectNode(1,l)})}}function $3(t,r){const{api:i}=r,o=i.observing;i.deletePosition(0,0),o.setCachedPGN(""),o.restorePosition()}function Fw(t,r){const{api:i,queue:o}=r;o.add(function(){i.selectNode(0,-1)})}function zw(t,r){const{api:i}=r,o=i.observing,{overlayInAnalysisMode:s}=i.getOptions(),l=o.isAnalyzing();l!==s&&i.setOptions({overlayInAnalysisMode:l})}function W3(t,r){const{api:i}=r;i.observing.restorePosition()}function q3(t,r){const{api:i,queue:o}=r;o.add(function(){i.selectNode(0,0)})}function Ap(t,r){var i,o,s,l,c;const{api:f}=r,p=f.observing,m=(i=f.getSelectedNode())==null?void 0:i.ids;if(!m)return;if(m.line===0){p.setCachedIds(m.move,m.line);return}let v=(o=f.getLine(m.line))==null?void 0:o.id;if(!v)return;for(;(s=f.getLine(v))!=null&&s.parentId;){const M=(l=f.getLine(v))==null?void 0:l.parentId;if(typeof M=="number"&&(v=M),!M)break}const E=f.getLine(v);let y=(c=E?.atMoveNode)!=null?c:0;E?.[0].isContinuation||(y-=1),p.setCachedIds(y,0)}function K3(){return[{condition:Ht([mn.APIEvents.AnalysisStart,mn.APIEvents.AnalysisEnd]),handler:zw},{condition:gi(Ht(Io),wp),handler:Ap},{condition:gi(Je(x.APIEvents.ResetToMainLine),ol),handler:$3},{condition:gi(Je(x.APIEvents.ResetToMainLine),Ep),handler:W3},{condition:gi(Je(x.APIEvents.DeletePosition),ol,bf),handler:$3},{condition:gi(Je(x.APIEvents.DeletePosition),ol,V3),handler:q3},{condition:gi(Je(x.APIEvents.DeletePosition),Ep,bf),handler:W3},{condition:gi(Je(x.APIEvents.SelectNode),_f),handler:Fw},{condition:gi(Je(x.InstanceEvents.ModeChanged),G3),handler:al},{condition:gi(Je(x.APIEvents.SelectNode),Ep,G3),handler:al},{condition:gi(Je(x.APIEvents.MoveForward),U3,z3),handler:al},{condition:gi(Je(x.APIEvents.MoveForward),ol,Yu(_f,H3)),handler:j3},{condition:gi(Je(x.APIEvents.SelectLineEnd),ol,Yu(_f,H3)),handler:yf}]}function wf(){return{api:F3,apiOverrides:{load:R3,move:L3,moveForward:B3},create:t,match:K3(),name:mn.Plugin.Name};function t(r){const{api:i}=r;i.setOptions({overlayInAnalysisMode:!1})}}function Z3(){return{isAllowedToMove:t,name:sa.Types.Observing,plugins:[an(),wf()]};function t(){return!0}}const Ps=Ss(Z3,{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var hc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Ps});function Sp(t){const{api:r}=t;return function(){if(!r.isAtEndOfLine())if(r.getMode().getOptions().canModifyExistingMovesOnMainLine){const{line:o,move:s}=pf(r.getRelativeNode());r.deletePosition(s,o)}else r.selectLineEnd()}}function Uw(t){const{api:r}=t,i=r.move,o=Sp(t);return function(l){return r.isGameOver()&&r.getMode().getOptions().canMoveWhenGameIsOver&&r.setResult(Ct.Results.None),o(),i(l)}}var kp;(function(t){(function(r){r.Name="playing"})(t.Plugin||(t.Plugin={}))})(kp||(kp={}));function Pp(){return{apiOverrides:{move:Uw},name:kp.Plugin.Name}}function Hw({api:t}){return{handleIllegalMove:hu(t),isAllowedToMove:r,name:sa.Types.Playing,plugins:[Pp()],overridableMethods:["isAllowedToMove"],usePlayingAs:!0};function r(){return Y0({api:t,canMoveWhenNotPlayerTurn:!1,modeOptions:t.getMode().getOptions()})}}const Gw=Ss(Hw,{canAddMovesToMainLine:{default:!0,editable:!0},canMoveWhenGameIsOver:{default:!1,editable:!0},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!0}});var Cp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Gw});function Y3(){return{isAllowedToMove:t,name:sa.Types.PassiveObserving};function t(){return!1}}const X3=Ss(Y3,{canAddMovesToMainLine:{default:!1,editable:!1},canInteractWithPieces:{default:!1,editable:!1},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var Ef=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:X3}),pc;(function(t){(function(r){r.DropPiece="DropPiece",r.MovePiece="MovePiece",r.RemovePiece="RemovePiece"})(t.Events||(t.Events={})),function(r){r.Name="setup"}(t.Plugin||(t.Plugin={}))})(pc||(pc={}));function Q3(t){return function({piece:i,square:o}){const{api:s,game:l}=t;return l.remove(o),l.put(i,o),s.setGameDetails({FEN:l.fen()}),s.reload()}}function J3(t){return function({from:i,piece:o,to:s}){const{api:l,game:c}=t;return c.remove(i),c.remove(s),c.put(o,s),l.setGameDetails({FEN:c.fen()}),l.reload()}}function Tp(t){return function(i){const{api:o,game:s}=t;return s.remove(i),o.setGameDetails({FEN:s.fen()}),o.reload()}}function Mp(t){return{dropPiece:Q3(t),movePiece:J3(t),removePiece:Tp(t)}}function Ka(){return function(r){return r}}function eb(t){const{api:r}=t;return function(o){const s=rl(o,r.getFEN());if(!s)return;const{setup:l}=r;let c;"color"in s&&s.color&&"drop"in s&&s.drop?c={color:s.color,type:s.drop}:"from"in s&&s.from&&(c=r.getPiece(s.from)),c&&("from"in s&&s.from&&s.to?l.movePiece({from:s.from,piece:c,to:s.to}):s.to?l.dropPiece({piece:c,square:s.to}):"from"in s&&s.from&&l.removePiece(s.from))}}function tb(){return{api:Mp,apiOverrides:{getMove:Ka,isLegalMove:()=>!0,move:eb},name:pc.Plugin.Name}}function Vw(){return{isAllowedToMove:t,name:sa.Types.Setup,plugins:[tb()]};function t(){return!0}}const jw=Ss(Vw,{canAddMovesToMainLine:{default:!1,editable:!1},canDropOffBoard:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1},canDropPiecesContinuously:{default:!0,editable:!0}});var nb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:jw});function mc({move:t,startingMoveNumber:r}){if(!t)return null;const{moveNumber:i}=t,o=i%2===0&&t.color===Ct.ColorsAsNumbers.Black||i%2!==0&&t.color===Ct.ColorsAsNumbers.White,s=r+Math.floor(i/2)+(o&&t.color===Ct.ColorsAsNumbers.White?1:0);return ze(Ee({},t),{ply:t.ids.move+1,wholeMoveNumber:s})}function sl({baseTimeDs:t,incrementDs:r,lastTimeDs:i,currentTimeDs:o}){if(!o)return Jl;const s=i??t,l=o-r,c=s-l;return Math.max(c,Jl)}function Af({api:t,node:r}){const i=t.getLine(0),o=t.timeControl.get();if(!i||!o)return null;const s=r.time,l=X0({api:t,node:r}),c=l?.time,{baseTime:f,increment:p}=o;return sl({baseTimeDs:Ga(f),incrementDs:Ga(p),lastTimeDs:c,currentTimeDs:s})}function Op(t){const r=Math.floor(t%36e3/600),i=Math.floor(t%36e3%600)/10;return`${Math.floor(t/36e3)}:${r<10?"0":""}${r}:${i<10?"0":""}${i}`}function Za({api:t,node:r,clk:i}){const{line:o,move:s}=r.ids,l=t.getContext().game;r.commands||(r.commands={}),l.updateNode({commands:Object.assign(r.commands,{clk:i===null?i:Op(i)})},s,o)}function Ya({context:t,time:r}){const{api:i,game:o}=t,s=o.moveDetails();s.time=r,Za({api:i,node:s,clk:r});const l=Af({api:i,node:s});l&&Ql({api:i,node:s,timestamp:l})}function rb(t){return function(i,o=0){var s;const{api:l,game:c,mutateGame:f,respond:p}=t,{ids:m}=(s=l.getSelectedNode())!=null?s:{ids:{move:-1,line:0}},{move:v,line:E}=m;c.selectLineEnd(o);const y=rl(i,l.getFEN()),M=y!==null?f(function(){c.move(y,!1),y.time&&Ya({context:t,time:y.time})}):null;return c.selectPosition(v,E),M===null?p(x.APIEvents.IllegalMove,{fen:c.fen(),move:y}):(M.move=mc({move:M.move,startingMoveNumber:c.startingMoveNumber()})||void 0,p(x.APIEvents.AddMove,{listMove:M.move}))}}function Sf(t){return function(){const{api:i,respond:o}=t;return i.isGameOver()?null:(i.setResult(Ct.Results.Draw),o(x.APIEvents.DrawAgreed))}}function kf(t){return function(i){const{respond:o}=t,s={data:i,type:gr};return o(x.APIEvents.BlinkHighlight,[s])}}function xp(t){const{move:r,followContinuations:i=!0,steps:o=1,context:s}=t,{mutateGame:l,game:c}=s,f=c.ids(),p=l(function(){c.moveForward(i,r)});let m=p?.plyDiff===1;if(o>1&&m)for(let E=1;E<o&&(m=c.moveForward(i),!!m);E++);const v=c.ids();return c.selectPosition(f.move,f.line),{firstStepData:p,startIds:f,endIds:v,success:m}}function Ia(t){return function(i){const{move:o,followContinuations:s,steps:l}=i??{},{success:c}=xp({context:t,move:o,followContinuations:s,steps:l});return c}}function Ip(t){return t.inThreefoldRepetition()||t.in50MoveRule()}function ib(t){return function(){const{api:i,game:o}=t;return i.isGameOver()?null:Ip(o)?(i.setResult(Ct.Results.Draw),t.respond(x.APIEvents.DrawClaimed)):null}}const vc={ClearMarkings:Ra("clearMarkings","api.markings.removeAll/removeAllWhere/removeMany/removeOne"),Mark:Ra("mark","api.markings.addOne/addMany"),ToggleMarking:Ra("toggleMarking","api.markings.toggleOne/toggleMany"),Unmark:Ra("unmark","api.markings.removeOne/removeMany")};function Ra(t,r){return`The "${t}" method is deprecated and will be removed in v2.0.0. Please use the ${r} methods instead.`}function ob(t){return function(i,o={}){console.warn(vc.ClearMarkings);const{api:s,respond:l}=t,c=s.markings,f=i?.map(p=>p==="square"?"highlight":p);return c.removeAllWhere(ze(Ee({},o),{types:f})),l(x.APIEvents.ClearMarkings)}}function $w(t){return function(){const{api:i,game:o,respond:s}=t,l=o._getPos();if("initial"in l)return null;o.createVariation(),o.move(l);const c=i.getRelativeNode();return s(x.APIEvents.CreateContinuation,{node:c})}}function Ww(t){return function(i,o){const{api:s,game:l,respond:c}=t,f=s.getRawLines()[o];return l.deletePosition(i,o),o===0&&s.getResult()!==Ct.Results.None&&s.setResult(Ct.Results.None),c(x.APIEvents.DeletePosition,{ids:{line:o,move:i},line:f,pieces:s.getPieces()})}}function qw(t){const r={};return function(o,s){const l=Object.entries(s).map(([c,f])=>{if(f)return r[c]||(r[c]={extensions:{},original:t.api[c]}),t.api[c]=f(t),r[c].extensions[o]=f,function(){delete r[c].extensions[o],t.api[c]=r[c].original,Object.keys(r[c].extensions).map(m=>t.api[c]=r[c].extensions[m](t))}});return function(){l.map(f=>f&&f())}}}function Pf(t){return t.inCheckmate()||!!t.isVariantWin()||!!t.isBughouseWin()}function Kw(t){return function(){const{api:i,game:o}=t;let s=Ct.Results.None;const l=Ip(o);return Pf(o)?s=o.turn()===Ct.ColorsAsNumbers.Black?Ct.Results.White:Ct.Results.Black:(l&&i.getOptions().autoClaimDraw||!l&&o.inDraw())&&(s=Ct.Results.Draw),s}}function ab(t){return function(){return t}}function Zw(t){return function(){const{game:i}=t;return i.history({toCurrent:!0,verbose:!0})}}function sb(t){return function(){const{game:i}=t;return i.fen()}}function Rp(t){return function(){return P.R.gameFingerprints({game:t.game,analysis:!0})}}function gc(t){return function(){const{game:i}=t;return i.headers()}}function Cf(t){return t===-1}function lb(t){return function(i=!1){const{game:o}=t,s=o._getPos();return s.ids&&s.ids.line===0&&Cf(s.ids.move)&&s.fen?[s.fen]:o.history({toCurrent:!i,verbose:!0}).map(l=>l.fen)}}function ub(t){return function(){const{game:i}=t;return i.history(!1)}}function Tf(t){return function(){var i;const{api:o}=t,s=((i=o.premoves)==null?void 0:i.getQueue())||[],l=P.R.createGame({pgn:o.getPGN(),analysis:!0,timestamps:o.times.get()||o.timestamps.get()||void 0});if(!l)throw new Error("Unable to create JCE game copy");return l.premove.queue.push(...s),l}}function ni(t){return function(){const{game:i}=t;return i.history(!0).slice(-1)[0]}}function Yw(t){return function(){const{game:i}=t;return P.R.getLegalMoves({game:i})}}function Xw(t){return function(i){return ti(t.api.getLegalMoves().filter(o=>typeof i>"u"||o.from===i).map(o=>o.to))}}function Qw(t){function r(i){const{game:o}=t,s=o.startingMoveNumber(),l=t.api.getRawLines()[i];if(!l){if(i===0)throw new Error("Expected a main line");return}return l.forEach((c,f)=>{const p=mc({move:c,startingMoveNumber:s});l[f]=p}),l}return r}function Jw(t){const r={[Ct.Node.Marking.Types.Arrow]:{},[Ct.Node.Marking.Types.CustomItem]:{},[Ct.Node.Marking.Types.Effect]:{},[Ct.Node.Marking.Types.Square]:{}};return t.map(o=>{var s;return Ee({markingType:o.type==="highlight"?"square":o.type,key:(s=o.data.square)!=null?s:`${o.data.from}${o.data.to}`,color:ao.Default},o.data)}).reduce((o,s)=>{const{key:l,markingType:c}=s;return o[c][l]=s,o},r)}function e8(t){return function(){const{api:i}=t,o=i.markings;return Jw(o.getAll())}}function t8(t){return function(){const{game:i}=t;return i.material()}}function n8(t){return function(i){const{game:o}=t;if(i.to===null)return null;let s=o.getMove(i);return s===null&&(Object.assign(i,{promotion:"q"}),s=o.getMove(i)),s&&(s=o.moveDetails(s)),s}}function r8(t){return function(i){const{api:o,game:s}=t,l=o.getRawLines()[i.line];return!l||i.move===-1?null:mc({move:l[i.move],startingMoveNumber:s.startingMoveNumber()})}}function i8(t,r){return r.ids.line-t.ids.line}function cb(t){const{moveNumber:r}=t;return typeof r<"u"?r:-1}function o8(t,r){return cb(r)-cb(t)}function a8(t){if(!(t.flags!==Ct.Move.Flags.EPCapture||!t.from))return`${t.to.slice(0,1)}${t.from.slice(-1)}`}function Np(t){const r=ze(Ee({},t),{EPCapturedSquare:a8(t)});return t.rookFrom&&t.rookTo&&(r.rookMove={animate:!0,from:t.rookFrom,to:t.rookTo}),r}function s8(t){return function(i,o){const{api:s,game:l}=t,c=o??l._getPos(),f=i??l._getPos(-1,0),p={};return p.plyDiff=o8(f,c),p.lineDiff=i8(f,c),p.plyDiff===-1?p.move=Np(ze(Ee({},i),{animate:!0})):p.plyDiff===1?(p.animate=!0,p.move=Np(ze(Ee({},c),{animate:!0}))):p.pieces=s.getPieces(),p}}function l8(t){return function(){const{game:i}=t;return i.ids()}}function u8(t){return function(){const{game:i}=t;return rn(i.getPieces(!0))}}function c8(t){return function(i={}){const{game:o}=t;return o.pgn(ze(Ee({},i),{useResultHeader:!0}))}}function d8(t){return function(i){const{game:o}=t;return o.get(i)}}function f8(t){return function(i,o){const{game:s}=t;return s._getPos(i,o)}}function h8(t){return function(i){const o=t.api.getPGN();return P.R.getPositionDetails({pgn:o},i)}}function p8(t){return function(i=[]){const{api:o}=t,s=Ct.JCEVariantTypes[o.getVariant()],l=P.R.getPositionInfo({game:t.game,analysis:!0},i,{variant:s});return typeof l=="object"?ze(Ee({},l),{gameOver:o.isGameOver()||l.gameOver,draw:o.getResult()===Ct.Results.Draw||l.draw}):!1}}function Nr(t){return function(){const{game:i}=t;return i._lines()}}function m8(t){return function(i=0){const{game:o}=t,s=Ee({},o.ids());s.move+=i;const l=t.api.getRawLines()[s.line];return Cf(s.move)?l:mc({move:l[s.move],startingMoveNumber:o.startingMoveNumber()})}}function db(t){return function(){const{game:i}=t;return i.headers().Result}}function v8(t){return function(){const{api:i,game:o}=t,s=o.ids();if(Cf(s.move))return null;const l=i.getRawLines()[s.line];return mc({move:l[s.move],startingMoveNumber:o.startingMoveNumber()})}}function g8(t){return function(){const{game:i}=t;return P.R.encodeTCN(i.history(!0))}}function _8(t){return function(){const{game:i}=t;return i.turn()}}const b8={"3-check":Ct.Variants.ThreeCheck,Bughouse:Ct.Variants.Bughouse,Chess:Ct.Variants.Chess,Chess960:Ct.Variants.Chess960,Crazyhouse:Ct.Variants.Crazyhouse,"King of the Hill":Ct.Variants.KingOfTheHill};function fb(t){return function(){var i;const{api:o}=t,s=o.getHeaders().Variant;return s&&(i=b8[s])!=null?i:Ct.Variants.Chess}}function y8(t){return function(){const{game:i}=t,o=i.ids();return t.api.getRawLines()[o.line].length-1===o.move}}function w8(t){return function(){const{game:i}=t;if(i.inCheck()){const o=t.api.getPieces();return o.keys().filter(s=>{const l=o.get(s);return l.type==="k"&&l.color===i.turn()})[0]}return!1}}function E8(t){return function(){const{api:i}=t;return i.getResult()!=="*"}}function A8(t){return function(i){const{game:o}=t;return o.getMove(i)!==null}}function S8(t,r){if(r&&t){const i=Ga(t.baseTime),o=Ga(t.increment);return r.map((s,l)=>typeof s!="number"?s:sl({baseTimeDs:i,incrementDs:o,lastTimeDs:l<=1?void 0:r[l-2],currentTimeDs:s}))}return r}function k8(t){let r=t;return Object.keys(Ai).reverse().forEach(i=>{r=r.replace(new RegExp(`\\${i}`,"gm"),Ai[i])}),r}function P8(t){return function({fen:i,moves:o,pgn:s,times:l,timestamps:c,timeControl:f,variant:p=Ct.Variants.Chess,pieces:m},v){const{api:E,game:y,respond:M}=t;let R=!1;if(s){const dt=k8(s);R=y.loadPgn(dt)}else i&&(R=y.load(i,p));(o||o==="")&&(R=y.loadMoves(o,Ee({autoPromote:!0},v)));const D=E.getLine(0),W=l?S8(f||E.timeControl.get(),l):c;if(W&&D&&D.forEach((dt,Ie)=>{const ut=W[Ie];ut!==void 0&&Ql({api:E,node:dt,timestamp:ut})}),f&&E.timeControl.set(f),!R)throw new $i({code:Ni.BadData,data:{fen:i,pgn:s},message:"Unable to load with provided data."});const Te=E.getResult();return E.setResult(Te===Ct.Results.None?E.getCalculatedResult():Te),M(x.APIEvents.Load,ze(Ee(Ee({},P.R.getPositionDetails({game:y,skipValidation:!0})),P.R.getPositionInfo({analysis:!0,game:y})),{line:D,pieces:m??E.getPieces(),variant:p}))}}function Lp(t,r={}){const[i,o]=Object.entries(t)[0],{node:s,persistent:l}=r;return Vl(o).map(c=>{const f={data:c,node:s,persistent:l,type:i==="square"?gr:i};return ze(Ee({},f),{key:$(f)})})}function C8(t){return function(i,o,s){var l,c;console.warn(vc.Mark);const{api:f}=t,p=f.markings,m=Lp(i,{node:(l=s?.node)!=null?l:o,persistent:(c=s?.persistent)!=null?c:!0});return p.addMany(m),vi(x.APIEvents.Mark,m)}}function T8(t={}){let r=c(t);return{add:i,clear:o,get:s,remove:l};function i(f,...p){let m=r;p.forEach(v=>{v in m||(m[v]={}),m=m[v]}),Object.assign(m,f)}function o(f){f?r[f]={}:r=c(t)}function s(){return c(r)}function l(...f){let p=r;const m=f.length-1;f.forEach((v,E)=>{v in p&&E!==m&&(p=p[v])}),delete p[f[m]]}function c(f){return JSON.parse(JSON.stringify(f))}}function hb(t){return function(i,o=!0){const{api:s,game:l,mutateGame:c,respond:f}=t,p=rl(i,s.getFEN()),m=p!==null?c(function(){let E;if("san"in p?E=l.move(p.san||p,o):typeof i=="object"&&"tcn"in i?E=l.loadMoves(i.tcn.slice(0,2),{atCurrent:!0,method:"merge"}):E=l.move(p,o),!E)return null;p.time&&Ya({context:t,time:p.time})}):null;return m===null?f(x.APIEvents.IllegalMove,{fen:l.fen(),move:i}):(m.result&&s.setResult(m.result),m.move&&p&&(Object.assign(m.move,{animate:p.animate,userGenerated:p.userGenerated,userGeneratedDrop:p.userGeneratedDrop}),m.move=Np(m.move)),f(x.APIEvents.Move,m))}}function pb(t){return function(){const{respond:i,game:o,mutateGame:s}=t,l=s(function(){o.moveBackward()});return!l||l.lineDiff===0&&l.plyDiff===0?i(x.APIEvents.MoveBackward,null):i(x.APIEvents.MoveBackward,l)}}function mb(t){return function(i,o){const{respond:s,api:l,game:c}=t,{move:f,followContinuations:p,steps:m}=vb(i,o);if(m<1)return null;const{firstStepData:v,success:E,endIds:y}=xp({context:t,move:f,followContinuations:p,steps:m});return m===1||v?.plyDiff!==1?(c.selectPosition(y.move,y.line),s(x.APIEvents.MoveForward,v)):E?l.selectNode(y.line,y.move):s(x.APIEvents.MoveForward,null)}}function vb(t,r){var i;let o={},s;typeof t=="object"?o=t:s=t;const{move:l,followContinuations:c,steps:f}=o;return{move:l??r,followContinuations:(i=c??s)!=null?i:!0,steps:f??1}}function gb(t){return function(i,o){const{game:s,respond:l}=t;return s.moveVariation(i,o)?l(x.APIEvents.MoveVariation):null}}function _b(t,r){return function(o){const s=t.moveDetails(),l=r.getCalculatedResult();if(o()===null)return null;const f=t.moveDetails(),p=r.getCalculatedResult(),m=r.getNodeDiffData(s,f);l!==p&&Ud(f?.ids.line)&&(m.result=p);const{line:v,move:E}=t.ids();return m.linesReordered=v!==0&&E===0&&t.reorderLines(),m}}function Bp(t){return Object.keys(t).reduce((r,i)=>(t[i]!==Ct.EmptyPGNHeaders.Value&&t[i]!==Ct.EmptyPGNHeaders.Date&&(r[i]=t[i]),r),{})}const Mf={trans:bb,transChoice:yb};function bb(t,r,i){return t}function yb(t,r,i,o){return`${r}`}function ll(t){return function(i){const{api:o,game:s,respond:l}=t,c=fu(i),f=(0,P.T)(Ws(c)),p=o.getHeaders()[f];o.setResult(c===Ct.ColorsAsNumbers.Black?Ct.Results.Black:Ct.Results.White),s.header({Termination:Mf.trans("%username% won on time",{"%username":p})});const m=ze(Ee({},Bp(s.header())),{color:i});return l(x.APIEvents.OutOfTime,m)}}function wb(t){const r={};return function(l,c){const f=Object.entries(c);return f.forEach(([p,m])=>{let v=r[p];v||(r[p]={methodName:p,original:t.api[p],current:t.api[p],before:[],after:[],instead:[],extensions:{}},v=r[p],t.api[p]=i(p));const E=y=>{v[y.run].push(ze(Ee({id:l},y),{handler:y.handler(t)})),v[y.run].sort((M,R)=>(M.order||0)-(R.order||0))};Array.isArray(m)?m.forEach(y=>{E(y)}):typeof m=="object"?E(m):typeof m=="function"&&(v.extensions[l]=m,v.current=m(o(v)))}),function(){f.forEach(([m])=>{const v=r[m];delete v.extensions[l];const E=Object.values(v.extensions)[0];v.current=E?E(o(v)):v.original,["before","after","instead"].forEach(y=>{v[y]=v[y].filter(M=>M.id!==l)})})}};function i(s){const l=r[s],c=(f,...p)=>l[f].filter(m=>m.conditions?Array.isArray(m.conditions)?m.conditions.every(v=>!!v(t,...p)):!!m.conditions(t,...p):!0);return(...f)=>{var p;const m=c("before",...f),v=(p=c("instead",...f)[0])==null?void 0:p.handler,E=m.reduce((D,W)=>{const Te=W.handler(...D);return W.changeArgs?Te:D},f);let y;return v?y=v(...E):y=l.current(...E),c("after",y,...E).reduce((D,W)=>W.handler(D,...E),y)}}function o(s){return ze(Ee({},t),{api:ze(Ee({},t.api),{[s.methodName]:s.original})})}}function ul(t){return function(){const{api:i,game:o,respond:s}=t;return s(x.APIEvents.Reload,{holdSelectedPiece:!0,pieces:rn(o.getPieces(!0)),variant:i.getVariant()})}}function Eb(t){let r=Ct.ColorsAsNumbers.White,i=!1;return{getPlayingAs:o,setPlayingAs:s,usePlayingAs:l};function o(){return i?r:void 0}function s(c){if(c===r)return null;const{respond:f}=t;return r=c,f(x.APIEvents.SetPlayingAs,c)}function l(c){i=c||!1}}function Ab(t){return function(i,o){const{game:s,respond:l}=t;return s.promoteVariation(i,o)?l(x.APIEvents.PromoteVariation):null}}const Sb="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";function kb(t){return function(){const{api:i,respond:o}=t;return i.setResult(Ct.Results.None),i.load({fen:Sb}),o(x.APIEvents.ResetGame)}}function Of(t){return function(i){const{api:o,respond:s}=t;if(o.isGameOver())return null;const l=i===Ct.ColorsAsNumbers.White?Ct.Results.Black:Ct.Results.White;return o.setResult(l),s(x.APIEvents.GameResigned,l)}}function Pb(t){return function(){const{api:i,game:o,respond:s}=t;return o.resetToMainLine(),s(x.APIEvents.ResetToMainLine,{pieces:i.getPieces()})}}function Cb(t){return function(i,o){const s=vi(i,o);return t.emit(i,s),s}}function Tb(t){return function(i){const{api:o,game:s,mutateGame:l,respond:c}=t,f=l(function(){s.selectLineEnd(i)});return f&&(f.pieces=o.getPieces()),c(x.APIEvents.SelectLineEnd,f)}}function Dp(t){return function(){const{api:i,game:o,mutateGame:s,respond:l}=t,c=s(function(){o.selectLineStart()});return c&&(c.pieces=i.getPieces()),l(x.APIEvents.SelectLineStart,c)}}function Mb(t){return function(i,o){const{api:s,game:l,respond:c}=t,f=l.moveDetails();l.selectPosition(o,i);const p=l.moveDetails(),m=s.getNodeDiffData(f,p);return m.plyDiff===0&&m.lineDiff===0?null:(m.lineDiff!==0&&(m.pieces=s.getPieces()),c(x.APIEvents.SelectNode,m))}}function Ob(t){return function(i){const{game:o,respond:s}=t,l=Bp(o.header(i));return s(x.APIEvents.UpdatePGNHeaders,l)}}function xb(t){return function(i){const{api:o}=t;return o.setGameDetails({Result:i})}}function Ib(t){return function(i){const{game:o,respond:s}=t;return o.turn()===i?null:(o.turn(i),s(x.APIEvents.TurnSet,i))}}function Rb(t){return function(i,o,s){var l,c;console.warn(vc.ToggleMarking);const{api:f}=t,p=f.markings,m=Lp(i,{node:(l=s?.node)!=null?l:o,persistent:(c=s?.persistent)!=null?c:!0});return p.toggleMany(m),vi(x.APIEvents.Mark,m)}}function Fp(t){return function(){const{api:i}=t,o=i.getSelectedNode();return o?i.deletePosition(o.ids.move,o.ids.line):null}}function Nb(t){return function(i,o){const{game:s,respond:l}=t;return s.updateNode(o,i.move,i.line),l(x.APIEvents.NodeUpdated,{changes:o,ids:i,node:s._getPos(i.move,i.line)})}}function Lb(t){return function(i,o){const{game:s,respond:l}=t;return s.updateLineComment(i,o),l(x.APIEvents.LineCommentUpdated,{comment:i,lineId:o})}}function Bb(t){return function(i,o,s){var l,c;console.warn(vc.Unmark);const{api:f}=t,p=f.markings,m=Lp(i,{node:(l=s?.node)!=null?l:o,persistent:(c=s?.persistent)!=null?c:!0});return p.removeMany(m.map(v=>v.key)),vi(x.APIEvents.Unmark,m)}}function zp(t){return Array.isArray(t)&&Array.isArray(t[0])?t[0]:t}function Db(t){return function(i){const o=P.R.createGame(ze(Ee({timestamps:i.times||i.timestamps||void 0},i),{analysis:!0,autoPromote:!0}));if(!o)return;const{api:s}=t;let{times:l,timestamps:c}=i;return i.variant===Ct.Variants.Bughouse&&(l=zp(l),c=zp(c)),s.load({pgn:o.pgn({useResultHeader:!0}),variant:i.variant,times:l,timestamps:c,premoves:o.premove.queue&&o.premove.queue.length>0?o.premove.queue:void 0})}}function xf(t){return function(){const i=t.api.getHeaders().TimeControl;if(!i||i===Bt.Header.Null||i.includes(Bt.Header.Unset)||i.includes(Bt.Header.TimePerMove))return null;const[o,s]=i.split(Bt.Header.Separator).map(l=>Math.round(parseFloat(l)*1e3));return{baseTime:o,increment:s||0}}}function Fb(t){const{baseTime:r,increment:i}=t;return(r+40*(i||0))/1e3}const M8={baseTime:3e5,increment:0},zb=1800,Ub=6e3;function Up(t){return function(){const{api:i}=t,o=i.timeControl.get();if(o){const s=Fb(o);if(s<zb)return Bt.Types.Bullet;if(s>Ub)return Bt.Types.Rapid}return Bt.Types.Blitz}}function Hb(t){return function(i){const{api:o}=t;if(i===null)return o.setGameDetails({TimeControl:Bt.Header.Null});const{baseTime:s,increment:l}=i,c=s/1e3,f=l/1e3;return o.setGameDetails({TimeControl:f?`${c}+${f}`:`${c}`})}}function Gb(t){return{get:xf(t),getType:Up(t),set:Hb(t)}}function _c(t,r){if(t===null)return null;let i;switch(r){case Ot.Units.Milliseconds:i=t*100;break;case Ot.Units.Seconds:i=t*10;break;case Ot.Units.Deciseconds:default:i=t;break}return i}function Vb(t,r){let i;switch(r){case Ot.Units.Milliseconds:i=t/100;break;case Ot.Units.Seconds:i=t*10;break;case Ot.Units.Deciseconds:default:i=t;break}return Math.round(i)}function Hp(t,r){return t===null?null:Math.max(Jl,Vb(t,r))}function Gp(t){return{get:r,set:o,setMany:s};function r(l,{filtered:c=!0}={},f=Ot.Units.Deciseconds){var p;const{api:m}=t,v=(p=m.getLine(0))==null?void 0:p.map(yh);return l!==void 0?v[l]&&_c(v[l],f):(c?v.filter(y=>y!==void 0):v).map(y=>_c(y,f))}function i(){return r(void 0,{filtered:!1})}function o(l,c,f=Ot.Units.Deciseconds){var p;const{api:m,respond:v}=t,{getLine:E}=m,y=(p=E(0))==null?void 0:p[c];if(!y)return null;const M=Hp(l,f);return M===void 0?null:(Ql({api:m,node:y,timestamp:M}),v(x.APIEvents.NodeUpdated,{changes:{timestamp:M,node:y}}))}function s(l=[],c=Ot.Units.Deciseconds){const{api:f,respond:p}=t,m=l.length===0?i().map(()=>null):l;return f.getRawLines()[0].forEach((v,E)=>{if(m[E]===void 0)return;const y=Hp(m[E],c);y!==void 0&&Ql({api:f,node:v,timestamp:y})}),p(x.APIEvents.LineUpdated)}}function jb(t){return function(i){var o;const{api:s}=t,l=s.getLine(0);return i!==void 0?(o=l[i])==null?void 0:o.time:l.map(c=>c.time)}}function $b(t){return function(i=[]){const{api:o,respond:s}=t;return o.getRawLines()[0].forEach((l,c)=>{i[c]!==void 0&&(!l.time&&i[c]&&(l.time=i[c]),o.timestamps.set(Af({api:o,node:l}),c))}),s(x.APIEvents.LineUpdated)}}function Wb(t){return function(i,o){var s;const{api:l,respond:c}=t,{getLine:f}=l,p=(s=f(0))==null?void 0:s[o];return p?(p.time||(p.time=i),l.timestamps.set(Af({api:l,node:p}),o),c(x.APIEvents.NodeUpdated,{changes:{time:i,node:p}})):null}}function qb(t){return{get:jb(t),set:Wb(t),setMany:$b(t)}}function Kb(t=100){const r=(0,P.H)(),i=[];let o=oe.Levels.Debug;const s={[oe.Levels.None]:0,[oe.Levels.Error]:1,[oe.Levels.Debug]:2};return ze(Ee({},r),{clear:l,get:c,log:f,setLogLevel:p});function l(){i.length=0}function c(m){return m?i.filter(v=>Object.entries(m).every(([E,y])=>v[E]===y)):i}function f({code:m,data:v,level:E=oe.Levels.Debug,message:y}){if(s[E]>s[o])return;i.length===t&&i.shift();const M={code:m,data:v,level:E,message:y,timestamp:Date.now()};i.push(M),r.emit(oe.Events.EntryAdded,M)}function p(m){o=m}}function Zb({game:t,logger:r,options:i,eventEmitter:o}){const s=t||P.R.createGame(ze(Ee({},i),{analysis:!0,autoPromote:!0}));if(!s)throw new $i({code:Ni.BadData,data:i,message:"Error creating game from createAPI"});const l=o||(0,P.H)(),c=T8({arrow:{},customItem:{},effect:{},square:{}}),f={},p=_b(s,f),m=Cb(l),v={api:f,emitter:l,game:s,markingCache:c,mutateGame:p,respond:m};return Object.assign(v.api,E()),v.api;function E(){return ze(Ee(ze(Ee({addMoveToEndOfLine:rb(v),agreeDraw:Sf(v),blinkSquare:kf(v),canMoveForward:Ia(v),claimDraw:ib(v),clearMarkings:ob(v),createContinuation:$w(v),createGame:Db(v)},Eb(v)),{deletePosition:Ww(v)}),l),{extendAPI:qw(v),overrideAPI:wb(v),getCalculatedResult:Kw(v),getContext:ab(v),getCurrentFullLine:Zw(v),getFEN:sb(v),getFingerprints:Rp(v),getHeaders:gc(v),getHistoryFENs:lb(v),getHistorySANs:ub(v),getJCEGameCopy:Tf(v),getLastMove:ni(v),getLegalMoves:Yw(v),getLegalMovesForSquare:Xw(v),getLine:Qw(v),getMarkings:e8(v),getMaterial:t8(v),getMove:n8(v),getNodeByIds:r8(v),getNodeDiffData:s8(v),getNodeIds:l8(v),getPGN:c8(v),getPiece:d8(v),getPieces:u8(v),getPosition:f8(v),getPositionDetails:h8(v),getPositionInfo:p8(v),getRawLines:Nr(v),getRelativeNode:m8(v),getResult:db(v),getSelectedNode:v8(v),getStartingMoveNumber:v.game.startingMoveNumber,getTCN:g8(v),getTurn:_8(v),getVariant:fb(v),isAtEndOfLine:y8(v),isCheck:w8(v),isGameOver:E8(v),isLegalMove:A8(v),load:P8(v),logger:r||Kb(),mark:C8(v),move:hb(v),moveBackward:pb(v),moveForward:mb(v),moveVariation:gb(v),outOfTime:ll(v),promoteVariation:Ab(v),reload:ul(v),resetGame:kb(v),resetToMainLine:Pb(v),resign:Of(v),selectLineEnd:Tb(v),selectLineStart:Dp(v),selectNode:Mb(v),setGameDetails:Ob(v),setResult:xb(v),setTurn:Ib(v),timeControl:Gb(v),times:qb(v),timestamps:Gp(v),toggleMarking:Rb(v),undo:Fp(v),unmark:Bb(v),updateLineComment:Lb(v),updateNode:Nb(v)})}}function Vp(t={}){const r=t;return{get:i,set:o};function i(s){return s?r[s]:r}function o(s){Object.assign(r,s)}}function Yb({params:t,run:r}){const i=tu(!1),o=Ee({queue:i,reset:s,run:r,setMode:l,setRenderer:c,state:Vp()},t);return o.reset(),o;function s(){o.queue=tu(!1),o.state=Vp()}function l(f){o.mode=f}function c(f){o.renderer=f}}function Xb(t){return Object.values(x.APIEvents).includes(t.type)}function Qb(t){return[x.APIEvents.AddMove,x.APIEvents.BlinkHighlight,x.APIEvents.ClearMarkings,x.APIEvents.Mark,x.APIEvents.LineUpdated,x.APIEvents.NodeUpdated,x.APIEvents.Unmark,x.APIEvents.UpdatePGNHeaders].includes(t)}const Jb={anyAPIEvent:({UpdateParams:t})=>(t.cancelMarkingStartSquare(),ne.States.Idle),[x.UserEvents.PointerdownLeft]:({UpdateParams:t})=>(t.cancelMarkingStartSquare(),ne.States.Idle),[x.UserEvents.Pointerup]:({context:t,data:{keyPressed:r,square:i},params:{markingStartSquare:o},UpdateParams:s})=>{const{api:{markings:l},queue:c}=t;if(i&&o){const f=o===i?l.factory.buildStandardAnalysisHighlight(i,r):l.factory.buildStandardArrow(o,i,r);c.add(l.toggleOne,f)}return s.cancelMarkingStartSquare(),ne.States.Idle}};function ey(t){return{cancelMarkingStartSquare:r,cancelPromotion:i,deselectPiece:o,dragPiece:s,dropPiece:l,resetElevatedState:c,selectPiece:f,setMarkingStartSquare:p,showPromotionArea:m};function r(){t.markingStartSquare=void 0}function i(){t.promotionMove=void 0}function o(){t.selectedPiece=void 0}function s(v,E){t.draggingPiece=E,t.draggingCoords=v}function l(){t.draggingPiece=void 0,t.draggingCoords=void 0}function c(){t.draggingPiece=void 0,t.draggingCoords=void 0,t.promotionMove=void 0,t.selectedPiece=void 0}function f(v){t.selectedPiece=v}function p(v){t.markingStartSquare=v}function m(v){t.promotionMove=Ee({},v)}}const ty={[x.UserEvents.PointerdownLeft]:({context:t,data:{coords:r,square:i},UpdateParams:o})=>{const{api:{getPieces:s,markings:l},mode:{getOptions:c},options:f,queue:p,renderer:m,state:v}=t;if(i&&!f.disableUserMarkings&&p.add(l.removeAllWhere,{node:!0,persistent:!1,types:[at,Sn,gr]}),!f.enabled||!c().canInteractWithPieces||!s().isDefined(i))return ne.States.Idle;if(f.moveMethod===Rr.MoveMethods.Click){const M=m?.getCoordsFromSquare(i,f.flipped);if(typeof M>"u")throw new $i({code:Ni.BadData,message:`getCoordsFromSquare returned undefined for ${i}`});return o.dragPiece(M,i),v.set({hideHoverSquare:!0}),m?.dragPiece({coords:M,square:i},t),ne.States.PieceDragging}o.dragPiece(r,i);const y=r||m?.getCoordsFromSquare(i,f.flipped);return m?.dragPiece({coords:y,square:i},t),ne.States.PieceDragging},[x.UserEvents.PointerdownRight]:({context:t,data:{square:r},UpdateParams:i})=>{const{options:o}=t;if(!(!o.enabled||o.disableUserMarkings))return i.setMarkingStartSquare(r),ne.States.AddingMarkings}};function jp({api:t,move:r,plyDiff:i,pieceSquare:o}){var s;const l=o&&((s=t.getPieces().getCollection()[o])==null?void 0:s.color);return!r||i!==1||!l||l===r.color&&!r.userGenerated?!0:r.from===o||r.to===o}const ny={anyAPIEvent:({context:t,data:{holdSelectedPiece:r,move:i,plyDiff:o},params:{draggingPiece:s},UpdateParams:l})=>{const{renderer:c}=t;return s&&!r&&jp({api:t.api,move:i,pieceSquare:s,plyDiff:o})?(l.resetElevatedState(),c?.dropPiece(s,t),ne.States.Idle):ne.States.PieceDragging},[x.UserEvents.MousedownRight]:({context:t,params:{draggingPiece:r},UpdateParams:i})=>{const{renderer:o}=t;if(!r)throw new $i({code:Ni.BadData,message:"Attempted to pointerdown on a dragging piece but dragging piece is null or undefined"});return i.dropPiece(),i.deselectPiece(),o?.dropPiece(r,t),ne.States.Idle},[x.UserEvents.Pointermove]:({context:t,data:{coordsInsideBoard:r},params:{draggingPiece:i},UpdateParams:o})=>{const{renderer:s}=t;if(!i)throw new $i({code:Ni.BadData,message:"Attempted to drag a piece but draggingPiece is null or undefined"});return o.dragPiece(r,i),s?.dragPiece({coords:r,square:i},t),ne.States.PieceDragging},[x.UserEvents.Pointerup]:({context:t,data:{keyPressed:r,square:i},params:{draggingPiece:o,selectedPiece:s},UpdateParams:l})=>{var c;const{api:{getMove:f,getPiece:p,getTurn:m,isCheck:v,move:E,playSound:y},mode:M,options:R,queue:D,renderer:W}=t;if(!o)throw new $i({code:Ni.BadData,message:"Attempted to pointerup on a dragging piece but dragging piece is null or undefined"});if(t.options.test){const ut=t.el.querySelector(".dragging");ut?.setAttribute("data-test-dragging","false"),ut?.removeAttribute("dragging")}if(o===i)return l.dropPiece(),W?.dropPiece(o,t),s===i||R.moveMethod===Rr.MoveMethods.DragOnly?(l.deselectPiece(),ne.States.Idle):(l.selectPiece(o),ne.States.PieceSelected);s&&l.deselectPiece();const Te={from:o,to:i},dt=f(Te),Ie=M.isAllowedToMove()&&dt?ze(Ee({},dt),{animate:!1,userGenerated:!0,userGeneratedDrop:!0}):!1;if(!Ie){l.dropPiece(),M.handleIllegalMove&&D.add(M.handleIllegalMove,Te);const ut=v();let Tt=!1;return((c=p(o))==null?void 0:c.color)===m()&&ut&&(R.playSounds&&D.add(y,ue.BoardSounds.Illegal),Tt=ut),W?.illegalMove(Tt,t),W?.dropPiece(o,t),R.moveMethod===Rr.MoveMethods.DragOnly?(l.deselectPiece(),ne.States.Idle):(l.selectPiece(o),ne.States.PieceSelected)}return js(Ie)?!R.autoPromote||r==="alt"?(l.dragPiece({},o),l.showPromotionArea(Ie),W?.dragPiece({square:o,toSquare:Ie.to},t),W?.openPromotionWindow(Ie,t),ne.States.PromotionAreaShowing):(l.dropPiece(),W?.dropPiece(Ie.to,t),D.add(E,ze(Ee({},Ie),{promotion:Ct.Piece.Types.Queen})),ne.States.Idle):(l.dropPiece(),i===null&&M.getOptions().canDropOffBoard?W?.removePiece(o,t):W?.dropPiece(i,t),D.add(E,Ie),ne.States.Idle)}},ry={anyAPIEvent:({context:t,data:{holdSelectedPiece:r,move:i,plyDiff:o},params:{selectedPiece:s},UpdateParams:l})=>!r&&jp({api:t.api,move:i,pieceSquare:s,plyDiff:o})?(l.resetElevatedState(),ne.States.Idle):ne.States.PieceSelected,[x.UserEvents.PointerdownLeft]:({context:t,data:{coords:r,keyPressed:i,square:o},params:{selectedPiece:s},UpdateParams:l})=>{const{api:{getMove:c,getPieces:f,move:p},mode:{isAllowedToMove:m},options:v,queue:E,renderer:y,state:M}=t;if(!s)throw new $i({code:Ni.BadData,message:"Attempted to interact with a selectedPiece but selectedPiece is null or undefined"});if(o===s){const dt=v.moveMethod===Rr.MoveMethods.Drag||v.moveMethod===Rr.MoveMethods.DragOnly?r:y?.getCoordsFromSquare(o,v.flipped)||r;return l.dragPiece(dt,s),v.moveMethod===Rr.MoveMethods.Click&&M.set({hideHoverSquare:!0}),y?.dragPiece({coords:dt,square:s},t),ne.States.PieceDragging}const R={from:s,to:o},D=f(),W=c(R),Te=m()&&W?ze(Ee({},W),{userGenerated:!0}):!1;if(!Te){if(l.deselectPiece(),!D.isDefined(o))return ne.States.Idle;if(v.moveMethod===Rr.MoveMethods.Click){const dt=y?.getCoordsFromSquare(o,v.flipped)||r;return l.dragPiece(dt,o),M.set({hideHoverSquare:!0}),y?.dragPiece({coords:dt,square:o},t),ne.States.PieceDragging}return l.dragPiece(r,o),y?.dragPiece({coords:r,square:o},t),ne.States.PieceDragging}return js(Te)?!v.autoPromote||i==="alt"?(l.deselectPiece(),l.dragPiece({},s),l.showPromotionArea(Te),y?.dragPiece({square:s,toSquare:Te.to},t),y?.openPromotionWindow(Te,t),ne.States.PromotionAreaShowing):(l.deselectPiece(),E.add(p,Te,ze(Ee({},Te),{promotion:Ct.Piece.Types.Queen})),ne.States.Idle):(l.deselectPiece(),E.add(p,Te),ne.States.Idle)},[x.UserEvents.PointerdownRight]:({context:t,data:{square:r},UpdateParams:i})=>{const{options:o}=t;if(!(!o.enabled||o.disableUserMarkings))return i.deselectPiece(),i.setMarkingStartSquare(r),ne.States.AddingMarkings}};function bc({context:t,params:{draggingPiece:r},UpdateParams:i}){const{renderer:o}=t;return i.dropPiece(),i.cancelPromotion(),o?.dropPiece(r,t),o?.closePromotionWindow(t),ne.States.Idle}const iy={anyAPIEvent:t=>t.type===x.APIEvents.Move?ne.States.PromotionAreaShowing:bc(t),[x.BoardEvents.PromotionPiecePointerdown]:({context:t,data:{piece:r},params:{draggingPiece:i,promotionMove:o},UpdateParams:s})=>{const{api:{move:l},queue:c,renderer:f}=t;return s.dropPiece(),s.cancelPromotion(),f?.dropPiece(i,t),f?.closePromotionWindow(t),o&&c.add(l,{animate:!1,flags:o.flags,from:o.from,piece:Ct.Piece.Types.Pawn,promotion:r,to:o.to,userGenerated:!0}),ne.States.Idle},[x.BoardEvents.PromotionAreaClosePointerdown]:bc,[x.UserEvents.PointerdownLeft]:bc,[x.UserEvents.PointerdownRight]:bc},cl={createUpdateParams:ey,getCurrentState:()=>ne.States.Idle,getParams:()=>({draggingCoords:void 0,draggingPiece:void 0,markingStartSquare:void 0,promotionMove:void 0,selectedPiece:void 0}),states:{[ne.States.AddingMarkings]:Jb,[ne.States.PieceDragging]:ny,[ne.States.Idle]:ty,[ne.States.PromotionAreaShowing]:iy,[ne.States.PieceSelected]:ry}};function oy(){const t=cl.getParams(),r=cl.createUpdateParams(t);let i=cl.getCurrentState();const o=[Qn.Events.Tick];return function(c,f){if(o.includes(c.type))return;const{state:p}=f;p.set({draggingPiece:t.draggingPiece,machineState:i,promotionMove:t.promotionMove,selectedPiece:t.selectedPiece});const m=Xb(c)&&!Qb(c.type)?"anyAPIEvent":c.type;if(!cl.states[i]||!cl.states[i][m]){p.set({machineState:i});return}const v=cl.states[i][m]({context:f,data:c.data,params:t,UpdateParams:r,type:c.type}),E=i;if(i=v||i,E!==i&&(i===ne.States.PieceDragging?document.onselectstart=()=>!1:E===ne.States.PieceDragging&&(document.onselectstart=null)),!s())throw{data:{draggingPiece:t.draggingPiece,machineState:i,oldState:E,selectedPiece:t.selectedPiece},error:new $i({code:Ni.InvalidStateMachine,message:"The machine parameters and state do not match up."})};p.set({draggingPiece:t.draggingPiece,machineState:i,selectedPiece:t.selectedPiece})};function s(){return i===ne.States.Idle?!t.draggingPiece&&!t.selectedPiece:i===ne.States.PieceDragging?!!t.draggingPiece:i===ne.States.PieceSelected?!t.draggingPiece&&!!t.selectedPiece:!0}}function ay(t,r){if(!t.beforeState)return!0;let i=!0;return t.beforeState.forEach(o=>{sy(o,r)===!1&&(i=!1)}),i}function sy(t,r){if(t.condition(...r))return t.handler(...r)}function $p(t,r){if(!t.match)return;t.match.forEach(o=>i(o,r));function i(o,s){o.condition(...s)&&o.handler(...s)}}function Wp(t){return t.reduce((r,i)=>(i.afterRender?r.afterRender.push(i):r.beforeRender.push(i),r),{beforeRender:[],afterRender:[]})}function ly({params:t,plugins:r}){const i=Yb({params:t,run:c}),o=oy();return{getContext:s,getMode:l,run:c,setMode:f,setRenderer:p};function s(){return i}function l(){return i.mode}function c(v){const{api:{logger:E}}=i;E.log({code:x.LogCodes.Event,data:v}),i.reset();const y=r.get();m(v,y)&&o(v,i);const{beforeRender:R,afterRender:D}=Wp(y);try{R.forEach(W=>$p(W,[v,i])),i.queue.flush(),D.forEach(W=>$p(W,[v,i])),i.queue.flush(),E.log({code:x.LogCodes.State,data:i.state.get()})}catch(W){throw E.log({code:x.LogCodes.State,data:ze(Ee({},W.data),{event:v,queue:i.queue,state:i.state.get()}),level:oe.Levels.Error}),W}}function f(v){i.setMode(v)}function p(v){i.setRenderer(v)}function m(v,E){return E.every(y=>ay(y,[v,i]))}}function yc(t){return t.altKey?$r.Alt:t.ctrlKey?$r.Ctrl:t.shiftKey?$r.Shift:$r.None}function qp(t){return t.touches!==void 0}function Cs(t){return!qp(t)&&t.which===3}function dl(t){setTimeout(t)}function uy({el:t,getPointerPosition:r,options:i,run:o}){const s=g_(p);return{handleDocumentPointerdown:l,handlePointerdown:c,handlePointermove:s,handlePointerup:m};function l(v){const E=Cs(v)?x.UserEvents.PointerdownRight:x.UserEvents.PointerdownLeft,y=vi(E);return y.data={square:null},o(y)}function c(v){v.stopPropagation(),document.addEventListener(qs,s),document.addEventListener(Xu,m);const E=Cs(v)?x.UserEvents.PointerdownRight:x.UserEvents.PointerdownLeft,y=vi(E);return y.data=ze(Ee({},r({el:t,event:v,flipped:i.flipped})),{keyPressed:yc(v)}),dl(function(){document.addEventListener(di.Mousedown,f,{once:!0})}),o(y)}function f(v){const E=Cs(v)?x.UserEvents.MousedownRight:x.UserEvents.MousedownLeft,y=vi(E);return y.data=ze(Ee({},r({el:t,event:v,flipped:i.flipped})),{keyPressed:yc(v)}),o(y)}function p(v){const E=vi(x.UserEvents.Pointermove);E.data=ze(Ee({},r({el:t,event:v,flipped:i.flipped})),{keyPressed:yc(v)}),o(E)}function m(v){document.removeEventListener(di.Mousedown,f),document.removeEventListener(qs,s),document.removeEventListener(Xu,m);const E=vi(x.UserEvents.Pointerup);return E.data=ze(Ee({},r({el:t,event:v,flipped:i.flipped})),{keyPressed:yc(v)}),o(E)}}var Kp;(function(t){(function(r){r.CreateFailure="CreateFailure"})(t.LogCodes||(t.LogCodes={}))})(Kp||(Kp={}));function wc(t){return(Array.isArray(t)?t:[t]).map(i=>{var o;return`${i.name} (requires: ${(o=i.requires)==null?void 0:o.join(", ")})`}).join(", ")}function If(t,r=new Map){return!t||t.every(i=>r.has(i))}function Zp(t,r=new Map){return Ec(t,r,new Map)}function Ec(t,r,i){if(t.size===0)return i;const o=t.size,s=new Map([...r.entries(),...i.entries()]);return t.forEach(l=>{If(l.requires,s)&&(i.set(l.name,l),t.delete(l.name))}),o===t.size?(i.clear(),i):Ec(t,r,i)}function O8(t,r){if(t.length===0)return[];const i=new Map(t.map(l=>[l.name,l])),o=new Map(r.map(l=>[l.name,l])),s=Zp(i,o);if(s.size===0){const l=wc(t);throw new Error(`Required plugins do not exist: ${l}`)}return[...s.values()]}function x8(t=[],r){const i=Gd();return i.addMany(t),{add:s,addMany:s,get:i.getAll,has:i.has,remove:l,setCreatePluginContext:i.setContext};function o(c){const f=i.getContext();if(!f)return;const{api:p,apiOverrides:m,modeOverrides:v,name:E}=c;p&&(c.destroyAPIMethods=f.api.extendAPI(E,{[E]:p})),m&&(c.destroyAPIOverrides=f.api.overrideAPI(E,m)),v&&(c.destroyModeOverrides=f.mode.extendMode(v))}function s(c){const f=Array.isArray(c)?c:[c];O8(f,i.getAll()).forEach(m=>{if(i.has(m.name)&&i.remove(m.name),o(m),!i.add(m)){const{name:E}=m;r?.log({code:Kp.LogCodes.CreateFailure,data:{currentPlugins:i.getAll().map(y=>y.name),data:wc(c),plugin:E},level:oe.Levels.Error,message:`Could not create ${E} plugin`}),l(m.name)}})}function l(c){var f,p,m;if(!i.has(c))return;const v=i.getOne(c);i.remove(c),(f=v?.destroyAPIMethods)==null||f.call(v),(p=v?.destroyAPIOverrides)==null||p.call(v),(m=v?.destroyModeOverrides)==null||m.call(v)}}var Ac;(function(t){(function(r){r.Default="staunton_executive",r.Trigger="real3d"})(t.PieceStyles||(t.PieceStyles={})),function(r){r.CameraSettings="cameraSettings"}(t.CacheKeys||(t.CacheKeys={})),function(r){r.Board="board-webgl-3d",r.PieceDrag="piece-dragging",r.PieceHover="piece-hover",r.PromotionWindow="promotion-window-3d",r.StatisticsPanel="statistics-panel"}(t.CssClasses||(t.CssClasses={})),function(r){r[r.AnalysisOverlay=1]="AnalysisOverlay",r[r.NotationPlane=2]="NotationPlane",r[r.OverSquare=3]="OverSquare",r[r.HighligtedSquare=4]="HighligtedSquare",r[r.Hint=5]="Hint",r[r.CustomItem=6]="CustomItem",r[r.PieceShadow=7]="PieceShadow",r[r.Arrow=8]="Arrow",r[r.Effect=9]="Effect",r[r.Highest=10]="Highest"}(t.ObjectsRenderOrder||(t.ObjectsRenderOrder={})),function(r){r[r.PositionY=.005]="PositionY"}(t.Arrow||(t.Arrow={})),function(r){r[r.PositionY=.005]="PositionY"}(t.CustomItem||(t.CustomItem={})),function(r){r[r.PositionY=.005]="PositionY"}(t.Effect||(t.Effect={})),function(r){r[r.Size=10]="Size",r[r.HalfSize=5]="HalfSize",r[r.BorderSize=.5]="BorderSize",r[r.OverBorderSize=.5]="OverBorderSize",r[r.VisibleY=.005]="VisibleY",r[r.InvisibleY=-.2]="InvisibleY",r[r.InsideTolerance=.01]="InsideTolerance"}(t.Square||(t.Square={})),function(r){r[r.MarginSize=4]="MarginSize",r[r.Size=88]="Size"}(t.Board||(t.Board={})),function(r){r[r.Distance=140]="Distance",r[r.DistanceMin=50]="DistanceMin",r[r.DistanceMax=500]="DistanceMax",r[r.PanAngle=0]="PanAngle",r[r.TiltAngle=100]="TiltAngle",r[r.HorizontalPanning=0]="HorizontalPanning",r[r.VerticalPanning=-12]="VerticalPanning",r[r.ZoomIncrement=5]="ZoomIncrement"}(t.Camera||(t.Camera={}))})(Ac||(Ac={}));function I8(t){return t===w.Types.WebGL3D?Promise.all([we.e(525),we.e(804)]).then(we.bind(we,2804)):t===w.Types.WebGL2D?Promise.all([we.e(525),we.e(155)]).then(we.bind(we,2155)):we.e(442).then(we.bind(we,8442))}function Rf(t){const{Arcade:r,Natural:i}=Rr.Animation.Types;return(t.themeAssets?t.themeAssets.config.perspective===Wn.Perspective.REAL_3D:t.pieceStyle===Ac.PieceStyles.Trigger)?w.Types.WebGL3D:[r,i].includes(t.animationType)?w.Types.WebGL2D:w.Types.Default}function Nf(t){return I8(Rf(t))}function R8(t={},r,i,o){var s;const l=Rf(i),c=l!==o,f=l===w.Types.WebGL2D,p="animationType"in t,m=t.animationType!==r.animationType,v=f&&p&&m;return(t.themeAssets&&t.themeAssets.config.perspective!==((s=r.themeAssets)==null?void 0:s.config.perspective)||Object.keys(t).some(M=>w.TriggerOptions.includes(M)))&&(c||v)}function N8(t){const r=Rf(t);if(!(r===w.Types.WebGL2D||r===w.Types.WebGL3D)||(typeof window.hasWebGLSupport>"u"&&(window.hasWebGLSupport=o()),window.hasWebGLSupport))return!0;return dy(t,r===w.Types.WebGL3D),!1;function o(){const s=document.createElement("canvas"),l=s.getContext("webgl")||s.getContext("experimental-webgl");return!!l&&l instanceof WebGLRenderingContext}}function dy(t,r=!1){const{pieceStyle:i,animationType:o}=xe();t.animationType=o,r&&(t.pieceStyle=i,t.themeAssets&&(t.themeAssets=dn(t.themeAssets)))}function L8(t){switch(t){case"../analysis/index.ts":return Promise.resolve().then(function(){return sf});case"../capture-the-star/index.ts":return Promise.resolve().then(function(){return hf});case"../exploring/index.ts":return Promise.resolve().then(function(){return _p});case"../guess-the-move/index.ts":return Promise.resolve().then(function(){return yp});case"../observing/index.ts":return Promise.resolve().then(function(){return hc});case"../passive-observing/index.ts":return Promise.resolve().then(function(){return Ef});case"../playing/index.ts":return Promise.resolve().then(function(){return Cp});case"../setup/index.ts":return Promise.resolve().then(function(){return nb});default:return new Promise(function(r,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}async function B8(t){return L8(`../${t.toLowerCase()}/index.ts`)}function D8(t){return function(){return t.state.get().machineState===ne.States.PieceDragging}}const F8="1.29.0";function Vo({api:t,apiOptions:r,el:i,emitter:o,init:s,logger:l,mode:c,options:f=xe(),plugins:p=nl(),renderer:m}){const v=t||Zb({eventEmitter:o,logger:l,options:r||{}}),E=Ee(Ee({},xe()),f);i.id=`board-${E.id}`;const y=x8(),M=Br();let R,D;const W=ly({params:{api:v,el:i,options:E},plugins:y});y.setCreatePluginContext(W.getContext());const Te=Object.assign(v,{destroy:ut,getMode:W.getMode,getOptions:rr,getVersion:()=>F8,isDragging:D8(W.getContext()),getRenderer:()=>R,playSound:pn,plugins:y,resize:Dt,run:Fn,setMode:Qt,setOptions:ar,setRenderer:M}),dt=Qt(c);return"name"in dt?Ie():dt.then(Ie),Te;function Ie(){y.add(p),Fn(vi(x.InstanceEvents.Create)),i.addEventListener("contextmenu",dr=>(dr.stopPropagation(),dr.preventDefault(),!1)),v.onAll(Fn),v.emit(x.InstanceEvents.Create,vi(x.InstanceEvents.Create,W.getMode().name)),M(m).then(()=>{s&&v.load(s)})}function ut(){Tt(),v.offAll(Fn);const dr=vi(x.InstanceEvents.Destroy);Fn(dr),v.emit(x.InstanceEvents.Destroy,dr)}function Tt(){W.setRenderer(),R?.offAll(v.logger.log),R?.destroy(),R=void 0,i.removeEventListener(No,D?.handlePointerdown),document.removeEventListener(No,D?.handleDocumentPointerdown),document.removeEventListener(qs,D?.handlePointermove),document.removeEventListener(Xu,D?.handlePointerup)}function rr(){return Ee({},E)}function Fn(dr){return W.run(dr),dr}function pn(dr){Fn(vi(x.SoundEvents.Play,{sound:dr}))}function Dt(dr,Gr){Fn(vi(x.UIEvents.Resize,{height:Gr,width:dr}))}function Qt(dr){return"modeType"in dr?B8(dr.modeType).then(Gr=>{const lr=Gr.create(dr.options);return Vn(lr)}):Vn(dr)}function Vn(dr){var Gr,lr;const ki=W&&W.getMode();ki&&((Gr=ki.plugins)==null||Gr.forEach(Oi=>y.remove(Oi.name)),y.get().forEach(Oi=>{var br;return(br=Oi.destroyModeOverrides)==null?void 0:br.call(Oi)}),(lr=ki.destroy)==null||lr.call(ki));const io=dr(v);return v.usePlayingAs(io.usePlayingAs),io.plugins&&y.add(io.plugins),y.get().forEach(Oi=>Oi.modeOverrides&&io.extendMode(Oi.modeOverrides)),W&&(W.setMode(io),Fn(vi(x.InstanceEvents.ModeChanged)),v.emit(x.InstanceEvents.ModeChanged,vi(x.InstanceEvents.ModeChanged,W.getMode().name))),io}function ar(dr){const Gr=Ee({},E);Object.assign(E||{},dr),dr&&R&&R8(dr,Gr,E,R.name)&&M(),v.emit(x.OptionsEvents.Update,vi(x.OptionsEvents.Update,dr))}function Br(){const dr=tu();return async function(ki){dr.add(Gr,ki)};async function Gr(lr){if(Tt(),lr)R=lr;else try{N8(E)||v.emit(x.InstanceEvents.RendererSetFailed,vi(x.InstanceEvents.RendererSetFailed,{message:"WebGL is not supported by the browser. Will fallback to default.",isWebGLRenderError:!0})),R=(await Nf(E)).createRenderer({el:i,options:E})}catch(ki){v.emit(x.InstanceEvents.RendererSetFailed,vi(x.InstanceEvents.RendererSetFailed,{message:"Problem creating renderer. Will fallback to default.",error:ki})),dy(E,!0),R=(await Nf(E)).createRenderer({el:i,options:E})}W.setRenderer(R),Object.assign(Te,{animationComplete:R.animationComplete,getPointerPosition:R.getPointerPosition,isAnimating:R.isAnimating}),D=uy({el:i,getPointerPosition:R.getPointerPosition,options:E,run:Fn}),i.addEventListener(No,D.handlePointerdown),document.addEventListener(No,D.handleDocumentPointerdown),R.onAll(v.logger.log),R.on(x.InstanceEvents.WebGLAssetsInitialized,()=>{v.emit(x.InstanceEvents.WebGLAssetsInitialized,{type:x.InstanceEvents.WebGLAssetsInitialized})}),v.emit(x.InstanceEvents.RendererSet,vi(x.InstanceEvents.RendererSet,R.name))}}}function Yp(t){return t===Ct.ColorsAsLetters.Black||t===Ct.ColorsAsWords.Black?Ct.ColorsAsNumbers.Black:Ct.ColorsAsNumbers.White}function fy({game:t,piece:r,toSquare:i}){const[o,s]=r;if(i&&r&&t.getMode().isAllowedToMove()){const l=t.move({color:Yp(o),drop:s,to:i,userGenerated:!0});return l?.type==="Move"}return!1}function hy(t,r){return typeof t.getPlayingAs()>"u"?!0:t.getPlayingAs()===Yp(r)}function Lf(t,r){const i=document.createElement("style");return document.head.append(i),{getPieceStyles:l,removePieceStyleElement:o,updatePieceStyle:c};function o(){i.remove()}function s(f){const{path:p,format:m,isPseudo3d:v}=r[f],E=da(p),y=v?"::after":"";return Nt.reduce((M,R)=>`${M} .hand-piece.${R}${y} { background-image: url('${E}/${R}.${m}'); }`,"")}function l(f,p){if(!p)return s(f);const m=p.config.perspective===Wn.Perspective.PSEUDO_3D?"::after":"",v=p.config.perspective===Wn.Perspective.REAL_3D?zo:p.pieces.assets;return Wn.pieceShortNames.reduce((E,y)=>`${E} .hand-piece.${y}${m} { background-image: url('${v[y]}'); }`,"")}function c(f,p){i.innerHTML=l(f,p);const m=p?p.config.perspective===Wn.Perspective.PSEUDO_3D:r[f].isPseudo3d;t(!!m)}}var la;(function(t){(function(r){r.BodyDragging="hand-pieces-dragging-body",r.Component="hand-pieces",r.Dragging="dragging",r.Flipped="flipped",r.Horizontal="horizontal",r.Piece="hand-piece",r.Pseudo3d="pseudo3d",r.Vertical="vertical",r.WithKing="with-king"})(t.Classes||(t.Classes={})),function(r){r.Horizontal="horizontal",r.Vertical="vertical"}(t.DisplayDirections||(t.DisplayDirections={}))})(la||(la={}));var mi;(function(t){t.Dragging="dragging",t.Idle="idle",t.Selected="selected"})(mi||(mi={}));var bo;(function(t){t.RESET="RESET",t.PLACE="PLACE",t.SELECT="SELECT",t.DESELECT="DESELECT",t.START_DRAG="START_DRAG",t.MOVE="MOVE"})(bo||(bo={}));var Q4='.hand-piece.svelte-1ux6m6s.svelte-1ux6m6s{background-size:cover;cursor:-webkit-grab;cursor:grab;position:absolute}.hand-piece.dragging.svelte-1ux6m6s.svelte-1ux6m6s{cursor:-webkit-grabbing;cursor:grabbing;position:fixed;will-change:left, top;z-index:11 !important}.hand-piece.hidden.svelte-1ux6m6s.svelte-1ux6m6s{display:none}body.hand-pieces-dragging-body{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.hand-pieces.svelte-1ux6m6s.svelte-1ux6m6s{height:100%;position:relative;width:100%}.hand-pieces.horizontal.svelte-1ux6m6s.svelte-1ux6m6s{height:auto;padding-top:calc(100% * 2 / (10 / 2))}.hand-pieces.horizontal.with-king.svelte-1ux6m6s.svelte-1ux6m6s{height:auto;padding-top:calc(100% * 2 / (12 / 2))}.board .hand-pieces.svelte-1ux6m6s.svelte-1ux6m6s{left:calc(-1 * calc(100% / 10));position:absolute;width:calc(100% / 10)}.board-webgl-3d .hand-pieces.svelte-1ux6m6s.svelte-1ux6m6s{left:calc(-1 * calc(100% / 10 * 3 / 4));width:calc(100% / 10 * 3 / 4)}.board-webgl-3d .hand-pieces.with-king.svelte-1ux6m6s.svelte-1ux6m6s{left:calc(-1 * calc(100% / 12 * 3 / 4));width:calc(100% / 12 * 3 / 4)}.hand-pieces.svelte-1ux6m6s .hand-piece-count.svelte-1ux6m6s{align-items:center;background:#fff;border-radius:50%;bottom:0;color:#262421;display:flex;font-size:100%;font-weight:900;height:30%;justify-content:center;position:absolute;right:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:30%}.hand-pieces.svelte-1ux6m6s .hand-piece.svelte-1ux6m6s{height:calc(100% / 10);width:100%}.hand-pieces.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{top:calc(100% / 10 * (1 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{top:calc(100% / 10 * (2 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{top:calc(100% / 10 * (3 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{top:calc(100% / 10 * (4 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{top:calc(100% / 10 * (5 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{top:calc(100% / 10 * (6 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{top:calc(100% / 10 * (7 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{top:calc(100% / 10 * (8 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{top:calc(100% / 10 * (9 - 1))}.hand-pieces.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{top:calc(100% / 10 * (10 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{top:calc(100% / 10 * (1 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{top:calc(100% / 10 * (2 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{top:calc(100% / 10 * (3 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{top:calc(100% / 10 * (4 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{top:calc(100% / 10 * (5 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{top:calc(100% / 10 * (6 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{top:calc(100% / 10 * (7 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{top:calc(100% / 10 * (8 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{top:calc(100% / 10 * (9 - 1))}.hand-pieces.flipped.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{top:calc(100% / 10 * (10 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.svelte-1ux6m6s{height:calc(100% / 12)}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{top:calc(100% / 12 * (1 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{top:calc(100% / 12 * (2 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{top:calc(100% / 12 * (3 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{top:calc(100% / 12 * (4 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{top:calc(100% / 12 * (5 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.bk.svelte-1ux6m6s{top:calc(100% / 12 * (6 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.wk.svelte-1ux6m6s{top:calc(100% / 12 * (7 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{top:calc(100% / 12 * (8 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{top:calc(100% / 12 * (9 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{top:calc(100% / 12 * (10 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{top:calc(100% / 12 * (11 - 1))}.hand-pieces.with-king.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{top:calc(100% / 12 * (12 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{top:calc(100% / 12 * (1 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{top:calc(100% / 12 * (2 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{top:calc(100% / 12 * (3 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{top:calc(100% / 12 * (4 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{top:calc(100% / 12 * (5 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.wk.svelte-1ux6m6s{top:calc(100% / 12 * (6 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.bk.svelte-1ux6m6s{top:calc(100% / 12 * (7 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{top:calc(100% / 12 * (8 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{top:calc(100% / 12 * (9 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{top:calc(100% / 12 * (10 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{top:calc(100% / 12 * (11 - 1))}.hand-pieces.with-king.flipped.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{top:calc(100% / 12 * (12 - 1))}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.svelte-1ux6m6s{height:50%;width:calc(100% / (10 / 2))}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{left:calc(100% / 5 * (1 - 1));top:0}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{left:calc(100% / 5 * (2 - 1));top:0}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{left:calc(100% / 5 * (3 - 1));top:0}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{left:calc(100% / 5 * (4 - 1));top:0}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{left:calc(100% / 5 * (5 - 1));top:0}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{left:calc(100% / 5 * (1 - 1));top:50%}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{left:calc(100% / 5 * (2 - 1));top:50%}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{left:calc(100% / 5 * (3 - 1));top:50%}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{left:calc(100% / 5 * (4 - 1));top:50%}.hand-pieces.horizontal.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{left:calc(100% / 5 * (5 - 1));top:50%}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{left:calc(100% / 5 * (1 - 1));top:0}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{left:calc(100% / 5 * (2 - 1));top:0}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{left:calc(100% / 5 * (3 - 1));top:0}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{left:calc(100% / 5 * (4 - 1));top:0}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{left:calc(100% / 5 * (5 - 1));top:0}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{left:calc(100% / 5 * (1 - 1));top:50%}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{left:calc(100% / 5 * (2 - 1));top:50%}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{left:calc(100% / 5 * (3 - 1));top:50%}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{left:calc(100% / 5 * (4 - 1));top:50%}.hand-pieces.horizontal.flipped.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{left:calc(100% / 5 * (5 - 1));top:50%}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.svelte-1ux6m6s{width:calc(100% / (12 / 2))}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{left:calc(100% / 6 * (1 - 1));top:0}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{left:calc(100% / 6 * (2 - 1));top:0}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{left:calc(100% / 6 * (3 - 1));top:0}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{left:calc(100% / 6 * (4 - 1));top:0}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{left:calc(100% / 6 * (5 - 1));top:0}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.bk.svelte-1ux6m6s{left:calc(100% / 6 * (6 - 1));top:0}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{left:calc(100% / 6 * (1 - 1));top:50%}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{left:calc(100% / 6 * (2 - 1));top:50%}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{left:calc(100% / 6 * (3 - 1));top:50%}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{left:calc(100% / 6 * (4 - 1));top:50%}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{left:calc(100% / 6 * (5 - 1));top:50%}.hand-pieces.horizontal.with-king.svelte-1ux6m6s .hand-piece.wk.svelte-1ux6m6s{left:calc(100% / 6 * (6 - 1));top:50%}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{left:calc(100% / 6 * (1 - 1));top:0}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{left:calc(100% / 6 * (2 - 1));top:0}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{left:calc(100% / 6 * (3 - 1));top:0}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{left:calc(100% / 6 * (4 - 1));top:0}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{left:calc(100% / 6 * (5 - 1));top:0}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.wk.svelte-1ux6m6s{left:calc(100% / 6 * (6 - 1));top:0}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{left:calc(100% / 6 * (1 - 1));top:50%}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{left:calc(100% / 6 * (2 - 1));top:50%}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{left:calc(100% / 6 * (3 - 1));top:50%}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{left:calc(100% / 6 * (4 - 1));top:50%}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{left:calc(100% / 6 * (5 - 1));top:50%}.hand-pieces.horizontal.flipped.with-king.svelte-1ux6m6s .hand-piece.bk.svelte-1ux6m6s{left:calc(100% / 6 * (6 - 1));top:50%}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.svelte-1ux6m6s{overflow:visible}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.svelte-1ux6m6s::after{background-position-y:bottom;background-repeat:no-repeat;background-size:contain;bottom:0;content:" ";height:132%;left:0;position:absolute;width:100%}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{z-index:3}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{z-index:4}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{z-index:5}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{z-index:6}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{z-index:7}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{z-index:8}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{z-index:9}.hand-pieces.pseudo3d.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{z-index:10}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{z-index:3}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{z-index:4}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{z-index:5}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{z-index:6}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{z-index:7}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{z-index:8}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{z-index:9}.hand-pieces.pseudo3d.flipped.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{z-index:10}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{z-index:3}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{z-index:4}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{z-index:5}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.bk.svelte-1ux6m6s{z-index:6}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.wk.svelte-1ux6m6s{z-index:7}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{z-index:8}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{z-index:9}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{z-index:10}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{z-index:11}.hand-pieces.pseudo3d.with-king.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{z-index:12}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.wp.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.wb.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.wn.svelte-1ux6m6s{z-index:3}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.wr.svelte-1ux6m6s{z-index:4}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.wq.svelte-1ux6m6s{z-index:5}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.wk.svelte-1ux6m6s{z-index:6}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.bk.svelte-1ux6m6s{z-index:7}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.bq.svelte-1ux6m6s{z-index:8}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.br.svelte-1ux6m6s{z-index:9}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.bn.svelte-1ux6m6s{z-index:10}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.bb.svelte-1ux6m6s{z-index:11}.hand-pieces.pseudo3d.flipped.with-king.svelte-1ux6m6s .hand-piece.bp.svelte-1ux6m6s{z-index:12}.hand-pieces.pseudo3d.horizontal .piece .bp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .bb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .bn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .br.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .bq.svelte-1ux6m6s.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.horizontal .piece .wp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .wb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .wn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .wr.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal .piece .wq.svelte-1ux6m6s.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.horizontal.flipped .piece .wp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .wb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .wn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .wr.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .wq.svelte-1ux6m6s.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.horizontal.flipped .piece .bp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .bb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .bn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .br.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.flipped .piece .bq.svelte-1ux6m6s.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.horizontal.with-king .piece .bp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .bb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .bn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .br.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .bq.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .bk.svelte-1ux6m6s.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.horizontal.with-king .piece .wp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .wb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .wn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .wr.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .wq.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king .piece .wk.svelte-1ux6m6s.svelte-1ux6m6s{z-index:2}.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .wp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .wb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .wn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .wr.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .wq.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .wk.svelte-1ux6m6s.svelte-1ux6m6s{z-index:1}.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .bp.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .bb.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .bn.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .br.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .bq.svelte-1ux6m6s.svelte-1ux6m6s,.hand-pieces.pseudo3d.horizontal.with-king.flipped .piece .bk.svelte-1ux6m6s.svelte-1ux6m6s{z-index:2}.board .hand-pieces.with-king{left:calc(-1 * calc(100% / 12));width:calc(100% / 12)}';function py(t,r,i){const o=t.slice();return o[29]=r[i][0],o[30]=r[i][1],o}function my(t){let r,i=t[30]+"",o;return{c(){r=(0,P.d)("span"),o=(0,P.t)(i),(0,P.h)(r,"class","hand-piece-count svelte-1ux6m6s")},m(s,l){(0,P.j)(s,r,l),(0,P.A)(r,o)},p(s,l){l[0]&256&&i!==(i=s[30]+"")&&(0,P.r)(o,i)},d(s){s&&(0,P.m)(r)}}}function vy(t){let r,i=ah(t[30]),o,s,l,c,f,p,m=i&&my(t);function v(...E){return t[27](t[29],...E)}return{c(){r=(0,P.d)("div"),m&&m.c(),(0,P.h)(r,"class",o=(0,P.J)(`hand-piece ${t[29]} ${Va({hidden:oh(t[30])})} `)+" svelte-1ux6m6s"),(0,P.h)(r,"style",s=`${Va({[t[22]]:ha(t[29],t[9])})}`),(0,P.h)(r,"data-hand-piece",l=t[29]),(0,P.h)(r,"data-hand-piece-selected",c=ha(t[3],mi.Selected)&&ha(t[29],t[9])?t[21]:null)},m(E,y){(0,P.j)(E,r,y),m&&m.m(r,null),f||(p=(0,P.k)(r,"pointerdown",v),f=!0)},p(E,y){t=E,y[0]&256&&(i=ah(t[30])),i?m?m.p(t,y):(m=my(t),m.c(),m.m(r,null)):m&&(m.d(1),m=null),y[0]&256&&o!==(o=(0,P.J)(`hand-piece ${t[29]} ${Va({hidden:oh(t[30])})} `)+" svelte-1ux6m6s")&&(0,P.h)(r,"class",o),y[0]&768&&s!==(s=`${Va({[t[22]]:ha(t[29],t[9])})}`)&&(0,P.h)(r,"style",s),y[0]&256&&l!==(l=t[29])&&(0,P.h)(r,"data-hand-piece",l),y[0]&776&&c!==(c=ha(t[3],mi.Selected)&&ha(t[29],t[9])?t[21]:null)&&(0,P.h)(r,"data-hand-piece-selected",c)},d(E){E&&(0,P.m)(r),m&&m.d(),f=!1,p()}}}function Sc(t){let r,i,o;return{c(){r=(0,P.d)("div"),(0,P.h)(r,"class",i=(0,P.J)(`hand-piece dragging ${t[10]}`)+" svelte-1ux6m6s"),(0,P.h)(r,"style",o=`${Df(t[11].current)}; width: ${t[2]}px; height: ${t[2]}px;`),(0,P.h)(r,"data-hand-piece",t[10]),(0,P.h)(r,"data-hand-piece-dragging","true")},m(s,l){(0,P.j)(s,r,l)},p(s,l){l[0]&1024&&i!==(i=(0,P.J)(`hand-piece dragging ${s[10]}`)+" svelte-1ux6m6s")&&(0,P.h)(r,"class",i),l[0]&2052&&o!==(o=`${Df(s[11].current)}; width: ${s[2]}px; height: ${s[2]}px;`)&&(0,P.h)(r,"style",o),l[0]&1024&&(0,P.h)(r,"data-hand-piece",s[10])},d(s){s&&(0,P.m)(r)}}}function z8(t){let r,i,o=ha(t[3],mi.Dragging),s,l=Object.entries(t[8]),c=[];for(let p=0;p<l.length;p+=1)c[p]=vy(py(t,l,p));let f=o&&Sc(t);return{c(){r=(0,P.d)("div");for(let p=0;p<c.length;p+=1)c[p].c();i=(0,P.u)(),f&&f.c(),(0,P.h)(r,"class",s=(0,P.J)(`${t[4]} ${la.Classes.Component} ${Va({[la.Classes.Flipped]:t[5],[la.Classes.WithKing]:t[6],[la.Classes.Pseudo3d]:t[7]})}`)+" svelte-1ux6m6s")},m(p,m){(0,P.j)(p,r,m);for(let v=0;v<c.length;v+=1)c[v].m(r,null);(0,P.A)(r,i),f&&f.m(r,null),t[28](r)},p(p,m){if(m[0]&6292233){l=Object.entries(p[8]);let v;for(v=0;v<l.length;v+=1){const E=py(p,l,v);c[v]?c[v].p(E,m):(c[v]=vy(E),c[v].c(),c[v].m(r,i))}for(;v<c.length;v+=1)c[v].d(1);c.length=l.length}m[0]&8&&(o=ha(p[3],mi.Dragging)),o?f?f.p(p,m):(f=Sc(p),f.c(),f.m(r,null)):f&&(f.d(1),f=null),m[0]&240&&s!==(s=(0,P.J)(`${p[4]} ${la.Classes.Component} ${Va({[la.Classes.Flipped]:p[5],[la.Classes.WithKing]:p[6],[la.Classes.Pseudo3d]:p[7]})}`)+" svelte-1ux6m6s")&&(0,P.h)(r,"class",s)},i:P.o,o:P.o,d(p){p&&(0,P.m)(r),(0,P.D)(c,p),f&&f.d(),t[28](null)}}}function U8(t,r,i){let o,s,l,c,f,p,m,v,E,{data:y}=r,{game:M}=r,{boardEl:R}=r,{eventHandlers:D}=r,{removePieceStyleElement:W}=r;const{handPieces:Te,currentState:dt,selectedPieceId:Ie,draggingPieceId:ut,dragCoords:Tt,direction:rr,showAllPieces:Fn,flipped:pn,pseudo3d:Dt}=y;(0,P.E)(t,Te,lr=>i(8,p=lr)),(0,P.E)(t,dt,lr=>i(3,o=lr)),(0,P.E)(t,Ie,lr=>i(9,m=lr)),(0,P.E)(t,ut,lr=>i(10,v=lr)),(0,P.E)(t,Tt,lr=>i(11,E=lr)),(0,P.E)(t,rr,lr=>i(4,s=lr)),(0,P.E)(t,Fn,lr=>i(6,c=lr)),(0,P.E)(t,pn,lr=>i(5,l=lr)),(0,P.E)(t,Dt,lr=>i(7,f=lr));let Qt,Vn,ar=V8(M.getOptions()),Br=`background-color: ${ar};`;(0,P.U)(()=>{document.removeEventListener(di.PointerMove,D.move),document.removeEventListener(di.PointerUp,D.placeDrag),document.removeEventListener(di.PointerDown,D.placeSelect),R.removeEventListener(di.PointerDown,D.placeSelect),document.removeEventListener(di.Mousedown,D.reset),W()});const dr=(lr,ki)=>D.startDrag({event:ki,piece:lr});function Gr(lr){P.Q[lr?"unshift":"push"](()=>{Qt=lr,i(1,Qt)})}return t.$$set=lr=>{"data"in lr&&i(23,y=lr.data),"game"in lr&&i(24,M=lr.game),"boardEl"in lr&&i(25,R=lr.boardEl),"eventHandlers"in lr&&i(0,D=lr.eventHandlers),"removePieceStyleElement"in lr&&i(26,W=lr.removePieceStyleElement)},t.$$.update=()=>{t.$$.dirty[0]&15&&(o===mi.Dragging?(document.addEventListener(di.PointerMove,D.move),document.addEventListener(di.PointerUp,D.placeDrag),document.body.classList.add(la.Classes.BodyDragging),!Vn&&i(2,Vn=Qt.children[0].clientWidth)):(document.removeEventListener(di.PointerMove,D.move),document.removeEventListener(di.PointerUp,D.placeDrag),document.body.classList.remove(la.Classes.BodyDragging))),t.$$.dirty[0]&33554441&&(o===mi.Selected?(document.addEventListener(di.PointerDown,D.placeSelect),R.addEventListener(di.PointerDown,D.placeSelect)):(document.removeEventListener(di.PointerDown,D.placeSelect),R.removeEventListener(di.PointerDown,D.placeSelect))),t.$$.dirty[0]&9&&(o!==mi.Idle?document.addEventListener(di.Mousedown,D.reset):document.removeEventListener(di.Mousedown,D.reset))},[D,Qt,Vn,o,s,l,c,f,p,m,v,E,Te,dt,Ie,ut,Tt,rr,Fn,pn,Dt,ar,Br,y,M,R,W,dr,Gr]}class H8 extends P.a{constructor(r){super(),(0,P.i)(this,r,U8,z8,P.b,{data:23,game:24,boardEl:25,eventHandlers:0,removePieceStyleElement:26},null,[-1,-1])}}function G8({options:t,target:r,replaceContainer:i=!0}){return eu({ComponentType:H8,options:ze(Ee({},t),{target:r}),replaceContainer:i})}function gy({game:t,square:r}){if(!t.getPieces().isDefined(r))return!1;const i=t.getVariant(),o=i===Ct.Variants.Crazyhouse||i===Ct.Variants.Bughouse,s=t.getPieces().get(r).color===t.getPlayingAs();return o&&s}function _y({game:t,boardEl:r,coords:i}){var o;return(o=t.getPointerPosition({el:r,event:{clientX:i.x,clientY:i.y},flipped:t.getOptions().flipped}))==null?void 0:o.square}function mu(t){var r;const{game:i}=t.getContext();return((r=i?.hand)==null?void 0:r.call(i))||""}function Bf(){const t=Object.values(Ct.Piece.Types);return[...t,...t.map(r=>r.toUpperCase())]}function V8(t){var r,i,o,s;return(s=(o=(r=t.themeAssets)==null?void 0:r.board.config.highlightSquareHex)!=null?o:(i=re(t.boardStyle))==null?void 0:i.highlightColor)!=null?s:Rr.HighlightColors.Selected}function Df(t){return`top: ${t.y}px; left: ${t.x}px; transform: translate(-50%, -50%)`}function by({el:t,event:r}){const{width:i,height:o}=t.getBoundingClientRect();return{height:o,width:i,x:r.clientX,y:r.clientY}}function Ff({coords:t,initialCoords:r}){const{x:i,y:o}=t;if(i===0&&o===0)return!0;const{height:s,width:l,x:c,y:f}=r,p=l/2,m=s/2,v=c-p,E=c+p,y=f+m,M=f-m;return i>=v&&i<=E&&o<=y&&o>=M}function yy(t,r){const i=r.toLowerCase(),s=`${r===i?"b":"w"}${i}`;return t[s]||(t[s]=0),t[s]+=1,t}function wy(t){const{movePiece:r,selectPiece:i,deselectPiece:o,setState:s,startDrag:l,reset:c,afterPlaceAttempt:f}=t.actions,p=mh(Ey(t));return p.onTransition(function({type:v,value:E,nextState:y}){var M;const R=t.data.currentState.get();R!==y&&s(y);const D={[bo.START_DRAG]:l,[bo.MOVE]:r,[bo.DESELECT]:o,[bo.SELECT]:i,[bo.PLACE]:({coords:W})=>f({coords:W,game:t.game,oldState:R,nextState:y}),[bo.RESET]:()=>c(t.game)};(M=D[v])==null||M.call(D,E,y)}),p.on("Enter",function({nextState:v}){v===mi.Selected&&t.game.run({type:x.UserEvents.PointerdownRight,data:{}})}),p}function Ey({game:t,boardEl:r,data:i}){const{draggingPieceId:o,dragCoords:s,selectedPieceId:l,continuousDrop:c}=i;return{initialState:mi.Idle,states:{[mi.Idle]:{START_DRAG:()=>mi.Dragging},[mi.Selected]:{DESELECT:()=>mi.Idle,SELECT:()=>mi.Selected,START_DRAG:()=>mi.Dragging,RESET:()=>mi.Idle,PLACE:({coords:f})=>{if(Ff({coords:f,initialCoords:s.get().initial}))return mi.Idle;const p=_y({game:t,coords:f,boardEl:r});if(p){if(t.plugins.has("premoves")&&gy({game:t,square:p}))return t.run({data:{square:p},type:x.UserEvents.PointerdownLeft}),mi.Idle;if(!fy({game:t,piece:l.get(),toSquare:p})&&gy({game:t,square:p}))return t.run({data:{square:p},type:x.UserEvents.PointerdownLeft}),mi.Idle;if(c.get())return t.getMode().name==="setup"&&t.run({type:x.UserEvents.MousedownRight}),mi.Selected}return mi.Idle}},[mi.Dragging]:{RESET:()=>mi.Idle,MOVE:()=>mi.Dragging,PLACE:({coords:f})=>Ff({coords:f,initialCoords:s.get().initial})?mi.Selected:(fy({game:t,piece:o.get(),toSquare:_y({game:t,coords:f,boardEl:r})}),mi.Idle)}}}}function Ay({handPieces:t,continuousDrop:r,currentState:i,direction:o,dragCoords:s,draggingPieceId:l,flipped:c,pseudo3d:f,selectedPieceId:p,showAllPieces:m}){function v(Dt){i.set(Dt)}function E(Dt){r.set(Dt)}function y(Dt){f.set(Dt)}function M(Dt){c.set(Dt)}function R(Dt){o.set(Dt)}function D(Dt){m.set(Dt)}function W(Dt){p.set(Dt)}function Te(){p.set("")}function dt(Dt){l.set(Dt)}function Ie(Dt){s.update(Qt=>({current:Dt,initial:Qt.initial}))}function ut({piece:Dt,initialCoords:Qt}){dt(Dt),W(""),s.set({current:Qt,initial:Qt}),t.update(Vn=>{const ar=Vn[Dt];return ar>0&&(Vn[Dt]=ar-1),Vn})}function Tt(Dt,Qt=!1){const Vn=m.get();Qt&&dt("");const ar=(Vn?Bf():Dt.split("")).reduce(yy,{});t.set(ar);const Br=l.get();Br&&ar[Br]>0&&t.update(dr=>{const Gr=dr[Br];return Gr>0&&(dr[Br]=Gr-1),dr})}function rr({coords:Dt,game:Qt,oldState:Vn,nextState:ar}){const dr=Vn===mi.Dragging?l.get():"";Tt(mu(Qt),!0),Ff({coords:Dt,initialCoords:s.get().initial})&&W(dr),ar==="idle"&&pn(Qt)}function Fn(Dt){Dt.direction&&R(Dt.direction),M(!!Dt.flipped),D(!!Dt.showAllPieces),E(!!Dt.canDropPiecesContinuously)}function pn(Dt){W(""),Tt(mu(Dt),!0)}return{setState:v,setContinuousDrop:E,setPseudo3d:y,setFlipped:M,setDirection:R,setShowAllPieces:D,selectPiece:W,deselectPiece:Te,dragPiece:dt,movePiece:Ie,startDrag:ut,setHand:Tt,afterPlaceAttempt:rr,setInitialData:Fn,reset:pn}}function Sy(){const t={handPieces:{},continuousDrop:!1,currentState:mi.Idle,direction:"vertical",dragCoords:{current:{x:0,y:0},initial:{x:0,y:0}},draggingPieceId:"",flipped:!1,isPseudo3d:!1,selectedPieceId:"",showAllPieces:!1},r={handPieces:uo(t.handPieces),continuousDrop:uo(t.continuousDrop),currentState:uo(t.currentState),direction:uo(t.direction),dragCoords:uo(t.dragCoords),draggingPieceId:uo(t.draggingPieceId),flipped:uo(t.flipped),pseudo3d:uo(t.isPseudo3d),selectedPieceId:uo(t.selectedPieceId),showAllPieces:uo(t.showAllPieces)};return{data:r,actions:Ay(r)}}function ky(t,{game:r,data:i}){const{currentState:o,selectedPieceId:s,continuousDrop:l}=i;return{startDrag:c,move:f,placeDrag:p,placeSelect:m,reset:v};function c({piece:E,event:y}){y.stopPropagation();const[M]=E;!hy(r,M)||Cs(y)||(l.get()&&s.get()===E?t(bo.DESELECT):l.get()&&o.get()===mi.Selected?t(bo.SELECT,E):t(bo.START_DRAG,{piece:E,initialCoords:by({el:y.currentTarget,event:y})}))}function f({clientX:E,clientY:y}){t(bo.MOVE,{x:E,y})}function p({clientX:E,clientY:y}){t(bo.PLACE,{coords:{x:E,y}})}function m(E){E.stopPropagation(),!Cs(E)&&t(bo.PLACE,{coords:{x:E.clientX,y:E.clientY},targetEl:E.target})}function v(E){E.stopPropagation(),Cs(E)&&(document.oncontextmenu=()=>!1,dl(()=>document.oncontextmenu=()=>!0),t(bo.RESET,{targetEl:E.target}))}}function j8({boardEl:t,containerEl:r,direction:i,showAllPieces:o=!1,canDropPiecesContinuously:s=!1,flipped:l,game:c,pieceStyles:f=On,replaceContainer:p}){const{data:m,actions:v}=Sy(),{setDirection:E,setHand:y,setFlipped:M,setInitialData:R,setPseudo3d:D,setShowAllPieces:W,setContinuousDrop:Te}=v;R({direction:i,showAllPieces:o,flipped:l,canDropPiecesContinuously:s});const dt=wy({data:m,actions:v,boardEl:t,game:c}),Ie=ky(dt.send,{data:m,game:c}),{removePieceStyleElement:ut,updatePieceStyle:Tt}=Lf(D,f);return{destroy:G8({options:{props:{data:m,game:c,boardEl:t,eventHandlers:Ie,removePieceStyleElement:ut}},replaceContainer:p,target:r}).destroy,getHand:()=>mu(c),reset:()=>dt.send(bo.RESET),setDirection:E,setFlipped:M,setHand:y,setShowAllPieces:W,setContinuousDrop:Te,updatePieceStyle:Tt}}function $8({direction:t,el:r,pieceStyles:i,replaceContainer:o}={}){let s;return{create:l,destroy:c,match:[{condition:Ht([x.APIEvents.Load,x.OptionsEvents.Update]),handler:f},{condition:Je(x.OptionsEvents.UpdateMode),handler:v},{condition:Ht([...Io,fe.Events.SetHand]),handler:p},{condition:Je(x.InstanceEvents.ModeChanged),handler:m}],name:fe.Plugin.Name};function l(y){const{api:M,el:R,mode:D}=y,{flipped:W,pieceStyle:Te,themeAssets:dt}=y.options,{canDropPiecesContinuously:Ie}=D.getOptions(),ut=E(D.name);s=j8({boardEl:R,containerEl:r||R,direction:t,flipped:W,game:M,pieceStyles:i,canDropPiecesContinuously:Ie,replaceContainer:o,showAllPieces:ut}),s.updatePieceStyle(Te,dt),s.setHand(s.getHand())}function c(){s.destroy()}function f(y,M){y.type===x.APIEvents.Load&&s.reset();const{flipped:R,pieceStyle:D,themeAssets:W}=M.options;s.setHand(s.getHand()),s.setFlipped(R),s.updatePieceStyle(D,W)}function p(){s.setHand(s.getHand())}function m(y,M){var R;const D=E(y.data),{canDropPiecesContinuously:W}=(R=M.mode)==null?void 0:R.getOptions();s.setContinuousDrop(!!W),s.setShowAllPieces(D)}function v(y){y.data.canDropPiecesContinuously!==void 0&&s.setContinuousDrop(!!y.data.canDropPiecesContinuously)}function E(y){return y===sa.Types.Setup}}function J4(t,r){const i=r||t.getTurn(),o=t.clocks[i],s=t.timeControl.get(),l=s?.increment;return{clock:o,increment:l,moveTime:Ga(o.get().currentTime+l)}}function zf(t,r=150){return`${Ua()}/boards/${t}/${r}.png`}function W8(t){return t===Ct.ColorsAsNumbers.Black?Ct.ColorsAsLetters.Black:Ct.ColorsAsLetters.White}function q8(t){return!t||!t.file||!t.rank||t.file>8||t.rank>8||t.file<1||t.rank<1?null:`${String.fromCharCode(96+t.file)}${t.rank.toString()}`}function Py(t){const r=[{animate:t.animate,from:t.kingTo||t.to,to:t.from}];t.rookMove&&r.push(ze(Ee({},t.rookMove),{from:t.rookMove.to,to:t.rookMove.from}));const i=t.captured&&t.capturedStr?{color:fu(t.color),promoted:t.capturedPromotedPawn,square:t.EPCapturedSquare||t.to,type:t.capturedStr.toLowerCase()}:void 0;return{movedPieces:r,promotedSquare:t.promotion?t.from:void 0,restoredPiece:i}}function Cy(t,r){var i,o;return(o=(i=t&&r[Ct.Node.Marking.JCEColorsMap[t]])!=null?i:t)!=null?o:r.default}const K8={HEAD_HEIGHT:4.5,HEAD_WIDTH:6.5,TAIL_PADDING:4.5,WIDTH:2.75},Z8=27.95084971874737,Y8=[.5,-2],X8=[2,.5,-.5,-2];function Ty({from:t,to:r}){return Math.sqrt((t.x-r.x)**2+(t.y-r.y)**2)}function My({from:t,to:r}){const i=Ty({from:t,to:r}),o={x:t.x,y:t.y+i},s={x:t.x-o.x,y:t.y-o.y},l={x:t.x-r.x,y:t.y-r.y},c=Math.acos((s.x*l.x+s.y*l.y)/i**2),f=Math.floor(c*(180/Math.PI)*100)/100;return t.x<r.x?360-f:f}function Oy({from:t,to:r}){const i=(t.y-r.y)/(t.x-r.x);return Number(i.toFixed(1))}function xy({from:t,slope:r,to:i}){switch(r){case 2:return t.x>i.x?180:0;case-2:return t.x>i.x?0:180;case .5:return t.x>i.x?90:270;case-.5:return t.x>i.x?90:270;default:return 0}}const Uf=/iPhone/i,Ir=/iPod/i,Iy=/iPad/i,Xp=/\bAndroid(?:.+)Mobile\b/i,jo=/Android/i,fl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,kc=/Silk/i,Na=/Windows Phone/i,Ts=/\bWindows(?:.+)ARM\b/i,Pc=/BlackBerry/i,Qp=/BB10/i,Hf=/Opera Mini/i,Jp=/\b(CriOS|Chrome)(?:.+)Mobile/i,em=/Mobile(?:.+)Firefox\b/i;function Lr(t,r){return t.test(r)}function Cc(t){t=t||(typeof navigator<"u"?navigator.userAgent:"");let r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);const i={apple:{phone:Lr(Uf,t)&&!Lr(Na,t),ipod:Lr(Ir,t),tablet:!Lr(Uf,t)&&Lr(Iy,t)&&!Lr(Na,t),device:(Lr(Uf,t)||Lr(Ir,t)||Lr(Iy,t))&&!Lr(Na,t)},amazon:{phone:Lr(fl,t),tablet:!Lr(fl,t)&&Lr(kc,t),device:Lr(fl,t)||Lr(kc,t)},android:{phone:!Lr(Na,t)&&Lr(fl,t)||!Lr(Na,t)&&Lr(Xp,t),tablet:!Lr(Na,t)&&!Lr(fl,t)&&!Lr(Xp,t)&&(Lr(kc,t)||Lr(jo,t)),device:!Lr(Na,t)&&(Lr(fl,t)||Lr(kc,t)||Lr(Xp,t)||Lr(jo,t))||Lr(/\bokhttp\b/i,t)},windows:{phone:Lr(Na,t),tablet:Lr(Ts,t),device:Lr(Na,t)||Lr(Ts,t)},other:{blackberry:Lr(Pc,t),blackberry10:Lr(Qp,t),opera:Lr(Hf,t),firefox:Lr(em,t),chrome:Lr(Jp,t),device:Lr(Pc,t)||Lr(Qp,t)||Lr(Hf,t)||Lr(em,t)||Lr(Jp,t)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}/*!
 * @pixi/settings - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ga=Cc();function Xa(t){var r=!0;if(ga.tablet||ga.phone){if(r=!1,ga.apple.device){var i=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(i){var o=parseInt(i[1],10);o>=11&&(r=!0)}}if(ga.android.device){var s=navigator.userAgent.match(/Android\s([0-9.]*)/);if(s){var l=parseInt(s[1],10);l>=7&&(r=!0)}}}return r?t:4}function Ry(){return!ga.apple.device}var jr={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:Xa(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:ga.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:Ry(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Gf={exports:{}};(function(t){var r=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function s(p,m,v){this.fn=p,this.context=m,this.once=v||!1}function l(p,m,v,E,y){if(typeof v!="function")throw new TypeError("The listener must be a function");var M=new s(v,E||p,y),R=i?i+m:m;return p._events[R]?p._events[R].fn?p._events[R]=[p._events[R],M]:p._events[R].push(M):(p._events[R]=M,p._eventsCount++),p}function c(p,m){--p._eventsCount===0?p._events=new o:delete p._events[m]}function f(){this._events=new o,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],v,E;if(this._eventsCount===0)return m;for(E in v=this._events)r.call(v,E)&&m.push(i?E.slice(1):E);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},f.prototype.listeners=function(m){var v=i?i+m:m,E=this._events[v];if(!E)return[];if(E.fn)return[E.fn];for(var y=0,M=E.length,R=new Array(M);y<M;y++)R[y]=E[y].fn;return R},f.prototype.listenerCount=function(m){var v=i?i+m:m,E=this._events[v];return E?E.fn?1:E.length:0},f.prototype.emit=function(m,v,E,y,M,R){var D=i?i+m:m;if(!this._events[D])return!1;var W=this._events[D],Te=arguments.length,dt,Ie;if(W.fn){switch(W.once&&this.removeListener(m,W.fn,void 0,!0),Te){case 1:return W.fn.call(W.context),!0;case 2:return W.fn.call(W.context,v),!0;case 3:return W.fn.call(W.context,v,E),!0;case 4:return W.fn.call(W.context,v,E,y),!0;case 5:return W.fn.call(W.context,v,E,y,M),!0;case 6:return W.fn.call(W.context,v,E,y,M,R),!0}for(Ie=1,dt=new Array(Te-1);Ie<Te;Ie++)dt[Ie-1]=arguments[Ie];W.fn.apply(W.context,dt)}else{var ut=W.length,Tt;for(Ie=0;Ie<ut;Ie++)switch(W[Ie].once&&this.removeListener(m,W[Ie].fn,void 0,!0),Te){case 1:W[Ie].fn.call(W[Ie].context);break;case 2:W[Ie].fn.call(W[Ie].context,v);break;case 3:W[Ie].fn.call(W[Ie].context,v,E);break;case 4:W[Ie].fn.call(W[Ie].context,v,E,y);break;default:if(!dt)for(Tt=1,dt=new Array(Te-1);Tt<Te;Tt++)dt[Tt-1]=arguments[Tt];W[Ie].fn.apply(W[Ie].context,dt)}}return!0},f.prototype.on=function(m,v,E){return l(this,m,v,E,!1)},f.prototype.once=function(m,v,E){return l(this,m,v,E,!0)},f.prototype.removeListener=function(m,v,E,y){var M=i?i+m:m;if(!this._events[M])return this;if(!v)return c(this,M),this;var R=this._events[M];if(R.fn)R.fn===v&&(!y||R.once)&&(!E||R.context===E)&&c(this,M);else{for(var D=0,W=[],Te=R.length;D<Te;D++)(R[D].fn!==v||y&&!R[D].once||E&&R[D].context!==E)&&W.push(R[D]);W.length?this._events[M]=W.length===1?W[0]:W:c(this,M)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=i?i+m:m,this._events[v]&&c(this,v)):(this._events=new o,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=i,f.EventEmitter=f,t.exports=f})(Gf);var Qa=Gf.exports,Vf={exports:{}};Vf.exports=Tc,Vf.exports.default=Tc;function Tc(t,r,i){i=i||2;var o=r&&r.length,s=o?r[0]*i:t.length,l=jf(t,0,s,i,!0),c=[];if(!l||l.next===l.prev)return c;var f,p,m,v,E,y,M;if(o&&(l=Mc(t,r,l,i)),t.length>80*i){f=m=t[0],p=v=t[1];for(var R=i;R<s;R+=i)E=t[R],y=t[R+1],E<f&&(f=E),y<p&&(p=y),E>m&&(m=E),y>v&&(v=y);M=Math.max(m-f,v-p),M=M!==0?1/M:0}return hl(l,c,i,f,p,M),c}function jf(t,r,i,o,s){var l,c;if(s===_u(t,r,i,o)>0)for(l=r;l<i;l+=o)c=Wf(l,t[l],t[l+1],c);else for(l=i-o;l>=r;l-=o)c=Wf(l,t[l],t[l+1],c);return c&&Os(c,c.next)&&(_l(c),c=c.next),c}function Ja(t,r){if(!t)return t;r||(r=t);var i=t,o;do if(o=!1,!i.steiner&&(Os(i,i.next)||Mi(i.prev,i,i.next)===0)){if(_l(i),i=r=i.prev,i===i.next)break;o=!0}else i=i.next;while(o||i!==r);return r}function hl(t,r,i,o,s,l,c){if(t){!c&&l&&zy(t,o,s,l);for(var f=t,p,m;t.prev!==t.next;){if(p=t.prev,m=t.next,l?tm(t,o,s,l):Ny(t)){r.push(p.i/i),r.push(t.i/i),r.push(m.i/i),_l(t),t=m.next,f=m.next;continue}if(t=m,t===f){c?c===1?(t=Ly(Ja(t),r,i),hl(t,r,i,o,s,l,2)):c===2&&Ms(t,r,i,o,s,l):hl(Ja(t),r,i,o,s,l,1);break}}}}function Ny(t){var r=t.prev,i=t,o=t.next;if(Mi(r,i,o)>=0)return!1;for(var s=t.next.next;s!==t.prev;){if(ml(r.x,r.y,i.x,i.y,o.x,o.y,s.x,s.y)&&Mi(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function tm(t,r,i,o){var s=t.prev,l=t,c=t.next;if(Mi(s,l,c)>=0)return!1;for(var f=s.x<l.x?s.x<c.x?s.x:c.x:l.x<c.x?l.x:c.x,p=s.y<l.y?s.y<c.y?s.y:c.y:l.y<c.y?l.y:c.y,m=s.x>l.x?s.x>c.x?s.x:c.x:l.x>c.x?l.x:c.x,v=s.y>l.y?s.y>c.y?s.y:c.y:l.y>c.y?l.y:c.y,E=vu(f,p,r,i,o),y=vu(m,v,r,i,o),M=t.prevZ,R=t.nextZ;M&&M.z>=E&&R&&R.z<=y;){if(M!==t.prev&&M!==t.next&&ml(s.x,s.y,l.x,l.y,c.x,c.y,M.x,M.y)&&Mi(M.prev,M,M.next)>=0||(M=M.prevZ,R!==t.prev&&R!==t.next&&ml(s.x,s.y,l.x,l.y,c.x,c.y,R.x,R.y)&&Mi(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;M&&M.z>=E;){if(M!==t.prev&&M!==t.next&&ml(s.x,s.y,l.x,l.y,c.x,c.y,M.x,M.y)&&Mi(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;R&&R.z<=y;){if(R!==t.prev&&R!==t.next&&ml(s.x,s.y,l.x,l.y,c.x,c.y,R.x,R.y)&&Mi(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function Ly(t,r,i){var o=t;do{var s=o.prev,l=o.next.next;!Os(s,l)&&nm(s,o,o.next,l)&&gu(s,l)&&gu(l,s)&&(r.push(s.i/i),r.push(o.i/i),r.push(l.i/i),_l(o),_l(o.next),o=t=l),o=o.next}while(o!==t);return Ja(o)}function Ms(t,r,i,o,s,l){var c=t;do{for(var f=c.next.next;f!==c.prev;){if(c.i!==f.i&&Gy(c,f)){var p=$f(c,f);c=Ja(c,c.next),p=Ja(p,p.next),hl(c,r,i,o,s,l),hl(p,r,i,o,s,l);return}f=f.next}c=c.next}while(c!==t)}function Mc(t,r,i,o){var s=[],l,c,f,p,m;for(l=0,c=r.length;l<c;l++)f=r[l]*o,p=l<c-1?r[l+1]*o:t.length,m=jf(t,f,p,o,!1),m===m.next&&(m.steiner=!0),s.push(Hy(m));for(s.sort(pl),l=0;l<s.length;l++)By(s[l],i),i=Ja(i,i.next);return i}function pl(t,r){return t.x-r.x}function By(t,r){if(r=Dy(t,r),r){var i=$f(r,t);Ja(r,r.next),Ja(i,i.next)}}function Dy(t,r){var i=r,o=t.x,s=t.y,l=-1/0,c;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var f=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(f<=o&&f>l){if(l=f,f===o){if(s===i.y)return i;if(s===i.next.y)return i.next}c=i.x<i.next.x?i:i.next}}i=i.next}while(i!==r);if(!c)return null;if(o===l)return c;var p=c,m=c.x,v=c.y,E=1/0,y;i=c;do o>=i.x&&i.x>=m&&o!==i.x&&ml(s<v?o:l,s,m,v,s<v?l:o,s,i.x,i.y)&&(y=Math.abs(s-i.y)/(o-i.x),gu(i,t)&&(y<E||y===E&&(i.x>c.x||i.x===c.x&&Fy(c,i)))&&(c=i,E=y)),i=i.next;while(i!==p);return c}function Fy(t,r){return Mi(t.prev,t,r.prev)<0&&Mi(r.next,t,t.next)<0}function zy(t,r,i,o){var s=t;do s.z===null&&(s.z=vu(s.x,s.y,r,i,o)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,Uy(s)}function Uy(t){var r,i,o,s,l,c,f,p,m=1;do{for(i=t,t=null,l=null,c=0;i;){for(c++,o=i,f=0,r=0;r<m&&(f++,o=o.nextZ,!!o);r++);for(p=m;f>0||p>0&&o;)f!==0&&(p===0||!o||i.z<=o.z)?(s=i,i=i.nextZ,f--):(s=o,o=o.nextZ,p--),l?l.nextZ=s:t=s,s.prevZ=l,l=s;i=o}l.nextZ=null,m*=2}while(c>1);return t}function vu(t,r,i,o,s){return t=32767*(t-i)*s,r=32767*(r-o)*s,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1}function Hy(t){var r=t,i=t;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==t);return i}function ml(t,r,i,o,s,l,c,f){return(s-c)*(r-f)-(t-c)*(l-f)>=0&&(t-c)*(o-f)-(i-c)*(r-f)>=0&&(i-c)*(l-f)-(s-c)*(o-f)>=0}function Gy(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!Vy(t,r)&&(gu(t,r)&&gu(r,t)&&jy(t,r)&&(Mi(t.prev,t,r.prev)||Mi(t,r.prev,r))||Os(t,r)&&Mi(t.prev,t,t.next)>0&&Mi(r.prev,r,r.next)>0)}function Mi(t,r,i){return(r.y-t.y)*(i.x-r.x)-(r.x-t.x)*(i.y-r.y)}function Os(t,r){return t.x===r.x&&t.y===r.y}function nm(t,r,i,o){var s=gl(Mi(t,r,i)),l=gl(Mi(t,r,o)),c=gl(Mi(i,o,t)),f=gl(Mi(i,o,r));return!!(s!==l&&c!==f||s===0&&vl(t,i,r)||l===0&&vl(t,o,r)||c===0&&vl(i,t,o)||f===0&&vl(i,r,o))}function vl(t,r,i){return r.x<=Math.max(t.x,i.x)&&r.x>=Math.min(t.x,i.x)&&r.y<=Math.max(t.y,i.y)&&r.y>=Math.min(t.y,i.y)}function gl(t){return t>0?1:t<0?-1:0}function Vy(t,r){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==r.i&&i.next.i!==r.i&&nm(i,i.next,t,r))return!0;i=i.next}while(i!==t);return!1}function gu(t,r){return Mi(t.prev,t,t.next)<0?Mi(t,r,t.next)>=0&&Mi(t,t.prev,r)>=0:Mi(t,r,t.prev)<0||Mi(t,t.next,r)<0}function jy(t,r){var i=t,o=!1,s=(t.x+r.x)/2,l=(t.y+r.y)/2;do i.y>l!=i.next.y>l&&i.next.y!==i.y&&s<(i.next.x-i.x)*(l-i.y)/(i.next.y-i.y)+i.x&&(o=!o),i=i.next;while(i!==t);return o}function $f(t,r){var i=new bl(t.i,t.x,t.y),o=new bl(r.i,r.x,r.y),s=t.next,l=r.prev;return t.next=r,r.prev=t,i.next=s,s.prev=i,o.next=i,i.prev=o,l.next=o,o.prev=l,o}function Wf(t,r,i,o){var s=new bl(t,r,i);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s}function _l(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function bl(t,r,i){this.i=t,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Tc.deviation=function(t,r,i,o){var s=r&&r.length,l=s?r[0]*i:t.length,c=Math.abs(_u(t,0,l,i));if(s)for(var f=0,p=r.length;f<p;f++){var m=r[f]*i,v=f<p-1?r[f+1]*i:t.length;c-=Math.abs(_u(t,m,v,i))}var E=0;for(f=0;f<o.length;f+=3){var y=o[f]*i,M=o[f+1]*i,R=o[f+2]*i;E+=Math.abs((t[y]-t[R])*(t[M+1]-t[y+1])-(t[y]-t[M])*(t[R+1]-t[y+1]))}return c===0&&E===0?0:Math.abs((E-c)/c)};function _u(t,r,i,o){for(var s=0,l=r,c=i-o;l<i;l+=o)s+=(t[c]-t[l])*(t[l+1]+t[c+1]),c=l;return s}Tc.flatten=function(t){for(var r=t[0][0].length,i={vertices:[],holes:[],dimensions:r},o=0,s=0;s<t.length;s++){for(var l=0;l<t[s].length;l++)for(var c=0;c<r;c++)i.vertices.push(t[s][l][c]);s>0&&(o+=t[s-1].length,i.holes.push(o))}return i};var $y=Vf.exports,yl={},Oc={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,r){(function(i){var o=r&&!r.nodeType&&r,s=t&&!t.nodeType&&t,l=typeof P.V=="object"&&P.V;(l.global===l||l.window===l||l.self===l)&&(i=l);var c,f=2147483647,p=36,m=1,v=26,E=38,y=700,M=72,R=128,D="-",W=/^xn--/,Te=/[^\x20-\x7E]/,dt=/[\x2E\u3002\uFF0E\uFF61]/g,Ie={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ut=p-m,Tt=Math.floor,rr=String.fromCharCode,Fn;function pn(br){throw RangeError(Ie[br])}function Dt(br,Ur){for(var ri=br.length,xi=[];ri--;)xi[ri]=Ur(br[ri]);return xi}function Qt(br,Ur){var ri=br.split("@"),xi="";ri.length>1&&(xi=ri[0]+"@",br=ri[1]),br=br.replace(dt,".");var Pi=br.split("."),po=Dt(Pi,Ur).join(".");return xi+po}function Vn(br){for(var Ur=[],ri=0,xi=br.length,Pi,po;ri<xi;)Pi=br.charCodeAt(ri++),Pi>=55296&&Pi<=56319&&ri<xi?(po=br.charCodeAt(ri++),(po&64512)==56320?Ur.push(((Pi&1023)<<10)+(po&1023)+65536):(Ur.push(Pi),ri--)):Ur.push(Pi);return Ur}function ar(br){return Dt(br,function(Ur){var ri="";return Ur>65535&&(Ur-=65536,ri+=rr(Ur>>>10&1023|55296),Ur=56320|Ur&1023),ri+=rr(Ur),ri}).join("")}function Br(br){return br-48<10?br-22:br-65<26?br-65:br-97<26?br-97:p}function dr(br,Ur){return br+22+75*(br<26)-((Ur!=0)<<5)}function Gr(br,Ur,ri){var xi=0;for(br=ri?Tt(br/y):br>>1,br+=Tt(br/Ur);br>ut*v>>1;xi+=p)br=Tt(br/ut);return Tt(xi+(ut+1)*br/(br+E))}function lr(br){var Ur=[],ri=br.length,xi,Pi=0,po=R,qi=M,Co,Xo,un,In,Mr,ii,Ii,Fi,wi;for(Co=br.lastIndexOf(D),Co<0&&(Co=0),Xo=0;Xo<Co;++Xo)br.charCodeAt(Xo)>=128&&pn("not-basic"),Ur.push(br.charCodeAt(Xo));for(un=Co>0?Co+1:0;un<ri;){for(In=Pi,Mr=1,ii=p;un>=ri&&pn("invalid-input"),Ii=Br(br.charCodeAt(un++)),(Ii>=p||Ii>Tt((f-Pi)/Mr))&&pn("overflow"),Pi+=Ii*Mr,Fi=ii<=qi?m:ii>=qi+v?v:ii-qi,!(Ii<Fi);ii+=p)wi=p-Fi,Mr>Tt(f/wi)&&pn("overflow"),Mr*=wi;xi=Ur.length+1,qi=Gr(Pi-In,xi,In==0),Tt(Pi/xi)>f-po&&pn("overflow"),po+=Tt(Pi/xi),Pi%=xi,Ur.splice(Pi++,0,po)}return ar(Ur)}function ki(br){var Ur,ri,xi,Pi,po,qi,Co,Xo,un,In,Mr,ii=[],Ii,Fi,wi,fr;for(br=Vn(br),Ii=br.length,Ur=R,ri=0,po=M,qi=0;qi<Ii;++qi)Mr=br[qi],Mr<128&&ii.push(rr(Mr));for(xi=Pi=ii.length,Pi&&ii.push(D);xi<Ii;){for(Co=f,qi=0;qi<Ii;++qi)Mr=br[qi],Mr>=Ur&&Mr<Co&&(Co=Mr);for(Fi=xi+1,Co-Ur>Tt((f-ri)/Fi)&&pn("overflow"),ri+=(Co-Ur)*Fi,Ur=Co,qi=0;qi<Ii;++qi)if(Mr=br[qi],Mr<Ur&&++ri>f&&pn("overflow"),Mr==Ur){for(Xo=ri,un=p;In=un<=po?m:un>=po+v?v:un-po,!(Xo<In);un+=p)fr=Xo-In,wi=p-In,ii.push(rr(dr(In+fr%wi,0))),Xo=Tt(fr/wi);ii.push(rr(dr(Xo,0))),po=Gr(ri,Fi,xi==Pi),ri=0,++xi}++ri,++Ur}return ii.join("")}function io(br){return Qt(br,function(Ur){return W.test(Ur)?lr(Ur.slice(4).toLowerCase()):Ur})}function Oi(br){return Qt(br,function(Ur){return Te.test(Ur)?"xn--"+ki(Ur):Ur})}if(c={version:"1.3.2",ucs2:{decode:Vn,encode:ar},decode:lr,encode:ki,toASCII:Oi,toUnicode:io},o&&s)if(t.exports==o)s.exports=c;else for(Fn in c)c.hasOwnProperty(Fn)&&(o[Fn]=c[Fn]);else i.punycode=c})(P.V)})(Oc,Oc.exports);var Q8={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},xc={};function J8(t,r){return Object.prototype.hasOwnProperty.call(t,r)}var Wy=function(t,r,i,o){r=r||"&",i=i||"=";var s={};if(typeof t!="string"||t.length===0)return s;var l=/\+/g;t=t.split(r);var c=1e3;o&&typeof o.maxKeys=="number"&&(c=o.maxKeys);var f=t.length;c>0&&f>c&&(f=c);for(var p=0;p<f;++p){var m=t[p].replace(l,"%20"),v=m.indexOf(i),E,y,M,R;v>=0?(E=m.substr(0,v),y=m.substr(v+1)):(E=m,y=""),M=decodeURIComponent(E),R=decodeURIComponent(y),J8(s,M)?Array.isArray(s[M])?s[M].push(R):s[M]=[s[M],R]:s[M]=R}return s},wl=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},rm=function(t,r,i,o){return r=r||"&",i=i||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(s){var l=encodeURIComponent(wl(s))+i;return Array.isArray(t[s])?t[s].map(function(c){return l+encodeURIComponent(wl(c))}).join(r):l+encodeURIComponent(wl(t[s]))}).join(r):o?encodeURIComponent(wl(o))+i+encodeURIComponent(wl(t)):""};xc.decode=xc.parse=Wy,xc.encode=xc.stringify=rm;var Ic=Oc.exports,$o=Q8,bu=yl.parse=El;yl.resolve=Qy,yl.resolveObject=lm,yl.format=Xy,yl.Url=yo;function yo(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var qf=/^([a-z0-9.+-]+:)/i,qy=/:[0-9]*$/,Ky=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Zy=["<",">",'"',"`"," ","\r",`
`,"	"],Yy=["{","}","|","\\","^","`"].concat(Zy),Kf=["'"].concat(Yy),im=["%","/","?",";","#"].concat(Kf),Zf=["/","?","#"],om=255,yu=/^[+a-z0-9A-Z_-]{0,63}$/,am=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sm={javascript:!0,"javascript:":!0},Rc={javascript:!0,"javascript:":!0},Wo={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Nc=xc;function El(t,r,i){if(t&&$o.isObject(t)&&t instanceof yo)return t;var o=new yo;return o.parse(t,r,i),o}yo.prototype.parse=function(t,r,i){if(!$o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=o!==-1&&o<t.indexOf("#")?"?":"#",l=t.split(s),c=/\\/g;l[0]=l[0].replace(c,"/"),t=l.join(s);var f=t;if(f=f.trim(),!i&&t.split("#").length===1){var p=Ky.exec(f);if(p)return this.path=f,this.href=f,this.pathname=p[1],p[2]?(this.search=p[2],r?this.query=Nc.parse(this.search.substr(1)):this.query=this.search.substr(1)):r&&(this.search="",this.query={}),this}var m=qf.exec(f);if(m){m=m[0];var v=m.toLowerCase();this.protocol=v,f=f.substr(m.length)}if(i||m||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var E=f.substr(0,2)==="//";E&&!(m&&Rc[m])&&(f=f.substr(2),this.slashes=!0)}if(!Rc[m]&&(E||m&&!Wo[m])){for(var y=-1,M=0;M<Zf.length;M++){var R=f.indexOf(Zf[M]);R!==-1&&(y===-1||R<y)&&(y=R)}var D,W;y===-1?W=f.lastIndexOf("@"):W=f.lastIndexOf("@",y),W!==-1&&(D=f.slice(0,W),f=f.slice(W+1),this.auth=decodeURIComponent(D)),y=-1;for(var M=0;M<im.length;M++){var R=f.indexOf(im[M]);R!==-1&&(y===-1||R<y)&&(y=R)}y===-1&&(y=f.length),this.host=f.slice(0,y),f=f.slice(y),this.parseHost(),this.hostname=this.hostname||"";var Te=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Te)for(var dt=this.hostname.split(/\./),M=0,Ie=dt.length;M<Ie;M++){var ut=dt[M];if(ut&&!ut.match(yu)){for(var Tt="",rr=0,Fn=ut.length;rr<Fn;rr++)ut.charCodeAt(rr)>127?Tt+="x":Tt+=ut[rr];if(!Tt.match(yu)){var pn=dt.slice(0,M),Dt=dt.slice(M+1),Qt=ut.match(am);Qt&&(pn.push(Qt[1]),Dt.unshift(Qt[2])),Dt.length&&(f="/"+Dt.join(".")+f),this.hostname=pn.join(".");break}}}this.hostname.length>om?this.hostname="":this.hostname=this.hostname.toLowerCase(),Te||(this.hostname=Ic.toASCII(this.hostname));var Vn=this.port?":"+this.port:"",ar=this.hostname||"";this.host=ar+Vn,this.href+=this.host,Te&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),f[0]!=="/"&&(f="/"+f))}if(!sm[v])for(var M=0,Ie=Kf.length;M<Ie;M++){var Br=Kf[M];if(f.indexOf(Br)!==-1){var dr=encodeURIComponent(Br);dr===Br&&(dr=escape(Br)),f=f.split(Br).join(dr)}}var Gr=f.indexOf("#");Gr!==-1&&(this.hash=f.substr(Gr),f=f.slice(0,Gr));var lr=f.indexOf("?");if(lr!==-1?(this.search=f.substr(lr),this.query=f.substr(lr+1),r&&(this.query=Nc.parse(this.query)),f=f.slice(0,lr)):r&&(this.search="",this.query={}),f&&(this.pathname=f),Wo[v]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Vn=this.pathname||"",ki=this.search||"";this.path=Vn+ki}return this.href=this.format(),this};function Xy(t){return $o.isString(t)&&(t=El(t)),t instanceof yo?t.format():yo.prototype.format.call(t)}yo.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=this.protocol||"",i=this.pathname||"",o=this.hash||"",s=!1,l="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&$o.isObject(this.query)&&Object.keys(this.query).length&&(l=Nc.stringify(this.query));var c=this.search||l&&"?"+l||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||Wo[r])&&s!==!1?(s="//"+(s||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):s||(s=""),o&&o.charAt(0)!=="#"&&(o="#"+o),c&&c.charAt(0)!=="?"&&(c="?"+c),i=i.replace(/[?#]/g,function(f){return encodeURIComponent(f)}),c=c.replace("#","%23"),r+s+i+c+o};function Qy(t,r){return El(t,!1,!0).resolve(r)}yo.prototype.resolve=function(t){return this.resolveObject(El(t,!1,!0)).format()};function lm(t,r){return t?El(t,!1,!0).resolveObject(r):r}yo.prototype.resolveObject=function(t){if($o.isString(t)){var r=new yo;r.parse(t,!1,!0),t=r}for(var i=new yo,o=Object.keys(this),s=0;s<o.length;s++){var l=o[s];i[l]=this[l]}if(i.hash=t.hash,t.href==="")return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),f=0;f<c.length;f++){var p=c[f];p!=="protocol"&&(i[p]=t[p])}return Wo[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!Wo[t.protocol]){for(var m=Object.keys(t),v=0;v<m.length;v++){var E=m[v];i[E]=t[E]}return i.href=i.format(),i}if(i.protocol=t.protocol,!t.host&&!Rc[t.protocol]){for(var Ie=(t.pathname||"").split("/");Ie.length&&!(t.host=Ie.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),Ie[0]!==""&&Ie.unshift(""),Ie.length<2&&Ie.unshift(""),i.pathname=Ie.join("/")}else i.pathname=t.pathname;if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var y=i.pathname||"",M=i.search||"";i.path=y+M}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var R=i.pathname&&i.pathname.charAt(0)==="/",D=t.host||t.pathname&&t.pathname.charAt(0)==="/",W=D||R||i.host&&t.pathname,Te=W,dt=i.pathname&&i.pathname.split("/")||[],Ie=t.pathname&&t.pathname.split("/")||[],ut=i.protocol&&!Wo[i.protocol];if(ut&&(i.hostname="",i.port=null,i.host&&(dt[0]===""?dt[0]=i.host:dt.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(Ie[0]===""?Ie[0]=t.host:Ie.unshift(t.host)),t.host=null),W=W&&(Ie[0]===""||dt[0]==="")),D)i.host=t.host||t.host===""?t.host:i.host,i.hostname=t.hostname||t.hostname===""?t.hostname:i.hostname,i.search=t.search,i.query=t.query,dt=Ie;else if(Ie.length)dt||(dt=[]),dt.pop(),dt=dt.concat(Ie),i.search=t.search,i.query=t.query;else if(!$o.isNullOrUndefined(t.search)){if(ut){i.hostname=i.host=dt.shift();var Tt=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;Tt&&(i.auth=Tt.shift(),i.host=i.hostname=Tt.shift())}return i.search=t.search,i.query=t.query,(!$o.isNull(i.pathname)||!$o.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!dt.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var rr=dt.slice(-1)[0],Fn=(i.host||t.host||dt.length>1)&&(rr==="."||rr==="..")||rr==="",pn=0,Dt=dt.length;Dt>=0;Dt--)rr=dt[Dt],rr==="."?dt.splice(Dt,1):rr===".."?(dt.splice(Dt,1),pn++):pn&&(dt.splice(Dt,1),pn--);if(!W&&!Te)for(;pn--;pn)dt.unshift("..");W&&dt[0]!==""&&(!dt[0]||dt[0].charAt(0)!=="/")&&dt.unshift(""),Fn&&dt.join("/").substr(-1)!=="/"&&dt.push("");var Qt=dt[0]===""||dt[0]&&dt[0].charAt(0)==="/";if(ut){i.hostname=i.host=Qt?"":dt.length?dt.shift():"";var Tt=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;Tt&&(i.auth=Tt.shift(),i.host=i.hostname=Tt.shift())}return W=W||i.host&&dt.length,W&&!Qt&&dt.unshift(""),dt.length?i.pathname=dt.join("/"):(i.pathname=null,i.path=null),(!$o.isNull(i.pathname)||!$o.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},yo.prototype.parseHost=function(){var t=this.host,r=qy.exec(t);r&&(r=r[0],r!==":"&&(this.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(this.hostname=t)};/*!
 * @pixi/constants - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _a;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(_a||(_a={}));var wu;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(wu||(wu={}));var kr;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(kr||(kr={}));var Al;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Al||(Al={}));var Sl;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Sl||(Sl={}));var Do;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Do||(Do={}));var wo;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(wo||(wo={}));var kl;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(kl||(kl={}));var Eu;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Eu||(Eu={}));var La;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"})(La||(La={}));var es;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(es||(es={}));var Yf;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Yf||(Yf={}));var ua;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(ua||(ua={}));var Fo;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(Fo||(Fo={}));/*!
 * @pixi/utils - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */jr.RETINA_PREFIX=/@([0-9\.]+)x/,jr.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Au=!1,um="5.2.1";function Jy(t){var r;if(!Au){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=[`
 %c %c %c PixiJS `+um+" - \u2730 "+t+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(r=window.console).log.apply(r,i)}else window.console&&window.console.log("PixiJS "+um+" - "+t+" - http://www.pixijs.com/");Au=!0}}var Pl;function Lc(){return typeof Pl>"u"&&(Pl=function(){var r={stencil:!0,failIfMajorPerformanceCaveat:jr.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var i=document.createElement("canvas"),o=i.getContext("webgl",r)||i.getContext("experimental-webgl",r),s=!!(o&&o.getContextAttributes().stencil);if(o){var l=o.getExtension("WEBGL_lose_context");l&&l.loseContext()}return o=null,s}catch{return!1}}()),Pl}function cm(t,r){return r=r||[],r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,r}function Xf(t){var r=t.toString(16);return r="000000".substr(0,6-r.length)+r,"#"+r}function dm(t){return typeof t=="string"&&t[0]==="#"&&(t=t.substr(1)),parseInt(t,16)}function e2(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function t2(){for(var t=[],r=[],i=0;i<32;i++)t[i]=i,r[i]=i;t[kr.NORMAL_NPM]=kr.NORMAL,t[kr.ADD_NPM]=kr.ADD,t[kr.SCREEN_NPM]=kr.SCREEN,r[kr.NORMAL]=kr.NORMAL_NPM,r[kr.ADD]=kr.ADD_NPM,r[kr.SCREEN]=kr.SCREEN_NPM;var o=[];return o.push(r),o.push(t),o}var Qf=t2();function ca(t,r){return Qf[r?1:0][t]}function n2(t,r,i,o){return i=i||new Float32Array(4),o||o===void 0?(i[0]=t[0]*r,i[1]=t[1]*r,i[2]=t[2]*r):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=r,i}function fm(t,r){if(r===1)return(r*255<<24)+t;if(r===0)return 0;var i=t>>16&255,o=t>>8&255,s=t&255;return i=i*r+.5|0,o=o*r+.5|0,s=s*r+.5|0,(r*255<<24)+(i<<16)+(o<<8)+s}function Jf(t,r,i,o){return i=i||new Float32Array(4),i[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(t&255)/255,(o||o===void 0)&&(i[0]*=r,i[1]*=r,i[2]*=r),i[3]=r,i}function r2(t,r){r===void 0&&(r=null);var i=t*6;if(r=r||new Uint16Array(i),r.length!==i)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+i);for(var o=0,s=0;o<i;o+=6,s+=4)r[o+0]=s+0,r[o+1]=s+1,r[o+2]=s+2,r[o+3]=s+0,r[o+4]=s+2,r[o+5]=s+3;return r}function Bc(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function hm(t){return!(t&t-1)&&!!t}function e0(t){var r=(t>65535?1:0)<<4;t>>>=r;var i=(t>255?1:0)<<3;return t>>>=i,r|=i,i=(t>15?1:0)<<2,t>>>=i,r|=i,i=(t>3?1:0)<<1,t>>>=i,r|=i,r|t>>1}function Su(t,r,i){var o=t.length,s;if(!(r>=o||i===0)){i=r+i>o?o-r:i;var l=o-i;for(s=r;s<l;++s)t[s]=t[s+i];t.length=l}}function i2(t){return t===0?0:t<0?-1:1}var pm=0;function Ba(){return++pm}var t0={};function mm(t,r,i){if(i===void 0&&(i=3),!t0[r]){var o=new Error().stack;typeof o>"u"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t):(o=o.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+t),console.warn(o),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t),console.warn(o))),t0[r]=!0}}var n0={},qo=Object.create(null),ba=Object.create(null),vm=function(){function t(r,i,o){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=o||jr.RESOLUTION,this.resize(r,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(r,i){this.canvas.width=r*this.resolution,this.canvas.height=i*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=r},enumerable:!0,configurable:!0}),t}();function Dc(t){var r=t.width,i=t.height,o=t.getContext("2d"),s=o.getImageData(0,0,r,i),l=s.data,c=l.length,f={top:null,left:null,right:null,bottom:null},p=null,m,v,E;for(m=0;m<c;m+=4)l[m+3]!==0&&(v=m/4%r,E=~~(m/4/r),f.top===null&&(f.top=E),(f.left===null||v<f.left)&&(f.left=v),(f.right===null||f.right<v)&&(f.right=v+1),(f.bottom===null||f.bottom<E)&&(f.bottom=E));return f.top!==null&&(r=f.right-f.left,i=f.bottom-f.top+1,p=o.getImageData(f.left,f.top,r,i)),{height:i,width:r,data:p}}var Fc;function Si(t,r){if(r===void 0&&(r=window.location),t.indexOf("data:")===0)return"";r=r||window.location,Fc||(Fc=document.createElement("a")),Fc.href=t;var i=bu(Fc.href),o=!i.port&&r.port===""||i.port===r.port;return i.hostname!==r.hostname||!o||i.protocol!==r.protocol?"anonymous":""}function zc(t,r){var i=jr.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):r!==void 0?r:1}/*!
 * @pixi/math - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ts=function(){function t(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.x=r,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},t.prototype.copyTo=function(r){return r.set(this.x,this.y),r},t.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},t.prototype.set=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=r),this.x=r,this.y=i,this},t}(),ku=function(){function t(r,i,o,s){o===void 0&&(o=0),s===void 0&&(s=0),this._x=o,this._y=s,this.cb=r,this.scope=i}return t.prototype.clone=function(r,i){return r===void 0&&(r=this.cb),i===void 0&&(i=this.scope),new t(r,i,this._x,this._y)},t.prototype.set=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=r),(this._x!==r||this._y!==i)&&(this._x=r,this._y=i,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(r){return r.set(this._x,this._y),r},t.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t}(),r0=Math.PI*2,Bi=180/Math.PI,gm=Math.PI/180,ns;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(ns||(ns={}));var Ko=function(){function t(r,i,o,s,l,c){r===void 0&&(r=1),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=1),l===void 0&&(l=0),c===void 0&&(c=0),this.array=null,this.a=r,this.b=i,this.c=o,this.d=s,this.tx=l,this.ty=c}return t.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},t.prototype.set=function(r,i,o,s,l,c){return this.a=r,this.b=i,this.c=o,this.d=s,this.tx=l,this.ty=c,this},t.prototype.toArray=function(r,i){this.array||(this.array=new Float32Array(9));var o=i||this.array;return r?(o[0]=this.a,o[1]=this.b,o[2]=0,o[3]=this.c,o[4]=this.d,o[5]=0,o[6]=this.tx,o[7]=this.ty,o[8]=1):(o[0]=this.a,o[1]=this.c,o[2]=this.tx,o[3]=this.b,o[4]=this.d,o[5]=this.ty,o[6]=0,o[7]=0,o[8]=1),o},t.prototype.apply=function(r,i){i=i||new ts;var o=r.x,s=r.y;return i.x=this.a*o+this.c*s+this.tx,i.y=this.b*o+this.d*s+this.ty,i},t.prototype.applyInverse=function(r,i){i=i||new ts;var o=1/(this.a*this.d+this.c*-this.b),s=r.x,l=r.y;return i.x=this.d*o*s+-this.c*o*l+(this.ty*this.c-this.tx*this.d)*o,i.y=this.a*o*l+-this.b*o*s+(-this.ty*this.a+this.tx*this.b)*o,i},t.prototype.translate=function(r,i){return this.tx+=r,this.ty+=i,this},t.prototype.scale=function(r,i){return this.a*=r,this.d*=i,this.c*=r,this.b*=i,this.tx*=r,this.ty*=i,this},t.prototype.rotate=function(r){var i=Math.cos(r),o=Math.sin(r),s=this.a,l=this.c,c=this.tx;return this.a=s*i-this.b*o,this.b=s*o+this.b*i,this.c=l*i-this.d*o,this.d=l*o+this.d*i,this.tx=c*i-this.ty*o,this.ty=c*o+this.ty*i,this},t.prototype.append=function(r){var i=this.a,o=this.b,s=this.c,l=this.d;return this.a=r.a*i+r.b*s,this.b=r.a*o+r.b*l,this.c=r.c*i+r.d*s,this.d=r.c*o+r.d*l,this.tx=r.tx*i+r.ty*s+this.tx,this.ty=r.tx*o+r.ty*l+this.ty,this},t.prototype.setTransform=function(r,i,o,s,l,c,f,p,m){return this.a=Math.cos(f+m)*l,this.b=Math.sin(f+m)*l,this.c=-Math.sin(f-p)*c,this.d=Math.cos(f-p)*c,this.tx=r-(o*this.a+s*this.c),this.ty=i-(o*this.b+s*this.d),this},t.prototype.prepend=function(r){var i=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var o=this.a,s=this.c;this.a=o*r.a+this.b*r.c,this.b=o*r.b+this.b*r.d,this.c=s*r.a+this.d*r.c,this.d=s*r.b+this.d*r.d}return this.tx=i*r.a+this.ty*r.c+r.tx,this.ty=i*r.b+this.ty*r.d+r.ty,this},t.prototype.decompose=function(r){var i=this.a,o=this.b,s=this.c,l=this.d,c=-Math.atan2(-s,l),f=Math.atan2(o,i),p=Math.abs(c+f);return p<1e-5||Math.abs(r0-p)<1e-5?(r.rotation=f,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=c,r.skew.y=f),r.scale.x=Math.sqrt(i*i+o*o),r.scale.y=Math.sqrt(s*s+l*l),r.position.x=this.tx,r.position.y=this.ty,r},t.prototype.invert=function(){var r=this.a,i=this.b,o=this.c,s=this.d,l=this.tx,c=r*s-i*o;return this.a=s/c,this.b=-i/c,this.c=-o/c,this.d=r/c,this.tx=(o*this.ty-s*l)/c,this.ty=-(r*this.ty-i*l)/c,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var r=new t;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},t.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},t.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),xs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Is=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],rs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Da=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Uc=[],_m=[],Hc=Math.sign;function o2(){for(var t=0;t<16;t++){var r=[];Uc.push(r);for(var i=0;i<16;i++)for(var o=Hc(xs[t]*xs[i]+rs[t]*Is[i]),s=Hc(Is[t]*xs[i]+Da[t]*Is[i]),l=Hc(xs[t]*rs[i]+rs[t]*Da[i]),c=Hc(Is[t]*rs[i]+Da[t]*Da[i]),f=0;f<16;f++)if(xs[f]===o&&Is[f]===s&&rs[f]===l&&Da[f]===c){r.push(f);break}}for(var t=0;t<16;t++){var p=new Ko;p.set(xs[t],Is[t],rs[t],Da[t],0,0),_m.push(p)}}o2();var Di={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return xs[t]},uY:function(t){return Is[t]},vX:function(t){return rs[t]},vY:function(t){return Da[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,r){return Uc[t][r]},sub:function(t,r){return Uc[t][Di.inv(r)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,r){return Math.abs(t)*2<=Math.abs(r)?r>=0?Di.S:Di.N:Math.abs(r)*2<=Math.abs(t)?t>0?Di.E:Di.W:r>0?t>0?Di.SE:Di.SW:t>0?Di.NE:Di.NW},matrixAppendRotationInv:function(t,r,i,o){i===void 0&&(i=0),o===void 0&&(o=0);var s=_m[Di.inv(r)];s.tx=i,s.ty=o,t.append(s)}},a2=function(){function t(){this.worldTransform=new Ko,this.localTransform=new Ko,this.position=new ku(this.onChange,this,0,0),this.scale=new ku(this.onChange,this,1,1),this.pivot=new ku(this.onChange,this,0,0),this.skew=new ku(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(r){var i=this.localTransform;if(this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var o=r.worldTransform,s=this.worldTransform;s.a=i.a*o.a+i.b*o.c,s.b=i.a*o.b+i.b*o.d,s.c=i.c*o.a+i.d*o.c,s.d=i.c*o.b+i.d*o.d,s.tx=i.tx*o.a+i.ty*o.c+o.tx,s.ty=i.tx*o.b+i.ty*o.d+o.ty,this._parentID=r._worldID,this._worldID++}},t.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!0,configurable:!0}),t.IDENTITY=new t,t}(),so=function(){function t(r,i,o,s){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),this.x=Number(r),this.y=Number(i),this.width=Number(o),this.height=Number(s),this.type=ns.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},t.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},t.prototype.contains=function(r,i){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&i>=this.y&&i<this.y+this.height},t.prototype.pad=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=r),this.x-=r,this.y-=i,this.width+=r*2,this.height+=i*2,this},t.prototype.fit=function(r){var i=Math.max(this.x,r.x),o=Math.min(this.x+this.width,r.x+r.width),s=Math.max(this.y,r.y),l=Math.min(this.y+this.height,r.y+r.height);return this.x=i,this.width=Math.max(o-i,0),this.y=s,this.height=Math.max(l-s,0),this},t.prototype.ceil=function(r,i){r===void 0&&(r=1),i===void 0&&(i=.001);var o=Math.ceil((this.x+this.width-i)*r)/r,s=Math.ceil((this.y+this.height-i)*r)/r;return this.x=Math.floor((this.x+i)*r)/r,this.y=Math.floor((this.y+i)*r)/r,this.width=o-this.x,this.height=s-this.y,this},t.prototype.enlarge=function(r){var i=Math.min(this.x,r.x),o=Math.max(this.x+this.width,r.x+r.width),s=Math.min(this.y,r.y),l=Math.max(this.y+this.height,r.y+r.height);return this.x=i,this.width=o-i,this.y=s,this.height=l-s,this},t}(),s2=function(){function t(r,i,o){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),this.x=r,this.y=i,this.radius=o,this.type=ns.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(r,i){if(this.radius<=0)return!1;var o=this.radius*this.radius,s=this.x-r,l=this.y-i;return s*=s,l*=l,s+l<=o},t.prototype.getBounds=function(){return new so(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t}(),l2=function(){function t(r,i,o,s){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),this.x=r,this.y=i,this.width=o,this.height=s,this.type=ns.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(r,i){if(this.width<=0||this.height<=0)return!1;var o=(r-this.x)/this.width,s=(i-this.y)/this.height;return o*=o,s*=s,o+s<=1},t.prototype.getBounds=function(){return new so(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),u2=function(){function t(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];if(Array.isArray(i[0])&&(i=i[0]),i[0]instanceof ts){i=i;for(var s=[],l=0,c=i.length;l<c;l++)s.push(i[l].x,i[l].y);i=s}this.points=i,this.type=ns.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var r=this.points.slice(),i=new t(r);return i.closeStroke=this.closeStroke,i},t.prototype.contains=function(r,i){for(var o=!1,s=this.points.length/2,l=0,c=s-1;l<s;c=l++){var f=this.points[l*2],p=this.points[l*2+1],m=this.points[c*2],v=this.points[c*2+1],E=p>i!=v>i&&r<(m-f)*((i-p)/(v-p))+f;E&&(o=!o)}return o},t}(),c2=function(){function t(r,i,o,s,l){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=20),this.x=r,this.y=i,this.width=o,this.height=s,this.radius=l,this.type=ns.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(r,i){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){if(i>=this.y+this.radius&&i<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var o=r-(this.x+this.radius),s=i-(this.y+this.radius),l=this.radius*this.radius;if(o*o+s*s<=l||(o=r-(this.x+this.width-this.radius),o*o+s*s<=l)||(s=i-(this.y+this.height-this.radius),o*o+s*s<=l)||(o=r-(this.x+this.radius),o*o+s*s<=l))return!0}return!1},t}();/*!
 * @pixi/display - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */jr.SORTABLE_CHILDREN=!1;var no=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};no.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},no.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},no.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?so.EMPTY:(r=r||new so(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},no.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},no.prototype.addQuad=function(r){var i=this.minX,o=this.minY,s=this.maxX,l=this.maxY,c=r[0],f=r[1];i=c<i?c:i,o=f<o?f:o,s=c>s?c:s,l=f>l?f:l,c=r[2],f=r[3],i=c<i?c:i,o=f<o?f:o,s=c>s?c:s,l=f>l?f:l,c=r[4],f=r[5],i=c<i?c:i,o=f<o?f:o,s=c>s?c:s,l=f>l?f:l,c=r[6],f=r[7],i=c<i?c:i,o=f<o?f:o,s=c>s?c:s,l=f>l?f:l,this.minX=i,this.minY=o,this.maxX=s,this.maxY=l},no.prototype.addFrame=function(r,i,o,s,l){this.addFrameMatrix(r.worldTransform,i,o,s,l)},no.prototype.addFrameMatrix=function(r,i,o,s,l){var c=r.a,f=r.b,p=r.c,m=r.d,v=r.tx,E=r.ty,y=this.minX,M=this.minY,R=this.maxX,D=this.maxY,W=c*i+p*o+v,Te=f*i+m*o+E;y=W<y?W:y,M=Te<M?Te:M,R=W>R?W:R,D=Te>D?Te:D,W=c*s+p*o+v,Te=f*s+m*o+E,y=W<y?W:y,M=Te<M?Te:M,R=W>R?W:R,D=Te>D?Te:D,W=c*i+p*l+v,Te=f*i+m*l+E,y=W<y?W:y,M=Te<M?Te:M,R=W>R?W:R,D=Te>D?Te:D,W=c*s+p*l+v,Te=f*s+m*l+E,y=W<y?W:y,M=Te<M?Te:M,R=W>R?W:R,D=Te>D?Te:D,this.minX=y,this.minY=M,this.maxX=R,this.maxY=D},no.prototype.addVertexData=function(r,i,o){for(var s=this.minX,l=this.minY,c=this.maxX,f=this.maxY,p=i;p<o;p+=2){var m=r[p],v=r[p+1];s=m<s?m:s,l=v<l?v:l,c=m>c?m:c,f=v>f?v:f}this.minX=s,this.minY=l,this.maxX=c,this.maxY=f},no.prototype.addVertices=function(r,i,o,s){this.addVerticesMatrix(r.worldTransform,i,o,s)},no.prototype.addVerticesMatrix=function(r,i,o,s,l,c){var f=r.a,p=r.b,m=r.c,v=r.d,E=r.tx,y=r.ty;l=l||0,c=c||0;for(var M=this.minX,R=this.minY,D=this.maxX,W=this.maxY,Te=o;Te<s;Te+=2){var dt=i[Te],Ie=i[Te+1],ut=f*dt+m*Ie+E,Tt=v*Ie+p*dt+y;M=Math.min(M,ut-l),D=Math.max(D,ut+l),R=Math.min(R,Tt-c),W=Math.max(W,Tt+c)}this.minX=M,this.minY=R,this.maxX=D,this.maxY=W},no.prototype.addBounds=function(r){var i=this.minX,o=this.minY,s=this.maxX,l=this.maxY;this.minX=r.minX<i?r.minX:i,this.minY=r.minY<o?r.minY:o,this.maxX=r.maxX>s?r.maxX:s,this.maxY=r.maxY>l?r.maxY:l},no.prototype.addBoundsMask=function(r,i){var o=r.minX>i.minX?r.minX:i.minX,s=r.minY>i.minY?r.minY:i.minY,l=r.maxX<i.maxX?r.maxX:i.maxX,c=r.maxY<i.maxY?r.maxY:i.maxY;if(o<=l&&s<=c){var f=this.minX,p=this.minY,m=this.maxX,v=this.maxY;this.minX=o<f?o:f,this.minY=s<p?s:p,this.maxX=l>m?l:m,this.maxY=c>v?c:v}},no.prototype.addBoundsMatrix=function(r,i){this.addFrameMatrix(i,r.minX,r.minY,r.maxX,r.maxY)},no.prototype.addBoundsArea=function(r,i){var o=r.minX>i.x?r.minX:i.x,s=r.minY>i.y?r.minY:i.y,l=r.maxX<i.x+i.width?r.maxX:i.x+i.width,c=r.maxY<i.y+i.height?r.maxY:i.y+i.height;if(o<=l&&s<=c){var f=this.minX,p=this.minY,m=this.maxX,v=this.maxY;this.minX=o<f?o:f,this.minY=s<p?s:p,this.maxX=l>m?l:m,this.maxY=c>v?c:v}},no.prototype.pad=function(r,i){r=r||0,i=i||(i!==0?r:0),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=i,this.maxY+=i)},no.prototype.addFramePad=function(r,i,o,s,l,c){r-=l,i-=c,o+=l,s+=c,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>o?this.maxX:o,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>s?this.maxY:s};var Gc=function(t){function r(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new a2,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new no,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return r.mixin=function(s){for(var l=Object.keys(s),c=0;c<l.length;++c){var f=l[c];Object.defineProperty(r.prototype,f,Object.getOwnPropertyDescriptor(s,f))}},i._tempDisplayObjectParent.get=function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new r),this.tempDisplayObjectParent},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.calculateBounds=function(){},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.getBounds=function(s,l){return s||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),l||(this._boundsRect||(this._boundsRect=new so),l=this._boundsRect),this._bounds.getRectangle(l)},r.prototype.getLocalBounds=function(s){var l=this.transform,c=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,s||(this._localBoundsRect||(this._localBoundsRect=new so),s=this._localBoundsRect);var f=this.getBounds(!1,s);return this.parent=c,this.transform=l,f},r.prototype.toGlobal=function(s,l,c){return c===void 0&&(c=!1),c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(s,l)},r.prototype.toLocal=function(s,l,c,f){return l&&(s=l.toGlobal(s,c,f)),f||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(s,c)},r.prototype.render=function(s){},r.prototype.setParent=function(s){if(!s||!s.addChild)throw new Error("setParent: Argument must be a Container");return s.addChild(this),s},r.prototype.setTransform=function(s,l,c,f,p,m,v,E,y){return s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=1),f===void 0&&(f=1),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),E===void 0&&(E=0),y===void 0&&(y=0),this.position.x=s,this.position.y=l,this.scale.x=c||1,this.scale.y=f||1,this.rotation=p,this.skew.x=m,this.skew.y=v,this.pivot.x=E,this.pivot.y=y,this},r.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i.x.get=function(){return this.position.x},i.x.set=function(o){this.transform.position.x=o},i.y.get=function(){return this.position.y},i.y.set=function(o){this.transform.position.y=o},i.worldTransform.get=function(){return this.transform.worldTransform},i.localTransform.get=function(){return this.transform.localTransform},i.position.get=function(){return this.transform.position},i.position.set=function(o){this.transform.position.copyFrom(o)},i.scale.get=function(){return this.transform.scale},i.scale.set=function(o){this.transform.scale.copyFrom(o)},i.pivot.get=function(){return this.transform.pivot},i.pivot.set=function(o){this.transform.pivot.copyFrom(o)},i.skew.get=function(){return this.transform.skew},i.skew.set=function(o){this.transform.skew.copyFrom(o)},i.rotation.get=function(){return this.transform.rotation},i.rotation.set=function(o){this.transform.rotation=o},i.angle.get=function(){return this.transform.rotation*Bi},i.angle.set=function(o){this.transform.rotation=o*gm},i.zIndex.get=function(){return this._zIndex},i.zIndex.set=function(o){this._zIndex=o,this.parent&&(this.parent.sortDirty=!0)},i.worldVisible.get=function(){var o=this;do{if(!o.visible)return!1;o=o.parent}while(o);return!0},i.mask.get=function(){return this._mask},i.mask.set=function(o){if(this._mask){var s=this._mask.maskObject||this._mask;s.renderable=!0,s.isMask=!1}if(this._mask=o,this._mask){var l=this._mask.maskObject||this._mask;l.renderable=!1,l.isMask=!0}},Object.defineProperties(r.prototype,i),r}(Qa);Gc.prototype.displayObjectUpdateTransform=Gc.prototype.updateTransform;function d2(t,r){return t.zIndex===r.zIndex?t._lastSortedIndex-r._lastSortedIndex:t.zIndex-r.zIndex}var Vc=function(t){function r(){t.call(this),this.children=[],this.sortableChildren=jr.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={width:{configurable:!0},height:{configurable:!0}};return r.prototype.onChildrenChange=function(){},r.prototype.addChild=function(s){var l=arguments,c=arguments.length;if(c>1)for(var f=0;f<c;f++)this.addChild(l[f]);else s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this);return s},r.prototype.addChildAt=function(s,l){if(l<0||l>this.children.length)throw new Error(s+"addChildAt: The index "+l+" supplied is out of bounds "+this.children.length);return s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.splice(l,0,s),this._boundsID++,this.onChildrenChange(l),s.emit("added",this),this.emit("childAdded",s,this,l),s},r.prototype.swapChildren=function(s,l){if(s!==l){var c=this.getChildIndex(s),f=this.getChildIndex(l);this.children[c]=l,this.children[f]=s,this.onChildrenChange(c<f?c:f)}},r.prototype.getChildIndex=function(s){var l=this.children.indexOf(s);if(l===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return l},r.prototype.setChildIndex=function(s,l){if(l<0||l>=this.children.length)throw new Error("The index "+l+" supplied is out of bounds "+this.children.length);var c=this.getChildIndex(s);Su(this.children,c,1),this.children.splice(l,0,s),this.onChildrenChange(l)},r.prototype.getChildAt=function(s){if(s<0||s>=this.children.length)throw new Error("getChildAt: Index ("+s+") does not exist.");return this.children[s]},r.prototype.removeChild=function(s){var l=arguments,c=arguments.length;if(c>1)for(var f=0;f<c;f++)this.removeChild(l[f]);else{var p=this.children.indexOf(s);if(p===-1)return null;s.parent=null,s.transform._parentID=-1,Su(this.children,p,1),this._boundsID++,this.onChildrenChange(p),s.emit("removed",this),this.emit("childRemoved",s,this,p)}return s},r.prototype.removeChildAt=function(s){var l=this.getChildAt(s);return l.parent=null,l.transform._parentID=-1,Su(this.children,s,1),this._boundsID++,this.onChildrenChange(s),l.emit("removed",this),this.emit("childRemoved",l,this,s),l},r.prototype.removeChildren=function(s,l){s===void 0&&(s=0);var c=s,f=typeof l=="number"?l:this.children.length,p=f-c,m;if(p>0&&p<=f){m=this.children.splice(c,p);for(var v=0;v<m.length;++v)m[v].parent=null,m[v].transform&&(m[v].transform._parentID=-1);this._boundsID++,this.onChildrenChange(s);for(var E=0;E<m.length;++E)m[E].emit("removed",this),this.emit("childRemoved",m[E],this,E);return m}else if(p===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var s=!1,l=0,c=this.children.length;l<c;++l){var f=this.children[l];f._lastSortedIndex=l,!s&&f.zIndex!==0&&(s=!0)}s&&this.children.length>1&&this.children.sort(d2),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var s=0,l=this.children.length;s<l;++s){var c=this.children[s];c.visible&&c.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var s=0;s<this.children.length;s++){var l=this.children[s];if(!(!l.visible||!l.renderable))if(l.calculateBounds(),l._mask){var c=l._mask.maskObject||l._mask;c.calculateBounds(),this._bounds.addBoundsMask(l._bounds,c._bounds)}else l.filterArea?this._bounds.addBoundsArea(l._bounds,l.filterArea):this._bounds.addBounds(l._bounds)}this._lastBoundsID=this._boundsID},r.prototype._calculateBounds=function(){},r.prototype.render=function(s){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(s);else{this._render(s);for(var l=0,c=this.children.length;l<c;++l)this.children[l].render(s)}},r.prototype.renderAdvanced=function(s){s.batch.flush();var l=this.filters,c=this._mask;if(l){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var f=0;f<l.length;f++)l[f].enabled&&this._enabledFilters.push(l[f]);this._enabledFilters.length&&s.filter.push(this,this._enabledFilters)}c&&s.mask.push(this,this._mask),this._render(s);for(var p=0,m=this.children.length;p<m;p++)this.children[p].render(s);s.batch.flush(),c&&s.mask.pop(this,this._mask),l&&this._enabledFilters&&this._enabledFilters.length&&s.filter.pop()},r.prototype._render=function(s){},r.prototype.destroy=function(s){t.prototype.destroy.call(this),this.sortDirty=!1;var l=typeof s=="boolean"?s:s&&s.children,c=this.removeChildren(0,this.children.length);if(l)for(var f=0;f<c.length;++f)c[f].destroy(s)},i.width.get=function(){return this.scale.x*this.getLocalBounds().width},i.width.set=function(o){var s=this.getLocalBounds().width;s!==0?this.scale.x=o/s:this.scale.x=1,this._width=o},i.height.get=function(){return this.scale.y*this.getLocalBounds().height},i.height.set=function(o){var s=this.getLocalBounds().height;s!==0?this.scale.y=o/s:this.scale.y=1,this._height=o},Object.defineProperties(r.prototype,i),r}(Gc);Vc.prototype.containerUpdateTransform=Vc.prototype.updateTransform;/*!
 * @pixi/ticker - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */jr.TARGET_FPMS=.06;var Cl;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(Cl||(Cl={}));var i0=function(){function t(r,i,o,s){i===void 0&&(i=null),o===void 0&&(o=0),s===void 0&&(s=!1),this.fn=r,this.context=i,this.priority=o,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(r,i){return i===void 0&&(i=null),this.fn===r&&this.context===i},t.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i},t.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},t.prototype.destroy=function(r){r===void 0&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var i=this.next;return this.next=r?null:i,this.previous=null,i},t}(),fo=function(){function t(){var r=this;this._head=new i0(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/jr.TARGET_FPMS,this.elapsedMS=1/jr.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(i){r._requestId=null,r.started&&(r.update(i),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(r,i,o){return o===void 0&&(o=Cl.NORMAL),this._addListener(new i0(r,i,o))},t.prototype.addOnce=function(r,i,o){return o===void 0&&(o=Cl.NORMAL),this._addListener(new i0(r,i,o,!0))},t.prototype._addListener=function(r){var i=this._head.next,o=this._head;if(!i)r.connect(o);else{for(;i;){if(r.priority>i.priority){r.connect(o);break}o=i,i=i.next}r.previous||r.connect(o)}return this._startIfPossible(),this},t.prototype.remove=function(r,i){for(var o=this._head.next;o;)o.match(r,i)?o=o.destroy():o=o.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,i=this._head;i=i.next;)r++;return r},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(r){r===void 0&&(r=performance.now());var i;if(r>this.lastTime){if(i=this.elapsedMS=r-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){var o=r-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=r-o%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*jr.TARGET_FPMS;for(var s=this._head,l=s.next;l;)l=l.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var i=Math.min(this.maxFPS,r),o=Math.min(Math.max(0,i)/1e3,jr.TARGET_FPMS);this._maxElapsedMS=1/o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(r===0)this._minElapsedMS=0;else{var i=Math.max(this.minFPS,r);this._minElapsedMS=1/(i/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var r=t._shared=new t;r.autoStart=!0,r._protected=!0}return t._shared},enumerable:!0,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var r=t._system=new t;r.autoStart=!0,r._protected=!0}return t._system},enumerable:!0,configurable:!0}),t}(),f2=function(){function t(){}return t.init=function(r){var i=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(o){this._ticker&&this._ticker.remove(this.render,this),this._ticker=o,o&&o.add(this.render,this,Cl.LOW)},get:function(){return this._ticker}}),this.stop=function(){i._ticker.stop()},this.start=function(){i._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?fo.shared:new fo,r.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},t}();/*!
 * @pixi/runner - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ho=function(){function t(r){this.items=[],this._name=r,this._aliasCount=0}return t.prototype.emit=function(r,i,o,s,l,c,f,p){if(arguments.length>8)throw new Error("max arguments reached");var m=this,v=m.name,E=m.items;this._aliasCount++;for(var y=0,M=E.length;y<M;y++)E[y][v](r,i,o,s,l,c,f,p);return E===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},t.prototype.remove=function(r){var i=this.items.indexOf(r);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this},t.prototype.contains=function(r){return this.items.indexOf(r)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();Object.defineProperties(ho.prototype,{dispatch:{value:ho.prototype.emit},run:{value:ho.prototype.emit}});/*!
 * @pixi/core - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Eo=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this._width=r,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new ho("setRealSize",2),this.onUpdate=new ho("update"),this.onError=new ho("onError",1)},li={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};Eo.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.run(this._width,this._height)},Eo.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},Eo.prototype.resize=function(r,i){(r!==this._width||i!==this._height)&&(this._width=r,this._height=i,this.onResize.run(r,i))},li.valid.get=function(){return!!this._width&&!!this._height},Eo.prototype.update=function(){this.destroyed||this.onUpdate.run()},Eo.prototype.load=function(){return Promise.resolve()},li.width.get=function(){return this._width},li.height.get=function(){return this._height},Eo.prototype.upload=function(r,i,o){return!1},Eo.prototype.style=function(r,i,o){return!1},Eo.prototype.dispose=function(){},Eo.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(Eo.prototype,li);var Pu=function(t){function r(i){var o=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;t.call(this,o,s),this.source=i,this.noSubImage=!1}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.crossOrigin=function(o,s,l){l===void 0&&s.indexOf("data:")!==0?o.crossOrigin=Si(s):l!==!1&&(o.crossOrigin=typeof l=="string"?l:"anonymous")},r.prototype.upload=function(o,s,l,c){var f=o.gl,p=s.realWidth,m=s.realHeight;return c=c||this.source,f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===es.UNPACK),!this.noSubImage&&s.target===f.TEXTURE_2D&&l.width===p&&l.height===m?f.texSubImage2D(f.TEXTURE_2D,0,0,0,s.format,s.type,c):(l.width=p,l.height=m,f.texImage2D(s.target,0,s.format,s.format,s.type,c)),!0},r.prototype.update=function(){if(!this.destroyed){var o=this.source.naturalWidth||this.source.videoWidth||this.source.width,s=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(o,s),t.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(Eo),o0=function(t){function r(i,o){if(o=o||{},!(i instanceof HTMLImageElement)){var s=new Image;t.crossOrigin(s,i,o.crossorigin),s.src=i,i=s}t.call(this,i),!i.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=i.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(o.createBitmap!==void 0?o.createBitmap:jr.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode=typeof o.alphaMode=="number"?o.alphaMode:null,o.premultiplyAlpha!==void 0&&(this.premultiplyAlpha=o.premultiplyAlpha),this.bitmap=null,this._load=null,o.autoLoad!==!1&&this.load()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.load=function(o){var s=this;return o!==void 0&&(this.createBitmap=o),this._load?this._load:(this._load=new Promise(function(l){s.url=s.source.src;var c=s,f=c.source,p=function(){s.destroyed||(f.onload=null,f.onerror=null,s.resize(f.width,f.height),s._load=null,s.createBitmap?l(s.process()):l(s))};f.complete&&f.src?p():(f.onload=p,f.onerror=function(m){return s.onError.run(m)})}),this._load)},r.prototype.process=function(){var o=this;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===es.UNPACK?"premultiply":"none"}).then(function(s){return o.destroyed?Promise.reject():(o.bitmap=s,o.update(),o._process=null,Promise.resolve(o))}),this._process)},r.prototype.upload=function(o,s,l){if(typeof this.alphaMode=="number"&&(s.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,o,s,l);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,o,s,l,this.bitmap),!this.preserveBitmap){var c=!0;for(var f in s._glTextures){var p=s._glTextures[f];if(p!==l&&p.dirtyId!==s.dirtyId){c=!1;break}}c&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r}(Pu),a0=[];function bm(t,r){if(!t)return null;var i="";if(typeof t=="string"){var o=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);o&&(i=o[1].toLowerCase())}for(var s=a0.length-1;s>=0;--s){var l=a0[s];if(l.test&&l.test(t,i))return new l(t,r)}return new o0(t,r)}var s0=function(t){function r(i,o){var s=o||{},l=s.width,c=s.height;if(!l||!c)throw new Error("BufferResource width or height invalid");t.call(this,l,c),this.data=i}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.upload=function(o,s,l){var c=o.gl;return c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===es.UNPACK),l.width===s.width&&l.height===s.height?c.texSubImage2D(s.target,0,0,0,s.width,s.height,s.format,s.type,this.data):(l.width=s.width,l.height=s.height,c.texImage2D(s.target,0,l.internalFormat,s.width,s.height,0,s.format,l.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(o){return o instanceof Float32Array||o instanceof Uint8Array||o instanceof Uint32Array},r}(Eo),h2={scaleMode:kl.NEAREST,format:Sl.RGBA,alphaMode:es.NPM},Zi=function(t){function r(o,s){o===void 0&&(o=null),s===void 0&&(s=null),t.call(this),s=s||{};var l=s.alphaMode,c=s.mipmap,f=s.anisotropicLevel,p=s.scaleMode,m=s.width,v=s.height,E=s.wrapMode,y=s.format,M=s.type,R=s.target,D=s.resolution,W=s.resourceOptions;o&&!(o instanceof Eo)&&(o=bm(o,W),o.internal=!0),this.width=m||0,this.height=v||0,this.resolution=D||jr.RESOLUTION,this.mipmap=c!==void 0?c:jr.MIPMAP_TEXTURES,this.anisotropicLevel=f!==void 0?f:jr.ANISOTROPIC_LEVEL,this.wrapMode=E||jr.WRAP_MODE,this.scaleMode=p!==void 0?p:jr.SCALE_MODE,this.format=y||Sl.RGBA,this.type=M||wo.UNSIGNED_BYTE,this.target=R||Do.TEXTURE_2D,this.alphaMode=l!==void 0?l:es.UNPACK,s.premultiplyAlpha!==void 0&&(this.premultiplyAlpha=s.premultiplyAlpha),this.uid=Ba(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=m>0&&v>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(o)}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={realWidth:{configurable:!0},realHeight:{configurable:!0}};return i.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},i.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},r.prototype.setStyle=function(s,l){var c;return s!==void 0&&s!==this.scaleMode&&(this.scaleMode=s,c=!0),l!==void 0&&l!==this.mipmap&&(this.mipmap=l,c=!0),c&&this.dirtyStyleId++,this},r.prototype.setSize=function(s,l,c){return this.resolution=c||this.resolution,this.width=s,this.height=l,this._refreshPOT(),this.update(),this},r.prototype.setRealSize=function(s,l,c){return this.resolution=c||this.resolution,this.width=s/this.resolution,this.height=l/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=hm(this.realWidth)&&hm(this.realHeight)},r.prototype.setResolution=function(s){var l=this.resolution;return l===s?this:(this.resolution=s,this.valid&&(this.width=this.width*l/s,this.height=this.height*l/s,this.emit("update",this)),this._refreshPOT(),this)},r.prototype.setResource=function(s){if(this.resource===s)return this;if(this.resource)throw new Error("Resource can be set only once");return s.bind(this),this.resource=s,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(s){this.emit("error",this,s)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ba[this.cacheId],delete qo[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.from=function(s,l,c){c===void 0&&(c=jr.STRICT_TEXTURE_CACHE);var f=typeof s=="string",p=null;f?p=s:(s._pixiId||(s._pixiId="pixiid_"+Ba()),p=s._pixiId);var m=ba[p];if(f&&c&&!m)throw new Error('The cacheId "'+p+'" does not exist in BaseTextureCache.');return m||(m=new r(s,l),m.cacheId=p,r.addToCache(m,p)),m},r.fromBuffer=function(s,l,c,f){s=s||new Float32Array(l*c*4);var p=new s0(s,{width:l,height:c}),m=s instanceof Float32Array?wo.FLOAT:wo.UNSIGNED_BYTE;return new r(p,Object.assign(h2,f||{width:l,height:c,type:m}))},r.addToCache=function(s,l){l&&(s.textureCacheIds.indexOf(l)===-1&&s.textureCacheIds.push(l),ba[l]&&console.warn("BaseTexture added to the cache with an id ["+l+"] that already had an entry"),ba[l]=s)},r.removeFromCache=function(s){if(typeof s=="string"){var l=ba[s];if(l){var c=l.textureCacheIds.indexOf(s);return c>-1&&l.textureCacheIds.splice(c,1),delete ba[s],l}}else if(s&&s.textureCacheIds){for(var f=0;f<s.textureCacheIds.length;++f)delete ba[s.textureCacheIds[f]];return s.textureCacheIds.length=0,s}return null},Object.defineProperties(r.prototype,i),r}(Qa);Zi._globalBatch=0;var Cu=function(t){function r(i,o){o=o||{};var s,l=i;Array.isArray(i)&&(s=i,l=i.length),t.call(this,o.width,o.height),this.items=[],this.itemDirtyIds=[];for(var c=0;c<l;c++){var f=new Zi;this.items.push(f),this.itemDirtyIds.push(-1)}if(this.length=l,this._load=null,s)for(var p=0;p<l;p++)this.addResourceAt(bm(s[p],o),p)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.dispose=function(){for(var o=0,s=this.length;o<s;o++)this.items[o].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(o,s){var l=this.items[s];if(!l)throw new Error("Index "+s+" is out of bounds");return o.valid&&!this.valid&&this.resize(o.width,o.height),this.items[s].setResource(o),this},r.prototype.bind=function(o){t.prototype.bind.call(this,o),o.target=Do.TEXTURE_2D_ARRAY;for(var s=0;s<this.length;s++)this.items[s].on("update",o.update,o)},r.prototype.unbind=function(o){t.prototype.unbind.call(this,o);for(var s=0;s<this.length;s++)this.items[s].off("update",o.update,o)},r.prototype.load=function(){var o=this;if(this._load)return this._load;var s=this.items.map(function(c){return c.resource}),l=s.map(function(c){return c.load()});return this._load=Promise.all(l).then(function(){var c=s[0],f=c.width,p=c.height;return o.resize(f,p),Promise.resolve(o)}),this._load},r.prototype.upload=function(o,s,l){var c=this,f=c.length,p=c.itemDirtyIds,m=c.items,v=o.gl;l.dirtyId<0&&v.texImage3D(v.TEXTURE_2D_ARRAY,0,s.format,this._width,this._height,f,0,s.format,s.type,null);for(var E=0;E<f;E++){var y=m[E];p[E]<y.dirtyId&&(p[E]=y.dirtyId,y.valid&&v.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,E,y.resource.width,y.resource.height,1,s.format,s.type,y.resource.source))}return!0},r}(Eo),ym=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.test=function(o){var s=window.OffscreenCanvas;return s&&o instanceof s?!0:o instanceof HTMLCanvasElement},r}(Pu),wm=function(t){function r(i,o){if(o=o||{},t.call(this,i,o),this.length!==r.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var s=0;s<r.SIDES;s++)this.items[s].target=Do.TEXTURE_CUBE_MAP_POSITIVE_X+s;o.autoLoad!==!1&&this.load()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.bind=function(o){t.prototype.bind.call(this,o),o.target=Do.TEXTURE_CUBE_MAP},r.prototype.upload=function(o,s,l){for(var c=this.itemDirtyIds,f=0;f<r.SIDES;f++){var p=this.items[f];c[f]<p.dirtyId&&(c[f]=p.dirtyId,p.valid&&p.resource.upload(o,p,l))}return!0},r}(Cu);wm.SIDES=6;var Em=function(t){function r(i,o){o=o||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=i,this.scale=o.scale||1,this._overrideWidth=o.width,this._overrideHeight=o.height,this._resolve=null,this._crossorigin=o.crossorigin,this._load=null,o.autoLoad!==!1&&this.load()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.load=function(){var o=this;return this._load?this._load:(this._load=new Promise(function(s){if(o._resolve=function(){o.resize(o.source.width,o.source.height),s(o)},/^\<svg/.test(o.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");o.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(o.svg)))}o._loadSvg()}),this._load)},r.prototype._loadSvg=function(){var o=this,s=new Image;t.crossOrigin(s,this.svg,this._crossorigin),s.src=this.svg,s.onerror=function(l){s.onerror=null,o.onError.run(l)},s.onload=function(){var l=s.width,c=s.height;if(!l||!c)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var f=l*o.scale,p=c*o.scale;(o._overrideWidth||o._overrideHeight)&&(f=o._overrideWidth||o._overrideHeight/c*l,p=o._overrideHeight||o._overrideWidth/l*c),f=Math.round(f),p=Math.round(p);var m=o.source;m.width=f,m.height=p,m._pixiId="canvas_"+Ba(),m.getContext("2d").drawImage(s,0,0,l,c,0,0,f,p),o._resolve(),o._resolve=null}},r.getSize=function(o){var s=r.SVG_SIZE.exec(o),l={};return s&&(l[s[1]]=Math.round(parseFloat(s[3])),l[s[5]]=Math.round(parseFloat(s[7]))),l},r.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(o,s){return s==="svg"||typeof o=="string"&&o.indexOf("data:image/svg+xml;base64")===0||typeof o=="string"&&o.indexOf("<svg")===0},r}(Pu);Em.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Am=function(t){function r(o,s){if(s=s||{},!(o instanceof HTMLVideoElement)){var l=document.createElement("video");l.setAttribute("preload","auto"),l.setAttribute("webkit-playsinline",""),l.setAttribute("playsinline",""),typeof o=="string"&&(o=[o]),t.crossOrigin(l,o[0].src||o[0],s.crossorigin);for(var c=0;c<o.length;++c){var f=document.createElement("source"),p=o[c],m=p.src,v=p.mime;m=m||o[c];var E=m.split("?").shift().toLowerCase(),y=E.substr(E.lastIndexOf(".")+1);v=v||"video/"+y,f.src=m,f.type=v,l.appendChild(f)}o=l}t.call(this,o),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=s.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=s.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),s.autoLoad!==!1&&this.load()}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return r.prototype.update=function(s){if(s===void 0&&(s=0),!this.destroyed){var l=fo.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-l),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,s),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var s=this;if(this._load)return this._load;var l=this.source;return(l.readyState===l.HAVE_ENOUGH_DATA||l.readyState===l.HAVE_FUTURE_DATA)&&l.width&&l.height&&(l.complete=!0),l.addEventListener("play",this._onPlayStart.bind(this)),l.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(l.addEventListener("canplay",this._onCanPlay),l.addEventListener("canplaythrough",this._onCanPlay),l.addEventListener("error",this._onError,!0)),this._load=new Promise(function(c){s.valid?c(s):(s._resolve=c,l.load())}),this._load},r.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},r.prototype._isSourcePlaying=function(){var s=this.source;return s.currentTime>0&&s.paused===!1&&s.ended===!1&&s.readyState>2},r.prototype._isSourceReady=function(){return this.source.readyState===3||this.source.readyState===4},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(fo.shared.add(this.update,this),this._isAutoUpdating=!0)},r.prototype._onPlayStop=function(){this._isAutoUpdating&&(fo.shared.remove(this.update,this),this._isAutoUpdating=!1)},r.prototype._onCanPlay=function(){var s=this,l=s.source;l.removeEventListener("canplay",this._onCanPlay),l.removeEventListener("canplaythrough",this._onCanPlay);var c=this.valid;this.resize(l.videoWidth,l.videoHeight),!c&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&l.play()},r.prototype.dispose=function(){this._isAutoUpdating&&fo.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},i.autoUpdate.get=function(){return this._autoUpdate},i.autoUpdate.set=function(o){o!==this._autoUpdate&&(this._autoUpdate=o,!this._autoUpdate&&this._isAutoUpdating?(fo.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(fo.shared.add(this.update,this),this._isAutoUpdating=!0))},i.updateFPS.get=function(){return this._updateFPS},i.updateFPS.set=function(o){o!==this._updateFPS&&(this._updateFPS=o)},r.test=function(s,l){return s instanceof HTMLVideoElement||r.TYPES.indexOf(l)>-1},Object.defineProperties(r.prototype,i),r}(Pu);Am.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var p2=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.test=function(o){return!!window.createImageBitmap&&o instanceof ImageBitmap},r}(Pu);a0.push(o0,p2,ym,Am,Em,s0,wm,Cu);var So=function(r){this.renderer=r};So.prototype.destroy=function(){this.renderer=null};var m2=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.upload=function(o,s,l){var c=o.gl;return c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===es.UNPACK),l.width===s.width&&l.height===s.height?c.texSubImage2D(s.target,0,0,0,s.width,s.height,s.format,s.type,this.data):(l.width=s.width,l.height=s.height,c.texImage2D(s.target,0,c.DEPTH_COMPONENT16,s.width,s.height,0,s.format,s.type,this.data)),!0},r}(s0),Fa=function(r,i){this.width=Math.ceil(r||100),this.height=Math.ceil(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ho("disposeFramebuffer",2)},Sm={colorTexture:{configurable:!0}};Sm.colorTexture.get=function(){return this.colorTextures[0]},Fa.prototype.addColorTexture=function(r,i){return r===void 0&&(r=0),this.colorTextures[r]=i||new Zi(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Fa.prototype.addDepthTexture=function(r){return this.depthTexture=r||new Zi(new m2(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:Sl.DEPTH_COMPONENT,type:wo.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Fa.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Fa.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Fa.prototype.resize=function(r,i){if(r=Math.ceil(r),i=Math.ceil(i),!(r===this.width&&i===this.height)){this.width=r,this.height=i,this.dirtyId++,this.dirtySize++;for(var o=0;o<this.colorTextures.length;o++){var s=this.colorTextures[o],l=s.resolution;s.setSize(r/l,i/l)}if(this.depthTexture){var c=this.depthTexture.resolution;this.depthTexture.setSize(r/c,i/c)}}},Fa.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(Fa.prototype,Sm);var Tu=function(t){function r(i){if(typeof i=="number"){var o=arguments[0],s=arguments[1],l=arguments[2],c=arguments[3];i={width:o,height:s,scaleMode:l,resolution:c}}t.call(this,null,i);var f=i||{},p=f.width,m=f.height;this.mipmap=!1,this.width=Math.ceil(p)||100,this.height=Math.ceil(m)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new Fa(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.resize=function(o,s){o=Math.ceil(o),s=Math.ceil(s),this.framebuffer.resize(o*this.resolution,s*this.resolution)},r.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},r.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},r}(Zi),l0=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};l0.prototype.set=function(r,i,o){var s=i.width,l=i.height;if(o){var c=r.width/2/s,f=r.height/2/l,p=r.x/s+c,m=r.y/l+f;o=Di.add(o,Di.NW),this.x0=p+c*Di.uX(o),this.y0=m+f*Di.uY(o),o=Di.add(o,2),this.x1=p+c*Di.uX(o),this.y1=m+f*Di.uY(o),o=Di.add(o,2),this.x2=p+c*Di.uX(o),this.y2=m+f*Di.uY(o),o=Di.add(o,2),this.x3=p+c*Di.uX(o),this.y3=m+f*Di.uY(o)}else this.x0=r.x/s,this.y0=r.y/l,this.x1=(r.x+r.width)/s,this.y1=r.y/l,this.x2=(r.x+r.width)/s,this.y2=(r.y+r.height)/l,this.x3=r.x/s,this.y3=(r.y+r.height)/l;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var km=new l0,ya=function(t){function r(o,s,l,c,f,p){if(t.call(this),this.noFrame=!1,s||(this.noFrame=!0,s=new so(0,0,1,1)),o instanceof r&&(o=o.baseTexture),this.baseTexture=o,this._frame=s,this.trim=c,this.valid=!1,this.requiresUpdate=!1,this._uvs=km,this.uvMatrix=null,this.orig=l||s,this._rotate=Number(f||0),f===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=p?new ts(p.x,p.y):new ts(0,0),this._updateID=0,this.textureCacheIds=[],o.valid?this.noFrame?o.valid&&this.onBaseTextureUpdated(o):this.frame=s:o.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&o.on("update",this.onBaseTextureUpdated,this)}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(s){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=s.width,this._frame.height=s.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(s){if(this.baseTexture){if(s){var l=this.baseTexture,c=l.resource;c&&qo[c.url]&&r.removeFromCache(c.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){return new r(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},r.prototype.updateUvs=function(){this._uvs===km&&(this._uvs=new l0),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(s,l,c){l===void 0&&(l={}),c===void 0&&(c=jr.STRICT_TEXTURE_CACHE);var f=typeof s=="string",p=null;f?p=s:(s._pixiId||(s._pixiId="pixiid_"+Ba()),p=s._pixiId);var m=qo[p];if(f&&c&&!m)throw new Error('The cacheId "'+p+'" does not exist in TextureCache.');return m||(l.resolution||(l.resolution=zc(s)),m=new r(new Zi(s,l)),m.baseTexture.cacheId=p,Zi.addToCache(m.baseTexture,p),r.addToCache(m,p)),m},r.fromBuffer=function(s,l,c,f){return new r(Zi.fromBuffer(s,l,c,f))},r.fromLoader=function(s,l,c){var f=new o0(s);f.url=l;var p=new Zi(f,{scaleMode:jr.SCALE_MODE,resolution:zc(l)}),m=new r(p);return c||(c=l),Zi.addToCache(m.baseTexture,c),r.addToCache(m,c),c!==l&&(Zi.addToCache(m.baseTexture,l),r.addToCache(m,l)),m},r.addToCache=function(s,l){l&&(s.textureCacheIds.indexOf(l)===-1&&s.textureCacheIds.push(l),qo[l]&&console.warn("Texture added to the cache with an id ["+l+"] that already had an entry"),qo[l]=s)},r.removeFromCache=function(s){if(typeof s=="string"){var l=qo[s];if(l){var c=l.textureCacheIds.indexOf(s);return c>-1&&l.textureCacheIds.splice(c,1),delete qo[s],l}}else if(s&&s.textureCacheIds){for(var f=0;f<s.textureCacheIds.length;++f)qo[s.textureCacheIds[f]]===s&&delete qo[s.textureCacheIds[f]];return s.textureCacheIds.length=0,s}return null},i.resolution.get=function(){return this.baseTexture.resolution},i.frame.get=function(){return this._frame},i.frame.set=function(o){this._frame=o,this.noFrame=!1;var s=o.x,l=o.y,c=o.width,f=o.height,p=s+c>this.baseTexture.width,m=l+f>this.baseTexture.height;if(p||m){var v=p&&m?"and":"or",E="X: "+s+" + "+c+" = "+(s+c)+" > "+this.baseTexture.width,y="Y: "+l+" + "+f+" = "+(l+f)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+E+" "+v+" "+y)}this.valid=c&&f&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=o),this.valid&&this.updateUvs()},i.rotate.get=function(){return this._rotate},i.rotate.set=function(o){this._rotate=o,this.valid&&this.updateUvs()},i.width.get=function(){return this.orig.width},i.height.get=function(){return this.orig.height},Object.defineProperties(r.prototype,i),r}(Qa);function v2(){var t=document.createElement("canvas");t.width=16,t.height=16;var r=t.getContext("2d");return r.fillStyle="white",r.fillRect(0,0,16,16),new ya(new Zi(new ym(t)))}function Tl(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}ya.EMPTY=new ya(new Zi),Tl(ya.EMPTY),Tl(ya.EMPTY.baseTexture),ya.WHITE=v2(),Tl(ya.WHITE),Tl(ya.WHITE.baseTexture);var u0=function(t){function r(i,o){var s=null;if(!(i instanceof Tu)){var l=arguments[1],c=arguments[2],f=arguments[3],p=arguments[4];console.warn("Please use RenderTexture.create("+l+", "+c+") instead of the ctor directly."),s=arguments[0],o=null,i=new Tu({width:l,height:c,scaleMode:f,resolution:p})}t.call(this,i,o),this.legacyRenderer=s,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.resize=function(o,s,l){l===void 0&&(l=!0),o=Math.ceil(o),s=Math.ceil(s),this.valid=o>0&&s>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=s,l&&this.baseTexture.resize(o,s),this.updateUvs()},r.prototype.setResolution=function(o){var s=this,l=s.baseTexture;l.resolution!==o&&(l.setResolution(o),this.resize(l.width,l.height,!1))},r.create=function(o){return typeof o=="number"&&(o={width:o,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new r(new Tu(o))},r}(ya),Zo=function(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};Zo.prototype.createTexture=function(r,i){var o=new Tu(Object.assign({width:r,height:i,resolution:1},this.textureOptions));return new u0(o)},Zo.prototype.getOptimalTexture=function(r,i,o){o===void 0&&(o=1);var s=Zo.SCREEN_KEY;r*=o,i*=o,(!this.enableFullScreen||r!==this._pixelsWidth||i!==this._pixelsHeight)&&(r=Bc(r),i=Bc(i),s=(r&65535)<<16|i&65535),this.texturePool[s]||(this.texturePool[s]=[]);var l=this.texturePool[s].pop();return l||(l=this.createTexture(r,i)),l.filterPoolKey=s,l.setResolution(o),l},Zo.prototype.getFilterTexture=function(r,i){var o=this.getOptimalTexture(r.width,r.height,i||r.resolution);return o.filterFrame=r.filterFrame,o},Zo.prototype.returnTexture=function(r){var i=r.filterPoolKey;r.filterFrame=null,this.texturePool[i].push(r)},Zo.prototype.returnFilterTexture=function(r){this.returnTexture(r)},Zo.prototype.clear=function(r){if(r=r!==!1,r)for(var i in this.texturePool){var o=this.texturePool[i];if(o)for(var s=0;s<o.length;s++)o[s].destroy(!0)}this.texturePool={}},Zo.prototype.setScreenSize=function(r){if(!(r.width===this._pixelsWidth&&r.height===this._pixelsHeight)){var i=Zo.SCREEN_KEY,o=this.texturePool[i];if(this.enableFullScreen=r.width>0&&r.height>0,o)for(var s=0;s<o.length;s++)o[s].destroy(!0);this.texturePool[i]=[],this._pixelsWidth=r.width,this._pixelsHeight=r.height}},Zo.SCREEN_KEY="screen";var Ml=function(r,i,o,s,l,c,f){o===void 0&&(o=!1),s===void 0&&(s=5126),this.buffer=r,this.size=i,this.normalized=o,this.type=s,this.stride=l,this.start=c,this.instance=f};Ml.prototype.destroy=function(){this.buffer=null},Ml.from=function(r,i,o,s,l){return new Ml(r,i,o,s,l)};var g2=0,ko=function(r,i,o){i===void 0&&(i=!0),o===void 0&&(o=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=o,this.static=i,this.id=g2++,this.disposeRunner=new ho("disposeBuffer",2)};ko.prototype.update=function(r){this.data=r||this.data,this._updateID++},ko.prototype.dispose=function(){this.disposeRunner.run(this,!1)},ko.prototype.destroy=function(){this.dispose(),this.data=null},ko.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new ko(r)};function c0(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var e5={Float32Array,Uint32Array,Int32Array,Uint8Array};function _2(t,r){for(var i=0,o=0,s={},l=0;l<t.length;l++)o+=r[l],i+=t[l].length;for(var c=new ArrayBuffer(i*4),f=null,p=0,m=0;m<t.length;m++){var v=r[m],E=t[m],y=c0(E);s[y]||(s[y]=new e5[y](c)),f=s[y];for(var M=0;M<E.length;M++){var R=(M/v|0)*o+p,D=M%v;f[R+D]=E[M]}p+=v}return new Float32Array(c)}var Pm={5126:4,5123:2,5121:1},b2=0,d0={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},ro=function(r,i){r===void 0&&(r=[]),i===void 0&&(i={}),this.buffers=r,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=b2++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ho("disposeGeometry",2),this.refCount=0};ro.prototype.addAttribute=function(r,i,o,s,l,c,f,p){if(s===void 0&&(s=!1),p===void 0&&(p=!1),!i)throw new Error("You must pass a buffer when creating an attribute");i.data||(i instanceof Array&&(i=new Float32Array(i)),i=new ko(i));var m=r.split("|");if(m.length>1){for(var v=0;v<m.length;v++)this.addAttribute(m[v],i,o,s,l);return this}var E=this.buffers.indexOf(i);return E===-1&&(this.buffers.push(i),E=this.buffers.length-1),this.attributes[r]=new Ml(E,o,s,l,c,f,p),this.instanced=this.instanced||p,this},ro.prototype.getAttribute=function(r){return this.attributes[r]},ro.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},ro.prototype.addIndex=function(r){return r.data||(r instanceof Array&&(r=new Uint16Array(r)),r=new ko(r)),r.index=!0,this.indexBuffer=r,this.buffers.indexOf(r)===-1&&this.buffers.push(r),this},ro.prototype.getIndex=function(){return this.indexBuffer},ro.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var r=[],i=[],o=new ko,s;for(s in this.attributes){var l=this.attributes[s],c=this.buffers[l.buffer];r.push(c.data),i.push(l.size*Pm[l.type]/4),l.buffer=0}for(o.data=_2(r,i),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[o],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},ro.prototype.getSize=function(){for(var r in this.attributes){var i=this.attributes[r],o=this.buffers[i.buffer];return o.data.length/(i.stride/4||i.size)}return 0},ro.prototype.dispose=function(){this.disposeRunner.run(this,!1)},ro.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},ro.prototype.clone=function(){for(var r=new ro,i=0;i<this.buffers.length;i++)r.buffers[i]=new ko(this.buffers[i].data.slice());for(var o in this.attributes){var s=this.attributes[o];r.attributes[o]=new Ml(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.index=!0),r},ro.merge=function(r){for(var i=new ro,o=[],s=[],l=[],c,f=0;f<r.length;f++){c=r[f];for(var p=0;p<c.buffers.length;p++)s[p]=s[p]||0,s[p]+=c.buffers[p].data.length,l[p]=0}for(var m=0;m<c.buffers.length;m++)o[m]=new d0[c0(c.buffers[m].data)](s[m]),i.buffers[m]=new ko(o[m]);for(var v=0;v<r.length;v++){c=r[v];for(var E=0;E<c.buffers.length;E++)o[E].set(c.buffers[E].data,l[E]),l[E]+=c.buffers[E].data.length}if(i.attributes=c.attributes,c.indexBuffer){i.indexBuffer=i.buffers[c.buffers.indexOf(c.indexBuffer)],i.indexBuffer.index=!0;for(var y=0,M=0,R=0,D=0,W=0;W<c.buffers.length;W++)if(c.buffers[W]!==c.indexBuffer){D=W;break}for(var Te in c.attributes){var dt=c.attributes[Te];(dt.buffer|0)===D&&(M+=dt.size*Pm[dt.type]/4)}for(var Ie=0;Ie<r.length;Ie++){for(var ut=r[Ie].indexBuffer.data,Tt=0;Tt<ut.length;Tt++)i.indexBuffer.data[Tt+R]+=y;y+=c.buffers[D].data.length/M,R+=ut.length}}return i};var y2=function(t){function r(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(ro),jc=function(t){function r(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ko(this.vertices),this.uvBuffer=new ko(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.map=function(o,s){var l=0,c=0;return this.uvs[0]=l,this.uvs[1]=c,this.uvs[2]=l+s.width/o.width,this.uvs[3]=c,this.uvs[4]=l+s.width/o.width,this.uvs[5]=c+s.height/o.height,this.uvs[6]=l,this.uvs[7]=c+s.height/o.height,l=s.x,c=s.y,this.vertices[0]=l,this.vertices[1]=c,this.vertices[2]=l+s.width,this.vertices[3]=c,this.vertices[4]=l+s.width,this.vertices[5]=c+s.height,this.vertices[6]=l,this.vertices[7]=c+s.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(ro),w2=0,Yo=function(r,i){this.uniforms=r,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=w2++,this.static=!!i};Yo.prototype.update=function(){this.dirtyId++},Yo.prototype.add=function(r,i,o){this.uniforms[r]=new Yo(i,o)},Yo.from=function(r,i){return new Yo(r,i)};var Cm=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new so,this.destinationFrame=new so,this.filters=[]};Cm.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var Tm=function(t){function r(i){t.call(this,i),this.defaultFilterStack=[{}],this.texturePool=new Zo,this.texturePool.setScreenSize(i.view),this.statePool=[],this.quad=new y2,this.quadUv=new jc,this.tempRect=new so,this.activeState={},this.globalUniforms=new Yo({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=i.view.width,this._pixelsHeight=i.view.height}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.push=function(o,s){for(var l=this.renderer,c=this.defaultFilterStack,f=this.statePool.pop()||new Cm,p=s[0].resolution,m=s[0].padding,v=s[0].autoFit,E=s[0].legacy,y=1;y<s.length;y++){var M=s[y];p=Math.min(p,M.resolution),m=Math.max(m,M.padding),v=v||M.autoFit,E=E||M.legacy}c.length===1&&(this.defaultFilterStack[0].renderTexture=l.renderTexture.current),c.push(f),f.resolution=p,f.legacy=E,f.target=o,f.sourceFrame.copyFrom(o.filterArea||o.getBounds(!0)),f.sourceFrame.pad(m),v&&f.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),f.sourceFrame.ceil(p),f.renderTexture=this.getOptimalFilterTexture(f.sourceFrame.width,f.sourceFrame.height,p),f.filters=s,f.destinationFrame.width=f.renderTexture.width,f.destinationFrame.height=f.renderTexture.height,f.renderTexture.filterFrame=f.sourceFrame,l.renderTexture.bind(f.renderTexture,f.sourceFrame),l.renderTexture.clear()},r.prototype.pop=function(){var o=this.defaultFilterStack,s=o.pop(),l=s.filters;this.activeState=s;var c=this.globalUniforms.uniforms;c.outputFrame=s.sourceFrame,c.resolution=s.resolution;var f=c.inputSize,p=c.inputPixel,m=c.inputClamp;if(f[0]=s.destinationFrame.width,f[1]=s.destinationFrame.height,f[2]=1/f[0],f[3]=1/f[1],p[0]=f[0]*s.resolution,p[1]=f[1]*s.resolution,p[2]=1/p[0],p[3]=1/p[1],m[0]=.5*p[2],m[1]=.5*p[3],m[2]=s.sourceFrame.width*f[2]-.5*p[2],m[3]=s.sourceFrame.height*f[3]-.5*p[3],s.legacy){var v=c.filterArea;v[0]=s.destinationFrame.width,v[1]=s.destinationFrame.height,v[2]=s.sourceFrame.x,v[3]=s.sourceFrame.y,c.filterClamp=c.inputClamp}this.globalUniforms.update();var E=o[o.length-1];if(l.length===1)l[0].apply(this,s.renderTexture,E.renderTexture,!1,s),this.returnFilterTexture(s.renderTexture);else{var y=s.renderTexture,M=this.getOptimalFilterTexture(y.width,y.height,s.resolution);M.filterFrame=y.filterFrame;var R=0;for(R=0;R<l.length-1;++R){l[R].apply(this,y,M,!0,s);var D=y;y=M,M=D}l[R].apply(this,y,E.renderTexture,!1,s),this.returnFilterTexture(y),this.returnFilterTexture(M)}s.clear(),this.statePool.push(s)},r.prototype.applyFilter=function(o,s,l,c){var f=this.renderer;f.renderTexture.bind(l,l?l.filterFrame:null),c&&f.renderTexture.clear(),o.uniforms.uSampler=s,o.uniforms.filterGlobals=this.globalUniforms,f.state.set(o.state),f.shader.bind(o),o.legacy?(this.quadUv.map(s._frame,s.filterFrame),f.geometry.bind(this.quadUv),f.geometry.draw(Al.TRIANGLES)):(f.geometry.bind(this.quad),f.geometry.draw(Al.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(o,s){var l=this.activeState,c=l.sourceFrame,f=l.destinationFrame,p=s._texture,m=p.orig,v=o.set(f.width,0,0,f.height,c.x,c.y),E=s.worldTransform.copyTo(Ko.TEMP_MATRIX);return E.invert(),v.prepend(E),v.scale(1/m.width,1/m.height),v.translate(s.anchor.x,s.anchor.y),v},r.prototype.destroy=function(){this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(o,s,l){return l===void 0&&(l=1),this.texturePool.getOptimalTexture(o,s,l)},r.prototype.getFilterTexture=function(o,s){if(typeof o=="number"){var l=o;o=s,s=l}o=o||this.activeState.renderTexture;var c=this.texturePool.getOptimalTexture(o.width,o.height,s||o.resolution);return c.filterFrame=o.filterFrame,c},r.prototype.returnFilterTexture=function(o){this.texturePool.returnTexture(o)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r}(So),os=function(r){this.renderer=r};os.prototype.flush=function(){},os.prototype.destroy=function(){this.renderer=null},os.prototype.start=function(){},os.prototype.stop=function(){this.flush()},os.prototype.render=function(r){};var E2=function(t){function r(i){t.call(this,i),this.emptyRenderer=new os(i),this.currentRenderer=this.emptyRenderer}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.setObjectRenderer=function(o){this.currentRenderer!==o&&(this.currentRenderer.stop(),this.currentRenderer=o,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(o,s){for(var l=this.renderer.texture,c=l.boundTextures,f=s-1;f>=0;--f)o[f]=c[f]||null,o[f]&&(o[f]._batchLocation=f)},r.prototype.boundArray=function(o,s,l,c){for(var f=o.elements,p=o.ids,m=o.count,v=0,E=0;E<m;E++){var y=f[E],M=y._batchLocation;if(M>=0&&M<c&&s[M]===y){p[E]=M;continue}for(;v<c;){var R=s[v];if(R&&R._batchEnabled===l&&R._batchLocation===v){v++;continue}p[E]=v,y._batchLocation=v,s[v]=y;break}}},r}(So);jr.PREFER_ENV=ga.any?_a.WEBGL:_a.WEBGL2,jr.STRICT_TEXTURE_CACHE=!1;var Mm=0,A2=function(t){function r(o){t.call(this,o),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),o.view.addEventListener("webglcontextlost",this.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},r.prototype.contextChange=function(s){this.gl=s,this.renderer.gl=s,this.renderer.CONTEXT_UID=Mm++,s.isContextLost()&&s.getExtension("WEBGL_lose_context")&&s.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(s){this.gl=s,this.validateContext(s),this.renderer.gl=s,this.renderer.CONTEXT_UID=Mm++,this.renderer.runners.contextChange.run(s)},r.prototype.initFromOptions=function(s){var l=this.createContext(this.renderer.view,s);this.initFromContext(l)},r.prototype.createContext=function(s,l){var c;if(jr.PREFER_ENV>=_a.WEBGL2&&(c=s.getContext("webgl2",l)),c)this.webGLVersion=2;else if(this.webGLVersion=1,c=s.getContext("webgl",l)||s.getContext("experimental-webgl",l),!c)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=c,this.getExtensions(),c},r.prototype.getExtensions=function(){var s=this,l=s.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:l.getExtension("WEBGL_draw_buffers"),depthTexture:l.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:l.getExtension("WEBGL_lose_context"),vertexArrayObject:l.getExtension("OES_vertex_array_object")||l.getExtension("MOZ_OES_vertex_array_object")||l.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:l.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:l.getExtension("OES_element_index_uint"),floatTexture:l.getExtension("OES_texture_float"),floatTextureLinear:l.getExtension("OES_texture_float_linear"),textureHalfFloat:l.getExtension("OES_texture_half_float"),textureHalfFloatLinear:l.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:l.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:l.getExtension("EXT_color_buffer_float"),floatTextureLinear:l.getExtension("OES_texture_float_linear")})},r.prototype.handleContextLost=function(s){s.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},r.prototype.destroy=function(){var s=this.renderer.view;s.removeEventListener("webglcontextlost",this.handleContextLost),s.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(s){var l=s.getContextAttributes();l.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(r.prototype,i),r}(So),S2=function(t){function r(o){t.call(this,o),this.managedFramebuffers=[],this.unknownFramebuffer=new Fa(10,10)}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={size:{configurable:!0}};return r.prototype.contextChange=function(){var s=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new so,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var l=this.renderer.context.extensions.drawBuffers,c=this.renderer.context.extensions.depthTexture;jr.PREFER_ENV===_a.WEBGL_LEGACY&&(l=null,c=null),l?s.drawBuffers=function(f){return l.drawBuffersWEBGL(f)}:(this.hasMRT=!1,s.drawBuffers=function(){}),c||(this.writeDepthTexture=!1)}},r.prototype.bind=function(s,l){var c=this,f=c.gl;if(s){var p=s.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(s);this.current!==s&&(this.current=s,f.bindFramebuffer(f.FRAMEBUFFER,p.framebuffer)),p.dirtyId!==s.dirtyId&&(p.dirtyId=s.dirtyId,p.dirtyFormat!==s.dirtyFormat?(p.dirtyFormat=s.dirtyFormat,this.updateFramebuffer(s)):p.dirtySize!==s.dirtySize&&(p.dirtySize=s.dirtySize,this.resizeFramebuffer(s)));for(var m=0;m<s.colorTextures.length;m++)s.colorTextures[m].texturePart?this.renderer.texture.unbind(s.colorTextures[m].texture):this.renderer.texture.unbind(s.colorTextures[m]);s.depthTexture&&this.renderer.texture.unbind(s.depthTexture),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,s.width,s.height)}else this.current&&(this.current=null,f.bindFramebuffer(f.FRAMEBUFFER,null)),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(s,l,c,f){var p=this.viewport;(p.width!==c||p.height!==f||p.x!==s||p.y!==l)&&(p.x=s,p.y=l,p.width=c,p.height=f,this.gl.viewport(s,l,c,f))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},r.prototype.clear=function(s,l,c,f){var p=this,m=p.gl;m.clearColor(s,l,c,f),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT)},r.prototype.initFramebuffer=function(s){var l=this,c=l.gl,f={framebuffer:c.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return s.glFramebuffers[this.CONTEXT_UID]=f,this.managedFramebuffers.push(s),s.disposeRunner.add(this),f},r.prototype.resizeFramebuffer=function(s){var l=this,c=l.gl,f=s.glFramebuffers[this.CONTEXT_UID];f.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,f.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,s.width,s.height));for(var p=s.colorTextures,m=0;m<p.length;m++)this.renderer.texture.bind(p[m],0);s.depthTexture&&this.renderer.texture.bind(s.depthTexture,0)},r.prototype.updateFramebuffer=function(s){var l=this,c=l.gl,f=s.glFramebuffers[this.CONTEXT_UID],p=s.colorTextures,m=p.length;c.drawBuffers||(m=Math.min(m,1));for(var v=[],E=0;E<m;E++){var y=s.colorTextures[E];y.texturePart?(this.renderer.texture.bind(y.texture,0),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+E,c.TEXTURE_CUBE_MAP_NEGATIVE_X+y.side,y.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(y,0),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+E,c.TEXTURE_2D,y._glTextures[this.CONTEXT_UID].texture,0)),v.push(c.COLOR_ATTACHMENT0+E)}if(v.length>1&&c.drawBuffers(v),s.depthTexture){var M=this.writeDepthTexture;if(M){var R=s.depthTexture;this.renderer.texture.bind(R,0),c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,R._glTextures[this.CONTEXT_UID].texture,0)}}!f.stencil&&(s.stencil||s.depth)&&(f.stencil=c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,f.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,s.width,s.height),s.depthTexture||c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,f.stencil))},r.prototype.disposeFramebuffer=function(s,l){var c=s.glFramebuffers[this.CONTEXT_UID],f=this.gl;if(c){delete s.glFramebuffers[this.CONTEXT_UID];var p=this.managedFramebuffers.indexOf(s);p>=0&&this.managedFramebuffers.splice(p,1),s.disposeRunner.remove(this),l||(f.deleteFramebuffer(c.framebuffer),c.stencil&&f.deleteRenderbuffer(c.stencil))}},r.prototype.disposeAll=function(s){var l=this.managedFramebuffers;this.managedFramebuffers=[];for(var c=0;c<l.length;c++)this.disposeFramebuffer(l[c],s)},r.prototype.forceStencil=function(){var s=this.current;if(s){var l=s.glFramebuffers[this.CONTEXT_UID];if(!(!l||l.stencil)){s.enableStencil();var c=s.width,f=s.height,p=this.gl,m=p.createRenderbuffer();p.bindRenderbuffer(p.RENDERBUFFER,m),p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,c,f),l.stencil=m,p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,m)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new so},Object.defineProperties(r.prototype,i),r}(So),k2=function(r){this.buffer=r,this.updateID=-1,this.byteLength=-1,this.refCount=0},$c={5126:4,5123:2,5121:1},P2=function(t){function r(i){t.call(this,i),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.contextChange=function(){this.disposeAll(!0);var o=this.gl=this.renderer.gl,s=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!o.createVertexArray){var l=this.renderer.context.extensions.vertexArrayObject;jr.PREFER_ENV===_a.WEBGL_LEGACY&&(l=null),l?(o.createVertexArray=function(){return l.createVertexArrayOES()},o.bindVertexArray=function(f){return l.bindVertexArrayOES(f)},o.deleteVertexArray=function(f){return l.deleteVertexArrayOES(f)}):(this.hasVao=!1,o.createVertexArray=function(){},o.bindVertexArray=function(){},o.deleteVertexArray=function(){})}if(!o.vertexAttribDivisor){var c=o.getExtension("ANGLE_instanced_arrays");c?(o.vertexAttribDivisor=function(f,p){return c.vertexAttribDivisorANGLE(f,p)},o.drawElementsInstanced=function(f,p,m,v,E){return c.drawElementsInstancedANGLE(f,p,m,v,E)},o.drawArraysInstanced=function(f,p,m,v){return c.drawArraysInstancedANGLE(f,p,m,v)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=s.webGLVersion===2||!!s.extensions.uint32ElementIndex},r.prototype.bind=function(o,s){s=s||this.renderer.shader.shader;var l=this,c=l.gl,f=o.glVertexArrayObjects[this.CONTEXT_UID];f||(this.managedGeometries[o.id]=o,o.disposeRunner.add(this),o.glVertexArrayObjects[this.CONTEXT_UID]=f={});var p=f[s.program.id]||this.initGeometryVao(o,s.program);this._activeGeometry=o,this._activeVao!==p&&(this._activeVao=p,this.hasVao?c.bindVertexArray(p):this.activateVao(o,s.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var o=this._activeGeometry,s=this,l=s.gl,c=0;c<o.buffers.length;c++){var f=o.buffers[c],p=f._glBuffers[this.CONTEXT_UID];if(f._updateID!==p.updateID){p.updateID=f._updateID;var m=f.index?l.ELEMENT_ARRAY_BUFFER:l.ARRAY_BUFFER;if(l.bindBuffer(m,p.buffer),this._boundBuffer=p,p.byteLength>=f.data.byteLength)l.bufferSubData(m,0,f.data);else{var v=f.static?l.STATIC_DRAW:l.DYNAMIC_DRAW;p.byteLength=f.data.byteLength,l.bufferData(m,f.data,v)}}}},r.prototype.checkCompatibility=function(o,s){var l=o.attributes,c=s.attributeData;for(var f in c)if(!l[f])throw new Error('shader and geometry incompatible, geometry missing the "'+f+'" attribute')},r.prototype.getSignature=function(o,s){var l=o.attributes,c=s.attributeData,f=["g",o.id];for(var p in l)c[p]&&f.push(p);return f.join("-")},r.prototype.initGeometryVao=function(o,s){this.checkCompatibility(o,s);var l=this.gl,c=this.CONTEXT_UID,f=this.getSignature(o,s),p=o.glVertexArrayObjects[this.CONTEXT_UID],m=p[f];if(m)return p[s.id]=m,m;var v=o.buffers,E=o.attributes,y={},M={};for(var R in v)y[R]=0,M[R]=0;for(var D in E)!E[D].size&&s.attributeData[D]?E[D].size=s.attributeData[D].size:E[D].size||console.warn("PIXI Geometry attribute '"+D+"' size cannot be determined (likely the bound shader does not have the attribute)"),y[E[D].buffer]+=E[D].size*$c[E[D].type];for(var W in E){var Te=E[W],dt=Te.size;Te.stride===void 0&&(y[Te.buffer]===dt*$c[Te.type]?Te.stride=0:Te.stride=y[Te.buffer]),Te.start===void 0&&(Te.start=M[Te.buffer],M[Te.buffer]+=dt*$c[Te.type])}m=l.createVertexArray(),l.bindVertexArray(m);for(var Ie=0;Ie<v.length;Ie++){var ut=v[Ie];ut._glBuffers[c]||(ut._glBuffers[c]=new k2(l.createBuffer()),this.managedBuffers[ut.id]=ut,ut.disposeRunner.add(this)),ut._glBuffers[c].refCount++}return this.activateVao(o,s),this._activeVao=m,p[s.id]=m,p[f]=m,m},r.prototype.disposeBuffer=function(o,s){if(this.managedBuffers[o.id]){delete this.managedBuffers[o.id];var l=o._glBuffers[this.CONTEXT_UID],c=this.gl;o.disposeRunner.remove(this),l&&(s||c.deleteBuffer(l.buffer),delete o._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeGeometry=function(o,s){if(this.managedGeometries[o.id]){delete this.managedGeometries[o.id];var l=o.glVertexArrayObjects[this.CONTEXT_UID],c=this.gl,f=o.buffers;if(o.disposeRunner.remove(this),!!l){for(var p=0;p<f.length;p++){var m=f[p]._glBuffers[this.CONTEXT_UID];m.refCount--,m.refCount===0&&!s&&this.disposeBuffer(f[p],s)}if(!s){for(var v in l)if(v[0]==="g"){var E=l[v];this._activeVao===E&&this.unbind(),c.deleteVertexArray(E)}}delete o.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(o){for(var s=Object.keys(this.managedGeometries),l=0;l<s.length;l++)this.disposeGeometry(this.managedGeometries[s[l]],o);s=Object.keys(this.managedBuffers);for(var c=0;c<s.length;c++)this.disposeBuffer(this.managedBuffers[s[c]],o)},r.prototype.activateVao=function(o,s){var l=this.gl,c=this.CONTEXT_UID,f=o.buffers,p=o.attributes;o.indexBuffer&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,o.indexBuffer._glBuffers[c].buffer);var m=null;for(var v in p){var E=p[v],y=f[E.buffer],M=y._glBuffers[c];if(s.attributeData[v]){m!==M&&(l.bindBuffer(l.ARRAY_BUFFER,M.buffer),m=M);var R=s.attributeData[v].location;if(l.enableVertexAttribArray(R),l.vertexAttribPointer(R,E.size,E.type||l.FLOAT,E.normalized,E.stride,E.start),E.instance)if(this.hasInstance)l.vertexAttribDivisor(R,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(o,s,l,c){var f=this,p=f.gl,m=this._activeGeometry;if(m.indexBuffer){var v=m.indexBuffer.data.BYTES_PER_ELEMENT,E=v===2?p.UNSIGNED_SHORT:p.UNSIGNED_INT;v===2||v===4&&this.canUseUInt32ElementIndex?m.instanced?p.drawElementsInstanced(o,s||m.indexBuffer.data.length,E,(l||0)*v,c||1):p.drawElements(o,s||m.indexBuffer.data.length,E,(l||0)*v):console.warn("unsupported index buffer type: uint32")}else m.instanced?p.drawArraysInstanced(o,l,s||m.getSize(),c||1):p.drawArrays(o,l,s||m.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r}(So),f0=function(r){this.type=Fo.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};f0.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Fo.NONE,this.autoDetect=!0),this._target=null},f0.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};function Om(t,r,i,o){var s=xm(t,t.VERTEX_SHADER,r),l=xm(t,t.FRAGMENT_SHADER,i),c=t.createProgram();if(t.attachShader(c,s),t.attachShader(c,l),o)for(var f in o)t.bindAttribLocation(c,o[f],f);return t.linkProgram(c),t.getProgramParameter(c,t.LINK_STATUS)||(t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),t.getShaderParameter(l,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(l))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(c,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),t.getProgramInfoLog(c)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(c)),t.deleteProgram(c),c=null),t.deleteShader(s),t.deleteShader(l),c}function xm(t,r,i){var o=t.createShader(r);return t.shaderSource(o,i),t.compileShader(o),o}function Im(t,r){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"bool":return!1;case"bvec2":return h0(2*r);case"bvec3":return h0(3*r);case"bvec4":return h0(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function h0(t){for(var r=new Array(t),i=0;i<r.length;i++)r[i]=!1;return r}var Rm={},Mu=Rm;function Nm(){if(Mu===Rm||Mu&&Mu.isContextLost()){var t=document.createElement("canvas"),r;jr.PREFER_ENV>=_a.WEBGL2&&(r=t.getContext("webgl2",{})),r||(r=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),Mu=r}return Mu}var Wc;function Lm(){if(!Wc){Wc=ua.MEDIUM;var t=Nm();if(t&&t.getShaderPrecisionFormat){var r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Wc=r.precision?ua.HIGH:ua.MEDIUM}}return Wc}function C2(t,r,i){if(t.substring(0,9)!=="precision"){var o=r;return r===ua.HIGH&&i!==ua.HIGH&&(o=ua.MEDIUM),"precision "+o+` float;
`+t}else if(i!==ua.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var T2={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ao(t){return T2[t]}var qc=null,Bm={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function Dm(t,r){if(!qc){var i=Object.keys(Bm);qc={};for(var o=0;o<i.length;++o){var s=i[o];qc[t[s]]=Bm[s]}}return qc[r]}var p0={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},M2={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function O2(t,r){var i=`var v = null;
    var cv = null
    var t = 0;
    var gl = renderer.gl
    `;for(var o in t.uniforms){var s=r[o];if(!s){t.uniforms[o].group&&(i+=`
                    renderer.shader.syncUniformGroup(uv.`+o+`, syncData);
                `);continue}if(s.type==="float"&&s.size===1)i+=`
            if(uv.`+o+" !== ud."+o+`.value)
            {
                ud.`+o+".value = uv."+o+`
                gl.uniform1f(ud.`+o+".location, uv."+o+`)
            }
`;else if((s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray)i+=`

            t = syncData.textureCount++;

            renderer.texture.bind(uv.`+o+`, t);
            
            if(ud.`+o+`.value !== t)
            {
                ud.`+o+`.value = t;
                gl.uniform1i(ud.`+o+`.location, t);
; // eslint-disable-line max-len
            }
`;else if(s.type==="mat3"&&s.size===1)t.uniforms[o].a!==void 0?i+=`
                gl.uniformMatrix3fv(ud.`+o+".location, false, uv."+o+`.toArray(true));
                
`:i+=`
                gl.uniformMatrix3fv(ud.`+o+".location, false, uv."+o+`);
                
`;else if(s.type==="vec2"&&s.size===1)t.uniforms[o].x!==void 0?i+=`
                cv = ud.`+o+`.value;
                v = uv.`+o+`;

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud.`+o+`.location, v.x, v.y);
                }
`:i+=`
                cv = ud.`+o+`.value;
                v = uv.`+o+`;

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud.`+o+`.location, v[0], v[1]);
                }
                
`;else if(s.type==="vec4"&&s.size===1)t.uniforms[o].width!==void 0?i+=`
                cv = ud.`+o+`.value;
                v = uv.`+o+`;

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud.`+o+`.location, v.x, v.y, v.width, v.height)
                }
`:i+=`
                cv = ud.`+o+`.value;
                v = uv.`+o+`;

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud.`+o+`.location, v[0], v[1], v[2], v[3])
                }
                
`;else{var l=s.size===1?p0:M2,c=l[s.type].replace("location","ud."+o+".location");i+=`
            cv = ud.`+o+`.value;
            v = uv.`+o+`;
            `+c+`;
`}}return new Function("ud","uv","renderer","syncData",i)}var Fm=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function t5(t,r){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=r.createShader(r.FRAGMENT_SHADER);;){var o=Fm.replace(/%forloop%/gi,x2(t));if(r.shaderSource(i,o),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))t=t/2|0;else break}return t}function x2(t){for(var r="",i=0;i<t;++i)i>0&&(r+=`
else `),i<t-1&&(r+="if(test == "+i+".0){}");return r}var Ou;function zm(){if(typeof Ou=="boolean")return Ou;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ou=t({a:"b"},"a","b")===!0}catch{Ou=!1}return Ou}var I2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,R2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,N2=0,Kc={},wa=function t(r,i,o){o===void 0&&(o="pixi-shader"),this.id=N2++,this.vertexSrc=r||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(o=o.replace(/\s+/g,"-"),Kc[o]?(Kc[o]++,o+="-"+Kc[o]):Kc[o]=1,this.vertexSrc="#define SHADER_NAME "+o+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+`
`+this.fragmentSrc,this.vertexSrc=C2(this.vertexSrc,jr.PRECISION_VERTEX,ua.HIGH),this.fragmentSrc=C2(this.fragmentSrc,jr.PRECISION_FRAGMENT,Lm())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Zc={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};wa.prototype.extractData=function(r,i){var o=Nm();if(o){var s=Om(o,r,i);this.attributeData=this.getAttributeData(s,o),this.uniformData=this.getUniformData(s,o),o.deleteProgram(s)}else this.uniformData={},this.attributeData={}},wa.prototype.getAttributeData=function(r,i){for(var o={},s=[],l=i.getProgramParameter(r,i.ACTIVE_ATTRIBUTES),c=0;c<l;c++){var f=i.getActiveAttrib(r,c),p=Dm(i,f.type),m={type:p,name:f.name,size:Ao(p),location:0};o[f.name]=m,s.push(m)}s.sort(function(E,y){return E.name>y.name?1:-1});for(var v=0;v<s.length;v++)s[v].location=v;return o},wa.prototype.getUniformData=function(r,i){for(var o={},s=i.getProgramParameter(r,i.ACTIVE_UNIFORMS),l=0;l<s;l++){var c=i.getActiveUniform(r,l),f=c.name.replace(/\[.*?\]/,""),p=c.name.match(/\[.*?\]/,""),m=Dm(i,c.type);o[f]={type:m,size:c.size,isArray:p,value:Im(m,c.size)}}return o},Zc.defaultVertexSrc.get=function(){return R2},Zc.defaultFragmentSrc.get=function(){return I2},wa.from=function(r,i,o){var s=r+i,l=n0[s];return l||(n0[s]=l=new wa(r,i,o)),l},Object.defineProperties(wa,Zc);var as=function(r,i){this.program=r,i?i instanceof Yo?this.uniformGroup=i:this.uniformGroup=new Yo(i):this.uniformGroup=new Yo({});for(var o in r.uniformData)this.uniformGroup.uniforms[o]instanceof Array&&(this.uniformGroup.uniforms[o]=new Float32Array(this.uniformGroup.uniforms[o]))},Um={uniforms:{configurable:!0}};as.prototype.checkUniformExists=function(r,i){if(i.uniforms[r])return!0;for(var o in i.uniforms){var s=i.uniforms[o];if(s.group&&this.checkUniformExists(r,s))return!0}return!1},as.prototype.destroy=function(){this.uniformGroup=null},Um.uniforms.get=function(){return this.uniformGroup.uniforms},as.from=function(r,i,o){var s=wa.from(r,i);return new as(s,o)},Object.defineProperties(as.prototype,Um);var m0=0,v0=1,g0=2,_0=3,b0=4,Rs=function(){this.data=0,this.blendMode=kr.NORMAL,this.polygonOffset=0,this.blend=!0},Po={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Po.blend.get=function(){return!!(this.data&1<<m0)},Po.blend.set=function(t){!!(this.data&1<<m0)!==t&&(this.data^=1<<m0)},Po.offsets.get=function(){return!!(this.data&1<<v0)},Po.offsets.set=function(t){!!(this.data&1<<v0)!==t&&(this.data^=1<<v0)},Po.culling.get=function(){return!!(this.data&1<<g0)},Po.culling.set=function(t){!!(this.data&1<<g0)!==t&&(this.data^=1<<g0)},Po.depthTest.get=function(){return!!(this.data&1<<_0)},Po.depthTest.set=function(t){!!(this.data&1<<_0)!==t&&(this.data^=1<<_0)},Po.clockwiseFrontFace.get=function(){return!!(this.data&1<<b0)},Po.clockwiseFrontFace.set=function(t){!!(this.data&1<<b0)!==t&&(this.data^=1<<b0)},Po.blendMode.get=function(){return this._blendMode},Po.blendMode.set=function(t){this.blend=t!==kr.NONE,this._blendMode=t},Po.polygonOffset.get=function(){return this._polygonOffset},Po.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},Rs.for2d=function(){var r=new Rs;return r.depthTest=!1,r.blend=!0,r},Object.defineProperties(Rs.prototype,Po);var Hm=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Gm=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,xu=function(t){function r(s,l,c){var f=wa.from(s||r.defaultVertexSrc,l||r.defaultFragmentSrc);t.call(this,f,c),this.padding=0,this.resolution=jr.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Rs}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={blendMode:{configurable:!0}},o={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return r.prototype.apply=function(l,c,f,p,m){l.applyFilter(this,c,f,p,m)},i.blendMode.get=function(){return this.state.blendMode},i.blendMode.set=function(s){this.state.blendMode=s},o.defaultVertexSrc.get=function(){return Hm},o.defaultFragmentSrc.get=function(){return Gm},Object.defineProperties(r.prototype,i),Object.defineProperties(r,o),r}(as);xu.SOURCE_KEY_MAP={};var Yc=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,n5=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Vm=new Ko,Iu=function(r,i){this._texture=r,this.mapCoord=new Ko,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1},y0={texture:{configurable:!0}};y0.texture.get=function(){return this._texture},y0.texture.set=function(t){this._texture=t,this._updateID=-1},Iu.prototype.multiplyUvs=function(r,i){i===void 0&&(i=r);for(var o=this.mapCoord,s=0;s<r.length;s+=2){var l=r[s],c=r[s+1];i[s]=l*o.a+c*o.c+o.tx,i[s+1]=l*o.b+c*o.d+o.ty}return i},Iu.prototype.update=function(r){var i=this._texture;if(!i||!i.valid||!r&&this._updateID===i._updateID)return!1;this._updateID=i._updateID;var o=i._uvs;this.mapCoord.set(o.x1-o.x0,o.y1-o.y0,o.x3-o.x0,o.y3-o.y0,o.x0,o.y0);var s=i.orig,l=i.trim;l&&(Vm.set(s.width/l.width,0,0,s.height/l.height,-l.x/l.width,-l.y/l.height),this.mapCoord.append(Vm));var c=i.baseTexture,f=this.uClampFrame,p=this.clampMargin/c.resolution,m=this.clampOffset;return f[0]=(i._frame.x+p+m)/c.width,f[1]=(i._frame.y+p+m)/c.height,f[2]=(i._frame.x+i._frame.width-p+m)/c.width,f[3]=(i._frame.y+i._frame.height-p+m)/c.height,this.uClampOffset[0]=m/c.realWidth,this.uClampOffset[1]=m/c.realHeight,this.isSimple=i._frame.width===c.width&&i._frame.height===c.height&&i.rotate===0,!0},Object.defineProperties(Iu.prototype,y0);var L2=function(t){function r(i){var o=new Ko;t.call(this,Yc,n5),i.renderable=!1,this.maskSprite=i,this.maskMatrix=o}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.apply=function(o,s,l,c){var f=this.maskSprite,p=this.maskSprite.texture;p.valid&&(p.transform||(p.transform=new Iu(p,0)),p.transform.update(),this.uniforms.npmAlpha=p.baseTexture.alphaMode?0:1,this.uniforms.mask=p,this.uniforms.otherMatrix=o.calculateSpriteMatrix(this.maskMatrix,f).prepend(p.transform.mapCoord),this.uniforms.alpha=f.worldAlpha,this.uniforms.maskClamp=p.transform.uClampFrame,o.applyFilter(this,s,l,c))},r}(xu),jm=function(t){function r(i){t.call(this,i),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.setMaskStack=function(o){this.maskStack=o,this.renderer.scissor.setMaskStack(o),this.renderer.stencil.setMaskStack(o)},r.prototype.push=function(o,s){if(!s.isMaskData){var l=this.maskDataPool.pop()||new f0;l.pooled=!0,l.maskObject=s,s=l}switch(s.autoDetect&&this.detect(s),s.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),s._target=o,s.type){case Fo.SCISSOR:this.maskStack.push(s),this.renderer.scissor.push(s);break;case Fo.STENCIL:this.maskStack.push(s),this.renderer.stencil.push(s);break;case Fo.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s),this.maskStack.push(s);break}},r.prototype.pop=function(o){var s=this.maskStack.pop();if(!(!s||s._target!==o)){switch(s.type){case Fo.SCISSOR:this.renderer.scissor.pop();break;case Fo.STENCIL:this.renderer.stencil.pop(s.maskObject);break;case Fo.SPRITE:this.popSpriteMask();break}s.reset(),s.pooled&&this.maskDataPool.push(s)}},r.prototype.detect=function(o){var s=o.maskObject;if(s.isSprite){o.type=Fo.SPRITE;return}if(o.type=Fo.STENCIL,this.enableScissor&&s.isFastRect&&s.isFastRect()){var l=s.worldTransform,c=Math.atan2(l.b,l.a),f=Math.atan2(l.d,l.c);c=Math.round(c*(180/Math.PI)*100),f=Math.round(f*(180/Math.PI)*100)-c,c=(c%9e3+9e3)%9e3,f=(f%18e3+18e3)%18e3,c===0&&f===9e3&&(o.type=Fo.SCISSOR)}},r.prototype.pushSpriteMask=function(o){var s=o.maskObject,l=o._target,c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new L2(s)]),c[0].resolution=this.renderer.resolution,c[0].maskSprite=s;var f=l.filterArea;l.filterArea=s.getBounds(!0),this.renderer.filter.push(l,c),l.filterArea=f,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r}(So),$m=function(t){function r(i){t.call(this,i),this.maskStack=[],this.glConst=0}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(o){var s=this.renderer,l=s.gl,c=this.getStackLength();this.maskStack=o;var f=this.getStackLength();f!==c&&(f===0?l.disable(this.glConst):(l.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.maskStack=null},r}(So),B2=function(t){function r(i){t.call(this,i),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getStackLength=function(){var o=this.maskStack[this.maskStack.length-1];return o?o._scissorCounter:0},r.prototype.push=function(o){var s=o.maskObject;s.renderable=!0;var l=o._scissorRect,c=s.getBounds(!0),f=this.renderer,p=f.gl;s.renderable=!1,l?c.fit(l):p.enable(p.SCISSOR_TEST),o._scissorCounter++,o._scissorRect=c,this._useCurrent()},r.prototype.pop=function(){var o=this.renderer,s=o.gl;this.getStackLength()>0?this._useCurrent():s.disable(s.SCISSOR_TEST)},r.prototype._useCurrent=function(){var o=this.maskStack[this.maskStack.length-1]._scissorRect,s=this.renderer.renderTexture.current,l=this.renderer.projection,c=l.transform,f=l.sourceFrame,p=l.destinationFrame,m=s?s.resolution:this.renderer.resolution,v=(o.x-f.x)*m+p.x,E=(o.y-f.y)*m+p.y,y=o.width*m,M=o.height*m;c&&(v+=c.tx*m,E+=c.ty*m),s||(E=this.renderer.height-M-E),this.renderer.gl.scissor(v,E,y,M)},r}($m),D2=function(t){function r(i){t.call(this,i),this.glConst=WebGLRenderingContext.STENCIL_TEST}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getStackLength=function(){var o=this.maskStack[this.maskStack.length-1];return o?o._stencilCounter:0},r.prototype.push=function(o){var s=o.maskObject,l=this.renderer,c=l.gl,f=o._stencilCounter;f===0&&(this.renderer.framebuffer.forceStencil(),c.enable(c.STENCIL_TEST)),o._stencilCounter++,c.colorMask(!1,!1,!1,!1),c.stencilFunc(c.EQUAL,f,this._getBitwiseMask()),c.stencilOp(c.KEEP,c.KEEP,c.INCR),s.renderable=!0,s.render(this.renderer),this.renderer.batch.flush(),s.renderable=!1,this._useCurrent()},r.prototype.pop=function(o){var s=this.renderer.gl;this.getStackLength()===0?(s.disable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),s.clearStencil(0)):(s.colorMask(!1,!1,!1,!1),s.stencilOp(s.KEEP,s.KEEP,s.DECR),o.renderable=!0,o.render(this.renderer),this.renderer.batch.flush(),o.renderable=!1,this._useCurrent())},r.prototype._useCurrent=function(){var o=this.renderer.gl;o.colorMask(!0,!0,!0,!0),o.stencilFunc(o.EQUAL,this.getStackLength(),this._getBitwiseMask()),o.stencilOp(o.KEEP,o.KEEP,o.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},r}($m),F2=function(t){function r(i){t.call(this,i),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ko,this.transform=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.update=function(o,s,l,c){this.destinationFrame=o||this.destinationFrame||this.defaultFrame,this.sourceFrame=s||this.sourceFrame||o,this.calculateProjection(this.destinationFrame,this.sourceFrame,l,c),this.transform&&this.projectionMatrix.append(this.transform);var f=this.renderer;f.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,f.globalUniforms.update(),f.shader.shader&&f.shader.syncUniformGroup(f.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(o,s,l,c){var f=this.projectionMatrix;c?(f.a=1/o.width*2*l,f.d=-1/o.height*2*l,f.tx=-1-s.x*f.a,f.ty=1-s.y*f.d):(f.a=1/o.width*2*l,f.d=1/o.height*2*l,f.tx=-1-s.x*f.a,f.ty=-1-s.y*f.d)},r.prototype.setTransform=function(){},r}(So),Ol=new so,Wm=function(t){function r(i){t.call(this,i),this.clearColor=i._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new so,this.destinationFrame=new so}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.bind=function(o,s,l){o===void 0&&(o=null),this.current=o;var c=this.renderer,f;if(o){var p=o.baseTexture;f=p.resolution,l||(Ol.width=p.realWidth,Ol.height=p.realHeight,l=Ol),s||(s=l),this.renderer.framebuffer.bind(p.framebuffer,l),this.renderer.projection.update(l,s,f,!1),this.renderer.mask.setMaskStack(p.maskStack)}else f=this.renderer.resolution,l||(Ol.width=c.width,Ol.height=c.height,l=Ol),s||(s=l),c.framebuffer.bind(null,l),this.renderer.projection.update(l,s,f,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(s),this.destinationFrame.x=l.x/f,this.destinationFrame.y=l.y/f,this.destinationFrame.width=l.width/f,this.destinationFrame.height=l.height/f,s===l&&this.sourceFrame.copyFrom(this.destinationFrame)},r.prototype.clear=function(o){this.current?o=o||this.current.baseTexture.clearColor:o=o||this.clearColor,this.renderer.framebuffer.clear(o[0],o[1],o[2],o[3])},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r}(So),qm=function(r,i){this.program=r,this.uniformData=i,this.uniformGroups={}};qm.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var z2=0,Km={textureCount:0},U2=function(t){function r(i){t.call(this,i),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=z2++}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.systemCheck=function(){if(!zm())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(o){this.gl=o,this.reset()},r.prototype.bind=function(o,s){o.uniforms.globals=this.renderer.globalUniforms;var l=o.program,c=l.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(o);return this.shader=o,this.program!==l&&(this.program=l,this.gl.useProgram(c.program)),s||(Km.textureCount=0,this.syncUniformGroup(o.uniformGroup,Km)),c},r.prototype.setUniforms=function(o){var s=this.shader.program,l=s.glPrograms[this.renderer.CONTEXT_UID];s.syncUniforms(l.uniformData,o,this.renderer)},r.prototype.syncUniformGroup=function(o,s){var l=this.getglProgram();(!o.static||o.dirtyId!==l.uniformGroups[o.id])&&(l.uniformGroups[o.id]=o.dirtyId,this.syncUniforms(o,l,s))},r.prototype.syncUniforms=function(o,s,l){var c=o.syncUniforms[this.shader.program.id]||this.createSyncGroups(o);c(s.uniformData,o.uniforms,this.renderer,l)},r.prototype.createSyncGroups=function(o){var s=this.getSignature(o,this.shader.program.uniformData);return this.cache[s]||(this.cache[s]=O2(o,this.shader.program.uniformData)),o.syncUniforms[this.shader.program.id]=this.cache[s],o.syncUniforms[this.shader.program.id]},r.prototype.getSignature=function(o,s){var l=o.uniforms,c=[];for(var f in l)c.push(f),s[f]&&c.push(s[f].type);return c.join("-")},r.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateShader=function(o){var s=this.gl,l=o.program,c={};for(var f in l.attributeData)c[f]=l.attributeData[f].location;var p=Om(s,l.vertexSrc,l.fragmentSrc,c),m={};for(var v in l.uniformData){var E=l.uniformData[v];m[v]={location:s.getUniformLocation(p,v),value:Im(E.type,E.size)}}var y=new qm(p,m);return l.glPrograms[this.renderer.CONTEXT_UID]=y,y},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.destroyed=!0},r}(So);function H2(t,r){return r===void 0&&(r=[]),r[kr.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.ADD]=[t.ONE,t.ONE],r[kr.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.NONE]=[0,0],r[kr.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],r[kr.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[kr.SRC_IN]=[t.DST_ALPHA,t.ZERO],r[kr.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],r[kr.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],r[kr.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],r[kr.DST_IN]=[t.ZERO,t.SRC_ALPHA],r[kr.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],r[kr.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],r[kr.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],r[kr.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],r}var G2=0,V2=1,j2=2,$2=3,Zm=4,W2=function(t){function r(i){t.call(this,i),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=kr.NONE,this._blendEq=!1,this.map=[],this.map[G2]=this.setBlend,this.map[V2]=this.setOffset,this.map[j2]=this.setCullFace,this.map[$2]=this.setDepthTest,this.map[Zm]=this.setFrontFace,this.checks=[],this.defaultState=new Rs,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.contextChange=function(o){this.gl=o,this.blendModes=H2(o),this.set(this.defaultState),this.reset()},r.prototype.set=function(o){if(o=o||this.defaultState,this.stateId!==o.data){for(var s=this.stateId^o.data,l=0;s;)s&1&&this.map[l].call(this,!!(o.data&1<<l)),s=s>>1,l++;this.stateId=o.data}for(var c=0;c<this.checks.length;c++)this.checks[c](this,o)},r.prototype.forceState=function(o){o=o||this.defaultState;for(var s=0;s<this.map.length;s++)this.map[s].call(this,!!(o.data&1<<s));for(var l=0;l<this.checks.length;l++)this.checks[l](this,o);this.stateId=o.data},r.prototype.setBlend=function(o){this.updateCheck(r.checkBlendMode,o),this.gl[o?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(o){this.updateCheck(r.checkPolygonOffset,o),this.gl[o?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(o){this.gl[o?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setCullFace=function(o){this.gl[o?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(o){this.gl.frontFace(this.gl[o?"CW":"CCW"])},r.prototype.setBlendMode=function(o){if(o!==this.blendMode){this.blendMode=o;var s=this.blendModes[o],l=this.gl;s.length===2?l.blendFunc(s[0],s[1]):l.blendFuncSeparate(s[0],s[1],s[2],s[3]),s.length===6?(this._blendEq=!0,l.blendEquationSeparate(s[4],s[5])):this._blendEq&&(this._blendEq=!1,l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD))}},r.prototype.setPolygonOffset=function(o,s){this.gl.polygonOffset(o,s)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(o,s){var l=this.checks.indexOf(o);s&&l===-1?this.checks.push(o):!s&&l!==-1&&this.checks.splice(l,1)},r.checkBlendMode=function(o,s){o.setBlendMode(s.blendMode)},r.checkPolygonOffset=function(o,s){o.setPolygonOffset(s.polygonOffset,0)},r}(So),q2=function(t){function r(i){t.call(this,i),this.count=0,this.checkCount=0,this.maxIdle=jr.GC_MAX_IDLE,this.checkCountMax=jr.GC_MAX_CHECK_COUNT,this.mode=jr.GC_MODE}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Yf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var o=this.renderer.texture,s=o.managedTextures,l=!1,c=0;c<s.length;c++){var f=s[c];!f.framebuffer&&this.count-f.touched>this.maxIdle&&(o.destroyTexture(f,!0),s[c]=null,l=!0)}if(l){for(var p=0,m=0;m<s.length;m++)s[m]!==null&&(s[p++]=s[m]);s.length=p}},r.prototype.unload=function(o){var s=this.renderer.textureSystem;o._texture&&o._texture._glRenderTargets&&s.destroyTexture(o._texture);for(var l=o.children.length-1;l>=0;l--)this.unload(o.children[l])},r}(So),w0=function(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},K2=function(t){function r(i){t.call(this,i),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Zi}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.contextChange=function(){var o=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var s=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=s;for(var l=0;l<s;l++)this.boundTextures[l]=null;this.emptyTextures={};var c=new w0(o.createTexture());o.bindTexture(o.TEXTURE_2D,c.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[o.TEXTURE_2D]=c,this.emptyTextures[o.TEXTURE_CUBE_MAP]=new w0(o.createTexture()),o.bindTexture(o.TEXTURE_CUBE_MAP,this.emptyTextures[o.TEXTURE_CUBE_MAP].texture);for(var f=0;f<6;f++)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,null);o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR);for(var p=0;p<this.boundTextures.length;p++)this.bind(null,p)},r.prototype.bind=function(o,s){s===void 0&&(s=0);var l=this,c=l.gl;if(o){if(o=o.baseTexture||o,o.valid){o.touched=this.renderer.textureGC.count;var f=o._glTextures[this.CONTEXT_UID]||this.initTexture(o);this.boundTextures[s]!==o&&(this.currentLocation!==s&&(this.currentLocation=s,c.activeTexture(c.TEXTURE0+s)),c.bindTexture(o.target,f.texture)),f.dirtyId!==o.dirtyId&&(this.currentLocation!==s&&(this.currentLocation=s,c.activeTexture(c.TEXTURE0+s)),this.updateTexture(o)),this.boundTextures[s]=o}}else this.currentLocation!==s&&(this.currentLocation=s,c.activeTexture(c.TEXTURE0+s)),c.bindTexture(c.TEXTURE_2D,this.emptyTextures[c.TEXTURE_2D].texture),this.boundTextures[s]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var o=0;o<this.boundTextures.length;o++)this.boundTextures[o]=this.unknownTexture},r.prototype.unbind=function(o){var s=this,l=s.gl,c=s.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var f=0;f<c.length;f++)c[f]===this.unknownTexture&&this.bind(null,f)}for(var p=0;p<c.length;p++)c[p]===o&&(this.currentLocation!==p&&(l.activeTexture(l.TEXTURE0+p),this.currentLocation=p),l.bindTexture(l.TEXTURE_2D,this.emptyTextures[o.target].texture),c[p]=null)},r.prototype.initTexture=function(o){var s=new w0(this.gl.createTexture());return s.dirtyId=-1,o._glTextures[this.CONTEXT_UID]=s,this.managedTextures.push(o),o.on("dispose",this.destroyTexture,this),s},r.prototype.initTextureType=function(o,s){if(s.internalFormat=o.format,s.type=o.type,this.webGLVersion===2){var l=this.renderer.gl;o.type===l.FLOAT&&o.format===l.RGBA&&(s.internalFormat=l.RGBA32F),o.type===wo.HALF_FLOAT&&(s.type=l.HALF_FLOAT),s.type===l.HALF_FLOAT&&o.format===l.RGBA&&(s.internalFormat=l.RGBA16F)}},r.prototype.updateTexture=function(o){var s=o._glTextures[this.CONTEXT_UID];if(s){var l=this.renderer;if(this.initTextureType(o,s),!(o.resource&&o.resource.upload(l,o,s))){var c=o.realWidth,f=o.realHeight,p=l.gl;(s.width!==c||s.height!==f||s.dirtyId<0)&&(s.width=c,s.height=f,p.texImage2D(o.target,0,s.internalFormat,c,f,0,o.format,s.type,null))}o.dirtyStyleId!==s.dirtyStyleId&&this.updateTextureStyle(o),s.dirtyId=o.dirtyId}},r.prototype.destroyTexture=function(o,s){var l=this,c=l.gl;if(o=o.baseTexture||o,o._glTextures[this.CONTEXT_UID]&&(this.unbind(o),c.deleteTexture(o._glTextures[this.CONTEXT_UID].texture),o.off("dispose",this.destroyTexture,this),delete o._glTextures[this.CONTEXT_UID],!s)){var f=this.managedTextures.indexOf(o);f!==-1&&Su(this.managedTextures,f,1)}},r.prototype.updateTextureStyle=function(o){var s=o._glTextures[this.CONTEXT_UID];s&&((o.mipmap===La.POW2||this.webGLVersion!==2)&&!o.isPowerOfTwo?s.mipmap=0:s.mipmap=o.mipmap>=1,this.webGLVersion!==2&&!o.isPowerOfTwo?s.wrapMode=Eu.CLAMP:s.wrapMode=o.wrapMode,o.resource&&o.resource.style(this.renderer,o,s)||this.setStyle(o,s),s.dirtyStyleId=o.dirtyStyleId)},r.prototype.setStyle=function(o,s){var l=this.gl;if(s.mipmap&&l.generateMipmap(o.target),l.texParameteri(o.target,l.TEXTURE_WRAP_S,s.wrapMode),l.texParameteri(o.target,l.TEXTURE_WRAP_T,s.wrapMode),s.mipmap){l.texParameteri(o.target,l.TEXTURE_MIN_FILTER,o.scaleMode?l.LINEAR_MIPMAP_LINEAR:l.NEAREST_MIPMAP_NEAREST);var c=this.renderer.context.extensions.anisotropicFiltering;if(c&&o.anisotropicLevel>0&&o.scaleMode===kl.LINEAR){var f=Math.min(o.anisotropicLevel,l.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT));l.texParameterf(o.target,c.TEXTURE_MAX_ANISOTROPY_EXT,f)}}else l.texParameteri(o.target,l.TEXTURE_MIN_FILTER,o.scaleMode?l.LINEAR:l.NEAREST);l.texParameteri(o.target,l.TEXTURE_MAG_FILTER,o.scaleMode?l.LINEAR:l.NEAREST)},r}(So),E0=new Ko,Z2=function(t){function r(o,s){t.call(this),s=Object.assign({},jr.RENDER_OPTIONS,s),s.roundPixels&&(jr.ROUND_PIXELS=s.roundPixels,mm("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=s,this.type=wu.UNKNOWN,this.screen=new so(0,0,s.width,s.height),this.view=s.view||document.createElement("canvas"),this.resolution=s.resolution||jr.RESOLUTION,this.transparent=s.transparent,this.autoDensity=s.autoDensity||s.autoResize||!1,this.preserveDrawingBuffer=s.preserveDrawingBuffer,this.clearBeforeRender=s.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=s.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new Vc,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return r.prototype.initPlugins=function(s){for(var l in s)this.plugins[l]=new s[l](this)},i.width.get=function(){return this.view.width},i.height.get=function(){return this.view.height},r.prototype.resize=function(s,l){this.screen.width=s,this.screen.height=l,this.view.width=s*this.resolution,this.view.height=l*this.resolution,this.autoDensity&&(this.view.style.width=s+"px",this.view.style.height=l+"px")},r.prototype.generateTexture=function(s,l,c,f){f=f||s.getLocalBounds(),f.width===0&&(f.width=1),f.height===0&&(f.height=1);var p=u0.create(f.width|0,f.height|0,l,c);return E0.tx=-f.x,E0.ty=-f.y,this.render(s,p,!1,E0,!!s.parent),p},r.prototype.destroy=function(s){for(var l in this.plugins)this.plugins[l].destroy(),this.plugins[l]=null;s&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=wu.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i.backgroundColor.get=function(){return this._backgroundColor},i.backgroundColor.set=function(o){this._backgroundColor=o,this._backgroundColorString=Xf(o),cm(o,this._backgroundColorRgba)},Object.defineProperties(r.prototype,i),r}(Qa),Ym=function(t){function r(i){i===void 0&&(i={}),t.call(this,"WebGL",i),i=this.options,this.type=wu.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new ho("destroy"),contextChange:new ho("contextChange",1),reset:new ho("reset"),update:new ho("update"),postrender:new ho("postrender"),prerender:new ho("prerender"),resize:new ho("resize",2)},this.globalUniforms=new Yo({projectionMatrix:new Ko},!0),this.addSystem(jm,"mask").addSystem(A2,"context").addSystem(W2,"state").addSystem(U2,"shader").addSystem(K2,"texture").addSystem(P2,"geometry").addSystem(S2,"framebuffer").addSystem(B2,"scissor").addSystem(D2,"stencil").addSystem(F2,"projection").addSystem(q2,"textureGC").addSystem(Tm,"filter").addSystem(Wm,"renderTexture").addSystem(E2,"batch"),this.initPlugins(r.__plugins),i.context?this.context.initFromContext(i.context):this.context.initFromOptions({alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,Jy(this.context.webGLVersion===2?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.create=function(o){if(Lc())return new r(o);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.addSystem=function(o,s){s||(s=o.name);var l=new o(this);if(this[s])throw new Error('Whoops! The name "'+s+'" is already in use');this[s]=l;for(var c in this.runners)this.runners[c].add(l);return this},r.prototype.render=function(o,s,l,c,f){if(this.renderingToScreen=!s,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=c,!this.context.isLost){if(s||(this._lastObjectRendered=o),!f){var p=o.parent;o.parent=this._tempDisplayObjectParent,o.updateTransform(),o.parent=p}this.renderTexture.bind(s),this.batch.currentRenderer.start(),(l!==void 0?l:this.clearBeforeRender)&&this.renderTexture.clear(),o.render(this),this.batch.currentRenderer.flush(),s&&s.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},r.prototype.resize=function(o,s){t.prototype.resize.call(this,o,s),this.runners.resize.run(o,s)},r.prototype.reset=function(){return this.runners.reset.run(),this},r.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},r.prototype.destroy=function(o){this.runners.destroy.run();for(var s in this.runners)this.runners[s].destroy();t.prototype.destroy.call(this,o),this.gl=null},r.registerPlugin=function(o,s){r.__plugins=r.__plugins||{},r.__plugins[o]=s},r}(Z2);function Xm(t){return Ym.create(t)}var Qm=function(){this.texArray=null,this.blend=0,this.type=Al.TRIANGLES,this.start=0,this.size=0,this.data=null},A0=function(){this.elements=[],this.ids=[],this.count=0};A0.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0};var Ru=function(r){this.rawBinaryData=new ArrayBuffer(r),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},xl={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};xl.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},xl.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},xl.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},xl.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},xl.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},Ru.prototype.view=function(r){return this[r+"View"]},Ru.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Ru.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},Object.defineProperties(Ru.prototype,xl);var S0=function(t){function r(i){t.call(this,i),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Rs.for2d(),this.size=jr.SPRITE_BATCH_SIZE*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),i.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.contextChange=function(){var o=this.renderer.gl;jr.PREFER_ENV===_a.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),jr.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=t5(this.MAX_TEXTURES,o)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var s=0;s<this._packedGeometryPoolSize;s++)this._packedGeometries[s]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var o=r._drawCallPool,s=r._textureArrayPool,l=this.size/4,c=Math.floor(l/this.MAX_TEXTURES)+1;o.length<l;)o.push(new Qm);for(;s.length<c;)s.push(new A0);for(var f=0;f<this.MAX_TEXTURES;f++)this._tempBoundTextures[f]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(o){o._texture.valid&&(this._vertexCount+o.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=o.vertexData.length/2,this._indexCount+=o.indices.length,this._bufferedTextures[this._bufferSize]=o._texture.baseTexture,this._bufferedElements[this._bufferSize++]=o)},r.prototype.buildTexturesAndDrawCalls=function(){var o=this,s=o._bufferedTextures,l=o.MAX_TEXTURES,c=r._textureArrayPool,f=this.renderer.batch,p=this._tempBoundTextures,m=this.renderer.textureGC.count,v=++Zi._globalBatch,E=0,y=c[0],M=0;f.copyBoundTextures(p,l);for(var R=0;R<this._bufferSize;++R){var D=s[R];s[R]=null,D._batchEnabled!==v&&(y.count>=l&&(f.boundArray(y,p,v,l),this.buildDrawCalls(y,M,R),M=R,y=c[++E],++v),D._batchEnabled=v,D.touched=m,y.elements[y.count++]=D)}y.count>0&&(f.boundArray(y,p,v,l),this.buildDrawCalls(y,M,this._bufferSize),++E,++v);for(var W=0;W<p.length;W++)p[W]=null;Zi._globalBatch=v},r.prototype.buildDrawCalls=function(o,s,l){var c=this,f=c._bufferedElements,p=c._attributeBuffer,m=c._indexBuffer,v=c.vertexSize,E=r._drawCallPool,y=this._dcIndex,M=this._aIndex,R=this._iIndex,D=E[y];D.start=this._iIndex,D.texArray=o;for(var W=s;W<l;++W){var Te=f[W],dt=Te._texture.baseTexture,Ie=Qf[dt.alphaMode?1:0][Te.blendMode];f[W]=null,s<W&&D.blend!==Ie&&(D.size=R-D.start,s=W,D=E[++y],D.texArray=o,D.start=R),this.packInterleavedGeometry(Te,p,m,M,R),M+=Te.vertexData.length/2*v,R+=Te.indices.length,D.blend=Ie}s<l&&(D.size=R-D.start,++y),this._dcIndex=y,this._aIndex=M,this._iIndex=R},r.prototype.bindAndClearTexArray=function(o){for(var s=this.renderer.texture,l=0;l<o.count;l++)s.bind(o.elements[l],o.ids[l]),o.elements[l]=null;o.count=0},r.prototype.updateGeometry=function(){var o=this,s=o._packedGeometries,l=o._attributeBuffer,c=o._indexBuffer;jr.CAN_UPLOAD_SAME_BUFFER?(s[this._flushId]._buffer.update(l.rawBinaryData),s[this._flushId]._indexBuffer.update(c),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,s[this._flushId]=new this.geometryClass),s[this._flushId]._buffer.update(l.rawBinaryData),s[this._flushId]._indexBuffer.update(c),this.renderer.geometry.bind(s[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var o=this._dcIndex,s=this.renderer,l=s.gl,c=s.state,f=r._drawCallPool,p=null,m=0;m<o;m++){var v=f[m],E=v.texArray,y=v.type,M=v.size,R=v.start,D=v.blend;p!==E&&(p=E,this.bindAndClearTexArray(E)),this.state.blendMode=D,c.set(this.state),l.drawElements(y,M,l.UNSIGNED_SHORT,R*2)}},r.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),jr.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]&&this._packedGeometries[o].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(o){var s=Bc(Math.ceil(o/8)),l=e0(s),c=s*8;this._aBuffers.length<=l&&(this._iBuffers.length=l+1);var f=this._aBuffers[c];return f||(this._aBuffers[c]=f=new Ru(c*this.vertexSize*4)),f},r.prototype.getIndexBuffer=function(o){var s=Bc(Math.ceil(o/12)),l=e0(s),c=s*12;this._iBuffers.length<=l&&(this._iBuffers.length=l+1);var f=this._iBuffers[l];return f||(this._iBuffers[l]=f=new Uint16Array(c)),f},r.prototype.packInterleavedGeometry=function(o,s,l,c,f){for(var p=s.uint32View,m=s.float32View,v=c/this.vertexSize,E=o.uvs,y=o.indices,M=o.vertexData,R=o._texture.baseTexture._batchLocation,D=Math.min(o.worldAlpha,1),W=D<1&&o._texture.baseTexture.alphaMode?fm(o._tintRGB,D):o._tintRGB+(D*255<<24),Te=0;Te<M.length;Te+=2)m[c++]=M[Te],m[c++]=M[Te+1],m[c++]=E[Te],m[c++]=E[Te+1],p[c++]=W,m[c++]=R;for(var dt=0;dt<y.length;dt++)l[f++]=v+y[dt]},r}(os);S0._drawCallPool=[],S0._textureArrayPool=[];var Xc=function(r,i){if(this.vertexSrc=r,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},i.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(i.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};Xc.prototype.generateShader=function(r){if(!this.programCache[r]){for(var i=new Int32Array(r),o=0;o<r;o++)i[o]=o;this.defaultGroupCache[r]=Yo.from({uSamplers:i},!0);var s=this.fragTemplate;s=s.replace(/%count%/gi,""+r),s=s.replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new wa(this.vertexSrc,s)}var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ko,default:this.defaultGroupCache[r]};return new as(this.programCache[r],l)},Xc.prototype.generateSampleSrc=function(r){var i="";i+=`
`,i+=`
`;for(var o=0;o<r;o++)o>0&&(i+=`
else `),o<r-1&&(i+="if(vTextureId < "+o+".5)"),i+=`
{`,i+=`
	color = texture2D(uSamplers[`+o+"], vTextureCoord);",i+=`
}`;return i+=`
`,i+=`
`,i};var Jm=function(t){function r(i){i===void 0&&(i=!1),t.call(this),this._buffer=new ko(null,i,!1),this._indexBuffer=new ko(null,i,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,wo.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,wo.FLOAT).addAttribute("aColor",this._buffer,4,!0,wo.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,wo.FLOAT).addIndex(this._indexBuffer)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(ro),ev=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,tv=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,k0=function(){},P0={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};k0.create=function(r){var i=Object.assign({vertex:ev,fragment:tv,geometryClass:Jm,vertexSize:6},r),o=i.vertex,s=i.fragment,l=i.vertexSize,c=i.geometryClass;return function(f){function p(m){f.call(this,m),this.shaderGenerator=new Xc(o,s),this.geometryClass=c,this.vertexSize=l}return f&&(p.__proto__=f),p.prototype=Object.create(f&&f.prototype),p.prototype.constructor=p,p}(S0)},P0.defaultVertexSrc.get=function(){return ev},P0.defaultFragmentTemplate.get=function(){return tv},Object.defineProperties(k0,P0);var Y2=k0.create()},5653:function(ct,Xt,we){"use strict";we.d(Xt,{A:function(){return Z},B:function(){return fa},C:function(){return Bu},D:function(){return ke},E:function(){return C},F:function(){return Oe},G:function(){return tn},H:function(){return Ye},I:function(){return Nt},J:function(){return fe},K:function(){return Qn},L:function(){return At},M:function(){return si},N:function(){return ai},O:function(){return yt},P:function(){return lo},Q:function(){return on},R:function(){return H},S:function(){return Tn},T:function(){return On},U:function(){return ss},V:function(){return P},a:function(){return Wn},b:function(){return Xn},c:function(){return je},d:function(){return $n},e:function(){return ot},f:function(){return ae},g:function(){return pr},h:function(){return ue},i:function(){return hn},j:function(){return Xe},k:function(){return Ge},l:function(){return ft},m:function(){return De},n:function(){return Le},o:function(){return Cn},p:function(){return Ve},q:function(){return pe},r:function(){return Bt},s:function(){return qr},t:function(){return j},u:function(){return Se},v:function(){return Du},w:function(){return Fl},x:function(){return ds},y:function(){return Dl},z:function(){return zl}});var P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof we.g<"u"?we.g:typeof self<"u"?self:{},se={exports:{}};(function(re){/*!
 * Chess.com (c) 2020 | all rights reserved
 *//*!
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */(function(){var ee=function(){var J=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],Ke=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],$e=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],fn=[4174784170,2938602761],mt={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},gt=[];gt[5]=1,gt[6]=0,gt[9]=3,gt[10]=2,gt[17]=5,gt[18]=4,gt[33]=7,gt[34]=6,gt[65]=9,gt[66]=8,gt[129]=11,gt[130]=10;var Rn=[2,5,10,20,40,80,160,64],w="nbrq",O=["","0000000","000000","00000","0000","000","00","0",""],q=16;function ge(nr){var ln=nr.toString(16);return O[ln.length]+ln}function ht(nr){return ge(nr[0])+ge(nr[1])}function et(nr){return[parseInt(nr.substr(0,8),16),parseInt(nr.substr(8),16)]}function ne(nr,ln){var pt,qe,vn=nr.split(" "),An=vn[0].split("/"),Pr,Sr,Er,Yn,Hr,Qr,Fr,gn,cn=vn[1]==="w",Kn=0,lt,nn,rn=Number(cn),S=rn?3:4;for(Pr=7;Pr>=0;Pr-=1)for(Sr=0,Er=An[Pr],Hr=Er.length,Yn=0;Yn<Hr;Yn+=1)Qr=Er[Yn],lt=mt[Qr],lt>=0&&(Fr=J[64*lt+8*(7-Pr)+Sr],pt=(pt^Fr[0])>>>0,qe=(qe^Fr[1])>>>0,lt===rn&&Pr===S&&(Kn|=1<<Sr)),Sr+=Number(Qr)||1;return vn[2]!=="-"&&(gn=vn[2],gn.indexOf("K")>-1&&(Fr=Ke[0],pt=(pt^Fr[0])>>>0,qe=(qe^Fr[1])>>>0),gn.indexOf("Q")>-1&&(Fr=Ke[2],pt=(pt^Fr[0])>>>0,qe=(qe^Fr[1])>>>0),gn.indexOf("k")>-1&&(Fr=Ke[1],pt=(pt^Fr[0])>>>0,qe=(qe^Fr[1])>>>0),gn.indexOf("q")>-1&&(Fr=Ke[3],pt=(pt^Fr[0])>>>0,qe=(qe^Fr[1])>>>0)),vn[3]&&vn[3]!=="-"&&(nn=vn[3].charCodeAt(0)-97,Rn[nn]&Kn&&(Fr=$e[nn],pt=(pt^Fr[0])>>>0,qe=(qe^Fr[1])>>>0)),cn&&(pt=(pt^fn[0])>>>0,qe=(qe^fn[1])>>>0),ln&&ln==="hex"?ht([pt,qe]):[pt,qe]}function xt(nr,ln){var pt=new XMLHttpRequest,qe=nr.toLowerCase().indexOf(".json")>-1;function vn(){var An;if(pt.status>=200&&pt.status<300||pt.status===304||pt.status===0||pt.status===1223)if(qe)try{ln(null,JSON.parse(pt.response))}catch(Pr){ln(Pr)}else An=new DataView(pt.response),ln(null,An);else ln(new Error("Error code: "+pt.status))}pt.open("GET",nr,!0),qe||(pt.responseType="arraybuffer"),pt.onload=vn,pt.onerror=vn,pt.send()}function er(nr){var ln,pt={},qe,vn,An;function Pr(gn,cn){var Kn=qe.getUint16(gn+8),lt=qe.getUint16(gn+10),nn,rn,S,me,he,be;return rn=Kn>>9&7,S=Kn>>6&7,me=Kn>>3&7,he=Kn&7,be=Kn>>12&7,S===4&&cn&&rn===me&&cn!=="-"&&(he===7&&(rn===0&&cn.indexOf("K")>-1||rn===7&&cn.indexOf("k")>-1)?he-=1:he===0&&(rn===0&&cn.indexOf("Q")>-1||rn===7&&cn.indexOf("q")>-1)&&(he+=2)),nn=String.fromCharCode(S+97)+(rn+1)+String.fromCharCode(he+97)+(me+1),be&&(nn+=w[be-1]),{move:nn,weight:lt}}function Sr(gn){gn.sort(function(Kn,lt){return lt.weight-Kn.weight})}function Er(gn){return typeof gn=="string"&&(gn={fen:gn}),ln(gn)}function Yn(gn){var cn,Kn,lt,nn,rn,S=0;if(gn=gn||{},cn=gn.moves||Er(gn),Sr(cn),lt=cn.length,lt){if(!gn.type||lt===1||gn.type==="best")return cn[0].move;if(gn.type==="random"){for(nn=Math.floor(Math.random()*cn.sum)+1,rn=0;rn<lt-1&&(S+=cn[rn].weight,!(nn<=S));rn+=1);return cn[rn].move}else return gn.type==="randomDisregardWeight"?cn[Math.floor(Math.random()*lt)].move:gn.type==="worst"?cn[lt-1].move:(Kn=parseInt(gn.type)||1,Kn<0&&(Kn=lt+Kn+1),Kn<1?Kn=1:Kn>lt&&(Kn=lt),cn[Kn-1].move)}}function Hr(gn){var cn=qe.length||qe.byteLength||0,Kn=gn.offset||0,lt,nn=gn.fen,rn=gn.chess960,S=gn.checkAll,me,he=[],be=0,Ue,Ze,zn;for(gn.hash?(lt=gn.hash,typeof lt=="string"&&(lt=et(lt))):lt=ne(nn),!rn&&nn&&(zn=nn.split(" ")[2]),Kn=0;Kn<cn;Kn+=q)if(qe.getUint32(Kn)===lt[0]&&qe.getUint32(Kn+4)===lt[1])Ue=Pr(Kn,zn),he[he.length]=Ue,be+=Ue.weight,me=!0;else if(me&&!S)break;if(he.sum=be,gn.relative)for(Ze=he.length-1;Ze>=0;Ze-=1)he[Ze].relative=Math.round(he[Ze].weight/be*1e4);return he}function Qr(gn){var cn=[],Kn,lt=gn.b.length;for(Kn=0;Kn<lt;++Kn)cn.push({move:gn.b[Kn],weight:gn.w[Kn]});return cn}function Fr(gn){var cn,Kn,lt=0,nn,rn,S,me=gn.fen,he;if(pt.useFen)nn=me.replace(/ \d+ \d+$/,""),cn=vn[nn],cn||(rn=nn.replace(/[a-h][1-8]$/,"-"),rn!==nn&&(cn=vn[rn]));else if(gn.hash||(gn.hash=ne(me,"hex")),cn=vn[gn.hash],cn){if(cn[0]&&cn[0].n&&(cn=cn[0]),cn.n&&!cn.b)return[];if(cn.b)cn=Qr(cn);else if(!gn.chess960&&me)for(he=me.split(" ")[2],Kn=cn.length-1;Kn>=0;Kn-=1)S=cn[Kn].move.match(/e([18])([ah])\1/),S&&(S[2]==="h"&&(S[1]==="1"&&he.indexOf("K")>-1||S[1]==="8"&&he.indexOf("k")>-1)?cn[Kn]={move:"e"+S[1]+"g"+S[1],weight:cn[Kn].weight}:S[2]==="a"&&(S[1]==="1"&&he.indexOf("Q")>-1||S[1]==="8"&&he.indexOf("q")>-1)&&(cn[Kn]={move:"e"+S[1]+"c"+S[1],weight:cn[Kn].weight}))}if(cn)for(Kn=cn.length-1;Kn>=0;Kn-=1)lt+=Number(cn[Kn].weight);else cn=[];return cn.sum=lt,cn}if(pt={query:Er,pick:Yn},nr.getUint32)ln=Hr,qe=nr,pt.buffer=qe;else{ln=Fr,vn=nr,pt.json=vn;for(An in vn){pt.useFen=An.indexOf(" ")>-1;break}}return pt}function Or(nr,ln){function pt(qe,vn){var An;if(vn&&(An=er(vn)),ln)return ln(qe,An);if(qe)throw qe;return An}xt(nr,pt)}var Vr=function(){var nr={};return function(pt,qe){if(nr[pt]){nr[pt].book?setTimeout(function(){qe(null,nr[pt].book)},0):nr[pt].cbs.push(qe);return}nr[pt]={cbs:[qe]},Or(pt,function(An,Pr){var Sr=nr[pt].cbs;An?delete nr[pt]:(nr[pt].book=Pr,nr[pt].cbs=void 0),Sr.forEach(function(Er){setTimeout(function(){Er(An,Pr)},0)})})}}();return{hash:ne,loadBook:Vr,to64BitHex:ht,zobristPiece:J,zobristCastle:Ke,zobristEnPassant:$e,zobristTurn:fn,zobristPieceValue:mt,zobristPieceValueNumbers:gt}}();/*!
 * Chess.com (c) 2020
 *
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */var xe=function(){var Ke={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,fischerandom:1,fischerrandom:1,fischer:1,chess9lx:1,960:1,crazyhouse:2,"three-check":3,threecheck:3,"3check":3,kingofthehill:4,koth:4,bughouse:5},$e=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],fn={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},mt,gt,Rn,w,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q=0,ge=0,ht=0,et=-1,ne=1,xt=2,er=4,Or=8,Vr=16,nr=32,ln=64,pt=128,qe=3,vn=252,An=255,Pr=256,Sr=512,Er=112,Yn=1,Hr=2,Qr=4,Fr=3,gn=7,cn=14,Kn=21,lt=127,nn="pnbrqkPNBRQK",rn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",S=[];S[5]=[-16,-17,-15],S[6]=[16,17,15],S[8]=[-18,-33,-31,-14,18,33,31,14],S[16]=[-17,-15,17,15],S[32]=[-16,1,16,-1],S[64]=[-17,-16,-15,1,17,16,15,-1],S[128]=[-17,-16,-15,1,17,16,15,-1];var me={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},he={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},be={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},Ue={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},Ze=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],zn=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],K=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],ye=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],Be=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],We=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],k=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],N=[0,5,8,11,14],B=[31,7,7,7,63],Y={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},G=[er,Or,Vr,nr,ln],ce=["","N","B","R","Q"],oe={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},Mt=[0,6,1],_t={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},Qe=["Event","Site","Date","Round","White","Black","Result"],X=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rt(kn){return kn>>4}function bn(kn){return kn&7}function Jn(kn){return String.fromCharCode(bn(kn)+97)+(8-rt(kn))}function sr(kn){return 3-kn}function tr(kn,ur){kn[0]=(kn[0]^ur[0])>>>0,kn[1]=(kn[1]^ur[1])>>>0}function wn(kn,ur,wt){return ur<1?kn:(ur=typeof ur=="number"?ur:80,kn.replace(new RegExp("(.{1,"+ur+`})(?: |$|\r?
)`,"g"),"$1"+wt).slice(0,-wt.length))}function fs(kn){var ur,wt;return kn=kn.trim(),wt=kn.split(" "),ur=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][wt.length],ur&&kn?kn+=ur:wt[5]==="0"&&(wt[5]=1,kn=wt.join(" ")),kn}function rd(kn){var ur=Math.floor(kn%36e3/600),wt=Math.floor(kn%36e3%600)/10;return Math.floor(kn/36e3)+":"+(ur<10?"0":"")+ur+":"+(wt<10?"0":"")+wt}function id(kn){var ur=kn.split(":");return(ur[0]*3600+ur[1]*60+ur[2]*1)*10}function Fu(){ee.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function od(kn,ur){var wt=kn.length,Ne,jt=0,yn=0,En=ur&&(ur===Ke.Crazyhouse||ur===Ke.Bughouse),Kt;for(Ne=0;Ne<wt;++Ne)if(Kt=kn[Ne],+Kt!=+Kt)if(Kt==="/"){if(yn!==8&&(kn=kn.substr(0,Ne)+(8-yn)+kn.substr(Ne),++Ne,++wt),yn=0,++jt>7){if(!En&&Ne<wt-1||!/^[pnbrq]{0,63}$/i.test(kn.substr(Ne+1)))return!1;break}}else if(me[Kt]){if(++yn>8)return!1}else if(Kt==="~")(!En||!Ne||!/[nbrq]/i.test(kn[Ne-1]))&&(kn=kn.substr(0,Ne)+kn.substr(Ne+1),--Ne,--wt);else return!1;else yn+=Kt*1,yn>8&&(kn=kn.substr(0,Ne)+(Kt-(yn-8))+kn.substr(Ne+1),yn=8);return kn}function Ul(kn,ur){var wt,Ne,jt,yn=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,En=Ke[ur]||ur*1||Ke[String(ur).replace(/\s/g,"").toLowerCase()],Kt=En===Ke.Crazyhouse||En===Ke.Bughouse,Zt,Bn,xn,Jr=0,Un=0,$t,Cr=!0,Gn="",or={0:0,7:0},zt={0:0,7:0},hi={0:"k",7:"K"},ci={0:"r",7:"R"},Vi,ji,go=En===Ke.Chess960,oi,Ci,ra,Ki,_i,Ui,To,hs,Mo,oo,Oo;if(!kn)return 1;if(En===Ke.Bughouse&&(Bn=kn.split(" | "),Bn.length===2))return xn=Ul(Bn[0],ur),xn===0&&(xn=Ul(Bn[1],ur)),xn;if(Bn=kn.split(/\s+/),En===Ke["3-check"]&&Bn.length===7&&(Zt=Bn.pop(),!/^\+[0-3]\+[0-3]$/.test(Zt)||Zt==="+3+3"))return 14;if(Bn.length!==6)return 1;if(/\D|.{7,}|^0|^$/.test(Bn[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(Bn[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(Bn[3]))return 4;if(oi=Bn[2],go){if(!yn.test(oi))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test(oi)){if(typeof ur<"u"||!yn.test(oi))return 5;go=!0}if(Bn[1]!=="w"&&Bn[1]!=="b")return 6;if(Kt&&(Bn[0]=Bn[0].replace(/~(?=.*\/)/g,"")),Ne=Bn[0].split("/"),Kt&&Ne.length===9&&(Zt=Ne.pop(),!/^[pnbrq]{0,63}$/i.test(Zt)))return 13;if(Ne.length!==8)return 7;if(Bn[3][1]==="3"&&Bn[1]==="w"||Bn[3][1]==="6"&&Bn[1]==="b")return 11;for(Bn[3]!=="-"&&(Un=Bn[3][1]==="3"?4:3,$t=Un===4?5:2,Jr=Bn[3].charCodeAt(0)-97,Cr=!1,Gn=Un===4?"P":"p"),wt=0;wt<Ne.length;++wt){for(Mo=0,oo=!1,Oo=0;Oo<Ne[wt].length;Oo++)if(jt=Ne[wt][Oo],+jt==+jt){if(oo)return 8;Mo+=jt*1,oo=!0}else{if(nn.indexOf(jt)===-1)return 9;if(!Cr&&Un===wt&&Jr===Mo&&Gn===jt&&(Cr=!0),$t===wt&&Jr===Mo)return 11;wt%7===0&&(jt===hi[wt]?zt[wt]=1<<Mo:jt===ci[wt]&&(or[wt]|=1<<Mo)),++Mo,oo=!1}if(Mo!==8)return 10}if(!Cr)return 11;if(oi!=="-"){if(go){for(ra={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},Ci={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},hs={0:[0,0],7:[0,0]},wt=oi.length-1;wt>=0;--wt)if(Ui=oi.charCodeAt(wt),To&&To>Ui&&To-Ui<8||(Ui===75?(_i=7,Ki=or[_i]&ra[zt[_i]]):Ui===81?(_i=7,Ki=or[_i]&Ci[zt[_i]]):Ui===107?(_i=0,Ki=or[_i]&ra[zt[_i]]):Ui===113?(_i=0,Ki=or[_i]&Ci[zt[_i]]):(_i=Ui>=97?0:7,Ki=1<<Ui-(_i?65:97),To=Ui),!Ki||Ki&Ki-1)||zt[_i]<2||zt[_i]>64||(Ki&or[_i])!==Ki||++hs[_i][(zt[_i]<Ki)*1]>1)return 15}else if(Vi=(oi.indexOf("K")>-1?128:0)|(oi.indexOf("Q")>-1?1:0),Vi&&(zt[7]!==16||(Vi&or[7])!==Vi)||(ji=(oi.indexOf("k")>-1?128:0)|(oi.indexOf("q")>-1?1:0),ji&&(zt[0]!==16||(ji&or[0])!==ji)))return 15}return 0}function Us(kn,ur){var wt="",Ne=0,jt,yn,En=ur?6:0;if(kn)for(;Ne<5;){for(jt=kn>>N[Ne]&B[Ne],yn=0;yn<jt;++yn)wt+=nn[Ne+En];++Ne}return wt}function ad(kn,ur){ur[ne]&&tr(kn,ee.zobristCheck[ur[ne]-1]),ur[xt]&&tr(kn,ee.zobristCheck[ur[xt]+2])}function sd(kn,ur){var wt,Ne,jt,yn,En=0,Kt,Zt,Bn;for(wt=1;wt<3;++wt){if(Ne=ur[wt],Ne)for(jt=0;jt<5;){for(Kt=En+jt*63,yn=Ne>>N[jt]&B[jt],Zt=0;Zt<yn;++Zt)Bn=ee.zobristPiece[Kt++],tr(kn,[Bn[0]*31>>>0,Bn[1]*17>>>0]);++jt}En=315}}function na(kn,ur,wt,Ne){(kn[wt+1]===Ne||kn[wt-1]===Ne)&&tr(ur,ee.zobristEnPassant[bn(wt)])}function ld(kn,ur){var wt=[],Ne,jt;for(Ne=0;Ne<120;++Ne)if(Ne&136&&(Ne+=8),jt=kn[Ne],jt&&(jt&ur)===ur){wt.push(Ne);continue}return wt}function Hl(kn,ur,wt,Ne){var jt;(gt===0||kn[wt+8]&Hr)&&(rt(wt)%7===0?(jt=Ne|oe.PROMOTION|ur<<gn|wt<<cn,O[ge++]=jt|4<<Kn,O[ge++]=jt|3<<Kn,O[ge++]=jt|2<<Kn,O[ge++]=jt|1<<Kn):O[ge++]=Ne|ur<<gn|wt<<cn)}function zu(kn){switch(kn){case 67:case 68:case 51:case 52:return!0}return!1}function ud(kn,ur,wt,Ne){var jt=ur+(wt-ur%8),yn=wt>ur%8?1:-1,En,Kt,Zt;for(Zt=ur+yn;Zt!==jt;Zt+=yn)if(kn[Zt])return!1;if(Ne===ne?En=yn===1?118:114:En=yn===1?6:2,Kt=En-yn,kn[En+8]||kn[En]&&En!==ur&&En!==jt||kn[Kt]&&Kt!==ur&&Kt!==jt)return!1;if(En!==ur){for(yn=En>ur?1:-1,Zt=ur+yn;Zt!==En;Zt+=yn)if(Zt!==jt&&kn[Zt]||kn[Zt+8])return!1}return!0}var Ha=function(){function kn(Ne,jt,yn,En,Kt,Zt,Bn){var xn=[],Jr="",Un=!0,$t,Cr,Gn,or,zt,hi,ci=jt[yn],Vi=ci.length,ji,go,oi="";if(ci.commands)for(or in ci.commands)(!Zt||Zt.indexOf(or)>-1)&&(oi+="[%"+or+" "+ci.commands[or]+"]");for(ci.initComment&&!Bn&&(oi=(oi+" "+ci.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),oi&&xn.push("{"+oi+"}"),Cr=0;Cr<Vi;++Cr){if($t=ci[Cr],hi=$t.color===ne,Jr="",oi="",En!==Ke.Bughouse?(Un&&!hi?Jr=Ne+"...":hi&&(Jr=Ne+"."),Kt&&(hi||Un)&&(Jr+=" ")):(xn.bughouseOrder||(xn.bughouseOrder=[]),xn.bughouseOrder.push($t.bughouseOrder),Cr||(xn.blackCountOffset=ci[0].color===xt?1:0)),Jr+=$t.san,$t.annotation&&(Jr+=$t.annotation),$t.additionalAnnotation&&(Jr+=" "+$t.additionalAnnotation.join(" ")),Un=!1,typeof $t.time<"u"&&!$t.commands&&($t.commands={clk:rd($t.time)}),$t.commands)for(or in $t.commands)(!Zt||Zt.indexOf(or)>-1)&&(oi+="[%"+or+" "+$t.commands[or]+"]");if($t.comment&&!Bn&&(oi=(oi+" "+$t.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),oi&&(Jr+=" {"+oi+"}",Un=!0),xn.push(Jr),$t.lines)for(ji=$t.lines.length,Gn=0;Gn<ji;++Gn)go=$t.lines[Gn],jt[go].length&&(zt=kn(Ne,jt,go,En,Kt,Zt,Bn),zt[0]="("+zt[0],zt[zt.length-1]+=")",xn=xn.concat(zt),Un=!0);hi||Ne++}return xn}function ur(Ne,jt,yn){var En=jt,Kt=Ne.siblingGame.pgn(),Zt=0,Bn=0,xn=[];for(jt.bughouseOrder=jt.bughouseOrder||[],Kt.bughouseOrder=Kt.bughouseOrder||[];jt.bughouseOrder.length||Kt.bughouseOrder.length;)!jt.bughouseOrder.length||Kt.bughouseOrder.length&&jt.bughouseOrder[0]>Kt.bughouseOrder[0]?(Kt.bughouseOrder.shift(),xn.push("B")):(jt.bughouseOrder.shift(),xn.push("A"));return jt=[],xn.forEach(function(Jr){var Un,$t,Cr="",Gn;Jr==="A"?(Un=En,++Zt,$t=Zt,Gn=Ne.startingMoveNumber()):(Un=Kt,++Bn,$t=Bn,Gn=Ne.siblingGame.startingMoveNumber()),Cr=String(Math.floor(($t+1)/2)+Gn-1),(Un.blackCountOffset+$t)%2?Cr+=Jr:Cr+=Jr.toLowerCase(),Cr+="."+(yn?" ":"")+Un.shift(),jt.push(Cr)}),jt}function wt(Ne,jt){return"["+Ne+' "'+String(jt).replace(/(\"|\\)/g,"\\$1")+'"]'}return function(jt,yn,En,Kt,Zt,Bn){var xn=typeof jt.newline=="string"?jt.newline:`
`,Jr=typeof jt.spaceAfterPeriods>"u"?!0:jt.spaceAfterPeriods,Un="",$t,Cr;Un+=wt("Event",yn.Event)+xn,Un+=wt("Site",yn.Site)+xn,Un+=wt("Date",yn.Date)+xn,Un+=wt("Round",yn.Round)+xn,Zt===Ke.Bughouse?(Un+=wt("WhiteA",yn.WhiteA||"?")+xn,Un+=wt("BlackA",yn.BlackA||"?")+xn,Un+=wt("WhiteB",yn.WhiteB||"?")+xn,Un+=wt("BlackB",yn.BlackB||"?")+xn):(Un+=wt("White",yn.White)+xn,Un+=wt("Black",yn.Black)+xn),Un+=wt("Result",yn.Result)+xn,Zt&&(Un+=wt("Variant",yn.Variant)+xn),yn.FEN&&yn.FEN!==rn&&(Un+=wt("SetUp","1")+xn,Un+=wt("FEN",yn.FEN)+xn);for($t in yn)X.indexOf($t)===-1&&(Un+=wt($t,yn[$t])+xn);if(Un+=xn,Cr=kn(Kt,En,0,Zt,Jr,jt.hideCommands?[]:jt.restrictCommands,jt.hideComments),Zt===Ke.Bughouse){if(Bn.isDependent)return Cr;Cr=ur(Bn,Cr,Jr)}return Cr.push(yn.Result),Un+wn(Cr.join(" "),jt.maxWidth,xn)}}(),Uu=function(){var kn="!?\u203C\u2047\u2049\u2048\u25A1\u2207\u0394\u221E\u2A72\u2A71\xB1\u2213\u2A00\u27F3\u2192\u2191\u21C6\u2206\u2313\u21D4\u21D7\u27EB\u27EA\u2715\u22A5\u2295\u25CB\u21C4\u21BB\u2299\u2612~",ur=/\[%(\S+)\s([^\]]+)\]/,wt=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function Ne(yn){for(var En,Kt=yn.commands||{};En=ur.exec(yn.value);)yn.value=yn.value.replace(En[0],"").trim(),Kt[En[1]]=En[2],yn.commands=Kt}function jt(yn,En,Kt,Zt){for(var Bn;++En<Kt;)if((Bn=yn[En].trim())&&Bn[0]!=="%")return Bn[0]==="["&&(!Zt||/^\[\S+\s+".*"\]$/.test(Bn))}return function(En,Kt){var Zt,Bn,xn,Jr,Un="tags",$t,Cr,Gn,or=[],zt={type:Un,value:""},hi=0,ci=[],Vi=!0;Kt=Kt||{},Zt=En.split(/\r?\n/),Jr=Zt.length;e:for(Bn=0;Bn<Jr;++Bn)if(xn=Zt[Bn].trim(),xn[0]!=="%")if(!xn)or.length&&(Un==="tags"?(Un="san",Vi=!1):Un!=="tagValueStart"&&jt(Zt,Bn,Jr,hi||Un==="comment")&&(Un==="comment"&&or.push(zt),or[or.length-1].type!=="tagValue"&&(ci.push(or),or=[]),Un="tags",Vi=!0,hi=0));else{if(xn=" "+xn+" ",Cr=xn.length,$t=0,Vi)for(;$t<Cr;++$t)if(Gn=xn[$t],Un==="tags"){if(Gn==="[")Un="tagName",zt={type:Un,value:""};else if(Gn.trim()){Un="san",zt={type:Un,value:""},Vi=!1;break}}else if(Un==="tagName")zt.value&&Gn.trim()===""?(or.push(zt),Un="tagValueStart"):Gn!==" "&&(zt.value+=Gn);else if(Un==="tagValueStart"){if(Gn==='"'||Gn==="\u201C")Un="tagValue",zt={type:Un,value:""};else if(Gn.trim()){or.push({type:"tagValue",value:xn.slice($t,-1).match(/(.*?)"?\]?$/)[1]}),Un="tags",zt={type:Un,value:""};continue e}}else if(Un==="tagValue")if(Gn==='"'||Gn==="\u201D")if(or.push(zt),xn[$t+1]==="]")Un="tags",zt={type:Un,value:""},++$t;else if(xn.slice(-2,-1)==="]"){zt.value+=xn.substr($t).match(/(.*?)"?\s*\] $/)[1],Un="tags",zt={type:Un,value:""};continue e}else Un="tagEnd";else Gn==="\\"&&$t+2<Cr&&(++$t,Gn=xn[$t]),$t>0&&(zt.value+=Gn);else{if(Gn!=="]"){if(!Gn.trim())continue;--$t}Un="tags",zt={type:Un,value:""}}for(;$t<Cr;++$t)if(Gn=xn[$t],Un==="san"){if(kn.indexOf(Gn)>-1)Gn==="!"||Gn==="?"||kn.indexOf(Gn)<6&&(Gn=["!!","??","!?","?!"][kn.indexOf(Gn)-2])?(zt.value&&or.push(zt),zt={type:"a",value:Gn},(xn[$t+1]==="!"||xn[$t+1]==="?")&&(zt.value+=xn[++$t]),or.push(zt),zt={type:"san",value:""}):(Gn==="\u221E"&&zt.value==="=/"?(zt.type="aa",zt.value+=Gn):(zt.value&&(wt.test(zt.value)&&(zt.value!=="--"||Kt.rejectNullMoves)&&(zt.type="aa"),or.push(zt)),zt={type:"aa",value:Gn},Gn==="\u2191"&&xn[$t+1]==="\u2191"&&(zt.value="\u21BB",++$t)),or.push(zt),zt={type:"san",value:""});else if(Gn===" "||Gn==="	"||Gn==="\r"||Gn==="{"||Gn==="("||Gn===")"){if(zt.value){if(zt.value[0]==="$")zt.type="nag";else if(zt.value==="*"||zt.value==="1-0"||zt.value==="0-1"||zt.value==="1/2-1/2"||zt.value==="\xBD-\xBD")if(hi||$t+1<Cr)zt.type=zt.value==="*"?"cont":"comment";else{if(zt.type="result",zt.value==="\xBD-\xBD"&&(zt.value="1/2-1/2"),or.push(zt),ci.push(or),Bn+1===Jr||Bn+2===Jr&&!Zt[Bn+1])return ci;Un="tags",Vi=!0,zt={type:Un,value:""},or=[];break}wt.test(zt.value)&&(zt.value!=="--"||Kt.rejectNullMoves)&&(zt.type="aa"),or.push(zt),zt={type:Un,value:""}}if(Gn===" "||Gn==="	"||Gn==="\r")Un="san";else if(Gn==="{")Un="comment",or.length&&or[or.length-1].type==="comment"&&(zt=or.pop(),zt.value+=" ");else if(Gn==="(")Un="san",or.push({type:"variationStart",value:++hi});else{if(hi<1){if(!Kt.commentErrors)return!1}else or.push({type:"variationEnd",value:hi--});Un="san"}zt.type=Un}else if(Gn!=="."&&(zt.value||+Gn!=+Gn||xn[$t+1]==="-"||xn[$t+1]==="/"))zt.value+=Gn;else if(+Gn==+Gn)switch(zt.number||(zt.number=""),zt.number+=Gn,xn[$t+1]){case"A":case"a":case"B":case"b":zt.number+=xn[++$t],or.push({type:"number",value:zt.number}),delete zt.number}}else $t===0&&(zt.value=zt.value.trim()),Gn!=="}"?(Gn==="\\"&&$t+2<Cr&&(Gn=xn[++$t]),zt.value+=Gn):(zt.value=zt.value.trim(),zt.value.indexOf("[")>-1&&Ne(zt),or.push(zt),Un="san",zt={type:Un,value:""})}return zt.value&&or.push(zt),(or.length||!ci.length)&&ci.push(or),ci}}();function Gl(kn,ur){var wt,Ne,jt=0,yn=!0,En=[],Kt=ne,Zt=[],Bn=et,xn=0,Jr=1,Un=1,$t=[],Cr=[$t],Gn=0;$t.id=Gn;var or={},zt=[],hi=!1,ci=!1,Vi=ql,ji=function($,le){var V="",_e,de,ve,bt,Yt,St;return $&oe.KQSIDE_CASTLE?$&oe.KSIDE_CASTLE?V="O-O":V="O-O-O":$&oe.DROP?(ve=$>>cn&lt,_e=$>>Kn,_e&&(V+=ce[_e]),V+="@"+Jn(ve)):(ve=$>>cn&lt,de=$>>gn&lt,bt=Ne[de],bt&er?($&oe.ANY_CAPTURE&&(V+=String.fromCharCode(bn(de)+97)+"x"),V+=Jn(ve),$&oe.PROMOTION&&(_e=$>>Kn,V+="="+ce[_e])):(V+=Ue[bt&An],ht>1&&(V+=hd(bt,de,ve)),$&oe.ANY_CAPTURE&&(V+="x"),V+=Jn(ve))),le||($&oe.KQSIDE_CASTLE?(de=$>>gn&lt,ve=$>>cn&lt):$&oe.DROP_OR_PROMOTE&&(bt=G[_e]+Kt),jl(bt,de,ve,$)&&(Vi($,de,ve,_e),Yt=q,q=ge,St=ht,jt&&Pa()||xo()===q?V+="#":V+="+",ge=q,q=Yt,ht=St,ms($t.pop()))),V};function go(){var $=Kt===ne?[4174784170,2938602761]:[0,0],le,V,_e;for(_e=0;_e<120;++_e)_e&136&&(_e+=8),le=Ne[_e],le&&tr($,ee.zobristPiece[64*ee.zobristPieceValueNumbers[le&An]+8*(7-rt(_e))+bn(_e)]);if(ci)for(V=1;V<3;++V)Zt[V]&&(Zt[V]&Zt[V]-1?(tr($,ee.zobristCastle[V-1]),tr($,ee.zobristCastle[V+1])):Zt[V]>1<<bn(En[V])?tr($,ee.zobristCastle[V-1]):tr($,ee.zobristCastle[V+1]));else{for(V=1;V<3;++V)Zt[V]&&(Zt[V]&oe.KSIDE_CASTLE&&tr($,ee.zobristCastle[V-1]),Zt[V]&oe.QSIDE_CASTLE&&tr($,ee.zobristCastle[V+1]));hi?sd($,wt._hand):jt===Ke["3-check"]&&ad($,zt)}return Bn!==et&&na(Ne,$,Bn+(Kt===ne?16:-16),er|Kt),$}function oi(){var $;return $t.length?$=$t[$t.length-1].hash:($t.hash||($t.hash=go()),$=$t.hash),[$[0],$[1]]}function Ci($){function le(_e){return/#/.test(_e)&&Gu()&&(_e=_e.replace("#","+")),_e}function V(_e,de){var ve=$(_e,de);return ve&&(typeof ve=="string"?ve=le(ve):(ve.san=le(ve.san),$t[$t.length-1].san=ve.san)),ve}return V._isBughouseified=!0,V._orig=$,V}function ra($,le){var V=jt;$?jt=Ke[$]||$*1||Ke[String($).replace(/\s/g,"").toLowerCase()]||Ke.Chess:jt=0,V!==jt&&(jt===Ke.Bughouse?(hi=!0,wt.isDependent||(wt.siblingGame=Gl(),wt.siblingGame.hashing(yn),wt.siblingGame.isDependent=!0,wt.siblingGame.siblingGame=wt,wt.siblingGame.header({Variant:"Bughouse"})),Fu(),Vi=Io,ji=Ci(ji),wt.move=Ci(wt.move)):(delete wt.siblingGame,hi=jt===Ke.Crazyhouse,ci=jt===Ke.Chess960,jt?(Fu(),Vi=Io):Vi=ql,ji._isBughouseified&&(ji=ji._orig,wt.move=wt.move._orig)),le||Hs(oo()))}function Ki($,le){for(var V=$>7?ne:xt,_e,de;!($&136);){if(_e=Ne[$],_e&V){if(_e&nr){if(de)return;de=$%8+(V===ne?65:97)}else if(_e&pt)return de}$+=le}}function _i($,le,V){Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Kt=ne,En[ne]=et,En[xt]=et,Zt[ne]=0,Zt[xt]=0,wt._hand[ne]=0,wt._hand[xt]=0,zt[ne]=0,zt[xt]=0,Bn=et,xn=0,Jr=1,le||($t=[],Cr=[$t],Gn=0,$t.id=Gn,or={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},$?Oo(["Variant",$]):ra(!1,V),V||Hs(oo()))}function Ui(){_i(0,!1,!0),$t.hash=[1178310168,378666140],Ne=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33,0,0,0,0,0,0,0,0],Un=1,En[ne]=116,En[xt]=4,Zt[ne]=48,Zt[xt]=48}function To($,le,V,_e){var de=0,ve,bt,Yt,St,nt,Dn,cr,yr,zr,ti,Ct,Pn;if(_e?(ve=$.split(" "),Pn=ve[3],Ct=ve[2]):(ve=$.trim().split(/\s+/),Pn=ve[3]||"-",Ct=ve[2]||"-"),typeof le>"u"?(Ct.charCodeAt(0)&31)<9&&ra(Ke.Chess960,!0):ra(le,!0),bt=ve[0],!_e&&!(bt=od(bt,jt)))return!1;if(St=bt.length,_i($e[jt],V,!0),hi){if(jt===Ke.Bughouse&&!wt.isDependent&&(Dn=$.split(" | "),!wt.siblingGame.load(Dn.length===1?$:Dn[1],le,V,_e)))return Ui(),!1;for(nt=0;nt<St;++nt)if(cr=bt[nt],+cr!=+cr)if(cr==="/")if(de>111){for(++nt;nt<St;++nt)cr=bt[nt],wt._hand[cr<"a"?ne:xt]+=1<<Y[cr]>>>0;break}else de+=8;else Ne[de]=me[cr],bt[nt+1]==="~"&&(++nt,Ne[de]|=Sr),Ne[de]&pt&&(En[Ne[de]&qe]=de),++de;else de+=cr*1}else for(nt=0;nt<St;++nt)cr=bt[nt],+cr!=+cr?cr==="/"?de+=8:(Ne[de]=me[cr],Ne[de]&pt&&(En[Ne[de]&qe]=de),++de):de+=cr*1;if(Kt=ve[1]==="b"?xt:ne,Ct!=="-")if(ci){for(zr={1:[0,0],2:[0,0]},nt=Ct.length-1;nt>=0;--nt)Yt=Ct.charCodeAt(nt),Yt===75?Yt=Ki(119,-1):Yt===81?Yt=Ki(112,1):Yt===107?Yt=Ki(7,-1):Yt===113&&(Yt=Ki(0,1)),yr=Yt<97?ne:xt,ti=_t[String.fromCharCode(Yt)],(_e||Ne[ti]===(nr|yr))&&(Yt>=97?En[yr]>=1&&En[yr]<=6&&(Zt[yr]|=1<<ti):En[yr]>=113&&En[yr]<=118&&(Zt[yr]|=1<<ti-112),++zr[yr][(En[yr]<ti)*1]);(zr[ne][0]>1||zr[ne][1]>1)&&(Zt[ne]=0),(zr[xt][0]>1||zr[xt][1]>1)&&(Zt[xt]=0)}else{if(!_e)for(nt=Ct.length-1;nt>=0;--nt)yr=Ct.charCodeAt(nt)<97?ne:xt,(Ne[_t[Ct[nt]]]!==(nr|yr)||En[yr]!==(yr===ne?116:4))&&(Ct=Ct.substr(0,nt)+Ct.substr(nt+1));for(nt=Ct.length-1;nt>=0;--nt)switch(Ct[nt]){case"K":Zt[ne]|=oe.KSIDE_CASTLE;break;case"Q":Zt[ne]|=oe.QSIDE_CASTLE;break;case"k":Zt[xt]|=oe.KSIDE_CASTLE;break;case"q":Zt[xt]|=oe.QSIDE_CASTLE;break}}return!_e&&(Pn.length!==2||Kt===ne&&Pn[1]!=="6"||Kt===xt&&Pn[1]!=="3"||Ne[Pn.charCodeAt(0)-97+(8-(Pn[1]==="3"?4:5))*16]!==(er|sr(Kt))||Ne[fn[Pn]])&&(Pn="-"),Bn=Pn==="-"?et:fn[Pn],xn=ve[4]*1||0,Jr=ve[5]*1||1,jt===Ke["3-check"]&&(ve[6]&&ve[6]!=="+3+3"&&(Dn=ve[6].match(/^\+([0-3])\+([0-3])$/)),Dn=Dn||[0,0,0],zt[ne]=Dn[1]*1,zt[xt]=Dn[2]*1),V||(Un=Jr,Hs(oo())),!0}function hs(){var $=0,le="",V,_e="",de;for(V=0;V<120;++V)V&136&&($&&(le+=$),le+="/",$=0,V+=8),de=Ne[V],de?($&&(le+=$,$=0),le+=be[de&An]):++$;return $&&(le+=$),Zt[ne]&oe.KSIDE_CASTLE&&(_e+="K"),Zt[ne]&oe.QSIDE_CASTLE&&(_e+="Q"),Zt[xt]&oe.KSIDE_CASTLE&&(_e+="k"),Zt[xt]&oe.QSIDE_CASTLE&&(_e+="q"),le+=" "+(Kt===ne?"w":"b")+" "+(_e||"-")+" "+(Bn===et?"-":Jn(Bn))+" "+xn+" "+Jr,le}function Mo(){var $=0,le="",V,_e,de="",ve;for(V=0;V<120;++V)V&136&&($&&(le+=$),le+="/",$=0,V+=8),ve=Ne[V],ve?($&&(le+=$,$=0),le+=be[ve&An],hi&&ve&Sr&&(le+="~")):++$;if($&&(le+=$),hi&&(le+="/"+Us(wt._hand[ne],!0)+Us(wt._hand[xt])),ci){for(_e=Zt[xt],V=0;_e;)_e&1&&(de=String.fromCharCode(V+97)+de),_e>>=1,++V;for(_e=Zt[ne],V=0;_e;)_e&1&&(de=String.fromCharCode(V+65)+de),_e>>=1,++V}else Zt[ne]&oe.KSIDE_CASTLE&&(de+="K"),Zt[ne]&oe.QSIDE_CASTLE&&(de+="Q"),Zt[xt]&oe.KSIDE_CASTLE&&(de+="k"),Zt[xt]&oe.QSIDE_CASTLE&&(de+="q");return le+=" "+(Kt===ne?"w":"b")+" "+(de||"-")+" "+(Bn===et?"-":Jn(Bn))+" "+xn+" "+Jr,jt===Ke["3-check"]?le+=" +"+zt[ne]+"+"+zt[xt]:jt===Ke.Bughouse&&!wt.isDependent&&(le+=" | "+wt.siblingGame.fen()),le}function oo(){return jt?Mo():hs()}function Oo($){var le,V,_e;for(le=0;le<$.length;le+=2)V=$[le],_e=$[le+1],V&&(V==="Variant"&&(ra(_e),jt?_e=$e[jt]:_e=void 0),V==="Result"&&_e!=="*"&&_e!=="1-0"&&_e!=="0-1"&&_e!=="1/2-1/2"&&(_e="*"),_e!==void 0?or[V]=String(_e):Qe.indexOf(V)>-1?V==="Date"?or[V]="????.??.??":or[V]="?":delete or[V]);return or}function Hs($){$t.length>0||Gn||($!==rn?(or.SetUp="1",or.FEN=$,$t.hash=null):(delete or.SetUp,delete or.FEN,$t.hash=[1178310168,378666140]))}function gi($){var le=Ne[fn[$]];return le?{type:be[le&vn|xt],color:le&qe,promoted:(le&Sr)!==0}:null}function cd($,le){return ci&&Zt[$]?We:Zt[$]&oe.KSIDE_CASTLE&&!Ne[le+1]&&!Ne[le+2]?Zt[$]&oe.QSIDE_CASTLE&&!Ne[le-1]&&!Ne[le-2]&&!Ne[le-3]?(w=oe.KQSIDE_CASTLE,Be):(w=oe.KSIDE_CASTLE,K):Zt[$]&oe.QSIDE_CASTLE&&!Ne[le-1]&&!Ne[le-2]&&!Ne[le-3]?(w=oe.QSIDE_CASTLE,ye):zn}function Gs($,le){var V,_e,de,ve=Kt,bt,Yt,St,nt,Dn,cr,yr,zr,ti,Ct,Pn=Ne;if(mt=[],gt=0,Rn=0,w=0,Pn[8]=Pn[9]=Pn[10]=Pn[11]=Pn[12]=Pn[13]=Pn[14]=Pn[15]=Pn[24]=Pn[25]=Pn[26]=Pn[27]=Pn[28]=Pn[29]=Pn[30]=Pn[31]=Pn[40]=Pn[41]=Pn[42]=Pn[43]=Pn[44]=Pn[45]=Pn[46]=Pn[47]=Pn[56]=Pn[57]=Pn[58]=Pn[59]=Pn[60]=Pn[61]=Pn[62]=Pn[63]=Pn[72]=Pn[73]=Pn[74]=Pn[75]=Pn[76]=Pn[77]=Pn[78]=Pn[79]=Pn[88]=Pn[89]=Pn[90]=Pn[91]=Pn[92]=Pn[93]=Pn[94]=Pn[95]=Pn[104]=Pn[105]=Pn[106]=Pn[107]=Pn[108]=Pn[109]=Pn[110]=Pn[111]=Pn[120]=Pn[121]=Pn[122]=Pn[123]=Pn[124]=Pn[125]=Pn[126]=Pn[127]=0,le===et){mt=ld(Ne,ve|$);return}for(ti=cd(ve,le),V=0;V<120;++V)if(V&136&&(V+=8),bt=Ne[V],!!bt){if(bt&ve){(!$||(bt|0)&$)&&mt.push(V);continue}if(Ct=ti[V-le+119],!!(Ct&bt))if(bt&er)for(cr=S[bt],_e=1;_e<3;++_e)nt=V+cr[_e],!(nt&136)&&(Pn[nt+8]|=Yn,nt===le&&(++gt,Pn[V+8]|=Hr));else{cr=S[bt&vn],Dn=cr.length,zr=bt&Er;e:for(_e=0;_e<Dn;++_e)if(yr=cr[_e],nt=V,!(le>nt&&yr<0&&le-nt>16||le<nt&&yr>0&&nt-le>16))for(;!((nt+=yr)&136);){if(Pn[nt+8]|=Yn,Yt=Ne[nt],Yt){if(Yt&ve){if(nt===le){for(de=nt-yr;de!==V;de-=yr)Pn[de+8]|=Hr;Pn[V+8]|=Hr,++gt,zr&&(nt+=yr,nt&136||(Pn[nt+8]|=Yn))}else if(zr&&Ct&Pr){for(St=nt;(St+=yr)!==le;)if(St&136||Ne[St])continue e;Pn[nt+8]|=Qr+(Math.abs(yr)<<Fr),++Rn}}break}if(!zr)break}}}gt>1&&(mt=[le])}function Vl($,le){var V,_e,de=le+16*(Kt===ne?1:-1),ve;return gt===1&&!(Ne[le+8]&Hr)&&!(Ne[de+8]&Hr)?!1:(V=Ne[$],Ne[le]=V,Ne[$]=0,_e=Ne[de],Ne[de]=0,ve=ps(),Ne[$]=V,Ne[le]=0,Ne[de]=_e,!ve)}function dd($){var le,V,_e;if(ci){if(Zt[$])for(le=En[$],V=le%8,_e=0;_e<8;++_e)Zt[$]&1<<_e&&ud(Ne,le,_e,$)&&(O[ge++]=(_e>V?oe.KSIDE_CASTLE:oe.QSIDE_CASTLE)+(le<<gn)+(le+(_e-V)<<cn),++_e)}else w&oe.KSIDE_CASTLE&&(le=En[$],V=le+2,Ne[le+9]===0&&Ne[le+10]===0&&(O[ge++]=oe.KSIDE_CASTLE+(le<<gn)+(V<<cn))),w&oe.QSIDE_CASTLE&&(le=En[$],V=le-2,Ne[le+7]===0&&Ne[le+6]===0&&(O[ge++]=oe.QSIDE_CASTLE+(le<<gn)+(V<<cn)))}function ao($,le,V){var _e,de,ve,bt,Yt;if(!$){for(le&&(le>>=26),bt=0;bt<5;++bt)if((!le||(le|0)===1<<bt)&&wt._hand[V]&B[bt]<<N[bt]){for(bt===0?(_e=16,de=103,ve=oe.DROP):(_e=0,de=119,ve=oe.DROP|bt<<Kn),Yt=_e;Yt<=de;++Yt)Yt&136&&(Yt+=8),Ne[Yt]||(gt===0||gt===1&&Ne[Yt+8]&Hr)&&(O[ge++]=ve|Yt<<cn);if(le)return}}}function xo($,le){var V,_e,de,ve=Kt,bt=sr(ve),Yt,St,nt,Dn,cr,yr=En[ve],zr,ti;for(Gs($,yr),ht=mt.length,ge=q,zr=0;zr<ht;++zr)if(V=mt[zr],Yt=Ne[V],!(gt&&Rn&&Ne[V+8]&Qr))if(Yt&er)for(nt=S[Yt],(Rn===0||!(Ne[V+8]&Qr)||Ne[V+8]>>Fr===16)&&(St=V+nt[0],Ne[St]===0&&(Hl(Ne,V,St,0),Mt[ve]===rt(V)&&(St+=nt[0],Ne[St]||Hl(Ne,V,St,oe.BIG_PAWN)))),_e=1;_e<3;++_e)Dn=nt[_e],St=V+Dn,!(St&136||Rn&&Ne[V+8]&Qr&&Ne[V+8]>>Fr!==Math.abs(Dn))&&(Ne[St]&bt?Hl(Ne,V,St,oe.CAPTURE):St===Bn&&Vl(V,St)&&(O[ge++]=oe.EP_CAPTURE|V<<gn|St<<cn));else{if(Rn&&Ne[V+8]&Qr){if(Yt&Or)continue;if(Ze[V-En[ve]+119]&Yt)Dn=Ne[V+8]>>Fr,nt=[Dn,-Dn];else continue}else nt=S[Yt&vn];if(ti=V<<gn,V===yr){for(_e=0;_e<8;++_e)Dn=nt[_e],St=V+Dn,St&136||(Ne[St]?Ne[St]&bt&&(Ne[St+8]&Yn||(O[ge++]=oe.CAPTURE|ti|St<<cn)):Ne[St+8]&Yn||(O[ge++]=ti|St<<cn));gt===0&&dd(ve)}else for(de=nt.length,cr=Yt&Er,_e=0;_e<de;++_e)for(Dn=nt[_e],St=V;St+=Dn,!(St&136);){if(Ne[St]){Ne[St]&bt&&(gt===0||Ne[St+8]&Hr)&&(O[ge++]=oe.CAPTURE|ti|St<<cn);break}else(gt===0||Ne[St+8]&Hr)&&(O[ge++]=ti|St<<cn);if(!cr)break}}return jt&&(hi?ao(le,$,ve):!ci&&Pa()&&(ge=q)),ge}function jl($,le,V,_e){var de,ve,bt,Yt,St,nt,Dn,cr,yr;if(jt===Ke["King of the Hill"]&&$&pt&&zu(V))return!0;if(_e&oe.KQSIDE_CASTLE&&(Kt===ne?V=_e&oe.KSIDE_CASTLE?117:115:V=_e&oe.KSIDE_CASTLE?5:3,$=nr,yr=!0),de=En[sr(Kt)],de===et)return!1;if(!($&pt)&&(ve=Ze[V-de+119],ve&$))for(Yt=k[V-de+119],nt=$&Er,St=V+Yt;!(St&136);){if(St===de){if($&er){if(($&qe)===ne?de-V<0:de-V>0)return!0;break}return!0}if(St!==le&&Ne[St]||!nt)break;St+=Yt}if(!yr){if(bt=Ze[le-de+119],bt&Er&&(Yt=k[le-de+119],Yt!==k[V-de+119]))for(St=de-Yt;!(St&136);){if(St!==le&&(Dn=Ne[St],Dn)){if(Dn&Kt&&bt&Dn&&Dn&Er)return!0;break}St-=Yt}if(_e&oe.EP_CAPTURE&&(cr=V+16*(Kt===ne?1:-1),bt=Ze[cr-de+119],bt&Er))for(Yt=k[cr-de+119],St=de-Yt;!(St&136);){if(St!==le&&St!==cr){if(St===V)break;if(Dn=Ne[St],Dn){if(Dn&Kt&&bt&Dn&&Dn&Er)return!0;break}}St-=Yt}}return!1}function Hu($,le){var V,_e,de,ve=S[Or],bt,Yt=Or|$;for(V=0;V<8;++V)if(de=le+ve[V],!(de&136)&&(_e=Ne[de],(_e&Yt)===Yt))return!0;for(ve=S[pt],V=0;V<8;++V)for(bt=ve[V],de=le+bt;!(de&136);){if(_e=Ne[de],_e){if(_e&$&&Ze[le-de+119]&_e)if(_e&er){if($===ne?le-de<0:le-de>0)return!0}else return!0;break}de+=bt}return!1}function Vs($){return En[$]!==et&&Hu(sr($),En[$])}function ps(){return Vs(Kt)}function Gu(){var $,le,V,_e=1<<N[4];return wt._hand[Kt]+=_e,$=q,q=ge,le=ht,V=xo()!==q,ge=q,q=$,ht=le,wt._hand[Kt]-=_e,V}function $l(){return ps()&&(O[0]=0)===xo()&&!O[0]&&(jt!==Ke.Bughouse||!Gu())}function Wl(){var $=!ps()&&(O[0]=0)===xo()&&!O[0];return $&&jt===Ke.Bughouse&&!wt.isDependent&&($=wt.siblingGame.inStalemate()),$&&En[Kt]!==et}function Vu($){var le,V,_e=100,de=0,ve=0,bt=0;for(V=0;V<120;++V)if(V&136&&(V+=8),le=Ne[V],le){if($&&!(le&$))continue;if(_e&le)return!1;if(le&Or){if(ve||de++)return!1}else if(le&Vr&&(de||(++ve,(rt(V)+V)%2&&++bt,bt&&ve!==bt)))return!1}return En[ne]!==et&&En[xt]!==et}function ju(){if(xn<8)return!1;for(var $=oi(),le=!1,V,_e=xn,de=!1,ve=$t,bt=ve.length-1;;){if(bt-=2,bt<0){if(ve.id){bt=ve.atMoveNode+bt+2,ve=Cr[ve.parentId];continue}if(bt===-2)return!1;V=ve.hash,de=!0}else V=ve[bt].hash,ve[bt].halfMoves>_e||_e<2?de=!0:_e=ve[bt].halfMoves;if(V[0]===$[0]&&V[1]===$[1]){if(le)return!0;le=!0}if(de)return!1}}function pi($){var le=$.move,V,_e,de,ve,bt,Yt,St,nt,Dn,cr;if(jt===Ke.Crazyhouse||le&oe.DROP?(_e=wt._hand,Yt=$.hash,cr=$.color):(_e=wt.siblingGame._hand,$.handSibling=!0,yn&&(St=wt.siblingGame._history(),St.length?Yt=St[St.length-1].hash:(St.hash||(St.hash=wt.siblingGame._hashPosition()),Yt=St.hash)),cr=sr($.color)),$.captured){switch($.captured&Sr?de=er:de=$.captured&vn,de&vn){case er:nt=0;break;case Or:nt=1;break;case Vr:nt=2;break;case nr:nt=3;break;default:nt=4}V=1<<N[nt],yn&&(bt=_e[cr]>>N[nt]&B[nt],Dn=ee.zobristPiece[bt+63*nt+(cr===ne?0:315)])}else ve=le>>Kn,V=-1<<N[ve],yn&&(bt=_e[cr]>>N[ve]&B[ve],Dn=ee.zobristPiece[bt-1+63*ve+(cr===ne?0:315)]);_e[cr]+=V,$.handChange=V,yn&&tr(Yt,[Dn[0]*31>>>0,Dn[1]*17>>>0])}function ql($,le,V,_e){var de=Kt,ve=sr(de),bt,Yt,St,nt,Dn={move:$,epSquare:Bn,halfMoves:xn,castlingW:Zt[ne],castlingB:Zt[xt],color:de},cr,yr,zr=de===ne,ti,Ct;yn&&(nt=oi(),Dn.hash=nt,tr(nt,ee.zobristTurn),Bn!==et&&na(Ne,nt,Bn+(zr?16:-16),er|de)),$&oe.KQSIDE_CASTLE?ti=pt:hi&&$&oe.DROP?(Ne[V]=G[_e]|de,yn&&tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[Ne[V]]+8*(7-rt(V))+bn(V)]),pi(Dn),ti=0):(ti=Ne[le],Ct=Ne[V],Ct&&(Dn.captured=Ct,yn&&tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[Ne[V]&An]+8*(7-rt(V))+bn(V)]),Ct&nr&&Zt[ve]&&(ci?rt(V)===(zr?0:7)&&(St=1<<bn(V),Zt[ve]&St&&(Zt[ve]^=St,yn&&(St>1<<bn(En[de])?tr(nt,ee.zobristCastle[ve-1]):tr(nt,ee.zobristCastle[ve+1])))):V===(zr?7:119)?Zt[ve]&oe.KSIDE_CASTLE&&(Zt[ve]^=oe.KSIDE_CASTLE,yn&&tr(nt,ee.zobristCastle[ve-1])):V===(zr?0:112)&&Zt[ve]&oe.QSIDE_CASTLE&&(Zt[ve]^=oe.QSIDE_CASTLE,yn&&tr(nt,ee.zobristCastle[ve+1])))),$&oe.PROMOTION?Ne[V]=G[_e]|de|Sr:Ne[V]=Ne[le],Ne[le]=0,yn&&(tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[ti&An]+8*(7-rt(le))+bn(le)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[Ne[V]&An]+8*(7-rt(V))+bn(V)]))),$&oe.EP_CAPTURE?(zr?(yr=V+16,cr=6):(yr=V-16,cr=8),Dn.captured=er|ve,Ne[yr]=0,yn&&tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[er|ve]+8*(cr-rt(V))+bn(V)])):ti&pt?(ci?($&oe.KQSIDE_CASTLE&&(Ne[V]=0,Ne[le]=0,$&oe.KSIDE_CASTLE?zr?(bt=118,Yt=117):(bt=6,Yt=5):zr?(bt=114,Yt=115):(bt=2,Yt=3),Ne[bt]=de|pt,Ne[Yt]=de|nr,yn&&(tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[pt|de]+8*(7-rt(le))+bn(le)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[nr|de]+8*(7-rt(V))+bn(V)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[pt|de]+8*(7-rt(bt))+bn(bt)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[nr|de]+8*(7-rt(Yt))+bn(Yt)]))),yn&&(Zt[de]&Zt[de]-1?(tr(nt,ee.zobristCastle[de-1]),tr(nt,ee.zobristCastle[de+1])):Zt[de]>1<<bn(En[de])?tr(nt,ee.zobristCastle[de-1]):tr(nt,ee.zobristCastle[de+1])),En[de]=bt||V):($&oe.KQSIDE_CASTLE&&(Ne[V]=Ne[le],Ne[le]=0,$&oe.KSIDE_CASTLE?(bt=V-1,Yt=V+1):(bt=V+1,Yt=V-2),Ne[bt]=Ne[Yt],Ne[Yt]=0,yn&&(tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[pt|de]+8*(7-rt(le))+bn(le)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[nr|de]+8*(7-rt(Yt))+bn(Yt)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[pt|de]+8*(7-rt(V))+bn(V)]),tr(nt,ee.zobristPiece[64*ee.zobristPieceValueNumbers[nr|de]+8*(7-rt(bt))+bn(bt)]))),yn&&(Zt[de]&oe.KSIDE_CASTLE&&tr(nt,ee.zobristCastle[de-1]),Zt[de]&oe.QSIDE_CASTLE&&tr(nt,ee.zobristCastle[de+1])),En[de]=V),Zt[de]=0):ti&nr&&Zt[de]&&(ci?rt(le)===(zr?7:0)&&(St=1<<bn(le),Zt[de]&St&&(Zt[de]^=St,yn&&(St>1<<bn(En[de])?tr(nt,ee.zobristCastle[de-1]):tr(nt,ee.zobristCastle[de+1])))):le===(zr?119:7)?Zt[de]&oe.KSIDE_CASTLE&&(Zt[de]^=oe.KSIDE_CASTLE,yn&&tr(nt,ee.zobristCastle[de-1])):le===(zr?112:0)&&Zt[de]&oe.QSIDE_CASTLE&&(Zt[de]^=oe.QSIDE_CASTLE,yn&&tr(nt,ee.zobristCastle[de+1]))),$&oe.BIG_PAWN?(zr?Bn=V+16:Bn=V-16,yn&&na(Ne,nt,V,er|ve)):Bn=et,ti&er||$&oe.ANY_CAPTURE?xn=0:xn++,Kt=ve,$t.push(Dn)}function fd(){var $={color:Kt,san:"--",epSquare:Bn},le={color:Kt,san:"--"},V;return yn&&(V=oi(),$.hash=V,tr(V,ee.zobristTurn),Bn!==et&&na(Ne,V,Bn+(Kt===ne?16:-16),er|Kt)),Bn=et,xn++,Kt=sr(Kt),Kt===ne&&++Jr,$t.push($),le}function Io($,le,V,_e){var de,ve=Kt;ql($,le,V,_e),de=$t[$t.length-1],hi?(xn=de.halfMoves+1,de.captured&&pi(de),jt===Ke.Bughouse&&(de.bughouseOrder=wt.moveCount()-1+wt.siblingGame.moveCount())):jt===Ke["3-check"]&&Vs(Kt)&&(de.checked=!0,yn&&zt[ve]&&tr(de.hash,ee.zobristCheck[zt[ve]+(ve===ne?-1:2)]),++zt[ve],yn&&tr(de.hash,ee.zobristCheck[zt[ve]+(ve===ne?-1:2)]))}function ms($){var le,V,_e=Kt,de=sr(_e),ve=$.move,bt=ve>>cn&lt,Yt=ve>>gn&lt;if(Kt=de,Zt[xt]=$.castlingB,Zt[ne]=$.castlingW,Bn=$.epSquare,xn=$.halfMoves,jt){if(ci&&ve&oe.KQSIDE_CASTLE){ve&oe.KSIDE_CASTLE?de===ne?(V=118,le=117):(V=6,le=5):de===ne?(V=114,le=115):(V=2,le=3),Ne[V]=0,Ne[le]=0,Ne[Yt]=de|pt,Ne[bt]=de|nr,En[de]=Yt;return}if($.handChange&&(jt===Ke.Crazyhouse||!$.handSibling?wt._hand[de]-=$.handChange:wt.siblingGame._hand[sr(de)]-=$.handChange),ve&oe.DROP){Ne[bt]=0;return}$.checked&&--zt[de]}ve&oe.PROMOTION?(Ne[Yt]=er|de,ve&oe.CAPTURE?Ne[bt]=$.captured:Ne[bt]=0):(Ne[Yt]=Ne[bt],ve&oe.KQSIDE_CASTLE?(Ne[bt]=0,ve&oe.KSIDE_CASTLE?(le=bt+1,V=bt-1):(le=bt-2,V=bt+1),Ne[le]=de|nr,Ne[V]=0,En[de]=Yt):(bt===En[de]&&(En[de]=Yt),ve&oe.CAPTURE?Ne[bt]=$.captured:(Ne[bt]=0,ve&oe.EP_CAPTURE&&(Ne[bt-(de===ne?-16:16)]=er|_e))))}function hd($,le,V){var _e,de,ve,bt,Yt,St,nt,Dn;if(ge<2)return"";for($=$&vn,Dn=0;Dn<ge;++Dn)if(_e=O[Dn],nt=_e>>cn,V===nt&&(bt=_e>>gn&lt,bt!==le&&(de=Ne[bt],de&$))){if(ve=!0,rt(le)===rt(bt)){if(Yt)return Jn(le);St=!0}if(bn(le)===bn(bt)){if(St)return Jn(le);Yt=!0}}return ve?Yt?String(8-rt(le)):String.fromCharCode(bn(le)+97):""}function vs($,le,V){var _e,de,ve=$>>cn&lt,bt={color:Kt,to:Jn(ve),flags:$&lt};return!hi||!($&oe.DROP)?(_e=$>>gn&lt,bt.from=Jn(_e),bt.piece=Ne[_e],$&oe.PROMOTION&&(de=$>>Kn,bt.promotion=G[de]+Kt),$&oe.CAPTURE?bt.captured=Ne[ve]:$&oe.EP_CAPTURE&&(bt.captured=er|sr(Kt))):(de=$>>Kn,bt.drop=de,bt.piece=G[de]+Kt),le?bt.san=le:bt.san=ji($,V),bt}function Pa(){if(jt===Ke["3-check"])return zt[sr(Kt)]===3;if(jt===Ke["King of the Hill"])return zu(En[sr(Kt)])}function Kl(){if(jt===Ke.Bughouse)return wt.siblingGame.inCheckmate()}function pd(){if(jt===Ke.Bughouse)return wt.siblingGame.in50MoveRule()||wt.siblingGame.inThreefoldRepetition()}function $u(){var $=[],le=oo(),V=$t.length-1,_e=$t[V];return _e?($.parentId=Gn,$.id=Cr.length,$t.curFen=le,_e.lines||(_e.lines=[]),_e.lines.push($.id),_e.move?ms(_e):(Bn=_e.epSquare,--xn,Kt=sr(Kt)),Kt===xt&&--Jr,$.atMoveNode=V,V?$.hash=$t[V-1].hash:$.hash=$t.hash,Gn=$.id,Cr.push($),$t=$,!0):!1}function Wu($){var le=oo();$t.curFen=le,$t=Cr[$],Gn=$,To($t.curFen,jt,!0,!0)}return wt={WHITE:ne,BLACK:xt,PAWN:er,KNIGHT:Or,BISHOP:Vr,ROOK:nr,QUEEN:ln,KING:pt,FLAGS:oe,load:To,reset:Ui,moves:function($){var le=[],V,_e=ji,de,ve;for($&&($.verbose&&(_e=vs),$.type&&(de=$.type|$.type<<24),ve=$.noDrop),xo(de,ve),V=0;V<ge;++V)le.push(_e(O[V]));return le},inCheck:ps,inCheckmate:$l,inStalemate:Wl,isBughouseWin:Kl,in50MoveRule:function(){return xn>=100},inDraw:function(){return xn>=100||Wl()||Vu()||ju()||!!pd()},insufficientMaterial:Vu,inThreefoldRepetition:ju,isVariantWin:Pa,gameOver:function(){return wt.inDraw()||$l()||!!Pa()||!!Kl()},isPositionValid:function($){var le,V,_e=0,de;if($=$||{},$.pawns!==!1)for(le=0;le<=119;){if(de=Ne[le],de&er)return!1;++le===8&&(le=112)}if($.kings!==!1){for(le=0;le<=119;++le)if(le&136&&(le+=8),de=Ne[le],de&pt){if(++_e>2||V&&V&de)return!1;V=de&qe}if(_e!==2)return!1}return!($.check!==!1&&!($.kings===!1&&En[sr(Kt)]===et)&&Vs(sr(Kt)))},validateFen:Ul,fen:oo,pgn:function($){return $=$||{},!$.useResultHeader&&!Gn&&(Pa()||$l()?or.Result=Kt===xt?"1-0":"0-1":wt.inStalemate()?or.Result="1/2-1/2":Kl()&&(or.Result=wt.siblingGame.turn()===ne?"1-0":"0-1")),Ha($,or,Cr,Un,jt,wt)},loadPgn:function($,le,V){var _e,de,ve,bt,Yt={},St,nt,Dn=0,cr;if(typeof le!="number"&&(V=V||le,le=0),V=V||{},typeof $=="string"&&(V.singleGame&&($=$.replace(/(?:\r?\n\s*){2,}/g,`
`)),$=wt.tokenizePgn($,V)),le<0&&(le=$.length+le),bt=$[le],!bt)return!1;for(Ui(),de=bt.length,_e=0;_e<de&&(ve=bt[_e],ve.type==="tagName");++_e){if(!bt[_e+1]||bt[_e+1].type!=="tagValue")return!1;++_e,ve.value==="FEN"?cr=fs(bt[_e].value):Yt[ve.value]=bt[_e].value}if(V.variant&&(Yt.Variant=V.variant),Yt.Variant&&!cr&&(cr=rn),cr||Yt.SetUp==="1"){if(Yt.SetUp==="0")Yt.FEN=cr;else if(!cr||!To(cr,Yt.Variant))return!1}for(wt.header(Yt),St=wt,nt=St._history();_e<de;++_e)if(ve=bt[_e],ve.type==="san"&&Dn===0){if(!St.move(ve.value)&&(ve.value!=="Z0"&&ve.value!=="<>"||V.rejectNullMoves||!St.move("--")))if(V.commentErrors)nt.length?nt[nt.length-1].comment=((nt[nt.length-1].comment||"")+" "+ve.value).trim():nt.initComment=((nt.initComment||"")+" "+ve.value).trim();else if(V.skipBadLines&&(Gn!==0||$t.length&&V.allowBadMainLine))Dn=1;else return Ui(),!1}else if(ve.type==="result"&&or.Result==="*")Oo(["Result",ve.value]);else if(ve.type==="a"&&Dn===0&&nt[nt.length-1])nt[nt.length-1].annotation=ve.value;else if((ve.type==="nag"||ve.type==="aa")&&Dn===0&&nt[nt.length-1])nt[nt.length-1].additionalAnnotation||(nt[nt.length-1].additionalAnnotation=[]),nt[nt.length-1].additionalAnnotation.indexOf(ve.value)===-1&&nt[nt.length-1].additionalAnnotation.push(ve.value);else if(ve.type==="comment"&&Dn===0)nt.length?(ve.value&&(nt[nt.length-1].comment=ve.value),ve.commands&&(nt[nt.length-1].commands=ve.commands,ve.commands.clk&&(nt[nt.length-1].time=id(ve.commands.clk)))):(nt.initComment=String(ve.value),ve.commands&&(nt.commands=ve.commands));else if(ve.type==="variationStart"){if(Dn>0)++Dn;else if(!$u())return Ui(),!1;nt=St._history()}else if(ve.type==="variationEnd")Dn>0&&--Dn,Dn===0&&(Wu(nt.parentId),nt=St._history());else if(ve.type==="number"){if(/b/i.test(ve.value.slice(-1))?St=wt.siblingGame:St=wt,!St)return!1;nt=St._history()}else ve.type==="cont"&&Gn&&!nt.length&&St.move(St._lines()[nt.parentId][nt.atMoveNode].san);return!0},header:function($){return Array.isArray($)?Oo($):(typeof $=="object"&&Object.keys($).forEach(function(le){Oo([le,$[le]])}),or)},turn:function($){return($===ne||$===xt)&&(Kt=$),Kt},move:function $(le){var V,_e,de,ve,bt,Yt,St,nt,Dn,cr,yr,zr,ti;if(typeof le=="string"){switch(ve=le.length-1,le[ve]){case"+":case"#":le=le.substr(0,ve)}for(nn.indexOf(le[0])>6?Dn=he[le[0]]:le[0]==="O"?Dn=pt:Dn=er,hi&&(le.indexOf("@")===-1?cr=!0:(cr=!1,Dn<<=24)),xo(Dn,cr),ve=0;ve<ge;++ve)if(Yt=ji(O[ve],!0),le===Yt){_e=O[ve];break}if(_e)St=_e>>gn&lt,nt=_e>>cn&lt,de=_e>>Kn;else{if(le==="--")return fd();if(le=wt.fixMove(le))try{return $(le)}catch{}return null}}else{if(le.drop){switch(le.drop){case"p":de=0;break;case"n":de=1;break;case"b":de=2;break;case"r":de=3;break;case"q":de=4;break;default:return null}Dn=1<<26+de}else{if(le.promotion)switch(le.promotion){case"q":de=4;break;case"n":de=1;break;case"r":de=3;break;case"b":de=2;break;default:return null}St=fn[le.from],cr=!0,Dn=Ne[St]&vn}for(nt=fn[le.to],V=((de?de<<Kn:0)|nt<<cn)>>gn|St,xo(Dn,cr),ve=0;ve<ge;++ve)if(O[ve]>>gn===V){_e=O[ve];break}if(!_e)return(le=wt.fixMove(le))?$(le):null}return _e&oe.DROP_OR_PROMOTE?ti=G[de]+Kt:ti=Ne[St],bt=vs(_e,Yt,!0),yr=jl(ti,St,nt,_e),Vi(_e,St,nt,de),yr&&(jt&&Pa()||xo()===0?bt.san+="#":bt.san+="+"),zr=$t[$t.length-1],zr.san=bt.san,bt.piece&Sr&&(zr.promoted=!0),Kt===ne&&++Jr,bt},undo:function($){var le=$t.pop();return le?(Kt===ne&&--Jr,le.move?(ms(le),$?!0:vs(le.move,le.san)):(Bn=le.epSquare,--xn,Kt=sr(Kt),$?!0:{san:"--",color:le.color})):null},clear:function($){_i($)},put:function($,le,V){var _e=fn[le],de=!1,ve,bt=Ne[_e],Yt=bt&qe,St=$.color;if(isNaN(_e)||!$.type||!St||nn.indexOf($.type)===-1)return!1;if(Ne[_e]=he[$.type]|St|($.promoted?Sr:0),Ne[_e]&pt&&(En[St]=_e),bt&&Ne[En[Yt]]&&Ne[En[Yt]]!==(pt|Yt)){for(ve=0;ve<120;++ve)ve&136&&(ve+=8),Ne[ve]===(pt|Yt)&&(En[Yt]=ve,de=!0);de||(En[Yt]=et)}return V||To(oo(),jt,!1,!1),!0},get:gi,remove:function($,le){var V=Ne[fn[$]],_e=gi($),de=V&qe,ve;if(Ne[fn[$]]=0,V&pt){for(En[de]=et,Zt[de]=0,ve=0;ve<120;++ve)if(ve&136&&(ve+=8),Ne[ve]===(pt|de)){En[V.color]=ve;break}}return le||To(oo(),jt,!0,!1),_e},history:function($,le){for(var V=[],_e,de=$t,ve=de.length;;){if(--ve===-1)if(de.id&&!le){ve=de.atMoveNode,de=Cr[de.parentId];continue}else break;$?(_e=vs(de[ve].move,de[ve].san),_e.color=de[ve].color,!ve&&de.initComment&&(_e.firstComment=de.initComment),de[ve].comment!==void 0&&(_e.comment=de[ve].comment),de[ve].time!==void 0&&(_e.time=de[ve].time),de[ve].annotation!==void 0&&(_e.annotation=de[ve].annotation),de[ve].additionalAnnotation!==void 0&&(_e.additionalAnnotation=de[ve].additionalAnnotation),de[ve].commands!==void 0&&(_e.commands=de[ve].commands),de[ve].captured!==void 0&&(_e.captured=de[ve].captured),de[ve].promoted!==void 0&&(_e.promoted=de[ve].promoted),de[ve].lines!==void 0&&(_e.lines=de[ve].lines),de[ve].bughouseOrder!==void 0&&(_e.bughouseOrder=de[ve].bughouseOrder),nn.indexOf(de[ve].san[0])>6?_e.piece=he[de[ve].san[0]]:de[ve].san[0]==="O"?_e.piece=pt:_e.piece=er,_e.piece|=_e.color,V.unshift(_e)):V.unshift(de[ve].san)}return V},hashes:function(){for(var $=[],le=$t,V=le.length;;){if(--V===-1)if(le.id){V=le.atMoveNode,le=Cr[le.parentId];continue}else{le.hash||oi(),$.unshift(le.hash);break}$.unshift(le[V].hash)}return $},moveCount:function(){return $t.length},startingMoveNumber:function(){return Un},completeFen:fs,createVariation:$u,selectLine:Wu,hash:function(){var $=oi();return jt===Ke.Bughouse&&!wt.isDependent?[$,wt.siblingGame.hash()]:$},hashing:function($){yn=$,jt===Ke.Bughouse&&!wt.isDependent&&wt.siblingGame.hashing(yn)},hand:function(){if(hi)return Us(wt._hand[ne],!0)+Us(wt._hand[xt])},checks:function(){if(jt===Ke["3-check"])return[zt[ne],zt[xt]]},threats:function(){var $=Kt,le=sr($),V=[],_e=[],de=[],ve=[],bt=[],Yt=Bn,St,nt,Dn,cr,yr,zr,ti;if(Gs(0,En[$]),gt||Rn)for(St=0;St<120;++St)St&136&&(St+=8),Ne[St+8]&Hr&&Ne[St]?de.push(Jn(St)):Ne[St+8]&Qr&&V.push(Jn(St));for(Kt=le,Bn=et,xo(),St=ge;St--;){if(nt=O[St],yr=nt>>cn&lt,zr=nt>>gn&lt,nt&oe.DROP_OR_PROMOTE){if(ti=nt>>Kn,cr=G[ti]|le,nt&oe.PROMOTION&&ti%3!==1)continue}else cr=Ne[zr],ti=0;if(jl(cr,zr,yr,nt)&&(Vi(nt,zr,yr,ti),q=St,(jt&&Pa()||xo()===St)&&_e.push((nt&oe.DROP?be[cr].toLowerCase()+"@":Jn(zr))+Jn(yr)),ms($t.pop()),nt&oe.CAPTURE)){for(Dn=0,St=ge;St>q;)if((O[--St]>>cn&lt)===yr){Dn=1,St=q;break}if(!Dn){ve.push(Jn(zr)+Jn(yr));continue}}nt&oe.CAPTURE&&ti!==1&&(Dn=Ne[yr]&124)&&(Hu($,yr)?(cr=Ne[zr]&vn,Dn>cr&&Dn-cr!==8&&bt.push(Jn(zr)+Jn(yr))):ve.push(Jn(zr)+Jn(yr)))}return q=0,Kt=$,Bn=Yt,{pins:V,checkers:de,mates:_e,undefended:ve,underdefended:bt}},tokenizePgn:Uu,fixMove:function($){var le,V,_e;if(typeof $=="string"){if(/0|[?!+#]$|[18][QNRB]$|^P/i.test($))return $.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/i,"$1=$2").replace(/^P+/i,"");if(V=$.indexOf("=")>0?-4:-2,le=fn[$.substr(V,2)],typeof le=="number"){if(Ne[le]&sr(Kt)||/^[a-h]x?[a-h][36]$/.test($)){if($.indexOf("x")===-1)return $.slice(0,V)+"x"+$.substr(V)}else if($.indexOf("x")>-1)return $.replace(/x/g,"");if(_e=$.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])x?([a-h][1-8])=?(.?)$/)){if(Ne[fn[_e[2]]])return{from:_e[2],to:_e[3],promotion:_e[4].toLowerCase()};if(/^\d$/.test(_e[2])){for($=0,xo(he[_e[1]],!0),V=0;V<ge;++V)if(O[V]>>cn===le&&rt(O[V]>>gn&lt)===8-_e[2]){if($)return;$=O[V]}if($)return ji($,!0)}return _e[1]+_e[3]+_e[4]}}}else if(Ne[fn[$.from]]===(pt|Kt)&&$.to&&$.from[1]===$.to[1]){if($.from<$.to)return"O-O";if($.from>$.to)return"O-O-O"}},_hand:[],_history:function($){return $&&($t=$,Gn=$t.id),$t},_lines:function(){return Cr},_hashPosition:go,_board:function(){return Ne}},kn&&To(kn,ur)||Ui(),wt}return Gl.variants=$e,Gl}(),L=function(J){var Ke="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",$e=["bench","d","eval","flip","isready","ponderhit","stop","uci","ucinewgame"],fn=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],mt=["moves","searchmoves"],gt=["ponder","infinite","startpos"],Rn={depth:1,seldepth:1,time:1,nodes:1,multipv:1,cp:1,mate:1,currmovenumber:1,hashfull:1,nps:1,tbhits:1,sbhits:1,cpuload:1,bmc:1,score:2,lowerbound:2,upperbound:2,bestmove:3,ponder:3,baseTurn:3,bestmoveSan:3,ponderSan:3,pv:4,pvSan:4,string:4,refutation:4,currline:4},w=/(?:Total|Final) Evaluation[\s\S]+\n$/i;function O(ln,pt,qe){var vn=new Worker(ln||"stockfish.js"),An={terminate:Sr,postMessage:Pr};function Pr(Yn){vn.postMessage(Yn)}function Sr(){vn.terminate()}function Er(Yn){var Hr=Yn.concat();Yn.length=0,Hr.forEach(function(Qr){Qr.cmd?Qr.cmd.substr(0,2)!=="go"&&qe.send(Qr.cmd,Qr.cb,Qr.stream):(clearTimeout(Qr.timer),qe.getBestMove(Qr.args,Qr.cb,Qr.stream))})}return vn.onmessage=function(Yn){typeof Yn.data=="string"&&An.onmessage(Yn.data)},vn.onerror=function(Yn){if(qe.fallbackPath&&qe.fallbackPath!==ln){try{Yn.preventDefault()}catch{}try{vn.terminate()}catch{}return vn=O(qe.fallbackPath,pt,qe),vn.onmessage=function(Hr){An.onmessage(Hr)},Er(qe._activeCommands()),Er(qe._bestMoveQueue()),!1}if(pt.onError)return pt.onError(Yn)},An}function q(ln,pt){pt.fallbackPath=ln.pathToNonWasmEngine,pt.path=ln.enginePath||ln.pathToEngineWorker,pt.wasmPath=ln.pathToWasmEngine,ln.engines&&(ln.engines.multiThreaded&&J.supportsMultithreading()?(pt.path=ln.engines.multiThreaded.loader,pt.wasmPath=ln.engines.multiThreaded.engine):ln.engines.singleThreaded&&(pt.path=ln.engines.singleThreaded.loader,pt.wasmPath=ln.engines.singleThreaded.engine),pt.fallbackPath=ln.engines.asm||pt.fallbackPath)}function ge(ln,pt){var qe;return q(ln,pt),qe=pt.path,(pt.fallbackPath&&typeof WebAssembly>"u"||!qe)&&(qe=pt.fallbackPath),pt.wasmPath&&(qe+="#"+pt.wasmPath),O(qe,ln,pt)}function ht(ln){for(var pt=ln.split(" "),qe=pt.length,vn=pt[0]==="info"?1:0,An={mtype:pt[0]},Pr,Sr;vn<qe;++vn)if(Sr=pt[vn],Sr)if(Pr=Rn[Sr],Pr===1){for(;!pt[++vn]&&vn<qe;);An[Sr]=Number(pt[vn])}else if(Pr===2)An[Sr]=!0;else if(Pr===3){for(;!pt[++vn]&&vn<qe;);An[Sr]=pt[vn]}else for(An[Sr]=[],++vn;vn<qe;++vn)if(!Rn[pt[vn]])pt[vn]&&An[Sr].push(pt[vn]);else{--vn;break}return(An.bestmove==="(none)"||An.bestmove==="0000")&&(An.bestmove=void 0,An.bestmoveSan=void 0),(An.ponder==="(none)"||An.ponder==="0000")&&(An.ponder=void 0,An.ponderSan=void 0),An}function et(ln){var pt=ln.indexOf(" ");return pt===-1?ln:ln.substr(0,pt)}function ne(ln){return(ln+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,function(pt,qe,vn,An){return" "+(3-vn)+"+"+(3-An)+qe})}function xt(ln){return(ln+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,function(pt,qe,vn,An){return An+" +"+(3-qe)+"+"+(3-vn)})}function er(ln,pt){var qe,vn=et(ln),An,Pr,Sr;for(vn==="uciok"||vn==="option"?qe="uci":vn==="readyok"||vn==="ready"?qe="isready":vn==="json"||ln.indexOf("info string CEEError")>=0?qe="fetch":vn==="bestmove"||vn==="info"?qe="go":qe="other",Sr=pt.length,Pr=0;Pr<Sr;Pr+=1)if(An=et(pt[Pr].cmd),An===qe||qe==="other"&&(An==="d"||An==="eval"))return Pr;return 0}function Or(ln){var pt=ln.match(/id name ((\S+) ([\d.a-z]+).*)/i);if(pt)return{all:pt[1].trim(),short:pt[2],version:pt[3],full:pt[2]+" "+pt[3],wasm:/ wasm/i.test(ln),multithreaded:/ multithreaded/i.test(ln)}}function Vr(ln,pt){var qe={},vn,An=[],Pr,Sr=[],Er,Yn=null;function Hr(lt){var nn,rn=0,S,me,he;if(lt.indexOf(`
`)>-1){for(me=lt.split(`
`),he=0;he<me.length;he+=1)Hr(me[he]);return}if(J.log&&console.log("debug (onmessage): "+lt),qe.stream&&qe.stream(lt),!An.length||lt.indexOf("No such option")===0||lt.indexOf("Stockfish")===0||lt.indexOf("Komodo")===0||lt.indexOf("Explanation Engine")===0||lt.indexOf("info string variant")===0){if(ln.ceeMode&&lt.indexOf("Explanation Engine")===0){var be=lt.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\s*\(C\)/);be?Yn={date:be[1],increment:be[2]}:(be=lt.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\.([0-9]+)/),Yn={major:be[1],minor:be[2],patch:be[3]})}return}if(rn=er(lt,An),S=An[rn],S.stream&&!S.discard&&S.stream(lt),typeof S.message>"u"?S.message="":S.message!==""&&(S.message+=`
`),S.message+=lt,lt.indexOf("uciok")===0)qe.name=Or(S.message),nn=!0;else if(lt.indexOf("ready")===0)nn=!0;else if((lt.indexOf("bestmove")===0||et(lt)==="bestmove")&&S.cmd!=="bench")nn=!0,S.message=lt;else if(S.cmd==="d")(lt.indexOf("Legal uci moves")===0||lt.indexOf("Key is")===0)&&(S.done=!0,nn=!0);else if(S.cmd.indexOf("fetch")===0)try{var Ue=S.message.split(`
`).filter(function(Ze){return Ze.includes("json")}).join(`
`);Ue&&(S.message=JSON.parse(Ue.replace(/^json /mg,"").replace(/\n/g,"")),nn=!0)}catch{}else S.cmd==="eval"?w.test(S.message)&&(nn=!0):(lt.indexOf("pawn key")===0||lt.indexOf("Nodes/second")===0||lt.indexOf("Unknown command")===0)&&(nn=!0);nn&&(An.splice(rn,1),S.cb&&!S.discard?S.cb(S.message):S.ondiscard&&S.ondiscard())}function Qr(lt){return lt!=="ucinewgame"&&lt!=="flip"&&lt!=="stop"&&lt!=="ponderhit"&&lt.indexOf("position")!==0&&lt.indexOf("setoption")!==0&&lt.indexOf("variation")!==0&&lt.indexOf("threat-variation")!==0&&lt.indexOf("push")!==0&&lt.indexOf("pop")!==0&&lt.indexOf("serve")!==0&&lt.indexOf("speech")!==0}qe.send=function(lt,nn,rn){var S;lt=String(lt).trim(),Qr(lt)?An[An.length]={cmd:lt,cb:nn,stream:rn}:S=!0,vn&&(J.log&&console.log("stdin: "+lt),vn.postMessage(lt),S&&nn&&setTimeout(nn,0))},qe._activeCommands=function(){return An},qe._bestMoveQueue=function(){return Sr},qe.quit=function(){if(vn&&vn.terminate){try{qe.send("quit")}catch{}vn.terminate(),vn=null,qe.ready=void 0}clearTimeout(Pr)},$e.forEach(function(nn){qe[nn]=function(S,me){qe.send(nn,S,me)}}),fn.forEach(function(nn){qe[nn.cmd]=function(S,me,he){var be=[nn.cmd];Er&&S.fen&&(S.fen=ne(S.fen)),nn.args.forEach(function(Ze){if(S[Ze]||S[Ze]===0){if(mt.indexOf(Ze)>-1){if(!S[Ze]||!S[Ze].length)return;Array.isArray(S[Ze])&&(S[Ze]=S[Ze].join(" "))}be.push(Ze),gt.indexOf(Ze)===-1&&be.push(S[Ze])}}),qe.send(be.join(" "),me,he)}}),qe.setoption=function(lt,nn){qe.send("setoption name "+lt+" value "+nn)},qe.setVariant=function(lt){var nn;lt!==Er&&(nn=String(lt).toLowerCase().replace(/ |-/g,""),!lt||nn==="chess"?(nn=void 0,qe.setoption("UCI_Variant","chess"),qe.setoption("UCI_Chess960","false")):nn==="chess960"?(qe.setoption("UCI_Variant","chess"),qe.setoption("UCI_Chess960","true")):(nn==="threecheck"&&(nn="3check"),qe.setoption("UCI_Variant",nn),qe.setoption("UCI_Chess960","false")),Er=nn)},qe.loadBook=function(lt,nn){qe.pathToBook=lt,ee.loadBook(lt,function(S,me){qe.book=me,qe.bookLoaded=!0,S&&(console.error("Error loading opening book."),console.error(S),qe.pathToBook=null,qe.bookLoaded=!1),nn()})},qe.getBookMove=function(lt){var nn=J.createGame(lt),rn=qe.book.pick({fen:nn.fen(),type:typeof lt.bookPick<"u"?lt.bookPick:"random",chess960:nn.header().Variant==="Chess960"}),S=rn&&nn.move(rn);if(S)return{moveSan:S.san,moveLan:rn,move:{from:S.from,to:S.to,promotion:S.promotion||null},baseTurn:nn.turn()===1?"b":"w",pv:[{moveSan:S.san,moveLan:rn}],depth:null,score:null,mateIn:null,isBookMove:!0}};function Fr(){var lt=1,nn=[],rn=[],S,me,he=null,be=Sr[0].args,Ue=Sr[0].cb,Ze=Sr[0].stream,zn,K=1,ye,Be=[],We=14,k=Vr._previousCP;Sr[0].started=!0,Vr._previousCP=null;function N(X){var rt=[],bn=rn[X]||Mt(nn[X]);return nn[X].forEach(function(sr,tr){rt.push({moveSan:bn[tr],moveLan:sr})}),rt}function B(X,rt,bn,Jn){var sr;for(sr=nn.length-1;sr>=0;sr-=1)if(nn[sr][0]===X)return N(sr);return bn?[{moveSan:rt,moveLan:X},{moveSan:Jn,moveLan:bn}]:rt?[{moveSan:rt,moveLan:X}]:[]}function Y(X){var rt=.03*Math.pow(32,X.depth/We);X.cp=k+(X.cp-k)*rt}function G(X){X.mate===0?(X.mateIn=0,X.cp=-31800*K):(X.mateIn=Number(X.mate*K)||null,typeof X.mateIn=="number"&&!isNaN(X.mateIn)&&typeof X.cp!="number"?X.cp=31800*K*(X.mate/Math.abs(X.mate)):(X.cp*=K,Math.abs(X.cp)===9&&(X.cp=0),be.normalize&&X.depth<=We&&typeof k=="number"&&X.multipv===1&&Y(X))),X.score=X.cp/100}function ce(X){var rt=ht(X);if(oe(rt),lt>We&&S<5e3&&S>-5e3&&(Vr._previousCP=S),rt.pv=B(rt.moveLan,rt.moveSan),rt.pv.length===1&&rt.ponder&&(rt.pv=B(rt.moveLan,rt.moveSan,rt.ponder,rt.ponderSan)),Be.length>1)Be.splice(Be.indexOf(rt.moveLan),1),be.searchmoves=Be,be.getNextBest=0,gn(be,function(){Ue(rt)},function(Jn){Ze&&(Jn.multipv=2,Ze(Jn))});else if(Ue)try{Ue(rt)}catch(bn){console.error(bn)}Sr.shift(),clearTimeout(Pr),Sr.length>0&&Fr()}function oe(X){var rt;X.baseTurn=zn,X.cp=S,X.score=S/100,X.mate=me,X.mateIn=he,X.depth=lt,X.moveLan=X.bestmove,X.moveLan&&(X.move=J.uciToObj(X.moveLan)[0],rt=ye.move(X.move),rt&&(X.moveSan=X.bestmoveSan=rt.san,X.ponder&&(rt=ye.move(J.uciToObj(X.ponder)[0]),rt&&(X.ponderSan=rt.san,ye.undo(!0))),ye.undo(!0)))}function Mt(X){var rt,bn=X.length,Jn=[],sr;for(rt=0;rt<bn&&(sr=ye.move(J.uciToObj(X[rt])[0]),!!sr);++rt)Jn.push(sr.san);for(;rt>0;--rt)ye.undo(!0);return Jn}function _t(X){var rt=ht(X);rt.score&&(rt.baseTurn=zn,G(rt),!rt.multipv&&rt.depth&&(rt.multipv=1),(rt.multipv===1||rt.depth===0)&&(S=rt.cp,me=rt.mate,he=rt.mateIn)),rt.pv&&Ze&&(rt.pvSan=Mt(rt.pv)),rt.pv&&!(rt.lowerbound||rt.upperbound)&&(nn.push(rt.pv),Ze&&rn.push(rt.pvSan)),rt.depth>lt?lt=rt.depth:rt.mtype==="bestmove"&&oe(rt),Ze&&!(rt.mateIn===0&&rt.pv)&&Ze(rt),Qe()}function Qe(){be.timeout&&(clearTimeout(Pr),Sr[0].timer=Pr=setTimeout(function(){qe.stop(),Ue&&(Ue(),Ue=void 0)},be.timeout))}be.difficulty>=0&&be.difficulty<20?(qe.setoption("Skill Level",be.difficulty),be.maximumError>=0&&be.maximumError<=4999&&qe.setoption("Skill Level Maximum Error",be.maximumError),be.errorProbability>=1&&be.errorProbability<=128&&qe.setoption("Skill Level Probability",be.errorProbability)):qe.setoption("Skill Level",20),be.contempt!==void 0?qe.setoption("Contempt",be.contempt):qe.setoption("Contempt","0"),be.multiPv>1?qe.setoption("MultiPV",be.multiPv):qe.setoption("MultiPV",1),!be.movetime&&(!be.wtime||!be.btime)&&!be.depth&&(be.btime=be.btime||72e3,be.wtime=be.wtime||72e3),(be.startpos||!be.fen)&&!be.moves&&!be.variant?(zn="w",ye=J.createGame({disableHashing:!0})):(ye=J.createGame({fen:be.fen?xt(be.fen):Ke,moves:be.moves,variant:be.variant,disableHashing:!0}),ye.turn()===ye.WHITE?zn="w":(zn="b",K=-1)),qe.setVariant(be.variant),qe.position(be),qe.go(be,ce,_t),be.getNextBest&&Ue&&ye.moves({verbose:!0}).forEach(function(rt){rt=J.normalizeMoveObj(rt),Be.push(rt.from+rt.to+(rt.promotion||""))}),Qe()}function gn(lt,nn,rn){Sr.push({args:lt,cb:nn,stream:rn}),Sr.length===1&&Fr()}qe.getBestMove=function(lt,nn,rn){var S;if(lt=lt||{},lt.fen=lt.fen||lt.baseFen,lt.is960&&(lt.variant="Chess960"),qe.bookLoaded&&lt.useBook&&(S=qe.getBookMove(lt),S))return setTimeout(function(){S.mtype="bestmove",nn(S)},0);gn(lt,nn,rn)},qe.stopAll=function(lt){var nn,rn=An.length,S=0;function me(){S-=1,S===0&&lt()}for(Sr=[],nn=0;nn<rn;nn+=1)J.log&&console.log("debug (stop_moves): "+nn,et(An[nn].cmd)),et(An[nn].cmd)==="go"&&!An[nn].discard&&(qe.stop(),An[nn].discard=!0,lt&&(S+=1,An[nn].ondiscard=me));lt&&!S&&qe.isready(lt)},qe.restartEngine=function(lt){return qe.stopAll(),qe.quit(),An=[],Sr=[],qe.bookLoaded&&!ln.book&&(ln=JSON.parse(JSON.stringify(ln)),ln.book=qe.book),Vr(ln,lt)},qe.stopFast=function(lt,nn){var rn;qe.stopAll(function(){clearTimeout(rn),lt(qe)}),rn=setTimeout(function(){qe.restartEngine(lt)},nn||5e3)};function cn(){qe.uci(function(){ln.settings&&Object.keys(ln.settings).forEach(function(rn){qe.setoption(rn,ln.settings[rn])}),qe.ready=!0,Kn()})}function Kn(){qe.ready&&(qe.bookLoaded||!qe.pathToBook)&&pt&&pt(qe)}return typeof Worker>"u"?!1:(ln.ceeMode&&(nr(qe,ln),qe.ceeVersion=function(){return JSON.parse(JSON.stringify(Yn))}),vn=ge(ln,qe),vn.onmessage=Hr,ln.book&&(qe.book=ln.book,qe.bookLoaded=!0,qe.pathToBook=ln.pathToBook),qe.getFenFromMoves=J.getFenFromMoves,qe.getLegalMoves=J.getLegalMoves,qe.getPositionInfo=J.getPositionInfo,qe.isFenValid=J.isFenValid,qe.ready=!1,cn(),!qe.book&&ln.pathToBook&&qe.loadBook(ln.pathToBook,Kn),qe)}function nr(ln,pt){var qe=1e3,vn=0,An,Pr;function Sr(Yn){function Hr(Qr){var Fr=Hr.callbacks;Hr.callbacks={},Hr.original&&Hr.original(Qr);for(var gn in Fr)Fr[gn](Qr)}return Hr.callbacks={},Hr.original=Yn,Hr}pt.onError=An=Sr(pt.onError),pt.onSignal=Pr=Sr(pt.onSignal);function Er(Yn,Hr,Qr,Fr){var gn,cn=Date.now(),Kn=!1,lt=++vn;function nn(){clearTimeout(gn),delete An.callbacks[lt],delete Pr.callbacks[lt],Kn=!0}function rn(he){Kn||(nn(),Fr({data:he,action:Hr,uci:Yn},Yn))}function S(he){rn({msg:"CEE process crashed unexpectedly",code:J.ERROR_CODES.CRASH,exitCode:he,err:new Error("CEE process exited with "+he)})}An.callbacks[lt]=S,Pr.callbacks[lt]=S,gn=setTimeout(function(){rn({msg:"CEE timed out",code:J.ERROR_CODES.TIMEOUT,timeout:qe,duration:Date.now()-cn,err:new Error("CEE timed out")})},qe);for(var me=0;me<Yn.length;++me)ln.send(Yn[me]);ln.send("fetch "+Hr,function(be){Kn||(nn(),Qr(be,Yn))},function(be){be.indexOf("info string CEEError")>=0?rn({msg:"CEE crashed with error code",code:J.ERROR_CODES.ERROR,log:be.match(/info string CEEError\s*(.*)/)[1],err:new Error(be.match(/info string CEEError\s*(.*)/)[1])}):ln.ceeDebug&&be.indexOf("not recognized")>=0&&rn({msg:"CEE received unknown UCI option (engine.ceeDebug mode on)",option:be,code:J.ERROR_CODES.NONFATAL_ERROR,err:new Error(be)})})}ln.fetch=function(Yn,Hr,Qr){var Fr,gn;Yn=Yn||[],Fr=Yn.action||"analysis",Array.isArray(Yn)?gn=Yn:(gn=Yn.uciCommands?Yn.uciCommands.map(function(cn){return cn}):[],Yn.startFen&&(Yn.options=Yn.options||{},typeof Yn.options.ScoreWhiteToMove>"u"&&(Yn.options.ScoreWhiteToMove=!0),typeof Yn.options.SerializeLikeCEAC>"u"&&(Yn.options.SerializeLikeCEAC=!0),J.CEE_LIB.addOptions(gn,Yn.options),J.CEE_LIB.addVariant(gn,Yn.variant),J.CEE_LIB.addPosition(gn,Yn.startFen)),J.CEE_LIB.addVariations(gn,Yn.evals&&Yn.evals[0]),J.CEE_LIB.addVariations(gn,Yn.threats&&Yn.threats[0],"threat-variation"),(Yn.moves||[]).forEach(function(cn,Kn){var lt=Kn+1;J.CEE_LIB.addPush(gn,cn),J.CEE_LIB.addVariations(gn,Yn.evals&&Yn.evals[lt]),J.CEE_LIB.addVariations(gn,Yn.threats&&Yn.threats[lt],"threat-variation")})),Er(gn,Fr,Hr,Qr)},ln.fetch.setTimeout=function(Yn){qe=Yn},J.ERROR_CODES={TIMEOUT:1,CRASH:2,ERROR:3,NONFATAL_ERROR:4}}return Vr},Re=function(){var J=xe(),Ke,$e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",fn=252,mt=255,gt={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},Rn="pnbrq",w=512,O="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",q="qnrbkp";function ge(S){var me,he=S.length,be=[],Ue,Ze,zn;for(me=0;me<he;me+=2)zn={},Ue=O.indexOf(S[me]),Ze=O.indexOf(S[me+1]),Ze>63&&(zn.promotion=q[Math.floor((Ze-64)/3)],Ze=Ue+(Ue<16?-8:8)+(Ze-1)%3-1),Ue>75?zn.drop=q[Ue-79]:zn.from=O[Ue%8]+(Math.floor(Ue/8)+1),zn.to=O[Ze%8]+(Math.floor(Ze/8)+1),be.push(zn);return be}function ht(S){var me,he,be="",Ue,Ze;for(Array.isArray(S)||(S=[S]),he=S.length,me=0;me<he;me+=1)S[me].drop?Ue=79+q.indexOf(S[me].drop):Ue=O.indexOf(S[me].from[0])+(S[me].from[1]-1)*8,Ze=O.indexOf(S[me].to[0])+(S[me].to[1]-1)*8,S[me].promotion&&(Ze=q.indexOf(S[me].promotion)*3+64+(Ze<Ue?9+Ze-Ue:Ze-Ue-7)),be+=O[Ue]+O[Ze];return be}function et(S){var me=S.split(" "),he,be=me.length,Ue=[],Ze;if(S)for(he=0;he<be;++he)Ze=me[he],Ze.length===4?Ze[1]==="@"?Ue.push({drop:Ze[0].toLowerCase(),to:Ze.substr(2,2)}):Ue.push({from:Ze.substr(0,2),to:Ze.substr(2,2)}):Ue.push({from:Ze.substr(0,2),to:Ze.substr(2,2),promotion:Ze[4]});return Ue}function ne(S,me){return S.san===me.san||S.to===me.to&&(S.from===me.from||!S.from&&!me.from)&&(S.promotion===me.promotion||!S.promotion&&!me.promotion)&&(S.drop===me.drop||!S.drop&&!me.drop)}function xt(S,me,he){var be=[],Ue,Ze,zn,K,ye,Be,We,k,N,B,Y=1,G=8,ce=1,oe=8,Mt={verbose:!0};for(B=S.turn(),N=3-B,K=xe("/",me),K.turn(N),he&&(Y=G=+he[1],ce=oe=he.charCodeAt(0)-96),Ue=Y;Ue<=G;++Ue)for(Ze=ce;Ze<=oe;++Ze)ye=String.fromCharCode(Ze+96)+Ue,zn=S.get(ye),zn&&zn.color===N&&(K.put(zn,ye,!0),zn.type==="p"?(Be=String.fromCharCode(Ze-1+96)+(Ue+(N===1?1:-1)),We=String.fromCharCode(Ze+1+96)+(Ue+(N===1?1:-1)),K.put({type:"n",color:B},Be,!0),K.put({type:"n",color:B},We,!0)):zn.type==="k"&&(k=S.fen().split(" ")[2],k!=="-"&&K.load(K.fen().replace(/^(\S+\s\S\s)(\S+)/,"$1"+k),me,!0,!0)),be=be.concat(K.moves(Mt)),K.remove(ye,!0),zn.type==="p"&&(K.remove(Be,!0),K.remove(We,!0)));return me&&S.hand()&&(K._hand[N]=18721,be=be.concat(K.moves({verbose:!0}).filter(function(_t){return!he||_t.to===he}))),be.forEach(function(_t){Er(_t)}),be}function er(S,me){var he=S.header().Variant,be=xt(S,he,me.from),Ue,Ze,zn,K,ye,Be=3-S.turn();for(Ue=be.length-1;Ue>=0;--Ue)if(Ze=be[Ue],ne(Ze,me)){zn=!0;break}if(zn)return Ze.drop?S.put({type:Ze.drop,color:Be},Ze.to):(K=S.remove(Ze.from,!0),Ze.flags===J.FLAGS.KSIDE_CASTLE?(ye=S.remove(he==="Chess960"?Ze.to:"h"+Ze.from[1],!0),S.put(K,"g"+Ze.from[1],!0),S.put(ye,"f"+Ze.from[1])):Ze.flags===J.FLAGS.QSIDE_CASTLE?(ye=S.remove(he==="Chess960"?Ze.to:"a"+Ze.from[1],!0),S.put(K,"c"+Ze.from[1],!0),S.put(ye,"d"+Ze.from[1])):(Ze.promotion&&(K.type=Ze.promotion,K.promoted=!0),ye=S.get(Ze.to),S.put(K,Ze.to,K.type!=="k"&&K.type!=="r"&&(!ye||ye.color!==Be||ye.type!=="r")))),Ze;if(me.from&&(S.turn(Be),me=S.fixMove(me),S.turn(3-Be),me))return er(S,{san:me,from:me.from})}function Or(S,me){var he=me?{}:[],be=S._board(),Ue,Ze,zn;if(me)for(Ue=112;Ue>=0;++Ue)Ue&136&&(Ue-=24),(Ze=be[Ue])&&(zn=O[Ue&7]+(8-(Ue>>4)),he[zn]={type:gt[Ze&fn],color:Ze&3,promoted:(Ze&w)!==0,square:zn});else for(Ue=112;Ue>=0;++Ue)Ue&136&&(Ue-=24),(Ze=be[Ue])&&he.push({type:gt[Ze&fn],color:Ze&3,promoted:(Ze&w)!==0,rank:8-(Ue>>4),file:(Ue&7)+1});return he}function Vr(S,me){var he=Math.min(Math.max(.20773843*Math.atan(2.49085889*S/100-2.47841945*me/100)+.02262979*S/100-.02256839*me/100+.52239679,0),1),be=Math.min(Math.max(-.20720905*Math.atan(2.49626837*S/100-2.48220286*me/100)+-.02352551*S/100+.02172627*me/100+.49443923,0),1),Ue=Math.min(Math.max(Math.exp(.037043456*S/100+.178106427*me/100+-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(S/100-me/100,2))+-.001625539,0),1),Ze=he+be+Ue;return{w:he/Ze,b:be/Ze,d:Ue/Ze}}function nr(S,me){var he,be,Ue,Ze;if(S=S||{},S.disableHashing=!0,he=An(S),!he)return null;if(me){if(Ue=he.move(me),!Ue)return null;he.extended||Er(Ue)}return Ze=he.fen(),!S.skipValidation&&!he.isPositionValid(S)?null:(be=Ze.split(" "),{fen:Ze,pieces:Or(he),sideToMove:he.turn(),castling:be[2],epSquare:be[3]==="-"?null:be[3],halfMoves:+be[4],moveNumber:+be[5],move:Ue,hand:he.hand(),checks:he.checks()})}function ln(S){var me=An(S),he,be,Ue,Ze,zn,K,ye=[""],Be=[],We,k,N;if(!me)return!1;for(k=me.header(),N=k.Variant||"",K=me.hashes(),he=typeof me.origHistory=="function"?me.origHistory(!0):me.history(!0),zn=K.length,be=[K[0][0],K[0][1]],Be.push(ee.to64BitHex(be)+N),K[0]=ee.to64BitHex(K[0]),Ue=1;Ue<zn;++Ue)be[0]=(be[0]^K[Ue][0]*(Ue+58465))>>>0,be[1]=(be[1]^K[Ue][1]*(Ue+984))>>>0,K[Ue]=ee.to64BitHex(K[Ue]),Be.push(ee.to64BitHex(be)+N),Ze=Ue-1,Er(he[Ze]),We=(he[Ze].from?he[Ze].from:he[Ze].drop.toUpperCase()+"@")+he[Ze].to+(he[Ze].promotion||""),Ze&&(We=ye[Ze]+" "+We),ye.push(We);return{startingFen:k.FEN||$e,hashes:K,fingerprints:Be,moves:ye,variant:k.Variant}}function pt(S,me,he,be){var Ue,Ze,zn,K,ye,Be,We,k,N,B,Y;for(he=he||{},typeof me=="string"&&(me=me.trim().split(" ")),zn=me.length,Ue=0;Ue<zn;Ue+=1){if(me[Ue].board==="b"||me[Ue].board==="B"?ye=S.siblingGame:ye=S,typeof me[Ue].moveLan=="string"?Be=et(me[Ue].moveLan)[0]:typeof me[Ue]=="string"?Be=et(me[Ue])[0]:me[Ue].san?Be=me[Ue].san:Be=me[Ue],!ye.move(Be))if(he.autoPromote){if(he.autoPromote===!0?Be.promotion="q":Be.promotion=he.autoPromote,!ye.move(Be)){if(he.skipBadLines)break;return!1}}else{if(he.skipBadLines)break;return!1}if(We=ye._history(),k=We[We.length-1],be&&(N=parseInt(be[Ue],10)),(typeof N!="number"||isNaN(N))&&(N=parseInt(me[Ue].time,10)),typeof N=="number"&&!isNaN(N)&&(k.time=N,N=void 0),me[Ue].firstComment&&(We.initComment=me[Ue].firstComment),me[Ue].comment&&(k.comment=me[Ue].comment),me[Ue].annotation&&(k.annotation=me[Ue].annotation),me[Ue].additionalAnnotation&&(k.additionalAnnotation=me[Ue].additionalAnnotation),me[Ue].commands&&(k.commands=me[Ue].commands),me[Ue].lines)for(K=me[Ue].lines.length,Ze=0;Ze<K;++Ze){if(B=S._history().id,S.createVariation(),Y=pt(S,me[Ue].lines[Ze],he),!Y&&!he.skipBadLines)return!1;S.selectLine(B)}}return!0}function qe(S,me,he){var be=[ge(me[0]),ge(me[1])],Ue=[0,0],Ze=[0,0],zn=be[0].length+be[1].length,K=Math.max(he[0][0]|0,he[0][1]|0,he[1][0]|0,he[1][1]|0),ye,Be=[0,0],We=[0,0],k,N;for(K+=600-K%600,ye=[[K,K],[K,K]];zn--;){if(We[0]=Be[0]+ye[0][Ze[0]]-he[0][Ue[0]]||0,We[1]=Be[1]+ye[1][Ze[1]]-he[1][Ue[1]]||0,k=We[0]<=We[1]?0:1,be[k][Ue[k]]||(k^=1),N=k?S.siblingGame:S,(!N.move(be[k][Ue[k]])||zn&&N.inCheckmate()&&N.undo(!0))&&(k^=1,N=k?S.siblingGame:S,!N.move(be[k][Ue[k]])))return!1;N._history()[Ue[k]].time=he[k][Ue[k]],ye[k][Ze[k]]=he[k][Ue[k]],Be[k]=We[k],Ze[k]^=1,++Ue[k]}return!0}function vn(S){var me,he=-1,be=0,Ue;function Ze(K,ye,Be){for(var We=K[ye],k;typeof(k=We.parentId)=="number";){if(k===Be)return We.atMoveNode;We=K[k]}return!1}function zn(K,ye){var Be={moveTime:K.moveTime,firstComment:K.firstComment,comment:K.comment,annotation:K.annotation,additionalAnnotation:K.additionalAnnotation,commands:K.commands};Object.keys(Be).forEach(function(We){K[We]=ye[We],ye[We]=Be[We]})}S.extended||(S.extended=!0,me={header:S.header,load:S.load,loadPgn:S.loadPgn,createVariation:S.createVariation,undo:S.undo,pgn:S.pgn},S._move=S.move,S.undo=function(){return S.siblingGame?S.deleteBughouseMove(S.curBughouseMove()):S.deletePosition(he,be)},S.getMove=function(K){return K&&(typeof K=="string"||K.to&&(K.from||K.drop))&&S._move(K)&&Er(me.undo())||null},S.premove=function(){var K,ye=[];return{queue:ye,move:function(Be){var We;return K=K||xe(S.fen(),S.header().Variant),We=er(K,Be),!We||be||he!==S._history().length-1?(ye.length||(K=void 0),null):(ye.push(We),We)},consume:function(){var Be=ye.shift(),We,k,N;if(Be){if(We=S.move(Be),We){if(K=void 0,k=ye.length,k)for(K=xe(S.fen(),S.header().Variant),N=0;N<k;++N)er(K,ye[N]);return We}S.premove.cancel()}},moves:function(Be){return!be&&he===S._history().length-1&&xt(K||S,S.header().Variant,Be)},getPieces:function(Be){return Or(K||S,Be)},fen:function(){return(K||S).fen()},cancel:function(){ye.length=0,K=void 0}}}(),S.getPieces=function(K){return Or(S,K)},S.material=function(){var K=S.getPieces(),ye={imbalance:0,white:{p:8,n:2,b:2,r:2,q:1,count:0},black:{p:8,n:2,b:2,r:2,q:1,count:0}},Be,We={p:1,n:3,b:3,r:5,q:9,k:0},k,N;for(Be=K.length-1;Be>=0;--Be)K[Be].color===1?(k=ye.white,N=ye.black):(k=ye.black,N=ye.white),N[K[Be].type]&&--N[K[Be].type],k.count+=We[K[Be].type];return ye.imbalance=ye.white.count-ye.black.count,ye},S.origHistory=S.history,S.history=function(K,ye){var Be=[],We,k=S._history(),N=k.length,B=S._lines(),Y,G;for(typeof K=="boolean"&&(K={verbose:K}),K=K||{},ye&&(K.noParentLines=ye),K.toCurrent&&(N=S.ids().move+1);;){if(--N===-1)if(k.id&&!K.noParentLines){N=k.atMoveNode,k=B[k.parentId];continue}else break;if(K.verbose){We={};for(Y in k[N])if(k[N][Y]&&typeof k[N][Y]=="object"){We[Y]=k[N][Y].constructor===Array?[]:{};for(G in k[N][Y])We[Y][G]=k[N][Y][G]}else We[Y]=k[N][Y];Be.unshift(We)}else Be.unshift(k[N].san)}return Be},S._getPos=function(K,ye){var Be,We,k;return typeof K!="number"&&(K=he),typeof ye!="number"&&(ye=be),We=S._lines(),Be=We[ye],K>=0?Be[K]:Be.id?Be.atMoveNode?We[Be.parentId][Be.atMoveNode-1]:S._getPos(Be.atMoveNode-1,Be.parentId):(k={fen:me.header().FEN||$e,hash:Be.hash,initial:!0,ids:{move:-1,line:0}},S.siblingGame&&(k.bughouseOrder=-1),k)},S.move=function(K,ye){var Be,We=S._history(),k,N,B;if(K&&(typeof K=="string"||K.to&&(K.from||K.drop))){if(be===We.id&&he<We.length-1||ye){if(S.moveForward(ye,K))return!0;he<We.length-1&&(S.selectPosition(he+1),S.createVariation(),We=S._history())}S.siblingGame&&(N=S.isDependent?S.siblingGame.fen():S.fen()),Be=S._move(K),Be&&(Er(Be),be=We.id,he=We.length-1,k=We[he],B=S._getPos(he-1),S.siblingGame?(k.fen=S.isDependent?S.siblingGame.fen():S.fen(),k.beforeFen=N,k.siblingIds=S.siblingGame.ids()):(k.fen=S.fen(),k.beforeFen=B.fen),B.initial?(k.moveNumber=0,k.previous=null):(k.moveNumber=B.moveNumber+1,k.previous=B.ids),be&&he===0&&S._lines()[We.parentId][We.atMoveNode].move===k.move&&(k.isContinuation=!0),k.flags=Be.flags,k.to=Be.to,k.from=Be.from,k.drop=Be.drop,k.capturedStr=Be.captured,k.promotion=Be.promotion,k.piece=Be.piece,Be.promoted&&(k.promoted=!0),Be.capturedPromotedPawn&&(k.capturedPromotedPawn=!0),k.ids={move:he,line:be})}return Be},S.moveDetails=function(K){return K=K||S._history()[he],K&&(K.lines=K.lines||null,K.flags===J.FLAGS.KSIDE_CASTLE?(K.rookFrom=S.header().Variant==="Chess960"?K.to:"h"+K.to[1],K.rookTo="f"+K.to[1],K.kingTo="g"+K.to[1]):K.flags===J.FLAGS.QSIDE_CASTLE?(K.rookFrom=S.header().Variant==="Chess960"?K.to:"a"+K.to[1],K.rookTo="d"+K.to[1],K.kingTo="c"+K.to[1]):K.flags===J.FLAGS.EP_CAPTURE&&(K.epCapture=K.to[0]+K.from[1])),K},S.header=S.headers=function(K){var ye=me.header(K);return S.siblingGame&&vn(S.siblingGame),ye},S.load=function(K,ye,Be,We){var k=me.load(K,ye,Be,We);return S.siblingGame&&vn(S.siblingGame),k&&!Be&&(he=-1,be=0),k},S.removeEmptyLines=function(){var K=S._lines(),ye,Be;for(ye=K.length-1;ye>0;--ye)K[ye].length||(K[ye]=void 0,Be=!0);Be&&S.reorderLines()},S.loadPgn=function(K,ye,Be){var We=me.loadPgn(K,ye,Be),k=S._history();return S.removeEmptyLines(),he=k.length-1,be=k.id,be&&S.selectLine(0),We},S.ids=function(){return{move:he,line:be}},S.selectLine=function(K){S.selectPosition(null,K)},S.curBughouseMove=function(){return Math.max(S._getPos().bughouseOrder,S.siblingGame._getPos().bughouseOrder)},S.deleteBughouseMove=function(K){var ye=S.curBughouseMove(),Be=!1,We=S,k,N,B;if(K>=0)for(ye>=K&&S.selectBughouseMove(K-1);;){for(k=We._history(),N=k.length,B=0;B<N;++B)if(k[B].bughouseOrder>=K){k.length=B,Be=!0;break}if(We===S.siblingGame)break;We=S.siblingGame}return Be},S.selectBughouseMove=function(K){var ye=S.isDependent?S.siblingGame:S,Be=ye,We,k;if(K===-1)return Be.selectPosition(-1,0,!0),Be.siblingGame.selectPosition(-1,0,!0),ye.load(ye.header().FEN,"Bughouse",!0,!0);for(;;){for(We=Be._history(),k=We.length-1;k>=0;--k)if(We[k].bughouseOrder===K)return Be.selectPosition(We[k].ids.move,0,!0),Be.siblingGame.selectPosition(We[k].siblingIds.move,0,!0),ye.load(We[k].fen,"Bughouse",!0,!0);if(Be===ye.siblingGame)return!1;Be=ye.siblingGame}},S.moveBackward=function(K){var ye;if(S.siblingGame)return S.selectBughouseMove(S.curBughouseMove()-1);if(he<=1)if(be===0){if(he===-1)return!1;S.selectPosition(he-1)}else ye=S._getPos(he-1,be),ye.isContinuation&&!K&&(ye=S._getPos(ye.ids.move-1,ye.ids.line),ye=S._getPos(ye.ids.move+1,ye.ids.line)),S.selectPosition(ye.ids.move,ye.ids.line);else S.selectPosition(he-1);return!0},S.moveForward=function(K,ye){var Be=S._lines(),We,k,N,B,Y,G;if(S.siblingGame)return S.selectBughouseMove(S.curBughouseMove()+1);if(We=Be[be][he+1],typeof ye=="string"&&(ye={san:ye}),!We||ye&&!ne(ye,We)){if(ye&&We&&We.lines){for(Y=We.lines.length,B=0;B<Y;++B)if(N=Be[We.lines[B]][0],N&&ne(ye,N)){We=N,G=!0;break}}if(!G&&K&&(k=Be[be][he],k&&k.lines)){for(Y=k.lines.length,B=0;B<Y;++B)if(N=Be[k.lines[B]][0],N&&N.isContinuation&&(N=Be[k.lines[B]][1],N&&(!ye||ne(ye,N)))){We=N,G=!0;break}}if(!G){try{if(ye&&ye.san&&(ye=S.fixMove(ye.san))||ye&&ye.to&&ye.from&&Math.abs(ye.to.charCodeAt(0)-ye.from.charCodeAt(0))>1&&(ye=S.fixMove(ye)))return S.moveForward(K,ye)}catch{}return!1}}return S.selectPosition(We.ids.move,We.ids.line)},S.moveVariation=function(K,ye){var Be=S._lines(),We=Be[K],k,N,B;if(We&&We.id){for(k=Be[We.parentId][We.atMoveNode].lines,N=k.length-1;N>=0;--N)if(k[N]===K&&(B=N-(ye?1:-1),k[B]))return k[N]=k[B],k[B]=K,S.reorderLines(),!0}return!1},S.promoteVariation=function(K,ye){for(var Be=S._lines(),We=Be[K],k,N,B,Y,G,ce;We&&We[0]&&We.id&&(ye!==-1||We.parentId);){for(B=We.parentId,k=Be[B],Y=We.atMoveNode,We[0].lines=k[Y].lines.concat(We[0].lines||[]),k[Y].lines=void 0,ce=k.length-Y,N=k.splice(Y,ce),G=0;G<ce;++G)N[G].ids.line=K,N[G].ids.move=G;for(N.id=K,N.parentId=B,N.atMoveNode=Y,N.hash=We.hash,Y===0?(N.initComment=k.initComment,k.initComment=We.initComment):We.initComment&&(k[Y-1].comment=((k[Y-1].comment||"")+" "+We.initComment).trim()),Be[K]=N,ce=We.length,G=0;G<ce;++G)We[G].ids.line=B,We[G].ids.move=G+Y,k.push(We[G]);for(N[0].isContinuation=!!We[0].isContinuation,k[Y].isContinuation=!Y&&typeof k.parentId=="number"&&Be[k.parentId][k.atMoveNode].move===k[0].move,ce=k[Y].lines.length,G=0;G<ce;++G)Be[k[Y].lines[G]].atMoveNode=Y,Be[k[Y].lines[G]][0]&&(Be[k[Y].lines[G]][0].isContinuation=Be[k[Y].lines[G]][0].move===k[Y].move);if(be===K?(be=B,he+=Y):be===B&&he>=Y&&(be=K,he-=Y),ye===1)break;K=B,We=Be[K]}return k!==void 0?(S._history(Be[be]),S.reorderLines(),!he&&Be[be][0].isContinuation&&S.selectPosition(Be[be].atMoveNode,Be[be].parentId),!0):!1},S.reorderLines=function(K,ye){var Be=S._lines(),We,k,N,B,Y,G,ce,oe,Mt,_t,Qe=!1;for(K?Mt=ye.length-1:(K=0,ye=[Be[0]],Mt=0,Ue=!1),We=Be[K],N=We.length,k=0;k<N;++k)if(B=We[k],B.ids.line!==Mt&&(Qe=!0,B.ids.line=Mt),B.lines)for(Y=B.lines.length,G=0;G<Y;++G)ce=B.lines[G],oe=Be[ce],oe?(oe.atMoveNode=k,_t=ye.length,B.lines[G]=_t,oe.parentId=Mt,!Ue&&ce===be&&(Ue=!0,be=_t),ye.push(oe),Qe=S.reorderLines(ce,ye)||Qe):(B.lines.length===1?delete B.lines:B.lines.splice(G,1),--G,--Y);return K||S.saveLines(ye,!0),Qe},S.createVariation=function(){var K=S._history(),ye=S._lines(),Be,We,k;return he===K.length-1?(Be=me.createVariation(),K=S._history(),he=K.length-1,be=K.id,Be):he===-1?!1:(We=[],k=K[he],We.parentId=K.id,We.id=ye.length,k.lines||(k.lines=[]),k.lines.push(We.id),We.hash=S._getPos(he-1).hash,We.atMoveNode=he,ye.push(We),S.selectPosition(-1,We.id))},S.selectLineEnd=function(K){return S.siblingGame?S.selectBughouseMove(S._history().length+S.siblingGame._history().length-1):(typeof K!="number"&&(K=be),K!==be||he<S._history().length-1?S.selectPosition(null,K,!0):!1)},S.selectLineStart=function(){var K,ye;return S.siblingGame?S.selectBughouseMove(-1):be?(he>1||he===1&&!S._getPos(0).isContinuation?K=S._history():(ye=S._getPos(-1),K=S._lines()[ye.ids.line]),S.selectPosition(K.id?K[1]&&K[0].isContinuation?1:0:-1,K.id)):he===-1?!1:S.selectPosition(-1,0)},S.selectPosition=function(K,ye,Be){var We=S._lines(),k=S._history();if(typeof ye=="number"&&(ye!==be||Be)){if(ye<0||ye>=We.length)return!1;if(k=We[ye],typeof K!="number")K=k.length-1;else if(K<-1||K>=k.length)return!1;be=ye,S._history(k),Be=!0}if(typeof K=="number"&&(K!==he||Be)){if(K<-1||K>=k.length)return!1;me.load(S._getPos(K).fen,me.header().Variant,!0,!0),he=K}return!0},S.resetToMainLine=function(){var K=S._lines();S.selectLineEnd(0),K.length>1&&(K.length=1,S.reorderLines())},S.updateNode=function(K,ye,Be){var We=S._lines(),k,N;Be=typeof Be=="number"?Be:be,ye=typeof ye=="number"?ye:he,k=We[Be][ye]||We[Be];for(N in K)k[N]=K[N]},S.updateLineComment=function(K,ye){S.updateNode({initComment:K},-1,ye)},S.saveLines=function(K,ye){var Be=S._lines(),We,k=K.length,N,B;for(K!==Be&&(Be.length=0),N=0;N<k;++N){if(We=K[N],N&&typeof We.parentId!="number")return!1;K!==Be&&Be.push(We),We.id=N}return S._history(S._history()),ye||(B=S.ids(),S.selectPosition(-1,0,!0),S.selectPosition(B.move,B.line)),!0},S.deletePosition=function(K,ye){var Be=S._lines(),We,k;return!Be[ye]||!Be[ye][K]&&(K!==-1||ye===0)?!1:(ye&&(K===0||K===1&&Be[ye][0].isContinuation)&&(K=-1),be>0&&ye!==be?(We=Ze(Be,be,ye),k=We!==!1&&We>=K):k=ye===be&&K<=he,k&&(K>1?S.selectPosition(K-1,ye):(S.selectPosition((Be[ye][0].isContinuation||K===1)&&Be[ye][1]?1:0,ye),S.moveBackward())),K>0?Be[ye].length=K:ye?Be[ye]=null:Be[0].length=0,S.reorderLines(),S.ids())},S.mark=function(K,ye){var Be=he<0?S._lines()[be]:S._lines()[be][he],We=K.type,k=1;K.color&&(We==="arrow"?S.mark({key:K.color+K.key,type:"cal"},ye):We==="square"&&S.mark({key:K.color+K.key,type:"csl"},ye)),We!=="cal"&&We!=="csl"&&(We="c_"+We,k=0),Be.commands&&Be.commands[We]&&(Be.commands[We]=Be.commands[We].split(",").filter(function(B){return B.slice(k).split(";")[0]!==K.key.slice(k)}).join(","),Be.commands[We]||delete Be.commands[We]),ye||(Be.commands||(Be.commands={}),Be.commands[We]=(Be.commands[We]?Be.commands[We]+",":"")+K.key+(K.data?";"+K.data.join(";"):""))},S.markings=function(){var K={},ye=he<0?S._lines()[be]:S._lines()[be][he],Be,We,k,N={cal:"arrow",csl:"square"},B,Y,G,ce,oe;for(We in ye.commands){if(k=ye.commands[We],N[We])We=N[We],B=0;else if(We.substr(0,2)==="c_")We=We.slice(2),B=1;else continue;for(K[We]=K[We]||{},Y=k.split(","),G=Y.length,Be=0;Be<G;++Be)B?(ce=Y[Be].split(";"),oe=ce.shift(),K[We][oe]=K[We][oe]||{type:We,key:oe},K[We][oe].data=ce):(oe=Y[Be].slice(1),K[We][oe]=K[We][oe]||{type:We,key:oe},K[We][oe].color=Y[Be][0])}return K},S.clearMarkings=function(){var K=he<0?S._lines()[be]:S._lines()[be][he],ye;for(ye in K.commands)/^c[sa]l$|^c_/.test(ye)&&delete K.commands[ye]},S.pgn=function(K){var ye=S.ids(),Be;return S.selectLineEnd(0),Be=me.pgn(K),S.selectPosition(ye.move,ye.line),Be},S.loadMoves=function(K,ye){var Be,We,k,N,B;if(ye=ye||{},typeof K=="string"&&(K=ge(K)),K){for(ye.atCurrent||S.selectPosition(-1,0),k=be,We=K.length,Be=0;Be<We;++Be){if(N=S.move(K[Be],!0),!N&&(K[Be].promotion=ye.autoPromote===!0?"q":ye.autoPromote,N=S.move(K[Be],!0),!N))return!1;be!==k&&ye.method!=="merge"&&(S.promoteVariation(be,1),ye.method!=="promote"&&(S._history()[he].lines=void 0,S.reorderLines()),k=be)}if(ye.method==="promote"){if(We){for(S._history()[he+1]&&(N=S._history()[he],S.createVariation(),S.move(N),zn(S._history()[0],N),S.promoteVariation(be,1)),B=S._lines(),Be=B.length-1;Be>=0;--Be)B[Be].length===1&&B[Be][0].isContinuation&&(zn(B[Be][0],B[B[Be].parentId][B[Be].atMoveNode]),B[Be].length=0);S.removeEmptyLines()}}else ye.method!=="merge"&&S.deletePosition(he+1,be)}return!0})}function An(S){var me,he;if(S=S||{},S.game)return S.game;if(me=xe(),S.analysis&&vn(me),S.disableHashing&&me.hashing(!1),S.pgn){if(!me.loadPgn(S.pgn,S.index,S.options)&&(S.variant!=="detect"||!xe.variants.some(function(be){return S.options=S.options||{},S.options.variant=be,me.loadPgn(S.pgn,S.index,S.options)})))return!1}else{if(S.headers&&(S.variant=S.headers.Variant||S.variant,S.fen||(S.fen=S.headers.FEN)),S.variant==="detect"&&S.fen&&(S.fen.indexOf("|")>-1?S.variant="Bughouse":S.fen.split("/").length===9?S.variant="Crazyhouse":S.fen.indexOf("+")>-1?S.variant="3-check":S.variant=void 0),(S.fen||S.variant)&&!me.load(S.fen||$e,S.variant))return!1;S.headers&&typeof S.headers=="object"&&!Array.isArray(S.headers)&&me.header(S.headers)}if(S.tcn)if(typeof S.tcn=="object"){if(!qe(me,S.tcn,S.timestamps||[[],[]]))return!1}else he=ge(S.tcn);else he=S.moves;return he&&!pt(me,he,S,S.timestamps)?!1:me}function Pr(S){var me;return S=S||{},S.disableHashing=!0,me=An(S),me?me.pgn(S):!1}function Sr(S,me){var he,be=[],Ue;if(J.reset(),!J.loadPgn(S))return!1;if(he=J.moveCount(),typeof me=="number"){for(me<0&&(me=he+me+1),Ue=he-1;Ue>=me&&Ue>=0;Ue-=1)J.undo();return J.fen()}for(Ue=0;Ue<=he;Ue+=1)be.unshift(J.fen()),J.undo();return be}function Er(S){return S&&(S.piece&w&&(S.promoted=!0),S.piece=gt[S.piece&fn],S.captured&&(S.captured&w&&(S.capturedPromotedPawn=!0),S.captured=gt[S.captured&mt]),S.promotion&&(S.promotion=gt[S.promotion&fn]),S.drop!==void 0&&(S.drop=Rn[S.drop])),S}function Yn(S){var me=S.history(!0,!0),he,be,Ue,Ze,zn,K,ye;if(S.siblingGame){for(he=S.siblingGame.history(!0,!0),Ue=me.length+he.length,be=[],Ze=0;Ze<Ue;++Ze)!me.length||he.length&&he[0].bughouseOrder<me[0].bughouseOrder?(zn=he.shift(),zn.board="b"):(zn=me.shift(),zn.board="a"),be.push(zn);me=be}for(Ue=me.length,Ze=0;Ze<Ue;++Ze)if(K=me[Ze],K.fen||Er(K),K.lines)for(ye=K.lines.length-1;ye>=0;--ye)S.selectLine(K.lines[ye]),K.lines[ye]=Yn(S).moves;return{moves:me}}function Hr(S,me,he){var be=[],Ue,Ze=J;return typeof me!="number"&&(he=me,me=void 0),Ue=Ze.tokenizePgn(S,he),me<0&&(me=Ue.length+me),Ue?(he&&he.includeFen&&(Ze=An({analysis:!0})),Ue.forEach(function(zn,K){var ye,Be;K===me||me===void 0?Ze.loadPgn([zn],0,he)?(Be=Yn(Ze),ye=Ze.header(),be.push({headers:ye,moves:Be.moves})):be.push(!1):be.push(void 0)}),typeof me=="number"?be[me]:be):!1}function Qr(S,me,he){return J.reset(),J.load(me,he)?Er(J.move(S)):!1}function Fr(S,me){return J.completeFen(S).split(" ").slice(0,me||4).join(" ")}function gn(S,me,he){return J.reset(),J.load(S,he),me&&!pt(J,me)?!1:J.fen()}function cn(S,me){var he,be,Ue,Ze;if(typeof S=="string"){if(be=J,be.reset(),!be.load(S,me))return null}else be=An(S);for(he=be.moves({verbose:!0}),Ze=he.length,Ue=0;Ue<Ze;++Ue)Er(he[Ue]);return he}function Kn(S,me,he){var be,Ue={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1},Ze;if(Array.isArray(me)||(he=me,me=null),typeof he=="boolean"?(be=he,he={}):(he=he||{},be=he.variant),typeof S=="string"){if(Ze=J,Ze.reset(),Ze.validateFen(S,be)!==0||!Ze.load(S,be))return!1}else Ze=An(S);return me&&!pt(Ze,me)?!1:(he.getLegalMoves&&(Ue.legalMoves=cn({game:Ze})),Ze.inCheck()?(Ue.check=!0,Ue.checkmate=Ze.inCheckmate()):Ue.stalemate=Ze.inStalemate(),Ue.threefold=Ze.inThreefoldRepetition(),Ue.insufficient=Ze.insufficientMaterial(he.color),Ue.fiftyMoveRule=Ze.in50MoveRule(),Ue.draw=Ue.stalemate||Ue.threefold||Ue.insufficient||Ue.fiftyMoveRule||Ze.inDraw(),he.skipValidation||(Ue.isValid=Ze.isPositionValid(he)),be&&(Ue.variantWin=Ze.isVariantWin(),Ue.variantWin===void 0&&(Ue.variantWin=Ze.isBughouseWin())),Ue.gameOver=Ue.checkmate||Ue.draw||!!Ue.variantWin,Ue)}function lt(S,me){return J.validateFen(S,me)===0}function nn(S,me){ee.loadBook(S,function(be,Ue){if(!Ue||!Ue.json)return me(be||new Error("Invalid book"));me(be,function(zn){var K,ye,Be,We,k,N,B,Y,G;if(zn.hash)typeof zn.hash=="string"?ye=[ee.hex64ToDec(zn.hash)]:ye=[zn.hash],We=1;else{if(K=An(zn),!K)return!1;ye=K.hashes(),We=ye.length}for(Be=0;Be<We;++Be)if(k=Ue.json[ee.to64BitHex(ye[Be])],k){if(k.constructor===Array)if(N&&k[0].m.indexOf(N.m)===-1){for(Y=k.length-1;Y>=0;--Y)if(!Y||k[Y].m.indexOf(N.m)!==-1){G=k[Y],G.e=k[0].e,G.s=k[0].s,G.mate=k[0].mate,G.v=k[0].v,G.h=k[0].h,G.n=G.n||k[0].n,G.u=G.u||k[0].u,G.c=G.c||k[0].c;break}}else G=k[0];else G=k;(G.n||zn.allowNameless)&&(N=G)}else zn.mustEndInBook&&(N=void 0);if(N)return B={name:N.n},N.m&&(B.moves=N.m),N.d!==void 0&&(B.sdiff=N.d/100),N.c&&(B.code=N.c,B.url=N.u||N.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/ig,"-").replace(/(with-\d|St)\.+-?/,"$1-")),N.e?(B.eval=N.e,B.depth=N.h,B.score=N.e[0].cp/100,N.e[0].mate!==void 0&&(B.mate=N.e[0].mate)):(B.score=N.s/100,N.mate!==void 0&&(B.mate=N.mate)),N.v&&(B.bad=!0),B},Ue.json)})}function rn(S,me){return Ke=Ke||L(rn),Ke(S,me)}return rn.supportsMultithreading=function(){var S,me=!!rn._hasThreads;if(typeof rn._hasThreads!="boolean"){try{S=new Worker("data:application/javascript,"),S.postMessage(new SharedArrayBuffer(1)),me=!0}catch{}try{S.terminate()}catch{}rn._hasThreads=me}return me},rn.gameFingerprints=ln,rn.getFenFromMoves=gn,rn.getLegalMoves=cn,rn.getPositionInfo=Kn,rn.isFenValid=lt,rn.encodeTCN=ht,rn.decodeTCN=ge,rn.uciToObj=et,rn.generatePgn=Pr,rn.pgnToFen=Sr,rn.pgnToJson=Hr,rn.sanToObj=Qr,rn.completeFen=J.completeFen,rn.shortenFen=Fr,rn.createGame=An,rn.getPositionDetails=nr,rn.predict=Vr,rn.normalizeMoveObj=Er,rn.FLAGS=J.FLAGS,rn.loadECO=nn,rn.CEE_LIB=function(){var S={};return S.addOptions=function(me,he){for(var be in he)he[be]!==void 0&&me.push("setoption name "+be+" value "+he[be]);return me},S.addVariations=function(me,he,be){var Ue,Ze;he=he||[],be=be||"variation";for(var zn=0;zn<he.length;++zn)Ue=he[zn],Ue.pv=Array.isArray(Ue.pv)&&Ue.pv.join(" ")||Ue.pv||"",Ze=be+" "+Ue.pv,typeof Ue.mateIn=="number"?Ze+=" mate "+Ue.mateIn:typeof Ue.mate=="number"?Ze+=" mate "+Ue.mate:Ze+=" cp "+Math.round(Ue.cp),typeof Ue.depth=="number"&&(Ze+=" depth "+Ue.depth),me.push(Ze);return me},S.addPush=function(me,he){var be;return typeof he=="string"&&(he={moveLan:he}),be="push "+he.moveLan,he.isBook&&(be+=" isBook"),he.isRetry&&(be+=" isRetry"),me.push(be),me},S.addPosition=function(me,he){return me.push("position fen "+he),me},S.addVariant=function(me,he){return String(he).toLowerCase().replace(/ |-/g,"")==="chess960"?(me.push("setoption name UCI_Variant value chess"),me.push("setoption name UCI_Chess960 value "+!0)):(me.push("setoption name UCI_Variant value chess"),me.push("setoption name UCI_Chess960 value "+!1)),me},S}(),rn}();return re.exports=Re,Re})()})(se);var H=se.exports,ae=function re(ee,xe){if(ee===xe)return!0;if(ee&&xe&&typeof ee=="object"&&typeof xe=="object"){if(ee.constructor!==xe.constructor)return!1;var L,Re,J;if(Array.isArray(ee)){if(L=ee.length,L!=xe.length)return!1;for(Re=L;Re--!==0;)if(!re(ee[Re],xe[Re]))return!1;return!0}if(ee.constructor===RegExp)return ee.source===xe.source&&ee.flags===xe.flags;if(ee.valueOf!==Object.prototype.valueOf)return ee.valueOf()===xe.valueOf();if(ee.toString!==Object.prototype.toString)return ee.toString()===xe.toString();if(J=Object.keys(ee),L=J.length,L!==Object.keys(xe).length)return!1;for(Re=L;Re--!==0;)if(!Object.prototype.hasOwnProperty.call(xe,J[Re]))return!1;for(Re=L;Re--!==0;){var Ke=J[Re];if(!re(ee[Ke],xe[Ke]))return!1}return!0}return ee!==ee&&xe!==xe};function Ye(){const re=[];return{emit:ee,listeners:re,off:xe,offAll:L,offMany:Re,on:J,onAll:Ke,onMany:$e,once:fn};function ee(mt,gt){let Rn;for(Rn of re)Rn.type!==mt&&Rn.type!=="all"||Rn.handler(gt)}function xe(mt){const gt=re.findIndex(Rn=>mt.type===Rn.type&&mt.handler===Rn.handler);gt!==-1&&re.splice(gt,1)}function L(mt){return xe({handler:mt,type:"all"})}function Re(mt=[]){mt.forEach(gt=>xe(gt))}function J(mt,gt){const Rn={handler:gt,type:mt};re.push(Rn)}function Ke(mt){J("all",mt)}function $e(mt=[],gt){mt.forEach(Rn=>J(Rn,gt))}function fn(mt,gt){const Rn={handler:(...w)=>{xe(Rn),gt(...w)},type:mt};re.push(Rn)}}var tt;(function(re){(function(ee){(function(xe){xe.NoTransition="NoTransition",xe.OnEnter="Enter",xe.OnExit="Exit",xe.OnReEnter="ReEnter"})(ee.Types||(ee.Types={}))})(re.Event||(re.Event={}))})(tt||(tt={}));function je({data:re,initialState:ee,states:xe},L=Ye()){let Re=ee;return Object.assign(Object.assign({},L),{getCurrentState:J,getData:Ke,transition:$e});function J(){return Re}function Ke(){return Object.assign({},re)}function $e(fn,mt){if(!xe[Re][fn])return L.emit(tt.Event.Types.NoTransition,{action:fn,data:re,state:Re}),!1;const gt=xe[Re][fn](mt),Rn=typeof gt=="string"?gt:gt.nextState,w=O=>({action:fn,currentState:Re,data:re,event:O,nextState:Rn,params:mt});return Re!==Rn&&L.emit(tt.Event.Types.OnExit,w(tt.Event.Types.OnExit)),gt.data&&Object.assign(re,gt.data),Re!==Rn&&L.emit(tt.Event.Types.OnEnter,w(tt.Event.Types.OnEnter)),Re===Rn?L.emit(tt.Event.Types.OnReEnter,w(tt.Event.Types.OnReEnter)):Re=Rn,!0}}const Fe=["mousedown","keydown","touchstart","touchend"];let Ee=!1;function ze(re){Ee||(Ee=!0,Fe.forEach(ee=>window.addEventListener(ee,re)))}function Me(re){Ee&&(Ee=!1,Fe.forEach(ee=>window.removeEventListener(ee,re)))}function Ae(re,ee){function xe(L){var Re;((Re=L?.data)===null||Re===void 0?void 0:Re.key)===re&&(ee(),window.removeEventListener("message",xe))}window.addEventListener("message",xe)}const x=window.chesscom||{},Je=window.AudioContext||window.webkitAudioContext;let Vt=!!Je;function Zn(){try{return new Je}catch{return null}}function Ht(){return Vt}function an(re){if(Je){if(x.audioContext||(x.audioContext=Zn()),!x.audioContext||!x.audioContext.resume){Vt=!1,re();return}x.audioContext.resume().then(()=>{Vt=!1,re()})}}var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof we.g<"u"?we.g:typeof self<"u"?self:{};function Ot(re){var ee={exports:{}};return re(ee,ee.exports),ee.exports}/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var kt=Ot(function(re,ee){(function(){var xe=function(){this.init()};xe.prototype={init:function(){var w=this||L;return w._counter=1e3,w._html5AudioPool=[],w.html5PoolSize=10,w._codecs={},w._howls=[],w._muted=!1,w._volume=1,w._canPlayEvent="canplaythrough",w._navigator=typeof window<"u"&&window.navigator?window.navigator:null,w.masterGain=null,w.noAudio=!1,w.usingWebAudio=!0,w.autoSuspend=!0,w.ctx=null,w.autoUnlock=!0,w._setup(),w},volume:function(w){var O=this||L;if(w=parseFloat(w),O.ctx||Rn(),typeof w<"u"&&w>=0&&w<=1){if(O._volume=w,O._muted)return O;O.usingWebAudio&&O.masterGain.gain.setValueAtTime(w,L.ctx.currentTime);for(var q=0;q<O._howls.length;q++)if(!O._howls[q]._webAudio)for(var ge=O._howls[q]._getSoundIds(),ht=0;ht<ge.length;ht++){var et=O._howls[q]._soundById(ge[ht]);et&&et._node&&(et._node.volume=et._volume*w)}return O}return O._volume},mute:function(w){var O=this||L;O.ctx||Rn(),O._muted=w,O.usingWebAudio&&O.masterGain.gain.setValueAtTime(w?0:O._volume,L.ctx.currentTime);for(var q=0;q<O._howls.length;q++)if(!O._howls[q]._webAudio)for(var ge=O._howls[q]._getSoundIds(),ht=0;ht<ge.length;ht++){var et=O._howls[q]._soundById(ge[ht]);et&&et._node&&(et._node.muted=w?!0:et._muted)}return O},stop:function(){for(var w=this||L,O=0;O<w._howls.length;O++)w._howls[O].stop();return w},unload:function(){for(var w=this||L,O=w._howls.length-1;O>=0;O--)w._howls[O].unload();return w.usingWebAudio&&w.ctx&&typeof w.ctx.close<"u"&&(w.ctx.close(),w.ctx=null,Rn()),w},codecs:function(w){return(this||L)._codecs[w.replace(/^x-/,"")]},_setup:function(){var w=this||L;if(w.state=w.ctx&&w.ctx.state||"suspended",w._autoSuspend(),!w.usingWebAudio)if(typeof Audio<"u")try{var O=new Audio;typeof O.oncanplaythrough>"u"&&(w._canPlayEvent="canplay")}catch{w.noAudio=!0}else w.noAudio=!0;try{var O=new Audio;O.muted&&(w.noAudio=!0)}catch{}return w.noAudio||w._setupCodecs(),w},_setupCodecs:function(){var w=this||L,O=null;try{O=typeof Audio<"u"?new Audio:null}catch{return w}if(!O||typeof O.canPlayType!="function")return w;var q=O.canPlayType("audio/mpeg;").replace(/^no$/,""),ge=w._navigator?w._navigator.userAgent:"",ht=ge.match(/OPR\/([0-6].)/g),et=ht&&parseInt(ht[0].split("/")[1],10)<33,ne=ge.indexOf("Safari")!==-1&&ge.indexOf("Chrome")===-1,xt=ge.match(/Version\/(.*?) /),er=ne&&xt&&parseInt(xt[1],10)<15;return w._codecs={mp3:!!(!et&&(q||O.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!q,opus:!!O.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!O.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!O.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(O.canPlayType('audio/wav; codecs="1"')||O.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!O.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!O.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(O.canPlayType("audio/x-m4a;")||O.canPlayType("audio/m4a;")||O.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(O.canPlayType("audio/x-m4b;")||O.canPlayType("audio/m4b;")||O.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(O.canPlayType("audio/x-mp4;")||O.canPlayType("audio/mp4;")||O.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!er&&O.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!er&&O.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!O.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(O.canPlayType("audio/x-flac;")||O.canPlayType("audio/flac;")).replace(/^no$/,"")},w},_unlockAudio:function(){var w=this||L;if(!(w._audioUnlocked||!w.ctx)){w._audioUnlocked=!1,w.autoUnlock=!1,!w._mobileUnloaded&&w.ctx.sampleRate!==44100&&(w._mobileUnloaded=!0,w.unload()),w._scratchBuffer=w.ctx.createBuffer(1,1,22050);var O=function(q){for(;w._html5AudioPool.length<w.html5PoolSize;)try{var ge=new Audio;ge._unlocked=!0,w._releaseHtml5Audio(ge)}catch{w.noAudio=!0;break}for(var ht=0;ht<w._howls.length;ht++)if(!w._howls[ht]._webAudio)for(var et=w._howls[ht]._getSoundIds(),ne=0;ne<et.length;ne++){var xt=w._howls[ht]._soundById(et[ne]);xt&&xt._node&&!xt._node._unlocked&&(xt._node._unlocked=!0,xt._node.load())}w._autoResume();var er=w.ctx.createBufferSource();er.buffer=w._scratchBuffer,er.connect(w.ctx.destination),typeof er.start>"u"?er.noteOn(0):er.start(0),typeof w.ctx.resume=="function"&&w.ctx.resume(),er.onended=function(){er.disconnect(0),w._audioUnlocked=!0,document.removeEventListener("touchstart",O,!0),document.removeEventListener("touchend",O,!0),document.removeEventListener("click",O,!0),document.removeEventListener("keydown",O,!0);for(var Or=0;Or<w._howls.length;Or++)w._howls[Or]._emit("unlock")}};return document.addEventListener("touchstart",O,!0),document.addEventListener("touchend",O,!0),document.addEventListener("click",O,!0),document.addEventListener("keydown",O,!0),w}},_obtainHtml5Audio:function(){var w=this||L;if(w._html5AudioPool.length)return w._html5AudioPool.pop();var O=new Audio().play();return O&&typeof Promise<"u"&&(O instanceof Promise||typeof O.then=="function")&&O.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(w){var O=this||L;return w._unlocked&&O._html5AudioPool.push(w),O},_autoSuspend:function(){var w=this;if(!(!w.autoSuspend||!w.ctx||typeof w.ctx.suspend>"u"||!L.usingWebAudio)){for(var O=0;O<w._howls.length;O++)if(w._howls[O]._webAudio){for(var q=0;q<w._howls[O]._sounds.length;q++)if(!w._howls[O]._sounds[q]._paused)return w}return w._suspendTimer&&clearTimeout(w._suspendTimer),w._suspendTimer=setTimeout(function(){if(w.autoSuspend){w._suspendTimer=null,w.state="suspending";var ge=function(){w.state="suspended",w._resumeAfterSuspend&&(delete w._resumeAfterSuspend,w._autoResume())};w.ctx.suspend().then(ge,ge)}},3e4),w}},_autoResume:function(){var w=this;if(!(!w.ctx||typeof w.ctx.resume>"u"||!L.usingWebAudio))return w.state==="running"&&w.ctx.state!=="interrupted"&&w._suspendTimer?(clearTimeout(w._suspendTimer),w._suspendTimer=null):w.state==="suspended"||w.state==="running"&&w.ctx.state==="interrupted"?(w.ctx.resume().then(function(){w.state="running";for(var O=0;O<w._howls.length;O++)w._howls[O]._emit("resume")}),w._suspendTimer&&(clearTimeout(w._suspendTimer),w._suspendTimer=null)):w.state==="suspending"&&(w._resumeAfterSuspend=!0),w}};var L=new xe,Re=function(w){var O=this;if(!w.src||w.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}O.init(w)};Re.prototype={init:function(w){var O=this;return L.ctx||Rn(),O._autoplay=w.autoplay||!1,O._format=typeof w.format!="string"?w.format:[w.format],O._html5=w.html5||!1,O._muted=w.mute||!1,O._loop=w.loop||!1,O._pool=w.pool||5,O._preload=typeof w.preload=="boolean"||w.preload==="metadata"?w.preload:!0,O._rate=w.rate||1,O._sprite=w.sprite||{},O._src=typeof w.src!="string"?w.src:[w.src],O._volume=w.volume!==void 0?w.volume:1,O._xhr={method:w.xhr&&w.xhr.method?w.xhr.method:"GET",headers:w.xhr&&w.xhr.headers?w.xhr.headers:null,withCredentials:w.xhr&&w.xhr.withCredentials?w.xhr.withCredentials:!1},O._duration=0,O._state="unloaded",O._sounds=[],O._endTimers={},O._queue=[],O._playLock=!1,O._onend=w.onend?[{fn:w.onend}]:[],O._onfade=w.onfade?[{fn:w.onfade}]:[],O._onload=w.onload?[{fn:w.onload}]:[],O._onloaderror=w.onloaderror?[{fn:w.onloaderror}]:[],O._onplayerror=w.onplayerror?[{fn:w.onplayerror}]:[],O._onpause=w.onpause?[{fn:w.onpause}]:[],O._onplay=w.onplay?[{fn:w.onplay}]:[],O._onstop=w.onstop?[{fn:w.onstop}]:[],O._onmute=w.onmute?[{fn:w.onmute}]:[],O._onvolume=w.onvolume?[{fn:w.onvolume}]:[],O._onrate=w.onrate?[{fn:w.onrate}]:[],O._onseek=w.onseek?[{fn:w.onseek}]:[],O._onunlock=w.onunlock?[{fn:w.onunlock}]:[],O._onresume=[],O._webAudio=L.usingWebAudio&&!O._html5,typeof L.ctx<"u"&&L.ctx&&L.autoUnlock&&L._unlockAudio(),L._howls.push(O),O._autoplay&&O._queue.push({event:"play",action:function(){O.play()}}),O._preload&&O._preload!=="none"&&O.load(),O},load:function(){var w=this,O=null;if(L.noAudio){w._emit("loaderror",null,"No audio support.");return}typeof w._src=="string"&&(w._src=[w._src]);for(var q=0;q<w._src.length;q++){var ge,ht;if(w._format&&w._format[q])ge=w._format[q];else{if(ht=w._src[q],typeof ht!="string"){w._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}ge=/^data:audio\/([^;,]+);/i.exec(ht),ge||(ge=/\.([^.]+)$/.exec(ht.split("?",1)[0])),ge&&(ge=ge[1].toLowerCase())}if(ge||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),ge&&L.codecs(ge)){O=w._src[q];break}}if(!O){w._emit("loaderror",null,"No codec support for selected audio sources.");return}return w._src=O,w._state="loading",window.location.protocol==="https:"&&O.slice(0,5)==="http:"&&(w._html5=!0,w._webAudio=!1),new J(w),w._webAudio&&$e(w),w},play:function(w,O){var q=this,ge=null;if(typeof w=="number")ge=w,w=null;else{if(typeof w=="string"&&q._state==="loaded"&&!q._sprite[w])return null;if(typeof w>"u"&&(w="__default",!q._playLock)){for(var ht=0,et=0;et<q._sounds.length;et++)q._sounds[et]._paused&&!q._sounds[et]._ended&&(ht++,ge=q._sounds[et]._id);ht===1?w=null:ge=null}}var ne=ge?q._soundById(ge):q._inactiveSound();if(!ne)return null;if(ge&&!w&&(w=ne._sprite||"__default"),q._state!=="loaded"){ne._sprite=w,ne._ended=!1;var xt=ne._id;return q._queue.push({event:"play",action:function(){q.play(xt)}}),xt}if(ge&&!ne._paused)return O||q._loadQueue("play"),ne._id;q._webAudio&&L._autoResume();var er=Math.max(0,ne._seek>0?ne._seek:q._sprite[w][0]/1e3),Or=Math.max(0,(q._sprite[w][0]+q._sprite[w][1])/1e3-er),Vr=Or*1e3/Math.abs(ne._rate),nr=q._sprite[w][0]/1e3,ln=(q._sprite[w][0]+q._sprite[w][1])/1e3;ne._sprite=w,ne._ended=!1;var pt=function(){ne._paused=!1,ne._seek=er,ne._start=nr,ne._stop=ln,ne._loop=!!(ne._loop||q._sprite[w][2])};if(er>=ln){q._ended(ne);return}var qe=ne._node;if(q._webAudio){var vn=function(){q._playLock=!1,pt(),q._refreshBuffer(ne);var Er=ne._muted||q._muted?0:ne._volume;qe.gain.setValueAtTime(Er,L.ctx.currentTime),ne._playStart=L.ctx.currentTime,typeof qe.bufferSource.start>"u"?ne._loop?qe.bufferSource.noteGrainOn(0,er,86400):qe.bufferSource.noteGrainOn(0,er,Or):ne._loop?qe.bufferSource.start(0,er,86400):qe.bufferSource.start(0,er,Or),Vr!==1/0&&(q._endTimers[ne._id]=setTimeout(q._ended.bind(q,ne),Vr)),O||setTimeout(function(){q._emit("play",ne._id),q._loadQueue()},0)};L.state==="running"&&L.ctx.state!=="interrupted"?vn():(q._playLock=!0,q.once("resume",vn),q._clearTimer(ne._id))}else{var An=function(){qe.currentTime=er,qe.muted=ne._muted||q._muted||L._muted||qe.muted,qe.volume=ne._volume*L.volume(),qe.playbackRate=ne._rate;try{var Er=qe.play();if(Er&&typeof Promise<"u"&&(Er instanceof Promise||typeof Er.then=="function")?(q._playLock=!0,pt(),Er.then(function(){q._playLock=!1,qe._unlocked=!0,O?q._loadQueue():q._emit("play",ne._id)}).catch(function(){q._playLock=!1,q._emit("playerror",ne._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),ne._ended=!0,ne._paused=!0})):O||(q._playLock=!1,pt(),q._emit("play",ne._id)),qe.playbackRate=ne._rate,qe.paused){q._emit("playerror",ne._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}w!=="__default"||ne._loop?q._endTimers[ne._id]=setTimeout(q._ended.bind(q,ne),Vr):(q._endTimers[ne._id]=function(){q._ended(ne),qe.removeEventListener("ended",q._endTimers[ne._id],!1)},qe.addEventListener("ended",q._endTimers[ne._id],!1))}catch(Yn){q._emit("playerror",ne._id,Yn)}};qe.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(qe.src=q._src,qe.load());var Pr=window&&window.ejecta||!qe.readyState&&L._navigator.isCocoonJS;if(qe.readyState>=3||Pr)An();else{q._playLock=!0,q._state="loading";var Sr=function(){q._state="loaded",An(),qe.removeEventListener(L._canPlayEvent,Sr,!1)};qe.addEventListener(L._canPlayEvent,Sr,!1),q._clearTimer(ne._id)}}return ne._id},pause:function(w){var O=this;if(O._state!=="loaded"||O._playLock)return O._queue.push({event:"pause",action:function(){O.pause(w)}}),O;for(var q=O._getSoundIds(w),ge=0;ge<q.length;ge++){O._clearTimer(q[ge]);var ht=O._soundById(q[ge]);if(ht&&!ht._paused&&(ht._seek=O.seek(q[ge]),ht._rateSeek=0,ht._paused=!0,O._stopFade(q[ge]),ht._node))if(O._webAudio){if(!ht._node.bufferSource)continue;typeof ht._node.bufferSource.stop>"u"?ht._node.bufferSource.noteOff(0):ht._node.bufferSource.stop(0),O._cleanBuffer(ht._node)}else(!isNaN(ht._node.duration)||ht._node.duration===1/0)&&ht._node.pause();arguments[1]||O._emit("pause",ht?ht._id:null)}return O},stop:function(w,O){var q=this;if(q._state!=="loaded"||q._playLock)return q._queue.push({event:"stop",action:function(){q.stop(w)}}),q;for(var ge=q._getSoundIds(w),ht=0;ht<ge.length;ht++){q._clearTimer(ge[ht]);var et=q._soundById(ge[ht]);et&&(et._seek=et._start||0,et._rateSeek=0,et._paused=!0,et._ended=!0,q._stopFade(ge[ht]),et._node&&(q._webAudio?et._node.bufferSource&&(typeof et._node.bufferSource.stop>"u"?et._node.bufferSource.noteOff(0):et._node.bufferSource.stop(0),q._cleanBuffer(et._node)):(!isNaN(et._node.duration)||et._node.duration===1/0)&&(et._node.currentTime=et._start||0,et._node.pause(),et._node.duration===1/0&&q._clearSound(et._node))),O||q._emit("stop",et._id))}return q},mute:function(w,O){var q=this;if(q._state!=="loaded"||q._playLock)return q._queue.push({event:"mute",action:function(){q.mute(w,O)}}),q;if(typeof O>"u")if(typeof w=="boolean")q._muted=w;else return q._muted;for(var ge=q._getSoundIds(O),ht=0;ht<ge.length;ht++){var et=q._soundById(ge[ht]);et&&(et._muted=w,et._interval&&q._stopFade(et._id),q._webAudio&&et._node?et._node.gain.setValueAtTime(w?0:et._volume,L.ctx.currentTime):et._node&&(et._node.muted=L._muted?!0:w),q._emit("mute",et._id))}return q},volume:function(){var w=this,O=arguments,q,ge;if(O.length===0)return w._volume;if(O.length===1||O.length===2&&typeof O[1]>"u"){var ht=w._getSoundIds(),et=ht.indexOf(O[0]);et>=0?ge=parseInt(O[0],10):q=parseFloat(O[0])}else O.length>=2&&(q=parseFloat(O[0]),ge=parseInt(O[1],10));var ne;if(typeof q<"u"&&q>=0&&q<=1){if(w._state!=="loaded"||w._playLock)return w._queue.push({event:"volume",action:function(){w.volume.apply(w,O)}}),w;typeof ge>"u"&&(w._volume=q),ge=w._getSoundIds(ge);for(var xt=0;xt<ge.length;xt++)ne=w._soundById(ge[xt]),ne&&(ne._volume=q,O[2]||w._stopFade(ge[xt]),w._webAudio&&ne._node&&!ne._muted?ne._node.gain.setValueAtTime(q,L.ctx.currentTime):ne._node&&!ne._muted&&(ne._node.volume=q*L.volume()),w._emit("volume",ne._id))}else return ne=ge?w._soundById(ge):w._sounds[0],ne?ne._volume:0;return w},fade:function(w,O,q,ge){var ht=this;if(ht._state!=="loaded"||ht._playLock)return ht._queue.push({event:"fade",action:function(){ht.fade(w,O,q,ge)}}),ht;w=Math.min(Math.max(0,parseFloat(w)),1),O=Math.min(Math.max(0,parseFloat(O)),1),q=parseFloat(q),ht.volume(w,ge);for(var et=ht._getSoundIds(ge),ne=0;ne<et.length;ne++){var xt=ht._soundById(et[ne]);if(xt){if(ge||ht._stopFade(et[ne]),ht._webAudio&&!xt._muted){var er=L.ctx.currentTime,Or=er+q/1e3;xt._volume=w,xt._node.gain.setValueAtTime(w,er),xt._node.gain.linearRampToValueAtTime(O,Or)}ht._startFadeInterval(xt,w,O,q,et[ne],typeof ge>"u")}}return ht},_startFadeInterval:function(w,O,q,ge,ht,et){var ne=this,xt=O,er=q-O,Or=Math.abs(er/.01),Vr=Math.max(4,Or>0?ge/Or:ge),nr=Date.now();w._fadeTo=q,w._interval=setInterval(function(){var ln=(Date.now()-nr)/ge;nr=Date.now(),xt+=er*ln,xt=Math.round(xt*100)/100,er<0?xt=Math.max(q,xt):xt=Math.min(q,xt),ne._webAudio?w._volume=xt:ne.volume(xt,w._id,!0),et&&(ne._volume=xt),(q<O&&xt<=q||q>O&&xt>=q)&&(clearInterval(w._interval),w._interval=null,w._fadeTo=null,ne.volume(q,w._id),ne._emit("fade",w._id))},Vr)},_stopFade:function(w){var O=this,q=O._soundById(w);return q&&q._interval&&(O._webAudio&&q._node.gain.cancelScheduledValues(L.ctx.currentTime),clearInterval(q._interval),q._interval=null,O.volume(q._fadeTo,w),q._fadeTo=null,O._emit("fade",w)),O},loop:function(){var w=this,O=arguments,q,ge,ht;if(O.length===0)return w._loop;if(O.length===1)if(typeof O[0]=="boolean")q=O[0],w._loop=q;else return ht=w._soundById(parseInt(O[0],10)),ht?ht._loop:!1;else O.length===2&&(q=O[0],ge=parseInt(O[1],10));for(var et=w._getSoundIds(ge),ne=0;ne<et.length;ne++)ht=w._soundById(et[ne]),ht&&(ht._loop=q,w._webAudio&&ht._node&&ht._node.bufferSource&&(ht._node.bufferSource.loop=q,q&&(ht._node.bufferSource.loopStart=ht._start||0,ht._node.bufferSource.loopEnd=ht._stop,w.playing(et[ne])&&(w.pause(et[ne],!0),w.play(et[ne],!0)))));return w},rate:function(){var w=this,O=arguments,q,ge;if(O.length===0)ge=w._sounds[0]._id;else if(O.length===1){var ht=w._getSoundIds(),et=ht.indexOf(O[0]);et>=0?ge=parseInt(O[0],10):q=parseFloat(O[0])}else O.length===2&&(q=parseFloat(O[0]),ge=parseInt(O[1],10));var ne;if(typeof q=="number"){if(w._state!=="loaded"||w._playLock)return w._queue.push({event:"rate",action:function(){w.rate.apply(w,O)}}),w;typeof ge>"u"&&(w._rate=q),ge=w._getSoundIds(ge);for(var xt=0;xt<ge.length;xt++)if(ne=w._soundById(ge[xt]),ne){w.playing(ge[xt])&&(ne._rateSeek=w.seek(ge[xt]),ne._playStart=w._webAudio?L.ctx.currentTime:ne._playStart),ne._rate=q,w._webAudio&&ne._node&&ne._node.bufferSource?ne._node.bufferSource.playbackRate.setValueAtTime(q,L.ctx.currentTime):ne._node&&(ne._node.playbackRate=q);var er=w.seek(ge[xt]),Or=(w._sprite[ne._sprite][0]+w._sprite[ne._sprite][1])/1e3-er,Vr=Or*1e3/Math.abs(ne._rate);(w._endTimers[ge[xt]]||!ne._paused)&&(w._clearTimer(ge[xt]),w._endTimers[ge[xt]]=setTimeout(w._ended.bind(w,ne),Vr)),w._emit("rate",ne._id)}}else return ne=w._soundById(ge),ne?ne._rate:w._rate;return w},seek:function(){var w=this,O=arguments,q,ge;if(O.length===0)w._sounds.length&&(ge=w._sounds[0]._id);else if(O.length===1){var ht=w._getSoundIds(),et=ht.indexOf(O[0]);et>=0?ge=parseInt(O[0],10):w._sounds.length&&(ge=w._sounds[0]._id,q=parseFloat(O[0]))}else O.length===2&&(q=parseFloat(O[0]),ge=parseInt(O[1],10));if(typeof ge>"u")return 0;if(typeof q=="number"&&(w._state!=="loaded"||w._playLock))return w._queue.push({event:"seek",action:function(){w.seek.apply(w,O)}}),w;var ne=w._soundById(ge);if(ne)if(typeof q=="number"&&q>=0){var xt=w.playing(ge);xt&&w.pause(ge,!0),ne._seek=q,ne._ended=!1,w._clearTimer(ge),!w._webAudio&&ne._node&&!isNaN(ne._node.duration)&&(ne._node.currentTime=q);var er=function(){xt&&w.play(ge,!0),w._emit("seek",ge)};if(xt&&!w._webAudio){var Or=function(){w._playLock?setTimeout(Or,0):er()};setTimeout(Or,0)}else er()}else if(w._webAudio){var Vr=w.playing(ge)?L.ctx.currentTime-ne._playStart:0,nr=ne._rateSeek?ne._rateSeek-ne._seek:0;return ne._seek+(nr+Vr*Math.abs(ne._rate))}else return ne._node.currentTime;return w},playing:function(w){var O=this;if(typeof w=="number"){var q=O._soundById(w);return q?!q._paused:!1}for(var ge=0;ge<O._sounds.length;ge++)if(!O._sounds[ge]._paused)return!0;return!1},duration:function(w){var O=this,q=O._duration,ge=O._soundById(w);return ge&&(q=O._sprite[ge._sprite][1]/1e3),q},state:function(){return this._state},unload:function(){for(var w=this,O=w._sounds,q=0;q<O.length;q++)O[q]._paused||w.stop(O[q]._id),w._webAudio||(w._clearSound(O[q]._node),O[q]._node.removeEventListener("error",O[q]._errorFn,!1),O[q]._node.removeEventListener(L._canPlayEvent,O[q]._loadFn,!1),O[q]._node.removeEventListener("ended",O[q]._endFn,!1),L._releaseHtml5Audio(O[q]._node)),delete O[q]._node,w._clearTimer(O[q]._id);var ge=L._howls.indexOf(w);ge>=0&&L._howls.splice(ge,1);var ht=!0;for(q=0;q<L._howls.length;q++)if(L._howls[q]._src===w._src||w._src.indexOf(L._howls[q]._src)>=0){ht=!1;break}return Ke&&ht&&delete Ke[w._src],L.noAudio=!1,w._state="unloaded",w._sounds=[],w=null,null},on:function(w,O,q,ge){var ht=this,et=ht["_on"+w];return typeof O=="function"&&et.push(ge?{id:q,fn:O,once:ge}:{id:q,fn:O}),ht},off:function(w,O,q){var ge=this,ht=ge["_on"+w],et=0;if(typeof O=="number"&&(q=O,O=null),O||q)for(et=0;et<ht.length;et++){var ne=q===ht[et].id;if(O===ht[et].fn&&ne||!O&&ne){ht.splice(et,1);break}}else if(w)ge["_on"+w]=[];else{var xt=Object.keys(ge);for(et=0;et<xt.length;et++)xt[et].indexOf("_on")===0&&Array.isArray(ge[xt[et]])&&(ge[xt[et]]=[])}return ge},once:function(w,O,q){var ge=this;return ge.on(w,O,q,1),ge},_emit:function(w,O,q){for(var ge=this,ht=ge["_on"+w],et=ht.length-1;et>=0;et--)(!ht[et].id||ht[et].id===O||w==="load")&&(setTimeout(function(ne){ne.call(this,O,q)}.bind(ge,ht[et].fn),0),ht[et].once&&ge.off(w,ht[et].fn,ht[et].id));return ge._loadQueue(w),ge},_loadQueue:function(w){var O=this;if(O._queue.length>0){var q=O._queue[0];q.event===w&&(O._queue.shift(),O._loadQueue()),w||q.action()}return O},_ended:function(w){var O=this,q=w._sprite;if(!O._webAudio&&w._node&&!w._node.paused&&!w._node.ended&&w._node.currentTime<w._stop)return setTimeout(O._ended.bind(O,w),100),O;var ge=!!(w._loop||O._sprite[q][2]);if(O._emit("end",w._id),!O._webAudio&&ge&&O.stop(w._id,!0).play(w._id),O._webAudio&&ge){O._emit("play",w._id),w._seek=w._start||0,w._rateSeek=0,w._playStart=L.ctx.currentTime;var ht=(w._stop-w._start)*1e3/Math.abs(w._rate);O._endTimers[w._id]=setTimeout(O._ended.bind(O,w),ht)}return O._webAudio&&!ge&&(w._paused=!0,w._ended=!0,w._seek=w._start||0,w._rateSeek=0,O._clearTimer(w._id),O._cleanBuffer(w._node),L._autoSuspend()),!O._webAudio&&!ge&&O.stop(w._id,!0),O},_clearTimer:function(w){var O=this;if(O._endTimers[w]){if(typeof O._endTimers[w]!="function")clearTimeout(O._endTimers[w]);else{var q=O._soundById(w);q&&q._node&&q._node.removeEventListener("ended",O._endTimers[w],!1)}delete O._endTimers[w]}return O},_soundById:function(w){for(var O=this,q=0;q<O._sounds.length;q++)if(w===O._sounds[q]._id)return O._sounds[q];return null},_inactiveSound:function(){var w=this;w._drain();for(var O=0;O<w._sounds.length;O++)if(w._sounds[O]._ended)return w._sounds[O].reset();return new J(w)},_drain:function(){var w=this,O=w._pool,q=0,ge=0;if(!(w._sounds.length<O)){for(ge=0;ge<w._sounds.length;ge++)w._sounds[ge]._ended&&q++;for(ge=w._sounds.length-1;ge>=0;ge--){if(q<=O)return;w._sounds[ge]._ended&&(w._webAudio&&w._sounds[ge]._node&&w._sounds[ge]._node.disconnect(0),w._sounds.splice(ge,1),q--)}}},_getSoundIds:function(w){var O=this;if(typeof w>"u"){for(var q=[],ge=0;ge<O._sounds.length;ge++)q.push(O._sounds[ge]._id);return q}else return[w]},_refreshBuffer:function(w){var O=this;return w._node.bufferSource=L.ctx.createBufferSource(),w._node.bufferSource.buffer=Ke[O._src],w._panner?w._node.bufferSource.connect(w._panner):w._node.bufferSource.connect(w._node),w._node.bufferSource.loop=w._loop,w._loop&&(w._node.bufferSource.loopStart=w._start||0,w._node.bufferSource.loopEnd=w._stop||0),w._node.bufferSource.playbackRate.setValueAtTime(w._rate,L.ctx.currentTime),O},_cleanBuffer:function(w){var O=this,q=L._navigator&&L._navigator.vendor.indexOf("Apple")>=0;if(L._scratchBuffer&&w.bufferSource&&(w.bufferSource.onended=null,w.bufferSource.disconnect(0),q))try{w.bufferSource.buffer=L._scratchBuffer}catch{}return w.bufferSource=null,O},_clearSound:function(w){var O=/MSIE |Trident\//.test(L._navigator&&L._navigator.userAgent);O||(w.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var J=function(w){this._parent=w,this.init()};J.prototype={init:function(){var w=this,O=w._parent;return w._muted=O._muted,w._loop=O._loop,w._volume=O._volume,w._rate=O._rate,w._seek=0,w._paused=!0,w._ended=!0,w._sprite="__default",w._id=++L._counter,O._sounds.push(w),w.create(),w},create:function(){var w=this,O=w._parent,q=L._muted||w._muted||w._parent._muted?0:w._volume;return O._webAudio?(w._node=typeof L.ctx.createGain>"u"?L.ctx.createGainNode():L.ctx.createGain(),w._node.gain.setValueAtTime(q,L.ctx.currentTime),w._node.paused=!0,w._node.connect(L.masterGain)):L.noAudio||(w._node=L._obtainHtml5Audio(),w._errorFn=w._errorListener.bind(w),w._node.addEventListener("error",w._errorFn,!1),w._loadFn=w._loadListener.bind(w),w._node.addEventListener(L._canPlayEvent,w._loadFn,!1),w._endFn=w._endListener.bind(w),w._node.addEventListener("ended",w._endFn,!1),w._node.src=O._src,w._node.preload=O._preload===!0?"auto":O._preload,w._node.volume=q*L.volume(),w._node.load()),w},reset:function(){var w=this,O=w._parent;return w._muted=O._muted,w._loop=O._loop,w._volume=O._volume,w._rate=O._rate,w._seek=0,w._rateSeek=0,w._paused=!0,w._ended=!0,w._sprite="__default",w._id=++L._counter,w},_errorListener:function(){var w=this;w._parent._emit("loaderror",w._id,w._node.error?w._node.error.code:0),w._node.removeEventListener("error",w._errorFn,!1)},_loadListener:function(){var w=this,O=w._parent;O._duration=Math.ceil(w._node.duration*10)/10,Object.keys(O._sprite).length===0&&(O._sprite={__default:[0,O._duration*1e3]}),O._state!=="loaded"&&(O._state="loaded",O._emit("load"),O._loadQueue()),w._node.removeEventListener(L._canPlayEvent,w._loadFn,!1)},_endListener:function(){var w=this,O=w._parent;O._duration===1/0&&(O._duration=Math.ceil(w._node.duration*10)/10,O._sprite.__default[1]===1/0&&(O._sprite.__default[1]=O._duration*1e3),O._ended(w)),w._node.removeEventListener("ended",w._endFn,!1)}};var Ke={},$e=function(w){var O=w._src;if(Ke[O]){w._duration=Ke[O].duration,gt(w);return}if(/^data:[^;]+;base64,/.test(O)){for(var q=atob(O.split(",")[1]),ge=new Uint8Array(q.length),ht=0;ht<q.length;++ht)ge[ht]=q.charCodeAt(ht);mt(ge.buffer,w)}else{var et=new XMLHttpRequest;et.open(w._xhr.method,O,!0),et.withCredentials=w._xhr.withCredentials,et.responseType="arraybuffer",w._xhr.headers&&Object.keys(w._xhr.headers).forEach(function(ne){et.setRequestHeader(ne,w._xhr.headers[ne])}),et.onload=function(){var ne=(et.status+"")[0];if(ne!=="0"&&ne!=="2"&&ne!=="3"){w._emit("loaderror",null,"Failed loading audio file with status: "+et.status+".");return}mt(et.response,w)},et.onerror=function(){w._webAudio&&(w._html5=!0,w._webAudio=!1,w._sounds=[],delete Ke[O],w.load())},fn(et)}},fn=function(w){try{w.send()}catch{w.onerror()}},mt=function(w,O){var q=function(){O._emit("loaderror",null,"Decoding audio data failed.")},ge=function(ht){ht&&O._sounds.length>0?(Ke[O._src]=ht,gt(O,ht)):q()};typeof Promise<"u"&&L.ctx.decodeAudioData.length===1?L.ctx.decodeAudioData(w).then(ge).catch(q):L.ctx.decodeAudioData(w,ge,q)},gt=function(w,O){O&&!w._duration&&(w._duration=O.duration),Object.keys(w._sprite).length===0&&(w._sprite={__default:[0,w._duration*1e3]}),w._state!=="loaded"&&(w._state="loaded",w._emit("load"),w._loadQueue())},Rn=function(){if(L.usingWebAudio){try{typeof AudioContext<"u"?L.ctx=new AudioContext:typeof webkitAudioContext<"u"?L.ctx=new webkitAudioContext:L.usingWebAudio=!1}catch{L.usingWebAudio=!1}L.ctx||(L.usingWebAudio=!1);var w=/iP(hone|od|ad)/.test(L._navigator&&L._navigator.platform),O=L._navigator&&L._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),q=O?parseInt(O[1],10):null;if(w&&q&&q<9){var ge=/safari/.test(L._navigator&&L._navigator.userAgent.toLowerCase());L._navigator&&!ge&&(L.usingWebAudio=!1)}L.usingWebAudio&&(L.masterGain=typeof L.ctx.createGain>"u"?L.ctx.createGainNode():L.ctx.createGain(),L.masterGain.gain.setValueAtTime(L._muted?0:L._volume,L.ctx.currentTime),L.masterGain.connect(L.ctx.destination)),L._setup()}};ee.Howler=L,ee.Howl=Re,typeof ie<"u"?(ie.HowlerGlobal=xe,ie.Howler=L,ie.Howl=Re,ie.Sound=J):typeof window<"u"&&(window.HowlerGlobal=xe,window.Howler=L,window.Howl=Re,window.Sound=J)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(L){var Re=this;if(!Re.ctx||!Re.ctx.listener)return Re;for(var J=Re._howls.length-1;J>=0;J--)Re._howls[J].stereo(L);return Re},HowlerGlobal.prototype.pos=function(L,Re,J){var Ke=this;if(!Ke.ctx||!Ke.ctx.listener)return Ke;if(Re=typeof Re!="number"?Ke._pos[1]:Re,J=typeof J!="number"?Ke._pos[2]:J,typeof L=="number")Ke._pos=[L,Re,J],typeof Ke.ctx.listener.positionX<"u"?(Ke.ctx.listener.positionX.setTargetAtTime(Ke._pos[0],Howler.ctx.currentTime,.1),Ke.ctx.listener.positionY.setTargetAtTime(Ke._pos[1],Howler.ctx.currentTime,.1),Ke.ctx.listener.positionZ.setTargetAtTime(Ke._pos[2],Howler.ctx.currentTime,.1)):Ke.ctx.listener.setPosition(Ke._pos[0],Ke._pos[1],Ke._pos[2]);else return Ke._pos;return Ke},HowlerGlobal.prototype.orientation=function(L,Re,J,Ke,$e,fn){var mt=this;if(!mt.ctx||!mt.ctx.listener)return mt;var gt=mt._orientation;if(Re=typeof Re!="number"?gt[1]:Re,J=typeof J!="number"?gt[2]:J,Ke=typeof Ke!="number"?gt[3]:Ke,$e=typeof $e!="number"?gt[4]:$e,fn=typeof fn!="number"?gt[5]:fn,typeof L=="number")mt._orientation=[L,Re,J,Ke,$e,fn],typeof mt.ctx.listener.forwardX<"u"?(mt.ctx.listener.forwardX.setTargetAtTime(L,Howler.ctx.currentTime,.1),mt.ctx.listener.forwardY.setTargetAtTime(Re,Howler.ctx.currentTime,.1),mt.ctx.listener.forwardZ.setTargetAtTime(J,Howler.ctx.currentTime,.1),mt.ctx.listener.upX.setTargetAtTime(Ke,Howler.ctx.currentTime,.1),mt.ctx.listener.upY.setTargetAtTime($e,Howler.ctx.currentTime,.1),mt.ctx.listener.upZ.setTargetAtTime(fn,Howler.ctx.currentTime,.1)):mt.ctx.listener.setOrientation(L,Re,J,Ke,$e,fn);else return gt;return mt},Howl.prototype.init=function(L){return function(Re){var J=this;return J._orientation=Re.orientation||[1,0,0],J._stereo=Re.stereo||null,J._pos=Re.pos||null,J._pannerAttr={coneInnerAngle:typeof Re.coneInnerAngle<"u"?Re.coneInnerAngle:360,coneOuterAngle:typeof Re.coneOuterAngle<"u"?Re.coneOuterAngle:360,coneOuterGain:typeof Re.coneOuterGain<"u"?Re.coneOuterGain:0,distanceModel:typeof Re.distanceModel<"u"?Re.distanceModel:"inverse",maxDistance:typeof Re.maxDistance<"u"?Re.maxDistance:1e4,panningModel:typeof Re.panningModel<"u"?Re.panningModel:"HRTF",refDistance:typeof Re.refDistance<"u"?Re.refDistance:1,rolloffFactor:typeof Re.rolloffFactor<"u"?Re.rolloffFactor:1},J._onstereo=Re.onstereo?[{fn:Re.onstereo}]:[],J._onpos=Re.onpos?[{fn:Re.onpos}]:[],J._onorientation=Re.onorientation?[{fn:Re.onorientation}]:[],L.call(this,Re)}}(Howl.prototype.init),Howl.prototype.stereo=function(L,Re){var J=this;if(!J._webAudio)return J;if(J._state!=="loaded")return J._queue.push({event:"stereo",action:function(){J.stereo(L,Re)}}),J;var Ke=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof Re>"u")if(typeof L=="number")J._stereo=L,J._pos=[L,0,0];else return J._stereo;for(var $e=J._getSoundIds(Re),fn=0;fn<$e.length;fn++){var mt=J._soundById($e[fn]);if(mt)if(typeof L=="number")mt._stereo=L,mt._pos=[L,0,0],mt._node&&(mt._pannerAttr.panningModel="equalpower",(!mt._panner||!mt._panner.pan)&&xe(mt,Ke),Ke==="spatial"?typeof mt._panner.positionX<"u"?(mt._panner.positionX.setValueAtTime(L,Howler.ctx.currentTime),mt._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),mt._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):mt._panner.setPosition(L,0,0):mt._panner.pan.setValueAtTime(L,Howler.ctx.currentTime)),J._emit("stereo",mt._id);else return mt._stereo}return J},Howl.prototype.pos=function(L,Re,J,Ke){var $e=this;if(!$e._webAudio)return $e;if($e._state!=="loaded")return $e._queue.push({event:"pos",action:function(){$e.pos(L,Re,J,Ke)}}),$e;if(Re=typeof Re!="number"?0:Re,J=typeof J!="number"?-.5:J,typeof Ke>"u")if(typeof L=="number")$e._pos=[L,Re,J];else return $e._pos;for(var fn=$e._getSoundIds(Ke),mt=0;mt<fn.length;mt++){var gt=$e._soundById(fn[mt]);if(gt)if(typeof L=="number")gt._pos=[L,Re,J],gt._node&&((!gt._panner||gt._panner.pan)&&xe(gt,"spatial"),typeof gt._panner.positionX<"u"?(gt._panner.positionX.setValueAtTime(L,Howler.ctx.currentTime),gt._panner.positionY.setValueAtTime(Re,Howler.ctx.currentTime),gt._panner.positionZ.setValueAtTime(J,Howler.ctx.currentTime)):gt._panner.setPosition(L,Re,J)),$e._emit("pos",gt._id);else return gt._pos}return $e},Howl.prototype.orientation=function(L,Re,J,Ke){var $e=this;if(!$e._webAudio)return $e;if($e._state!=="loaded")return $e._queue.push({event:"orientation",action:function(){$e.orientation(L,Re,J,Ke)}}),$e;if(Re=typeof Re!="number"?$e._orientation[1]:Re,J=typeof J!="number"?$e._orientation[2]:J,typeof Ke>"u")if(typeof L=="number")$e._orientation=[L,Re,J];else return $e._orientation;for(var fn=$e._getSoundIds(Ke),mt=0;mt<fn.length;mt++){var gt=$e._soundById(fn[mt]);if(gt)if(typeof L=="number")gt._orientation=[L,Re,J],gt._node&&(gt._panner||(gt._pos||(gt._pos=$e._pos||[0,0,-.5]),xe(gt,"spatial")),typeof gt._panner.orientationX<"u"?(gt._panner.orientationX.setValueAtTime(L,Howler.ctx.currentTime),gt._panner.orientationY.setValueAtTime(Re,Howler.ctx.currentTime),gt._panner.orientationZ.setValueAtTime(J,Howler.ctx.currentTime)):gt._panner.setOrientation(L,Re,J)),$e._emit("orientation",gt._id);else return gt._orientation}return $e},Howl.prototype.pannerAttr=function(){var L=this,Re=arguments,J,Ke,$e;if(!L._webAudio)return L;if(Re.length===0)return L._pannerAttr;if(Re.length===1)if(typeof Re[0]=="object")J=Re[0],typeof Ke>"u"&&(J.pannerAttr||(J.pannerAttr={coneInnerAngle:J.coneInnerAngle,coneOuterAngle:J.coneOuterAngle,coneOuterGain:J.coneOuterGain,distanceModel:J.distanceModel,maxDistance:J.maxDistance,refDistance:J.refDistance,rolloffFactor:J.rolloffFactor,panningModel:J.panningModel}),L._pannerAttr={coneInnerAngle:typeof J.pannerAttr.coneInnerAngle<"u"?J.pannerAttr.coneInnerAngle:L._coneInnerAngle,coneOuterAngle:typeof J.pannerAttr.coneOuterAngle<"u"?J.pannerAttr.coneOuterAngle:L._coneOuterAngle,coneOuterGain:typeof J.pannerAttr.coneOuterGain<"u"?J.pannerAttr.coneOuterGain:L._coneOuterGain,distanceModel:typeof J.pannerAttr.distanceModel<"u"?J.pannerAttr.distanceModel:L._distanceModel,maxDistance:typeof J.pannerAttr.maxDistance<"u"?J.pannerAttr.maxDistance:L._maxDistance,refDistance:typeof J.pannerAttr.refDistance<"u"?J.pannerAttr.refDistance:L._refDistance,rolloffFactor:typeof J.pannerAttr.rolloffFactor<"u"?J.pannerAttr.rolloffFactor:L._rolloffFactor,panningModel:typeof J.pannerAttr.panningModel<"u"?J.pannerAttr.panningModel:L._panningModel});else return $e=L._soundById(parseInt(Re[0],10)),$e?$e._pannerAttr:L._pannerAttr;else Re.length===2&&(J=Re[0],Ke=parseInt(Re[1],10));for(var fn=L._getSoundIds(Ke),mt=0;mt<fn.length;mt++)if($e=L._soundById(fn[mt]),$e){var gt=$e._pannerAttr;gt={coneInnerAngle:typeof J.coneInnerAngle<"u"?J.coneInnerAngle:gt.coneInnerAngle,coneOuterAngle:typeof J.coneOuterAngle<"u"?J.coneOuterAngle:gt.coneOuterAngle,coneOuterGain:typeof J.coneOuterGain<"u"?J.coneOuterGain:gt.coneOuterGain,distanceModel:typeof J.distanceModel<"u"?J.distanceModel:gt.distanceModel,maxDistance:typeof J.maxDistance<"u"?J.maxDistance:gt.maxDistance,refDistance:typeof J.refDistance<"u"?J.refDistance:gt.refDistance,rolloffFactor:typeof J.rolloffFactor<"u"?J.rolloffFactor:gt.rolloffFactor,panningModel:typeof J.panningModel<"u"?J.panningModel:gt.panningModel};var Rn=$e._panner;Rn?(Rn.coneInnerAngle=gt.coneInnerAngle,Rn.coneOuterAngle=gt.coneOuterAngle,Rn.coneOuterGain=gt.coneOuterGain,Rn.distanceModel=gt.distanceModel,Rn.maxDistance=gt.maxDistance,Rn.refDistance=gt.refDistance,Rn.rolloffFactor=gt.rolloffFactor,Rn.panningModel=gt.panningModel):($e._pos||($e._pos=L._pos||[0,0,-.5]),xe($e,"spatial"))}return L},Sound.prototype.init=function(L){return function(){var Re=this,J=Re._parent;Re._orientation=J._orientation,Re._stereo=J._stereo,Re._pos=J._pos,Re._pannerAttr=J._pannerAttr,L.call(this),Re._stereo?J.stereo(Re._stereo):Re._pos&&J.pos(Re._pos[0],Re._pos[1],Re._pos[2],Re._id)}}(Sound.prototype.init),Sound.prototype.reset=function(L){return function(){var Re=this,J=Re._parent;return Re._orientation=J._orientation,Re._stereo=J._stereo,Re._pos=J._pos,Re._pannerAttr=J._pannerAttr,Re._stereo?J.stereo(Re._stereo):Re._pos?J.pos(Re._pos[0],Re._pos[1],Re._pos[2],Re._id):Re._panner&&(Re._panner.disconnect(0),Re._panner=void 0,J._refreshBuffer(Re)),L.call(this)}}(Sound.prototype.reset);var xe=function(L,Re){Re=Re||"spatial",Re==="spatial"?(L._panner=Howler.ctx.createPanner(),L._panner.coneInnerAngle=L._pannerAttr.coneInnerAngle,L._panner.coneOuterAngle=L._pannerAttr.coneOuterAngle,L._panner.coneOuterGain=L._pannerAttr.coneOuterGain,L._panner.distanceModel=L._pannerAttr.distanceModel,L._panner.maxDistance=L._pannerAttr.maxDistance,L._panner.refDistance=L._pannerAttr.refDistance,L._panner.rolloffFactor=L._pannerAttr.rolloffFactor,L._panner.panningModel=L._pannerAttr.panningModel,typeof L._panner.positionX<"u"?(L._panner.positionX.setValueAtTime(L._pos[0],Howler.ctx.currentTime),L._panner.positionY.setValueAtTime(L._pos[1],Howler.ctx.currentTime),L._panner.positionZ.setValueAtTime(L._pos[2],Howler.ctx.currentTime)):L._panner.setPosition(L._pos[0],L._pos[1],L._pos[2]),typeof L._panner.orientationX<"u"?(L._panner.orientationX.setValueAtTime(L._orientation[0],Howler.ctx.currentTime),L._panner.orientationY.setValueAtTime(L._orientation[1],Howler.ctx.currentTime),L._panner.orientationZ.setValueAtTime(L._orientation[2],Howler.ctx.currentTime)):L._panner.setOrientation(L._orientation[0],L._orientation[1],L._orientation[2])):(L._panner=Howler.ctx.createStereoPanner(),L._panner.pan.setValueAtTime(L._stereo,Howler.ctx.currentTime)),L._panner.connect(L._node),L._paused||L._parent.pause(L._id,!0).play(L._id,!0)}})()});class gr{constructor(ee,xe=!1){this.howler=null,this.useAudioElement=!1,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.assets=ee.filter(Re=>Re.endsWith("mp3")).concat(ee.filter(Re=>!Re.endsWith("mp3"))):this.assets=ee,this.useAudioElement=xe}load(){this.unload(),this.howler||(this.howler=new kt.Howl({html5:this.useAudioElement,src:this.assets,onloaderror:()=>{console.warn("Howler: sounds failed to load, falling back to html5 audio"),this.howler=new kt.Howl({html5:!0,src:this.assets,onloaderror:()=>{console.error("Howler: html5 audio fallback failed to load")}})}}))}unload(){var ee;(ee=this.howler)===null||ee===void 0||ee.unload()}play(){var ee;this.howler||this.load(),(ee=this.howler)===null||ee===void 0||ee.play(),window.Cypress&&(window.Cypress.howlerHistory||(window.Cypress.howlerHistory=[]),window.Cypress.howlerHistory.push({time:Date.now(),src:this.assets.slice(0)}))}}var Ar;(function(re){re.Suspended="web-ui-sound-suspended",re.Enabled="web-ui-sound-enabled"})(Ar||(Ar={}));const fi=3;let at=0,Jt=!1;function Et(re){Ae(Ar.Enabled,re)}function ot(){Ht()&&an(()=>{window.postMessage({key:Ar.Enabled},window.location.origin),Me(ot)})}function ft(re,ee=!1){const xe=new gr(re,ee);return Ht()?(ze(ot),Et(()=>xe.load())):xe.load(),xe}function Ve(re){Ht()?!Jt&&at>fi?(at=0,Jt=!0,window.postMessage({key:Ar.Suspended},window.location.origin)):Jt||(at++,ot(),Et(()=>re.play())):re.play()}class Tn{constructor(ee="keyval-store",xe="keyval"){this.storeName=xe,this._dbp=new Promise((L,Re)=>{const J=indexedDB.open(ee,1);J.onerror=()=>Re(J.error),J.onsuccess=()=>L(J.result),J.onupgradeneeded=()=>{J.result.createObjectStore(xe)}})}_withIDBStore(ee,xe){return this._dbp.then(L=>new Promise((Re,J)=>{const Ke=L.transaction(this.storeName,ee);Ke.oncomplete=()=>Re(),Ke.onabort=Ke.onerror=()=>J(Ke.error),xe(Ke.objectStore(this.storeName))}))}}let Wt;function Mn(){return Wt||(Wt=new Tn),Wt}function pr(re,ee=Mn()){let xe;return ee._withIDBStore("readonly",L=>{xe=L.get(re)}).then(()=>xe.result)}function qr(re,ee,xe=Mn()){return xe._withIDBStore("readwrite",L=>{L.put(ee,re)})}function Cn(){}function jn(re){return re()}function Ft(){return Object.create(null)}function At(re){re.forEach(jn)}function qt(re){return typeof re=="function"}function Xn(re,ee){return re!=re?ee==ee:re!==ee||re&&typeof re=="object"||typeof re=="function"}function Sn(re){return Object.keys(re).length===0}function pe(re,...ee){if(re==null)return Cn;const xe=re.subscribe(...ee);return xe.unsubscribe?()=>xe.unsubscribe():xe}function C(re,ee,xe){re.$$.on_destroy.push(pe(ee,xe))}function fe(re){return re??""}function Z(re,ee){re.appendChild(ee)}function Xe(re,ee,xe){re.insertBefore(ee,xe||null)}function De(re){re.parentNode.removeChild(re)}function ke(re,ee){for(let xe=0;xe<re.length;xe+=1)re[xe]&&re[xe].d(ee)}function $n(re){return document.createElement(re)}function j(re){return document.createTextNode(re)}function Se(){return j(" ")}function Le(){return j("")}function Ge(re,ee,xe,L){return re.addEventListener(ee,xe,L),()=>re.removeEventListener(ee,xe,L)}function ue(re,ee,xe){xe==null?re.removeAttribute(ee):re.getAttribute(ee)!==xe&&re.setAttribute(ee,xe)}function st(re){return Array.from(re.childNodes)}function Bt(re,ee){ee=""+ee,re.wholeText!==ee&&(re.data=ee)}function Qn(re,ee,xe){re.classList[xe?"add":"remove"](ee)}function qn(re,ee,xe=!1){const L=document.createEvent("CustomEvent");return L.initCustomEvent(re,xe,!1,ee),L}class ai{constructor(){this.e=this.n=null}c(ee){this.h(ee)}m(ee,xe,L=null){this.e||(this.e=$n(xe.nodeName),this.t=xe,this.c(ee)),this.i(L)}h(ee){this.e.innerHTML=ee,this.n=Array.from(this.e.childNodes)}i(ee){for(let xe=0;xe<this.n.length;xe+=1)Xe(this.t,this.n[xe],ee)}p(ee){this.d(),this.h(ee),this.i(this.a)}d(){this.n.forEach(De)}}let It;function Qi(re){It=re}function $r(){if(!It)throw new Error("Function called outside component initialization");return It}function lo(re){$r().$$.on_mount.push(re)}function ss(re){$r().$$.on_destroy.push(re)}function si(){const re=$r();return(ee,xe)=>{const L=re.$$.callbacks[ee];if(L){const Re=qn(ee,xe);L.slice().forEach(J=>{J.call(re,Re)})}}}const en=[],on=[],Kr=[],wr=[],Ji=Promise.resolve();let Rr=!1;function vi(){Rr||(Rr=!0,Ji.then(ls))}function Ua(re){Kr.push(re)}let da=!1;const zs=new Set;function ls(){if(!da){da=!0;do{for(let re=0;re<en.length;re+=1){const ee=en[re];Qi(ee),us(ee.$$)}for(Qi(null),en.length=0;on.length;)on.pop()();for(let re=0;re<Kr.length;re+=1){const ee=Kr[re];zs.has(ee)||(zs.add(ee),ee())}Kr.length=0}while(en.length);for(;wr.length;)wr.pop()();Rr=!1,da=!1,zs.clear()}}function us(re){if(re.fragment!==null){re.update(),At(re.before_update);const ee=re.dirty;re.dirty=[-1],re.fragment&&re.fragment.p(re.ctx,ee),re.after_update.forEach(Ua)}}const cs=new Set;let vo;function fa(){vo={r:0,c:[],p:vo}}function Bu(){vo.r||At(vo.c),vo=vo.p}function ds(re,ee){re&&re.i&&(cs.delete(re),re.i(ee))}function Dl(re,ee,xe,L){if(re&&re.o){if(cs.has(re))return;cs.add(re),vo.c.push(()=>{cs.delete(re),L&&(xe&&re.d(1),L())}),re.o(ee)}}function Du(re){re&&re.c()}function Fl(re,ee,xe,L){const{fragment:Re,on_mount:J,on_destroy:Ke,after_update:$e}=re.$$;Re&&Re.m(ee,xe),L||Ua(()=>{const fn=J.map(jn).filter(qt);Ke?Ke.push(...fn):At(fn),re.$$.on_mount=[]}),$e.forEach(Ua)}function zl(re,ee){const xe=re.$$;xe.fragment!==null&&(At(xe.on_destroy),xe.fragment&&xe.fragment.d(ee),xe.on_destroy=xe.fragment=null,xe.ctx=[])}function zo(re,ee){re.$$.dirty[0]===-1&&(en.push(re),vi(),re.$$.dirty.fill(0)),re.$$.dirty[ee/31|0]|=1<<ee%31}function hn(re,ee,xe,L,Re,J,Ke,$e=[-1]){const fn=It;Qi(re);const mt=re.$$={fragment:null,ctx:null,props:J,update:Cn,not_equal:Re,bound:Ft(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(fn?fn.$$.context:ee.context||[]),callbacks:Ft(),dirty:$e,skip_bound:!1,root:ee.target||fn.$$.root};Ke&&Ke(mt.root);let gt=!1;if(mt.ctx=xe?xe(re,ee.props||{},(Rn,w,...O)=>{const q=O.length?O[0]:w;return mt.ctx&&Re(mt.ctx[Rn],mt.ctx[Rn]=q)&&(!mt.skip_bound&&mt.bound[Rn]&&mt.bound[Rn](q),gt&&zo(re,Rn)),w}):[],mt.update(),gt=!0,At(mt.before_update),mt.fragment=L?L(mt.ctx):!1,ee.target){if(ee.hydrate){const Rn=st(ee.target);mt.fragment&&mt.fragment.l(Rn),Rn.forEach(De)}else mt.fragment&&mt.fragment.c();ee.intro&&ds(re.$$.fragment),Fl(re,ee.target,ee.anchor,ee.customElement),ls()}Qi(fn)}class Wn{$destroy(){zl(this,1),this.$destroy=Cn}$on(ee,xe){const L=this.$$.callbacks[ee]||(this.$$.callbacks[ee]=[]);return L.push(xe),()=>{const Re=L.indexOf(xe);Re!==-1&&L.splice(Re,1)}}$set(ee){this.$$set&&!Sn(ee)&&(this.$$.skip_bound=!0,this.$$set(ee),this.$$.skip_bound=!1)}}function yt(re){return Object.keys(re).reduce((ee,xe)=>Object.assign(Object.assign({},ee),{[re[xe]]:xe}),{})}function Oe(re,ee){return ee.reduce((xe,L)=>(Object.prototype.hasOwnProperty.call(re,L)&&(xe[L]=re[L]),xe),{})}const Rt=[];function tn(re,ee=Cn){let xe;const L=new Set;function Re($e){if(Xn(re,$e)&&(re=$e,xe)){const fn=!Rt.length;for(const mt of L)mt[1](),Rt.push(mt,re);if(fn){for(let mt=0;mt<Rt.length;mt+=2)Rt[mt][0](Rt[mt+1]);Rt.length=0}}}function J($e){Re($e(re))}function Ke($e,fn=Cn){const mt=[$e,fn];return L.add(mt),L.size===1&&(xe=ee(Re)||Cn),$e(re),()=>{L.delete(mt),L.size===0&&(xe(),xe=null)}}return{set:Re,update:J,subscribe:Ke}}var dn;(function(re){(function(ee){ee.Hidden="hidden",ee.Invisible="invisible"})(re.Classes||(re.Classes={}))})(dn||(dn={}));function Nt(re,ee="."){return`${ee}${re}`}var Gt;(function(re){(function(ee){ee[ee.Backspace=8]="Backspace",ee[ee.Delete=46]="Delete",ee[ee.DownArrow=40]="DownArrow",ee[ee.Enter=13]="Enter",ee[ee.Escape=27]="Escape",ee[ee.LeftArrow=37]="LeftArrow",ee[ee.RightArrow=39]="RightArrow",ee[ee.Spacebar=32]="Spacebar",ee[ee.Stop=137]="Stop",ee[ee.Tab=9]="Tab",ee[ee.UpArrow=38]="UpArrow"})(re.KeyCodes||(re.KeyCodes={}))})(Gt||(Gt={}));function On(re){return`${re[0].toUpperCase()}${re.slice(1)}`}},3527:function(ct,Xt,we){var P=we(4155);/*!
 * Chess.com (c) 2020 | all rights reserved
 *//*!
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */var se=function(){"use strict";var H=function(){var je=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],Fe=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],Ee=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],ze=[4174784170,2938602761],Me={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},Ae=[];Ae[5]=1,Ae[6]=0,Ae[9]=3,Ae[10]=2,Ae[17]=5,Ae[18]=4,Ae[33]=7,Ae[34]=6,Ae[65]=9,Ae[66]=8,Ae[129]=11,Ae[130]=10;var x=[2,5,10,20,40,80,160,64],Je="nbrq",Vt=["","0000000","000000","00000","0000","000","00","0",""],Zn=16;function Ht(at){var Jt=at.toString(16);return Vt[Jt.length]+Jt}function an(at){return Ht(at[0])+Ht(at[1])}function ie(at){return[parseInt(at.substr(0,8),16),parseInt(at.substr(8),16)]}function Ot(at,Jt){var Et,ot,ft=at.split(" "),Ve=ft[0].split("/"),Tn,Wt,Mn,pr,qr,Cn,jn,Ft,At=ft[1]==="w",qt=0,Xn,Sn,pe=Number(At),C=pe?3:4;for(Tn=7;Tn>=0;Tn-=1)for(Wt=0,Mn=Ve[Tn],qr=Mn.length,pr=0;pr<qr;pr+=1)Cn=Mn[pr],Xn=Me[Cn],Xn>=0&&(jn=je[64*Xn+8*(7-Tn)+Wt],Et=(Et^jn[0])>>>0,ot=(ot^jn[1])>>>0,Xn===pe&&Tn===C&&(qt|=1<<Wt)),Wt+=Number(Cn)||1;return ft[2]!=="-"&&(Ft=ft[2],Ft.indexOf("K")>-1&&(jn=Fe[0],Et=(Et^jn[0])>>>0,ot=(ot^jn[1])>>>0),Ft.indexOf("Q")>-1&&(jn=Fe[2],Et=(Et^jn[0])>>>0,ot=(ot^jn[1])>>>0),Ft.indexOf("k")>-1&&(jn=Fe[1],Et=(Et^jn[0])>>>0,ot=(ot^jn[1])>>>0),Ft.indexOf("q")>-1&&(jn=Fe[3],Et=(Et^jn[0])>>>0,ot=(ot^jn[1])>>>0)),ft[3]&&ft[3]!=="-"&&(Sn=ft[3].charCodeAt(0)-97,x[Sn]&qt&&(jn=Ee[Sn],Et=(Et^jn[0])>>>0,ot=(ot^jn[1])>>>0)),At&&(Et=(Et^ze[0])>>>0,ot=(ot^ze[1])>>>0),Jt&&Jt==="hex"?an([Et,ot]):[Et,ot]}function kt(at,Jt){var Et=new XMLHttpRequest,ot=at.toLowerCase().indexOf(".json")>-1;function ft(){var Ve;if(Et.status>=200&&Et.status<300||Et.status===304||Et.status===0||Et.status===1223)if(ot)try{Jt(null,JSON.parse(Et.response))}catch(Tn){Jt(Tn)}else Ve=new DataView(Et.response),Jt(null,Ve);else Jt(new Error("Error code: "+Et.status))}Et.open("GET",at,!0),ot||(Et.responseType="arraybuffer"),Et.onload=ft,Et.onerror=ft,Et.send()}function gr(at){var Jt,Et={},ot,ft,Ve;function Tn(Ft,At){var qt=ot.getUint16(Ft+8),Xn=ot.getUint16(Ft+10),Sn,pe,C,fe,Z,Xe;return pe=qt>>9&7,C=qt>>6&7,fe=qt>>3&7,Z=qt&7,Xe=qt>>12&7,C===4&&At&&pe===fe&&At!=="-"&&(Z===7&&(pe===0&&At.indexOf("K")>-1||pe===7&&At.indexOf("k")>-1)?Z-=1:Z===0&&(pe===0&&At.indexOf("Q")>-1||pe===7&&At.indexOf("q")>-1)&&(Z+=2)),Sn=String.fromCharCode(C+97)+(pe+1)+String.fromCharCode(Z+97)+(fe+1),Xe&&(Sn+=Je[Xe-1]),{move:Sn,weight:Xn}}function Wt(Ft){Ft.sort(function(qt,Xn){return Xn.weight-qt.weight})}function Mn(Ft){return typeof Ft=="string"&&(Ft={fen:Ft}),Jt(Ft)}function pr(Ft){var At,qt,Xn,Sn,pe,C=0;if(Ft=Ft||{},At=Ft.moves||Mn(Ft),Wt(At),Xn=At.length,Xn){if(!Ft.type||Xn===1||Ft.type==="best")return At[0].move;if(Ft.type==="random"){for(Sn=Math.floor(Math.random()*At.sum)+1,pe=0;pe<Xn-1&&(C+=At[pe].weight,!(Sn<=C));pe+=1);return At[pe].move}else return Ft.type==="randomDisregardWeight"?At[Math.floor(Math.random()*Xn)].move:Ft.type==="worst"?At[Xn-1].move:(qt=parseInt(Ft.type)||1,qt<0&&(qt=Xn+qt+1),qt<1?qt=1:qt>Xn&&(qt=Xn),At[qt-1].move)}}function qr(Ft){var At=ot.length||ot.byteLength||0,qt=Ft.offset||0,Xn,Sn=Ft.fen,pe=Ft.chess960,C=Ft.checkAll,fe,Z=[],Xe=0,De,ke,$n;for(Ft.hash?(Xn=Ft.hash,typeof Xn=="string"&&(Xn=ie(Xn))):Xn=Ot(Sn),!pe&&Sn&&($n=Sn.split(" ")[2]),qt=0;qt<At;qt+=Zn)if(ot.getUint32(qt)===Xn[0]&&ot.getUint32(qt+4)===Xn[1])De=Tn(qt,$n),Z[Z.length]=De,Xe+=De.weight,fe=!0;else if(fe&&!C)break;if(Z.sum=Xe,Ft.relative)for(ke=Z.length-1;ke>=0;ke-=1)Z[ke].relative=Math.round(Z[ke].weight/Xe*1e4);return Z}function Cn(Ft){var At=[],qt,Xn=Ft.b.length;for(qt=0;qt<Xn;++qt)At.push({move:Ft.b[qt],weight:Ft.w[qt]});return At}function jn(Ft){var At,qt,Xn=0,Sn,pe,C,fe=Ft.fen,Z;if(Et.useFen)Sn=fe.replace(/ \d+ \d+$/,""),At=ft[Sn],At||(pe=Sn.replace(/[a-h][1-8]$/,"-"),pe!==Sn&&(At=ft[pe]));else if(Ft.hash||(Ft.hash=Ot(fe,"hex")),At=ft[Ft.hash],At){if(At[0]&&At[0].n&&(At=At[0]),At.n&&!At.b)return[];if(At.b)At=Cn(At);else if(!Ft.chess960&&fe)for(Z=fe.split(" ")[2],qt=At.length-1;qt>=0;qt-=1)C=At[qt].move.match(/e([18])([ah])\1/),C&&(C[2]==="h"&&(C[1]==="1"&&Z.indexOf("K")>-1||C[1]==="8"&&Z.indexOf("k")>-1)?At[qt]={move:"e"+C[1]+"g"+C[1],weight:At[qt].weight}:C[2]==="a"&&(C[1]==="1"&&Z.indexOf("Q")>-1||C[1]==="8"&&Z.indexOf("q")>-1)&&(At[qt]={move:"e"+C[1]+"c"+C[1],weight:At[qt].weight}))}if(At)for(qt=At.length-1;qt>=0;qt-=1)Xn+=Number(At[qt].weight);else At=[];return At.sum=Xn,At}if(Et={query:Mn,pick:pr},at.getUint32)Jt=qr,ot=at,Et.buffer=ot;else{Jt=jn,ft=at,Et.json=ft;for(Ve in ft){Et.useFen=Ve.indexOf(" ")>-1;break}}return Et}function Ar(at,Jt){function Et(ot,ft){var Ve;if(ft&&(Ve=gr(ft)),Jt)return Jt(ot,Ve);if(ot)throw ot;return Ve}kt(at,Et)}var fi=function(){var at={};return function(Et,ot){if(at[Et]){at[Et].book?setTimeout(function(){ot(null,at[Et].book)},0):at[Et].cbs.push(ot);return}at[Et]={cbs:[ot]},Ar(Et,function(Ve,Tn){var Wt=at[Et].cbs;Ve?delete at[Et]:(at[Et].book=Tn,at[Et].cbs=void 0),Wt.forEach(function(Mn){setTimeout(function(){Mn(Ve,Tn)},0)})})}}();return{hash:Ot,loadBook:fi,to64BitHex:an,zobristPiece:je,zobristCastle:Fe,zobristEnPassant:Ee,zobristTurn:ze,zobristPieceValue:Me,zobristPieceValueNumbers:Ae}}();/*!
 * Chess.com (c) 2020
 *
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */var ae=function(){var Fe={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,fischerandom:1,fischerrandom:1,fischer:1,chess9lx:1,960:1,crazyhouse:2,"three-check":3,threecheck:3,"3check":3,kingofthehill:4,koth:4,bughouse:5},Ee=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],ze={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Me,Ae,x,Je,Vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Zn=0,Ht=0,an=0,ie=-1,Ot=1,kt=2,gr=4,Ar=8,fi=16,at=32,Jt=64,Et=128,ot=3,ft=252,Ve=255,Tn=256,Wt=512,Mn=112,pr=1,qr=2,Cn=4,jn=3,Ft=7,At=14,qt=21,Xn=127,Sn="pnbrqkPNBRQK",pe="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",C=[];C[5]=[-16,-17,-15],C[6]=[16,17,15],C[8]=[-18,-33,-31,-14,18,33,31,14],C[16]=[-17,-15,17,15],C[32]=[-16,1,16,-1],C[64]=[-17,-16,-15,1,17,16,15,-1],C[128]=[-17,-16,-15,1,17,16,15,-1];var fe={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},Z={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},Xe={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},De={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},ke=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],$n=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],j=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],Se=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],Le=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],Ge=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],ue=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],st=[0,5,8,11,14],Bt=[31,7,7,7,63],Qn={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},qn=[gr,Ar,fi,at,Jt],ai=["","N","B","R","Q"],It={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},Qi=[0,6,1],$r={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},lo=["Event","Site","Date","Round","White","Black","Result"],ss=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function si(hn){return hn>>4}function en(hn){return hn&7}function on(hn){return String.fromCharCode(en(hn)+97)+(8-si(hn))}function Kr(hn){return 3-hn}function wr(hn,Wn){hn[0]=(hn[0]^Wn[0])>>>0,hn[1]=(hn[1]^Wn[1])>>>0}function Ji(hn,Wn,yt){return Wn<1?hn:(Wn=typeof Wn=="number"?Wn:80,hn.replace(new RegExp("(.{1,"+Wn+`})(?: |$|\r?
)`,"g"),"$1"+yt).slice(0,-yt.length))}function Rr(hn){var Wn,yt;return hn=hn.trim(),yt=hn.split(" "),Wn=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][yt.length],Wn&&hn?hn+=Wn:yt[5]==="0"&&(yt[5]=1,hn=yt.join(" ")),hn}function vi(hn){var Wn=Math.floor(hn%36e3/600),yt=Math.floor(hn%36e3%600)/10;return Math.floor(hn/36e3)+":"+(Wn<10?"0":"")+Wn+":"+(yt<10?"0":"")+yt}function Ua(hn){var Wn=hn.split(":");return(Wn[0]*3600+Wn[1]*60+Wn[2]*1)*10}function da(){H.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function zs(hn,Wn){var yt=hn.length,Oe,Rt=0,tn=0,dn=Wn&&(Wn===Fe.Crazyhouse||Wn===Fe.Bughouse),Nt;for(Oe=0;Oe<yt;++Oe)if(Nt=hn[Oe],+Nt!=+Nt)if(Nt==="/"){if(tn!==8&&(hn=hn.substr(0,Oe)+(8-tn)+hn.substr(Oe),++Oe,++yt),tn=0,++Rt>7){if(!dn&&Oe<yt-1||!/^[pnbrq]{0,63}$/i.test(hn.substr(Oe+1)))return!1;break}}else if(fe[Nt]){if(++tn>8)return!1}else if(Nt==="~")(!dn||!Oe||!/[nbrq]/i.test(hn[Oe-1]))&&(hn=hn.substr(0,Oe)+hn.substr(Oe+1),--Oe,--yt);else return!1;else tn+=Nt*1,tn>8&&(hn=hn.substr(0,Oe)+(Nt-(tn-8))+hn.substr(Oe+1),tn=8);return hn}function ls(hn,Wn){var yt,Oe,Rt,tn=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,dn=Fe[Wn]||Wn*1||Fe[String(Wn).replace(/\s/g,"").toLowerCase()],Nt=dn===Fe.Crazyhouse||dn===Fe.Bughouse,Gt,On,re,ee=0,xe=0,L,Re=!0,J="",Ke={0:0,7:0},$e={0:0,7:0},fn={0:"k",7:"K"},mt={0:"r",7:"R"},gt,Rn,w=dn===Fe.Chess960,O,q,ge,ht,et,ne,xt,er,Or,Vr,nr;if(!hn)return 1;if(dn===Fe.Bughouse&&(On=hn.split(" | "),On.length===2))return re=ls(On[0],Wn),re===0&&(re=ls(On[1],Wn)),re;if(On=hn.split(/\s+/),dn===Fe["3-check"]&&On.length===7&&(Gt=On.pop(),!/^\+[0-3]\+[0-3]$/.test(Gt)||Gt==="+3+3"))return 14;if(On.length!==6)return 1;if(/\D|.{7,}|^0|^$/.test(On[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(On[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(On[3]))return 4;if(O=On[2],w){if(!tn.test(O))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test(O)){if(typeof Wn<"u"||!tn.test(O))return 5;w=!0}if(On[1]!=="w"&&On[1]!=="b")return 6;if(Nt&&(On[0]=On[0].replace(/~(?=.*\/)/g,"")),Oe=On[0].split("/"),Nt&&Oe.length===9&&(Gt=Oe.pop(),!/^[pnbrq]{0,63}$/i.test(Gt)))return 13;if(Oe.length!==8)return 7;if(On[3][1]==="3"&&On[1]==="w"||On[3][1]==="6"&&On[1]==="b")return 11;for(On[3]!=="-"&&(xe=On[3][1]==="3"?4:3,L=xe===4?5:2,ee=On[3].charCodeAt(0)-97,Re=!1,J=xe===4?"P":"p"),yt=0;yt<Oe.length;++yt){for(Or=0,Vr=!1,nr=0;nr<Oe[yt].length;nr++)if(Rt=Oe[yt][nr],+Rt==+Rt){if(Vr)return 8;Or+=Rt*1,Vr=!0}else{if(Sn.indexOf(Rt)===-1)return 9;if(!Re&&xe===yt&&ee===Or&&J===Rt&&(Re=!0),L===yt&&ee===Or)return 11;yt%7===0&&(Rt===fn[yt]?$e[yt]=1<<Or:Rt===mt[yt]&&(Ke[yt]|=1<<Or)),++Or,Vr=!1}if(Or!==8)return 10}if(!Re)return 11;if(O!=="-"){if(w){for(ge={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},q={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},er={0:[0,0],7:[0,0]},yt=O.length-1;yt>=0;--yt)if(ne=O.charCodeAt(yt),xt&&xt>ne&&xt-ne<8||(ne===75?(et=7,ht=Ke[et]&ge[$e[et]]):ne===81?(et=7,ht=Ke[et]&q[$e[et]]):ne===107?(et=0,ht=Ke[et]&ge[$e[et]]):ne===113?(et=0,ht=Ke[et]&q[$e[et]]):(et=ne>=97?0:7,ht=1<<ne-(et?65:97),xt=ne),!ht||ht&ht-1)||$e[et]<2||$e[et]>64||(ht&Ke[et])!==ht||++er[et][($e[et]<ht)*1]>1)return 15}else if(gt=(O.indexOf("K")>-1?128:0)|(O.indexOf("Q")>-1?1:0),gt&&($e[7]!==16||(gt&Ke[7])!==gt)||(Rn=(O.indexOf("k")>-1?128:0)|(O.indexOf("q")>-1?1:0),Rn&&($e[0]!==16||(Rn&Ke[0])!==Rn)))return 15}return 0}function us(hn,Wn){var yt="",Oe=0,Rt,tn,dn=Wn?6:0;if(hn)for(;Oe<5;){for(Rt=hn>>st[Oe]&Bt[Oe],tn=0;tn<Rt;++tn)yt+=Sn[Oe+dn];++Oe}return yt}function cs(hn,Wn){Wn[Ot]&&wr(hn,H.zobristCheck[Wn[Ot]-1]),Wn[kt]&&wr(hn,H.zobristCheck[Wn[kt]+2])}function vo(hn,Wn){var yt,Oe,Rt,tn,dn=0,Nt,Gt,On;for(yt=1;yt<3;++yt){if(Oe=Wn[yt],Oe)for(Rt=0;Rt<5;){for(Nt=dn+Rt*63,tn=Oe>>st[Rt]&Bt[Rt],Gt=0;Gt<tn;++Gt)On=H.zobristPiece[Nt++],wr(hn,[On[0]*31>>>0,On[1]*17>>>0]);++Rt}dn=315}}function fa(hn,Wn,yt,Oe){(hn[yt+1]===Oe||hn[yt-1]===Oe)&&wr(Wn,H.zobristEnPassant[en(yt)])}function Bu(hn,Wn){var yt=[],Oe,Rt;for(Oe=0;Oe<120;++Oe)if(Oe&136&&(Oe+=8),Rt=hn[Oe],Rt&&(Rt&Wn)===Wn){yt.push(Oe);continue}return yt}function ds(hn,Wn,yt,Oe){var Rt;(Ae===0||hn[yt+8]&qr)&&(si(yt)%7===0?(Rt=Oe|It.PROMOTION|Wn<<Ft|yt<<At,Vt[Ht++]=Rt|4<<qt,Vt[Ht++]=Rt|3<<qt,Vt[Ht++]=Rt|2<<qt,Vt[Ht++]=Rt|1<<qt):Vt[Ht++]=Oe|Wn<<Ft|yt<<At)}function Dl(hn){switch(hn){case 67:case 68:case 51:case 52:return!0}return!1}function Du(hn,Wn,yt,Oe){var Rt=Wn+(yt-Wn%8),tn=yt>Wn%8?1:-1,dn,Nt,Gt;for(Gt=Wn+tn;Gt!==Rt;Gt+=tn)if(hn[Gt])return!1;if(Oe===Ot?dn=tn===1?118:114:dn=tn===1?6:2,Nt=dn-tn,hn[dn+8]||hn[dn]&&dn!==Wn&&dn!==Rt||hn[Nt]&&Nt!==Wn&&Nt!==Rt)return!1;if(dn!==Wn){for(tn=dn>Wn?1:-1,Gt=Wn+tn;Gt!==dn;Gt+=tn)if(Gt!==Rt&&hn[Gt]||hn[Gt+8])return!1}return!0}var Fl=function(){function hn(Oe,Rt,tn,dn,Nt,Gt,On){var re=[],ee="",xe=!0,L,Re,J,Ke,$e,fn,mt=Rt[tn],gt=mt.length,Rn,w,O="";if(mt.commands)for(Ke in mt.commands)(!Gt||Gt.indexOf(Ke)>-1)&&(O+="[%"+Ke+" "+mt.commands[Ke]+"]");for(mt.initComment&&!On&&(O=(O+" "+mt.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),O&&re.push("{"+O+"}"),Re=0;Re<gt;++Re){if(L=mt[Re],fn=L.color===Ot,ee="",O="",dn!==Fe.Bughouse?(xe&&!fn?ee=Oe+"...":fn&&(ee=Oe+"."),Nt&&(fn||xe)&&(ee+=" ")):(re.bughouseOrder||(re.bughouseOrder=[]),re.bughouseOrder.push(L.bughouseOrder),Re||(re.blackCountOffset=mt[0].color===kt?1:0)),ee+=L.san,L.annotation&&(ee+=L.annotation),L.additionalAnnotation&&(ee+=" "+L.additionalAnnotation.join(" ")),xe=!1,typeof L.time<"u"&&!L.commands&&(L.commands={clk:vi(L.time)}),L.commands)for(Ke in L.commands)(!Gt||Gt.indexOf(Ke)>-1)&&(O+="[%"+Ke+" "+L.commands[Ke]+"]");if(L.comment&&!On&&(O=(O+" "+L.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),O&&(ee+=" {"+O+"}",xe=!0),re.push(ee),L.lines)for(Rn=L.lines.length,J=0;J<Rn;++J)w=L.lines[J],Rt[w].length&&($e=hn(Oe,Rt,w,dn,Nt,Gt,On),$e[0]="("+$e[0],$e[$e.length-1]+=")",re=re.concat($e),xe=!0);fn||Oe++}return re}function Wn(Oe,Rt,tn){var dn=Rt,Nt=Oe.siblingGame.pgn(),Gt=0,On=0,re=[];for(Rt.bughouseOrder=Rt.bughouseOrder||[],Nt.bughouseOrder=Nt.bughouseOrder||[];Rt.bughouseOrder.length||Nt.bughouseOrder.length;)!Rt.bughouseOrder.length||Nt.bughouseOrder.length&&Rt.bughouseOrder[0]>Nt.bughouseOrder[0]?(Nt.bughouseOrder.shift(),re.push("B")):(Rt.bughouseOrder.shift(),re.push("A"));return Rt=[],re.forEach(function(ee){var xe,L,Re="",J;ee==="A"?(xe=dn,++Gt,L=Gt,J=Oe.startingMoveNumber()):(xe=Nt,++On,L=On,J=Oe.siblingGame.startingMoveNumber()),Re=String(Math.floor((L+1)/2)+J-1),(xe.blackCountOffset+L)%2?Re+=ee:Re+=ee.toLowerCase(),Re+="."+(tn?" ":"")+xe.shift(),Rt.push(Re)}),Rt}function yt(Oe,Rt){return"["+Oe+' "'+String(Rt).replace(/(\"|\\)/g,"\\$1")+'"]'}return function(Rt,tn,dn,Nt,Gt,On){var re=typeof Rt.newline=="string"?Rt.newline:`
`,ee=typeof Rt.spaceAfterPeriods>"u"?!0:Rt.spaceAfterPeriods,xe="",L,Re;xe+=yt("Event",tn.Event)+re,xe+=yt("Site",tn.Site)+re,xe+=yt("Date",tn.Date)+re,xe+=yt("Round",tn.Round)+re,Gt===Fe.Bughouse?(xe+=yt("WhiteA",tn.WhiteA||"?")+re,xe+=yt("BlackA",tn.BlackA||"?")+re,xe+=yt("WhiteB",tn.WhiteB||"?")+re,xe+=yt("BlackB",tn.BlackB||"?")+re):(xe+=yt("White",tn.White)+re,xe+=yt("Black",tn.Black)+re),xe+=yt("Result",tn.Result)+re,Gt&&(xe+=yt("Variant",tn.Variant)+re),tn.FEN&&tn.FEN!==pe&&(xe+=yt("SetUp","1")+re,xe+=yt("FEN",tn.FEN)+re);for(L in tn)ss.indexOf(L)===-1&&(xe+=yt(L,tn[L])+re);if(xe+=re,Re=hn(Nt,dn,0,Gt,ee,Rt.hideCommands?[]:Rt.restrictCommands,Rt.hideComments),Gt===Fe.Bughouse){if(On.isDependent)return Re;Re=Wn(On,Re,ee)}return Re.push(tn.Result),xe+Ji(Re.join(" "),Rt.maxWidth,re)}}(),zl=function(){var hn="!?\u203C\u2047\u2049\u2048\u25A1\u2207\u0394\u221E\u2A72\u2A71\xB1\u2213\u2A00\u27F3\u2192\u2191\u21C6\u2206\u2313\u21D4\u21D7\u27EB\u27EA\u2715\u22A5\u2295\u25CB\u21C4\u21BB\u2299\u2612~",Wn=/\[%(\S+)\s([^\]]+)\]/,yt=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function Oe(tn){for(var dn,Nt=tn.commands||{};dn=Wn.exec(tn.value);)tn.value=tn.value.replace(dn[0],"").trim(),Nt[dn[1]]=dn[2],tn.commands=Nt}function Rt(tn,dn,Nt,Gt){for(var On;++dn<Nt;)if((On=tn[dn].trim())&&On[0]!=="%")return On[0]==="["&&(!Gt||/^\[\S+\s+".*"\]$/.test(On))}return function(dn,Nt){var Gt,On,re,ee,xe="tags",L,Re,J,Ke=[],$e={type:xe,value:""},fn=0,mt=[],gt=!0;Nt=Nt||{},Gt=dn.split(/\r?\n/),ee=Gt.length;e:for(On=0;On<ee;++On)if(re=Gt[On].trim(),re[0]!=="%")if(!re)Ke.length&&(xe==="tags"?(xe="san",gt=!1):xe!=="tagValueStart"&&Rt(Gt,On,ee,fn||xe==="comment")&&(xe==="comment"&&Ke.push($e),Ke[Ke.length-1].type!=="tagValue"&&(mt.push(Ke),Ke=[]),xe="tags",gt=!0,fn=0));else{if(re=" "+re+" ",Re=re.length,L=0,gt)for(;L<Re;++L)if(J=re[L],xe==="tags"){if(J==="[")xe="tagName",$e={type:xe,value:""};else if(J.trim()){xe="san",$e={type:xe,value:""},gt=!1;break}}else if(xe==="tagName")$e.value&&J.trim()===""?(Ke.push($e),xe="tagValueStart"):J!==" "&&($e.value+=J);else if(xe==="tagValueStart"){if(J==='"'||J==="\u201C")xe="tagValue",$e={type:xe,value:""};else if(J.trim()){Ke.push({type:"tagValue",value:re.slice(L,-1).match(/(.*?)"?\]?$/)[1]}),xe="tags",$e={type:xe,value:""};continue e}}else if(xe==="tagValue")if(J==='"'||J==="\u201D")if(Ke.push($e),re[L+1]==="]")xe="tags",$e={type:xe,value:""},++L;else if(re.slice(-2,-1)==="]"){$e.value+=re.substr(L).match(/(.*?)"?\s*\] $/)[1],xe="tags",$e={type:xe,value:""};continue e}else xe="tagEnd";else J==="\\"&&L+2<Re&&(++L,J=re[L]),L>0&&($e.value+=J);else{if(J!=="]"){if(!J.trim())continue;--L}xe="tags",$e={type:xe,value:""}}for(;L<Re;++L)if(J=re[L],xe==="san"){if(hn.indexOf(J)>-1)J==="!"||J==="?"||hn.indexOf(J)<6&&(J=["!!","??","!?","?!"][hn.indexOf(J)-2])?($e.value&&Ke.push($e),$e={type:"a",value:J},(re[L+1]==="!"||re[L+1]==="?")&&($e.value+=re[++L]),Ke.push($e),$e={type:"san",value:""}):(J==="\u221E"&&$e.value==="=/"?($e.type="aa",$e.value+=J):($e.value&&(yt.test($e.value)&&($e.value!=="--"||Nt.rejectNullMoves)&&($e.type="aa"),Ke.push($e)),$e={type:"aa",value:J},J==="\u2191"&&re[L+1]==="\u2191"&&($e.value="\u21BB",++L)),Ke.push($e),$e={type:"san",value:""});else if(J===" "||J==="	"||J==="\r"||J==="{"||J==="("||J===")"){if($e.value){if($e.value[0]==="$")$e.type="nag";else if($e.value==="*"||$e.value==="1-0"||$e.value==="0-1"||$e.value==="1/2-1/2"||$e.value==="\xBD-\xBD")if(fn||L+1<Re)$e.type=$e.value==="*"?"cont":"comment";else{if($e.type="result",$e.value==="\xBD-\xBD"&&($e.value="1/2-1/2"),Ke.push($e),mt.push(Ke),On+1===ee||On+2===ee&&!Gt[On+1])return mt;xe="tags",gt=!0,$e={type:xe,value:""},Ke=[];break}yt.test($e.value)&&($e.value!=="--"||Nt.rejectNullMoves)&&($e.type="aa"),Ke.push($e),$e={type:xe,value:""}}if(J===" "||J==="	"||J==="\r")xe="san";else if(J==="{")xe="comment",Ke.length&&Ke[Ke.length-1].type==="comment"&&($e=Ke.pop(),$e.value+=" ");else if(J==="(")xe="san",Ke.push({type:"variationStart",value:++fn});else{if(fn<1){if(!Nt.commentErrors)return!1}else Ke.push({type:"variationEnd",value:fn--});xe="san"}$e.type=xe}else if(J!=="."&&($e.value||+J!=+J||re[L+1]==="-"||re[L+1]==="/"))$e.value+=J;else if(+J==+J)switch($e.number||($e.number=""),$e.number+=J,re[L+1]){case"A":case"a":case"B":case"b":$e.number+=re[++L],Ke.push({type:"number",value:$e.number}),delete $e.number}}else L===0&&($e.value=$e.value.trim()),J!=="}"?(J==="\\"&&L+2<Re&&(J=re[++L]),$e.value+=J):($e.value=$e.value.trim(),$e.value.indexOf("[")>-1&&Oe($e),Ke.push($e),xe="san",$e={type:xe,value:""})}return $e.value&&Ke.push($e),(Ke.length||!mt.length)&&mt.push(Ke),mt}}();function zo(hn,Wn){var yt,Oe,Rt=0,tn=!0,dn=[],Nt=Ot,Gt=[],On=ie,re=0,ee=1,xe=1,L=[],Re=[L],J=0;L.id=J;var Ke={},$e=[],fn=!1,mt=!1,gt=S,Rn=function(k,N){var B="",Y,G,ce,oe,Mt,_t;return k&It.KQSIDE_CASTLE?k&It.KSIDE_CASTLE?B="O-O":B="O-O-O":k&It.DROP?(ce=k>>At&Xn,Y=k>>qt,Y&&(B+=ai[Y]),B+="@"+on(ce)):(ce=k>>At&Xn,G=k>>Ft&Xn,oe=Oe[G],oe&gr?(k&It.ANY_CAPTURE&&(B+=String.fromCharCode(en(G)+97)+"x"),B+=on(ce),k&It.PROMOTION&&(Y=k>>qt,B+="="+ai[Y])):(B+=De[oe&Ve],an>1&&(B+=Ue(oe,G,ce)),k&It.ANY_CAPTURE&&(B+="x"),B+=on(ce))),N||(k&It.KQSIDE_CASTLE?(G=k>>Ft&Xn,ce=k>>At&Xn):k&It.DROP_OR_PROMOTE&&(oe=qn[Y]+Nt),Yn(oe,G,ce,k)&&(gt(k,G,ce,Y),Mt=Zn,Zn=Ht,_t=an,Rt&&zn()||Er()===Zn?B+="#":B+="+",Ht=Zn,Zn=Mt,an=_t,be(L.pop()))),B};function w(){var k=Nt===Ot?[4174784170,2938602761]:[0,0],N,B,Y;for(Y=0;Y<120;++Y)Y&136&&(Y+=8),N=Oe[Y],N&&wr(k,H.zobristPiece[64*H.zobristPieceValueNumbers[N&Ve]+8*(7-si(Y))+en(Y)]);if(mt)for(B=1;B<3;++B)Gt[B]&&(Gt[B]&Gt[B]-1?(wr(k,H.zobristCastle[B-1]),wr(k,H.zobristCastle[B+1])):Gt[B]>1<<en(dn[B])?wr(k,H.zobristCastle[B-1]):wr(k,H.zobristCastle[B+1]));else{for(B=1;B<3;++B)Gt[B]&&(Gt[B]&It.KSIDE_CASTLE&&wr(k,H.zobristCastle[B-1]),Gt[B]&It.QSIDE_CASTLE&&wr(k,H.zobristCastle[B+1]));fn?vo(k,yt._hand):Rt===Fe["3-check"]&&cs(k,$e)}return On!==ie&&fa(Oe,k,On+(Nt===Ot?16:-16),gr|Nt),k}function O(){var k;return L.length?k=L[L.length-1].hash:(L.hash||(L.hash=w()),k=L.hash),[k[0],k[1]]}function q(k){function N(Y){return/#/.test(Y)&&gn()&&(Y=Y.replace("#","+")),Y}function B(Y,G){var ce=k(Y,G);return ce&&(typeof ce=="string"?ce=N(ce):(ce.san=N(ce.san),L[L.length-1].san=ce.san)),ce}return B._isBughouseified=!0,B._orig=k,B}function ge(k,N){var B=Rt;k?Rt=Fe[k]||k*1||Fe[String(k).replace(/\s/g,"").toLowerCase()]||Fe.Chess:Rt=0,B!==Rt&&(Rt===Fe.Bughouse?(fn=!0,yt.isDependent||(yt.siblingGame=zo(),yt.siblingGame.hashing(tn),yt.siblingGame.isDependent=!0,yt.siblingGame.siblingGame=yt,yt.siblingGame.header({Variant:"Bughouse"})),da(),gt=he,Rn=q(Rn),yt.move=q(yt.move)):(delete yt.siblingGame,fn=Rt===Fe.Crazyhouse,mt=Rt===Fe.Chess960,Rt?(da(),gt=he):gt=S,Rn._isBughouseified&&(Rn=Rn._orig,yt.move=yt.move._orig)),N||ln(Vr()))}function ht(k,N){for(var B=k>7?Ot:kt,Y,G;!(k&136);){if(Y=Oe[k],Y&B){if(Y&at){if(G)return;G=k%8+(B===Ot?65:97)}else if(Y&Et)return G}k+=N}}function et(k,N,B){Oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Nt=Ot,dn[Ot]=ie,dn[kt]=ie,Gt[Ot]=0,Gt[kt]=0,yt._hand[Ot]=0,yt._hand[kt]=0,$e[Ot]=0,$e[kt]=0,On=ie,re=0,ee=1,N||(L=[],Re=[L],J=0,L.id=J,Ke={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},k?nr(["Variant",k]):ge(!1,B),B||ln(Vr()))}function ne(){et(0,!1,!0),L.hash=[1178310168,378666140],Oe=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33,0,0,0,0,0,0,0,0],xe=1,dn[Ot]=116,dn[kt]=4,Gt[Ot]=48,Gt[kt]=48}function xt(k,N,B,Y){var G=0,ce,oe,Mt,_t,Qe,X,rt,bn,Jn,sr,tr,wn;if(Y?(ce=k.split(" "),wn=ce[3],tr=ce[2]):(ce=k.trim().split(/\s+/),wn=ce[3]||"-",tr=ce[2]||"-"),typeof N>"u"?(tr.charCodeAt(0)&31)<9&&ge(Fe.Chess960,!0):ge(N,!0),oe=ce[0],!Y&&!(oe=zs(oe,Rt)))return!1;if(_t=oe.length,et(Ee[Rt],B,!0),fn){if(Rt===Fe.Bughouse&&!yt.isDependent&&(X=k.split(" | "),!yt.siblingGame.load(X.length===1?k:X[1],N,B,Y)))return ne(),!1;for(Qe=0;Qe<_t;++Qe)if(rt=oe[Qe],+rt!=+rt)if(rt==="/")if(G>111){for(++Qe;Qe<_t;++Qe)rt=oe[Qe],yt._hand[rt<"a"?Ot:kt]+=1<<Qn[rt]>>>0;break}else G+=8;else Oe[G]=fe[rt],oe[Qe+1]==="~"&&(++Qe,Oe[G]|=Wt),Oe[G]&Et&&(dn[Oe[G]&ot]=G),++G;else G+=rt*1}else for(Qe=0;Qe<_t;++Qe)rt=oe[Qe],+rt!=+rt?rt==="/"?G+=8:(Oe[G]=fe[rt],Oe[G]&Et&&(dn[Oe[G]&ot]=G),++G):G+=rt*1;if(Nt=ce[1]==="b"?kt:Ot,tr!=="-")if(mt){for(Jn={1:[0,0],2:[0,0]},Qe=tr.length-1;Qe>=0;--Qe)Mt=tr.charCodeAt(Qe),Mt===75?Mt=ht(119,-1):Mt===81?Mt=ht(112,1):Mt===107?Mt=ht(7,-1):Mt===113&&(Mt=ht(0,1)),bn=Mt<97?Ot:kt,sr=$r[String.fromCharCode(Mt)],(Y||Oe[sr]===(at|bn))&&(Mt>=97?dn[bn]>=1&&dn[bn]<=6&&(Gt[bn]|=1<<sr):dn[bn]>=113&&dn[bn]<=118&&(Gt[bn]|=1<<sr-112),++Jn[bn][(dn[bn]<sr)*1]);(Jn[Ot][0]>1||Jn[Ot][1]>1)&&(Gt[Ot]=0),(Jn[kt][0]>1||Jn[kt][1]>1)&&(Gt[kt]=0)}else{if(!Y)for(Qe=tr.length-1;Qe>=0;--Qe)bn=tr.charCodeAt(Qe)<97?Ot:kt,(Oe[$r[tr[Qe]]]!==(at|bn)||dn[bn]!==(bn===Ot?116:4))&&(tr=tr.substr(0,Qe)+tr.substr(Qe+1));for(Qe=tr.length-1;Qe>=0;--Qe)switch(tr[Qe]){case"K":Gt[Ot]|=It.KSIDE_CASTLE;break;case"Q":Gt[Ot]|=It.QSIDE_CASTLE;break;case"k":Gt[kt]|=It.KSIDE_CASTLE;break;case"q":Gt[kt]|=It.QSIDE_CASTLE;break}}return!Y&&(wn.length!==2||Nt===Ot&&wn[1]!=="6"||Nt===kt&&wn[1]!=="3"||Oe[wn.charCodeAt(0)-97+(8-(wn[1]==="3"?4:5))*16]!==(gr|Kr(Nt))||Oe[ze[wn]])&&(wn="-"),On=wn==="-"?ie:ze[wn],re=ce[4]*1||0,ee=ce[5]*1||1,Rt===Fe["3-check"]&&(ce[6]&&ce[6]!=="+3+3"&&(X=ce[6].match(/^\+([0-3])\+([0-3])$/)),X=X||[0,0,0],$e[Ot]=X[1]*1,$e[kt]=X[2]*1),B||(xe=ee,ln(Vr())),!0}function er(){var k=0,N="",B,Y="",G;for(B=0;B<120;++B)B&136&&(k&&(N+=k),N+="/",k=0,B+=8),G=Oe[B],G?(k&&(N+=k,k=0),N+=Xe[G&Ve]):++k;return k&&(N+=k),Gt[Ot]&It.KSIDE_CASTLE&&(Y+="K"),Gt[Ot]&It.QSIDE_CASTLE&&(Y+="Q"),Gt[kt]&It.KSIDE_CASTLE&&(Y+="k"),Gt[kt]&It.QSIDE_CASTLE&&(Y+="q"),N+=" "+(Nt===Ot?"w":"b")+" "+(Y||"-")+" "+(On===ie?"-":on(On))+" "+re+" "+ee,N}function Or(){var k=0,N="",B,Y,G="",ce;for(B=0;B<120;++B)B&136&&(k&&(N+=k),N+="/",k=0,B+=8),ce=Oe[B],ce?(k&&(N+=k,k=0),N+=Xe[ce&Ve],fn&&ce&Wt&&(N+="~")):++k;if(k&&(N+=k),fn&&(N+="/"+us(yt._hand[Ot],!0)+us(yt._hand[kt])),mt){for(Y=Gt[kt],B=0;Y;)Y&1&&(G=String.fromCharCode(B+97)+G),Y>>=1,++B;for(Y=Gt[Ot],B=0;Y;)Y&1&&(G=String.fromCharCode(B+65)+G),Y>>=1,++B}else Gt[Ot]&It.KSIDE_CASTLE&&(G+="K"),Gt[Ot]&It.QSIDE_CASTLE&&(G+="Q"),Gt[kt]&It.KSIDE_CASTLE&&(G+="k"),Gt[kt]&It.QSIDE_CASTLE&&(G+="q");return N+=" "+(Nt===Ot?"w":"b")+" "+(G||"-")+" "+(On===ie?"-":on(On))+" "+re+" "+ee,Rt===Fe["3-check"]?N+=" +"+$e[Ot]+"+"+$e[kt]:Rt===Fe.Bughouse&&!yt.isDependent&&(N+=" | "+yt.siblingGame.fen()),N}function Vr(){return Rt?Or():er()}function nr(k){var N,B,Y;for(N=0;N<k.length;N+=2)B=k[N],Y=k[N+1],B&&(B==="Variant"&&(ge(Y),Rt?Y=Ee[Rt]:Y=void 0),B==="Result"&&Y!=="*"&&Y!=="1-0"&&Y!=="0-1"&&Y!=="1/2-1/2"&&(Y="*"),Y!==void 0?Ke[B]=String(Y):lo.indexOf(B)>-1?B==="Date"?Ke[B]="????.??.??":Ke[B]="?":delete Ke[B]);return Ke}function ln(k){L.length>0||J||(k!==pe?(Ke.SetUp="1",Ke.FEN=k,L.hash=null):(delete Ke.SetUp,delete Ke.FEN,L.hash=[1178310168,378666140]))}function pt(k){var N=Oe[ze[k]];return N?{type:Xe[N&ft|kt],color:N&ot,promoted:(N&Wt)!==0}:null}function qe(k,N){return mt&&Gt[k]?Ge:Gt[k]&It.KSIDE_CASTLE&&!Oe[N+1]&&!Oe[N+2]?Gt[k]&It.QSIDE_CASTLE&&!Oe[N-1]&&!Oe[N-2]&&!Oe[N-3]?(Je=It.KQSIDE_CASTLE,Le):(Je=It.KSIDE_CASTLE,j):Gt[k]&It.QSIDE_CASTLE&&!Oe[N-1]&&!Oe[N-2]&&!Oe[N-3]?(Je=It.QSIDE_CASTLE,Se):$n}function vn(k,N){var B,Y,G,ce=Nt,oe,Mt,_t,Qe,X,rt,bn,Jn,sr,tr,wn=Oe;if(Me=[],Ae=0,x=0,Je=0,wn[8]=wn[9]=wn[10]=wn[11]=wn[12]=wn[13]=wn[14]=wn[15]=wn[24]=wn[25]=wn[26]=wn[27]=wn[28]=wn[29]=wn[30]=wn[31]=wn[40]=wn[41]=wn[42]=wn[43]=wn[44]=wn[45]=wn[46]=wn[47]=wn[56]=wn[57]=wn[58]=wn[59]=wn[60]=wn[61]=wn[62]=wn[63]=wn[72]=wn[73]=wn[74]=wn[75]=wn[76]=wn[77]=wn[78]=wn[79]=wn[88]=wn[89]=wn[90]=wn[91]=wn[92]=wn[93]=wn[94]=wn[95]=wn[104]=wn[105]=wn[106]=wn[107]=wn[108]=wn[109]=wn[110]=wn[111]=wn[120]=wn[121]=wn[122]=wn[123]=wn[124]=wn[125]=wn[126]=wn[127]=0,N===ie){Me=Bu(Oe,ce|k);return}for(sr=qe(ce,N),B=0;B<120;++B)if(B&136&&(B+=8),oe=Oe[B],!!oe){if(oe&ce){(!k||(oe|0)&k)&&Me.push(B);continue}if(tr=sr[B-N+119],!!(tr&oe))if(oe&gr)for(rt=C[oe],Y=1;Y<3;++Y)Qe=B+rt[Y],!(Qe&136)&&(wn[Qe+8]|=pr,Qe===N&&(++Ae,wn[B+8]|=qr));else{rt=C[oe&ft],X=rt.length,Jn=oe&Mn;e:for(Y=0;Y<X;++Y)if(bn=rt[Y],Qe=B,!(N>Qe&&bn<0&&N-Qe>16||N<Qe&&bn>0&&Qe-N>16))for(;!((Qe+=bn)&136);){if(wn[Qe+8]|=pr,Mt=Oe[Qe],Mt){if(Mt&ce){if(Qe===N){for(G=Qe-bn;G!==B;G-=bn)wn[G+8]|=qr;wn[B+8]|=qr,++Ae,Jn&&(Qe+=bn,Qe&136||(wn[Qe+8]|=pr))}else if(Jn&&tr&Tn){for(_t=Qe;(_t+=bn)!==N;)if(_t&136||Oe[_t])continue e;wn[Qe+8]|=Cn+(Math.abs(bn)<<jn),++x}}break}if(!Jn)break}}}Ae>1&&(Me=[N])}function An(k,N){var B,Y,G=N+16*(Nt===Ot?1:-1),ce;return Ae===1&&!(Oe[N+8]&qr)&&!(Oe[G+8]&qr)?!1:(B=Oe[k],Oe[N]=B,Oe[k]=0,Y=Oe[G],Oe[G]=0,ce=Fr(),Oe[k]=B,Oe[N]=0,Oe[G]=Y,!ce)}function Pr(k){var N,B,Y;if(mt){if(Gt[k])for(N=dn[k],B=N%8,Y=0;Y<8;++Y)Gt[k]&1<<Y&&Du(Oe,N,Y,k)&&(Vt[Ht++]=(Y>B?It.KSIDE_CASTLE:It.QSIDE_CASTLE)+(N<<Ft)+(N+(Y-B)<<At),++Y)}else Je&It.KSIDE_CASTLE&&(N=dn[k],B=N+2,Oe[N+9]===0&&Oe[N+10]===0&&(Vt[Ht++]=It.KSIDE_CASTLE+(N<<Ft)+(B<<At))),Je&It.QSIDE_CASTLE&&(N=dn[k],B=N-2,Oe[N+7]===0&&Oe[N+6]===0&&(Vt[Ht++]=It.QSIDE_CASTLE+(N<<Ft)+(B<<At)))}function Sr(k,N,B){var Y,G,ce,oe,Mt;if(!k){for(N&&(N>>=26),oe=0;oe<5;++oe)if((!N||(N|0)===1<<oe)&&yt._hand[B]&Bt[oe]<<st[oe]){for(oe===0?(Y=16,G=103,ce=It.DROP):(Y=0,G=119,ce=It.DROP|oe<<qt),Mt=Y;Mt<=G;++Mt)Mt&136&&(Mt+=8),Oe[Mt]||(Ae===0||Ae===1&&Oe[Mt+8]&qr)&&(Vt[Ht++]=ce|Mt<<At);if(N)return}}}function Er(k,N){var B,Y,G,ce=Nt,oe=Kr(ce),Mt,_t,Qe,X,rt,bn=dn[ce],Jn,sr;for(vn(k,bn),an=Me.length,Ht=Zn,Jn=0;Jn<an;++Jn)if(B=Me[Jn],Mt=Oe[B],!(Ae&&x&&Oe[B+8]&Cn))if(Mt&gr)for(Qe=C[Mt],(x===0||!(Oe[B+8]&Cn)||Oe[B+8]>>jn===16)&&(_t=B+Qe[0],Oe[_t]===0&&(ds(Oe,B,_t,0),Qi[ce]===si(B)&&(_t+=Qe[0],Oe[_t]||ds(Oe,B,_t,It.BIG_PAWN)))),Y=1;Y<3;++Y)X=Qe[Y],_t=B+X,!(_t&136||x&&Oe[B+8]&Cn&&Oe[B+8]>>jn!==Math.abs(X))&&(Oe[_t]&oe?ds(Oe,B,_t,It.CAPTURE):_t===On&&An(B,_t)&&(Vt[Ht++]=It.EP_CAPTURE|B<<Ft|_t<<At));else{if(x&&Oe[B+8]&Cn){if(Mt&Ar)continue;if(ke[B-dn[ce]+119]&Mt)X=Oe[B+8]>>jn,Qe=[X,-X];else continue}else Qe=C[Mt&ft];if(sr=B<<Ft,B===bn){for(Y=0;Y<8;++Y)X=Qe[Y],_t=B+X,_t&136||(Oe[_t]?Oe[_t]&oe&&(Oe[_t+8]&pr||(Vt[Ht++]=It.CAPTURE|sr|_t<<At)):Oe[_t+8]&pr||(Vt[Ht++]=sr|_t<<At));Ae===0&&Pr(ce)}else for(G=Qe.length,rt=Mt&Mn,Y=0;Y<G;++Y)for(X=Qe[Y],_t=B;_t+=X,!(_t&136);){if(Oe[_t]){Oe[_t]&oe&&(Ae===0||Oe[_t+8]&qr)&&(Vt[Ht++]=It.CAPTURE|sr|_t<<At);break}else(Ae===0||Oe[_t+8]&qr)&&(Vt[Ht++]=sr|_t<<At);if(!rt)break}}return Rt&&(fn?Sr(N,k,ce):!mt&&zn()&&(Ht=Zn)),Ht}function Yn(k,N,B,Y){var G,ce,oe,Mt,_t,Qe,X,rt,bn;if(Rt===Fe["King of the Hill"]&&k&Et&&Dl(B))return!0;if(Y&It.KQSIDE_CASTLE&&(Nt===Ot?B=Y&It.KSIDE_CASTLE?117:115:B=Y&It.KSIDE_CASTLE?5:3,k=at,bn=!0),G=dn[Kr(Nt)],G===ie)return!1;if(!(k&Et)&&(ce=ke[B-G+119],ce&k))for(Mt=ue[B-G+119],Qe=k&Mn,_t=B+Mt;!(_t&136);){if(_t===G){if(k&gr){if((k&ot)===Ot?G-B<0:G-B>0)return!0;break}return!0}if(_t!==N&&Oe[_t]||!Qe)break;_t+=Mt}if(!bn){if(oe=ke[N-G+119],oe&Mn&&(Mt=ue[N-G+119],Mt!==ue[B-G+119]))for(_t=G-Mt;!(_t&136);){if(_t!==N&&(X=Oe[_t],X)){if(X&Nt&&oe&X&&X&Mn)return!0;break}_t-=Mt}if(Y&It.EP_CAPTURE&&(rt=B+16*(Nt===Ot?1:-1),oe=ke[rt-G+119],oe&Mn))for(Mt=ue[rt-G+119],_t=G-Mt;!(_t&136);){if(_t!==N&&_t!==rt){if(_t===B)break;if(X=Oe[_t],X){if(X&Nt&&oe&X&&X&Mn)return!0;break}}_t-=Mt}}return!1}function Hr(k,N){var B,Y,G,ce=C[Ar],oe,Mt=Ar|k;for(B=0;B<8;++B)if(G=N+ce[B],!(G&136)&&(Y=Oe[G],(Y&Mt)===Mt))return!0;for(ce=C[Et],B=0;B<8;++B)for(oe=ce[B],G=N+oe;!(G&136);){if(Y=Oe[G],Y){if(Y&k&&ke[N-G+119]&Y)if(Y&gr){if(k===Ot?N-G<0:N-G>0)return!0}else return!0;break}G+=oe}return!1}function Qr(k){return dn[k]!==ie&&Hr(Kr(k),dn[k])}function Fr(){return Qr(Nt)}function gn(){var k,N,B,Y=1<<st[4];return yt._hand[Nt]+=Y,k=Zn,Zn=Ht,N=an,B=Er()!==Zn,Ht=Zn,Zn=k,an=N,yt._hand[Nt]-=Y,B}function cn(){return Fr()&&(Vt[0]=0)===Er()&&!Vt[0]&&(Rt!==Fe.Bughouse||!gn())}function Kn(){var k=!Fr()&&(Vt[0]=0)===Er()&&!Vt[0];return k&&Rt===Fe.Bughouse&&!yt.isDependent&&(k=yt.siblingGame.inStalemate()),k&&dn[Nt]!==ie}function lt(k){var N,B,Y=100,G=0,ce=0,oe=0;for(B=0;B<120;++B)if(B&136&&(B+=8),N=Oe[B],N){if(k&&!(N&k))continue;if(Y&N)return!1;if(N&Ar){if(ce||G++)return!1}else if(N&fi&&(G||(++ce,(si(B)+B)%2&&++oe,oe&&ce!==oe)))return!1}return dn[Ot]!==ie&&dn[kt]!==ie}function nn(){if(re<8)return!1;for(var k=O(),N=!1,B,Y=re,G=!1,ce=L,oe=ce.length-1;;){if(oe-=2,oe<0){if(ce.id){oe=ce.atMoveNode+oe+2,ce=Re[ce.parentId];continue}if(oe===-2)return!1;B=ce.hash,G=!0}else B=ce[oe].hash,ce[oe].halfMoves>Y||Y<2?G=!0:Y=ce[oe].halfMoves;if(B[0]===k[0]&&B[1]===k[1]){if(N)return!0;N=!0}if(G)return!1}}function rn(k){var N=k.move,B,Y,G,ce,oe,Mt,_t,Qe,X,rt;if(Rt===Fe.Crazyhouse||N&It.DROP?(Y=yt._hand,Mt=k.hash,rt=k.color):(Y=yt.siblingGame._hand,k.handSibling=!0,tn&&(_t=yt.siblingGame._history(),_t.length?Mt=_t[_t.length-1].hash:(_t.hash||(_t.hash=yt.siblingGame._hashPosition()),Mt=_t.hash)),rt=Kr(k.color)),k.captured){switch(k.captured&Wt?G=gr:G=k.captured&ft,G&ft){case gr:Qe=0;break;case Ar:Qe=1;break;case fi:Qe=2;break;case at:Qe=3;break;default:Qe=4}B=1<<st[Qe],tn&&(oe=Y[rt]>>st[Qe]&Bt[Qe],X=H.zobristPiece[oe+63*Qe+(rt===Ot?0:315)])}else ce=N>>qt,B=-1<<st[ce],tn&&(oe=Y[rt]>>st[ce]&Bt[ce],X=H.zobristPiece[oe-1+63*ce+(rt===Ot?0:315)]);Y[rt]+=B,k.handChange=B,tn&&wr(Mt,[X[0]*31>>>0,X[1]*17>>>0])}function S(k,N,B,Y){var G=Nt,ce=Kr(G),oe,Mt,_t,Qe,X={move:k,epSquare:On,halfMoves:re,castlingW:Gt[Ot],castlingB:Gt[kt],color:G},rt,bn,Jn=G===Ot,sr,tr;tn&&(Qe=O(),X.hash=Qe,wr(Qe,H.zobristTurn),On!==ie&&fa(Oe,Qe,On+(Jn?16:-16),gr|G)),k&It.KQSIDE_CASTLE?sr=Et:fn&&k&It.DROP?(Oe[B]=qn[Y]|G,tn&&wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Oe[B]]+8*(7-si(B))+en(B)]),rn(X),sr=0):(sr=Oe[N],tr=Oe[B],tr&&(X.captured=tr,tn&&wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Oe[B]&Ve]+8*(7-si(B))+en(B)]),tr&at&&Gt[ce]&&(mt?si(B)===(Jn?0:7)&&(_t=1<<en(B),Gt[ce]&_t&&(Gt[ce]^=_t,tn&&(_t>1<<en(dn[G])?wr(Qe,H.zobristCastle[ce-1]):wr(Qe,H.zobristCastle[ce+1])))):B===(Jn?7:119)?Gt[ce]&It.KSIDE_CASTLE&&(Gt[ce]^=It.KSIDE_CASTLE,tn&&wr(Qe,H.zobristCastle[ce-1])):B===(Jn?0:112)&&Gt[ce]&It.QSIDE_CASTLE&&(Gt[ce]^=It.QSIDE_CASTLE,tn&&wr(Qe,H.zobristCastle[ce+1])))),k&It.PROMOTION?Oe[B]=qn[Y]|G|Wt:Oe[B]=Oe[N],Oe[N]=0,tn&&(wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[sr&Ve]+8*(7-si(N))+en(N)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Oe[B]&Ve]+8*(7-si(B))+en(B)]))),k&It.EP_CAPTURE?(Jn?(bn=B+16,rt=6):(bn=B-16,rt=8),X.captured=gr|ce,Oe[bn]=0,tn&&wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[gr|ce]+8*(rt-si(B))+en(B)])):sr&Et?(mt?(k&It.KQSIDE_CASTLE&&(Oe[B]=0,Oe[N]=0,k&It.KSIDE_CASTLE?Jn?(oe=118,Mt=117):(oe=6,Mt=5):Jn?(oe=114,Mt=115):(oe=2,Mt=3),Oe[oe]=G|Et,Oe[Mt]=G|at,tn&&(wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Et|G]+8*(7-si(N))+en(N)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[at|G]+8*(7-si(B))+en(B)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Et|G]+8*(7-si(oe))+en(oe)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[at|G]+8*(7-si(Mt))+en(Mt)]))),tn&&(Gt[G]&Gt[G]-1?(wr(Qe,H.zobristCastle[G-1]),wr(Qe,H.zobristCastle[G+1])):Gt[G]>1<<en(dn[G])?wr(Qe,H.zobristCastle[G-1]):wr(Qe,H.zobristCastle[G+1])),dn[G]=oe||B):(k&It.KQSIDE_CASTLE&&(Oe[B]=Oe[N],Oe[N]=0,k&It.KSIDE_CASTLE?(oe=B-1,Mt=B+1):(oe=B+1,Mt=B-2),Oe[oe]=Oe[Mt],Oe[Mt]=0,tn&&(wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Et|G]+8*(7-si(N))+en(N)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[at|G]+8*(7-si(Mt))+en(Mt)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[Et|G]+8*(7-si(B))+en(B)]),wr(Qe,H.zobristPiece[64*H.zobristPieceValueNumbers[at|G]+8*(7-si(oe))+en(oe)]))),tn&&(Gt[G]&It.KSIDE_CASTLE&&wr(Qe,H.zobristCastle[G-1]),Gt[G]&It.QSIDE_CASTLE&&wr(Qe,H.zobristCastle[G+1])),dn[G]=B),Gt[G]=0):sr&at&&Gt[G]&&(mt?si(N)===(Jn?7:0)&&(_t=1<<en(N),Gt[G]&_t&&(Gt[G]^=_t,tn&&(_t>1<<en(dn[G])?wr(Qe,H.zobristCastle[G-1]):wr(Qe,H.zobristCastle[G+1])))):N===(Jn?119:7)?Gt[G]&It.KSIDE_CASTLE&&(Gt[G]^=It.KSIDE_CASTLE,tn&&wr(Qe,H.zobristCastle[G-1])):N===(Jn?112:0)&&Gt[G]&It.QSIDE_CASTLE&&(Gt[G]^=It.QSIDE_CASTLE,tn&&wr(Qe,H.zobristCastle[G+1]))),k&It.BIG_PAWN?(Jn?On=B+16:On=B-16,tn&&fa(Oe,Qe,B,gr|ce)):On=ie,sr&gr||k&It.ANY_CAPTURE?re=0:re++,Nt=ce,L.push(X)}function me(){var k={color:Nt,san:"--",epSquare:On},N={color:Nt,san:"--"},B;return tn&&(B=O(),k.hash=B,wr(B,H.zobristTurn),On!==ie&&fa(Oe,B,On+(Nt===Ot?16:-16),gr|Nt)),On=ie,re++,Nt=Kr(Nt),Nt===Ot&&++ee,L.push(k),N}function he(k,N,B,Y){var G,ce=Nt;S(k,N,B,Y),G=L[L.length-1],fn?(re=G.halfMoves+1,G.captured&&rn(G),Rt===Fe.Bughouse&&(G.bughouseOrder=yt.moveCount()-1+yt.siblingGame.moveCount())):Rt===Fe["3-check"]&&Qr(Nt)&&(G.checked=!0,tn&&$e[ce]&&wr(G.hash,H.zobristCheck[$e[ce]+(ce===Ot?-1:2)]),++$e[ce],tn&&wr(G.hash,H.zobristCheck[$e[ce]+(ce===Ot?-1:2)]))}function be(k){var N,B,Y=Nt,G=Kr(Y),ce=k.move,oe=ce>>At&Xn,Mt=ce>>Ft&Xn;if(Nt=G,Gt[kt]=k.castlingB,Gt[Ot]=k.castlingW,On=k.epSquare,re=k.halfMoves,Rt){if(mt&&ce&It.KQSIDE_CASTLE){ce&It.KSIDE_CASTLE?G===Ot?(B=118,N=117):(B=6,N=5):G===Ot?(B=114,N=115):(B=2,N=3),Oe[B]=0,Oe[N]=0,Oe[Mt]=G|Et,Oe[oe]=G|at,dn[G]=Mt;return}if(k.handChange&&(Rt===Fe.Crazyhouse||!k.handSibling?yt._hand[G]-=k.handChange:yt.siblingGame._hand[Kr(G)]-=k.handChange),ce&It.DROP){Oe[oe]=0;return}k.checked&&--$e[G]}ce&It.PROMOTION?(Oe[Mt]=gr|G,ce&It.CAPTURE?Oe[oe]=k.captured:Oe[oe]=0):(Oe[Mt]=Oe[oe],ce&It.KQSIDE_CASTLE?(Oe[oe]=0,ce&It.KSIDE_CASTLE?(N=oe+1,B=oe-1):(N=oe-2,B=oe+1),Oe[N]=G|at,Oe[B]=0,dn[G]=Mt):(oe===dn[G]&&(dn[G]=Mt),ce&It.CAPTURE?Oe[oe]=k.captured:(Oe[oe]=0,ce&It.EP_CAPTURE&&(Oe[oe-(G===Ot?-16:16)]=gr|Y))))}function Ue(k,N,B){var Y,G,ce,oe,Mt,_t,Qe,X;if(Ht<2)return"";for(k=k&ft,X=0;X<Ht;++X)if(Y=Vt[X],Qe=Y>>At,B===Qe&&(oe=Y>>Ft&Xn,oe!==N&&(G=Oe[oe],G&k))){if(ce=!0,si(N)===si(oe)){if(Mt)return on(N);_t=!0}if(en(N)===en(oe)){if(_t)return on(N);Mt=!0}}return ce?Mt?String(8-si(N)):String.fromCharCode(en(N)+97):""}function Ze(k,N,B){var Y,G,ce=k>>At&Xn,oe={color:Nt,to:on(ce),flags:k&Xn};return!fn||!(k&It.DROP)?(Y=k>>Ft&Xn,oe.from=on(Y),oe.piece=Oe[Y],k&It.PROMOTION&&(G=k>>qt,oe.promotion=qn[G]+Nt),k&It.CAPTURE?oe.captured=Oe[ce]:k&It.EP_CAPTURE&&(oe.captured=gr|Kr(Nt))):(G=k>>qt,oe.drop=G,oe.piece=qn[G]+Nt),N?oe.san=N:oe.san=Rn(k,B),oe}function zn(){if(Rt===Fe["3-check"])return $e[Kr(Nt)]===3;if(Rt===Fe["King of the Hill"])return Dl(dn[Kr(Nt)])}function K(){if(Rt===Fe.Bughouse)return yt.siblingGame.inCheckmate()}function ye(){if(Rt===Fe.Bughouse)return yt.siblingGame.in50MoveRule()||yt.siblingGame.inThreefoldRepetition()}function Be(){var k=[],N=Vr(),B=L.length-1,Y=L[B];return Y?(k.parentId=J,k.id=Re.length,L.curFen=N,Y.lines||(Y.lines=[]),Y.lines.push(k.id),Y.move?be(Y):(On=Y.epSquare,--re,Nt=Kr(Nt)),Nt===kt&&--ee,k.atMoveNode=B,B?k.hash=L[B-1].hash:k.hash=L.hash,J=k.id,Re.push(k),L=k,!0):!1}function We(k){var N=Vr();L.curFen=N,L=Re[k],J=k,xt(L.curFen,Rt,!0,!0)}return yt={WHITE:Ot,BLACK:kt,PAWN:gr,KNIGHT:Ar,BISHOP:fi,ROOK:at,QUEEN:Jt,KING:Et,FLAGS:It,load:xt,reset:ne,moves:function(k){var N=[],B,Y=Rn,G,ce;for(k&&(k.verbose&&(Y=Ze),k.type&&(G=k.type|k.type<<24),ce=k.noDrop),Er(G,ce),B=0;B<Ht;++B)N.push(Y(Vt[B]));return N},inCheck:Fr,inCheckmate:cn,inStalemate:Kn,isBughouseWin:K,in50MoveRule:function(){return re>=100},inDraw:function(){return re>=100||Kn()||lt()||nn()||!!ye()},insufficientMaterial:lt,inThreefoldRepetition:nn,isVariantWin:zn,gameOver:function(){return yt.inDraw()||cn()||!!zn()||!!K()},isPositionValid:function(k){var N,B,Y=0,G;if(k=k||{},k.pawns!==!1)for(N=0;N<=119;){if(G=Oe[N],G&gr)return!1;++N===8&&(N=112)}if(k.kings!==!1){for(N=0;N<=119;++N)if(N&136&&(N+=8),G=Oe[N],G&Et){if(++Y>2||B&&B&G)return!1;B=G&ot}if(Y!==2)return!1}return!(k.check!==!1&&!(k.kings===!1&&dn[Kr(Nt)]===ie)&&Qr(Kr(Nt)))},validateFen:ls,fen:Vr,pgn:function(k){return k=k||{},!k.useResultHeader&&!J&&(zn()||cn()?Ke.Result=Nt===kt?"1-0":"0-1":yt.inStalemate()?Ke.Result="1/2-1/2":K()&&(Ke.Result=yt.siblingGame.turn()===Ot?"1-0":"0-1")),Fl(k,Ke,Re,xe,Rt,yt)},loadPgn:function(k,N,B){var Y,G,ce,oe,Mt={},_t,Qe,X=0,rt;if(typeof N!="number"&&(B=B||N,N=0),B=B||{},typeof k=="string"&&(B.singleGame&&(k=k.replace(/(?:\r?\n\s*){2,}/g,`
`)),k=yt.tokenizePgn(k,B)),N<0&&(N=k.length+N),oe=k[N],!oe)return!1;for(ne(),G=oe.length,Y=0;Y<G&&(ce=oe[Y],ce.type==="tagName");++Y){if(!oe[Y+1]||oe[Y+1].type!=="tagValue")return!1;++Y,ce.value==="FEN"?rt=Rr(oe[Y].value):Mt[ce.value]=oe[Y].value}if(B.variant&&(Mt.Variant=B.variant),Mt.Variant&&!rt&&(rt=pe),rt||Mt.SetUp==="1"){if(Mt.SetUp==="0")Mt.FEN=rt;else if(!rt||!xt(rt,Mt.Variant))return!1}for(yt.header(Mt),_t=yt,Qe=_t._history();Y<G;++Y)if(ce=oe[Y],ce.type==="san"&&X===0){if(!_t.move(ce.value)&&(ce.value!=="Z0"&&ce.value!=="<>"||B.rejectNullMoves||!_t.move("--")))if(B.commentErrors)Qe.length?Qe[Qe.length-1].comment=((Qe[Qe.length-1].comment||"")+" "+ce.value).trim():Qe.initComment=((Qe.initComment||"")+" "+ce.value).trim();else if(B.skipBadLines&&(J!==0||L.length&&B.allowBadMainLine))X=1;else return ne(),!1}else if(ce.type==="result"&&Ke.Result==="*")nr(["Result",ce.value]);else if(ce.type==="a"&&X===0&&Qe[Qe.length-1])Qe[Qe.length-1].annotation=ce.value;else if((ce.type==="nag"||ce.type==="aa")&&X===0&&Qe[Qe.length-1])Qe[Qe.length-1].additionalAnnotation||(Qe[Qe.length-1].additionalAnnotation=[]),Qe[Qe.length-1].additionalAnnotation.indexOf(ce.value)===-1&&Qe[Qe.length-1].additionalAnnotation.push(ce.value);else if(ce.type==="comment"&&X===0)Qe.length?(ce.value&&(Qe[Qe.length-1].comment=ce.value),ce.commands&&(Qe[Qe.length-1].commands=ce.commands,ce.commands.clk&&(Qe[Qe.length-1].time=Ua(ce.commands.clk)))):(Qe.initComment=String(ce.value),ce.commands&&(Qe.commands=ce.commands));else if(ce.type==="variationStart"){if(X>0)++X;else if(!Be())return ne(),!1;Qe=_t._history()}else if(ce.type==="variationEnd")X>0&&--X,X===0&&(We(Qe.parentId),Qe=_t._history());else if(ce.type==="number"){if(/b/i.test(ce.value.slice(-1))?_t=yt.siblingGame:_t=yt,!_t)return!1;Qe=_t._history()}else ce.type==="cont"&&J&&!Qe.length&&_t.move(_t._lines()[Qe.parentId][Qe.atMoveNode].san);return!0},header:function(k){return Array.isArray(k)?nr(k):(typeof k=="object"&&Object.keys(k).forEach(function(N){nr([N,k[N]])}),Ke)},turn:function(k){return(k===Ot||k===kt)&&(Nt=k),Nt},move:function k(N){var B,Y,G,ce,oe,Mt,_t,Qe,X,rt,bn,Jn,sr;if(typeof N=="string"){switch(ce=N.length-1,N[ce]){case"+":case"#":N=N.substr(0,ce)}for(Sn.indexOf(N[0])>6?X=Z[N[0]]:N[0]==="O"?X=Et:X=gr,fn&&(N.indexOf("@")===-1?rt=!0:(rt=!1,X<<=24)),Er(X,rt),ce=0;ce<Ht;++ce)if(Mt=Rn(Vt[ce],!0),N===Mt){Y=Vt[ce];break}if(Y)_t=Y>>Ft&Xn,Qe=Y>>At&Xn,G=Y>>qt;else{if(N==="--")return me();if(N=yt.fixMove(N))try{return k(N)}catch{}return null}}else{if(N.drop){switch(N.drop){case"p":G=0;break;case"n":G=1;break;case"b":G=2;break;case"r":G=3;break;case"q":G=4;break;default:return null}X=1<<26+G}else{if(N.promotion)switch(N.promotion){case"q":G=4;break;case"n":G=1;break;case"r":G=3;break;case"b":G=2;break;default:return null}_t=ze[N.from],rt=!0,X=Oe[_t]&ft}for(Qe=ze[N.to],B=((G?G<<qt:0)|Qe<<At)>>Ft|_t,Er(X,rt),ce=0;ce<Ht;++ce)if(Vt[ce]>>Ft===B){Y=Vt[ce];break}if(!Y)return(N=yt.fixMove(N))?k(N):null}return Y&It.DROP_OR_PROMOTE?sr=qn[G]+Nt:sr=Oe[_t],oe=Ze(Y,Mt,!0),bn=Yn(sr,_t,Qe,Y),gt(Y,_t,Qe,G),bn&&(Rt&&zn()||Er()===0?oe.san+="#":oe.san+="+"),Jn=L[L.length-1],Jn.san=oe.san,oe.piece&Wt&&(Jn.promoted=!0),Nt===Ot&&++ee,oe},undo:function(k){var N=L.pop();return N?(Nt===Ot&&--ee,N.move?(be(N),k?!0:Ze(N.move,N.san)):(On=N.epSquare,--re,Nt=Kr(Nt),k?!0:{san:"--",color:N.color})):null},clear:function(k){et(k)},put:function(k,N,B){var Y=ze[N],G=!1,ce,oe=Oe[Y],Mt=oe&ot,_t=k.color;if(isNaN(Y)||!k.type||!_t||Sn.indexOf(k.type)===-1)return!1;if(Oe[Y]=Z[k.type]|_t|(k.promoted?Wt:0),Oe[Y]&Et&&(dn[_t]=Y),oe&&Oe[dn[Mt]]&&Oe[dn[Mt]]!==(Et|Mt)){for(ce=0;ce<120;++ce)ce&136&&(ce+=8),Oe[ce]===(Et|Mt)&&(dn[Mt]=ce,G=!0);G||(dn[Mt]=ie)}return B||xt(Vr(),Rt,!1,!1),!0},get:pt,remove:function(k,N){var B=Oe[ze[k]],Y=pt(k),G=B&ot,ce;if(Oe[ze[k]]=0,B&Et){for(dn[G]=ie,Gt[G]=0,ce=0;ce<120;++ce)if(ce&136&&(ce+=8),Oe[ce]===(Et|G)){dn[B.color]=ce;break}}return N||xt(Vr(),Rt,!0,!1),Y},history:function(k,N){for(var B=[],Y,G=L,ce=G.length;;){if(--ce===-1)if(G.id&&!N){ce=G.atMoveNode,G=Re[G.parentId];continue}else break;k?(Y=Ze(G[ce].move,G[ce].san),Y.color=G[ce].color,!ce&&G.initComment&&(Y.firstComment=G.initComment),G[ce].comment!==void 0&&(Y.comment=G[ce].comment),G[ce].time!==void 0&&(Y.time=G[ce].time),G[ce].annotation!==void 0&&(Y.annotation=G[ce].annotation),G[ce].additionalAnnotation!==void 0&&(Y.additionalAnnotation=G[ce].additionalAnnotation),G[ce].commands!==void 0&&(Y.commands=G[ce].commands),G[ce].captured!==void 0&&(Y.captured=G[ce].captured),G[ce].promoted!==void 0&&(Y.promoted=G[ce].promoted),G[ce].lines!==void 0&&(Y.lines=G[ce].lines),G[ce].bughouseOrder!==void 0&&(Y.bughouseOrder=G[ce].bughouseOrder),Sn.indexOf(G[ce].san[0])>6?Y.piece=Z[G[ce].san[0]]:G[ce].san[0]==="O"?Y.piece=Et:Y.piece=gr,Y.piece|=Y.color,B.unshift(Y)):B.unshift(G[ce].san)}return B},hashes:function(){for(var k=[],N=L,B=N.length;;){if(--B===-1)if(N.id){B=N.atMoveNode,N=Re[N.parentId];continue}else{N.hash||O(),k.unshift(N.hash);break}k.unshift(N[B].hash)}return k},moveCount:function(){return L.length},startingMoveNumber:function(){return xe},completeFen:Rr,createVariation:Be,selectLine:We,hash:function(){var k=O();return Rt===Fe.Bughouse&&!yt.isDependent?[k,yt.siblingGame.hash()]:k},hashing:function(k){tn=k,Rt===Fe.Bughouse&&!yt.isDependent&&yt.siblingGame.hashing(tn)},hand:function(){if(fn)return us(yt._hand[Ot],!0)+us(yt._hand[kt])},checks:function(){if(Rt===Fe["3-check"])return[$e[Ot],$e[kt]]},threats:function(){var k=Nt,N=Kr(k),B=[],Y=[],G=[],ce=[],oe=[],Mt=On,_t,Qe,X,rt,bn,Jn,sr;if(vn(0,dn[k]),Ae||x)for(_t=0;_t<120;++_t)_t&136&&(_t+=8),Oe[_t+8]&qr&&Oe[_t]?G.push(on(_t)):Oe[_t+8]&Cn&&B.push(on(_t));for(Nt=N,On=ie,Er(),_t=Ht;_t--;){if(Qe=Vt[_t],bn=Qe>>At&Xn,Jn=Qe>>Ft&Xn,Qe&It.DROP_OR_PROMOTE){if(sr=Qe>>qt,rt=qn[sr]|N,Qe&It.PROMOTION&&sr%3!==1)continue}else rt=Oe[Jn],sr=0;if(Yn(rt,Jn,bn,Qe)&&(gt(Qe,Jn,bn,sr),Zn=_t,(Rt&&zn()||Er()===_t)&&Y.push((Qe&It.DROP?Xe[rt].toLowerCase()+"@":on(Jn))+on(bn)),be(L.pop()),Qe&It.CAPTURE)){for(X=0,_t=Ht;_t>Zn;)if((Vt[--_t]>>At&Xn)===bn){X=1,_t=Zn;break}if(!X){ce.push(on(Jn)+on(bn));continue}}Qe&It.CAPTURE&&sr!==1&&(X=Oe[bn]&124)&&(Hr(k,bn)?(rt=Oe[Jn]&ft,X>rt&&X-rt!==8&&oe.push(on(Jn)+on(bn))):ce.push(on(Jn)+on(bn)))}return Zn=0,Nt=k,On=Mt,{pins:B,checkers:G,mates:Y,undefended:ce,underdefended:oe}},tokenizePgn:zl,fixMove:function(k){var N,B,Y;if(typeof k=="string"){if(/0|[?!+#]$|[18][QNRB]$|^P/i.test(k))return k.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/i,"$1=$2").replace(/^P+/i,"");if(B=k.indexOf("=")>0?-4:-2,N=ze[k.substr(B,2)],typeof N=="number"){if(Oe[N]&Kr(Nt)||/^[a-h]x?[a-h][36]$/.test(k)){if(k.indexOf("x")===-1)return k.slice(0,B)+"x"+k.substr(B)}else if(k.indexOf("x")>-1)return k.replace(/x/g,"");if(Y=k.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])x?([a-h][1-8])=?(.?)$/)){if(Oe[ze[Y[2]]])return{from:Y[2],to:Y[3],promotion:Y[4].toLowerCase()};if(/^\d$/.test(Y[2])){for(k=0,Er(Z[Y[1]],!0),B=0;B<Ht;++B)if(Vt[B]>>At===N&&si(Vt[B]>>Ft&Xn)===8-Y[2]){if(k)return;k=Vt[B]}if(k)return Rn(k,!0)}return Y[1]+Y[3]+Y[4]}}}else if(Oe[ze[k.from]]===(Et|Nt)&&k.to&&k.from[1]===k.to[1]){if(k.from<k.to)return"O-O";if(k.from>k.to)return"O-O-O"}},_hand:[],_history:function(k){return k&&(L=k,J=L.id),L},_lines:function(){return Re},_hashPosition:w,_board:function(){return Oe}},hn&&xt(hn,Wn)||ne(),yt}return zo.variants=Ee,zo}(),Ye=function(je){var Fe="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Ee=["bench","d","eval","flip","isready","ponderhit","stop","uci","ucinewgame"],ze=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],Me=["moves","searchmoves"],Ae=["ponder","infinite","startpos"],x={depth:1,seldepth:1,time:1,nodes:1,multipv:1,cp:1,mate:1,currmovenumber:1,hashfull:1,nps:1,tbhits:1,sbhits:1,cpuload:1,bmc:1,score:2,lowerbound:2,upperbound:2,bestmove:3,ponder:3,baseTurn:3,bestmoveSan:3,ponderSan:3,pv:4,pvSan:4,string:4,refutation:4,currline:4},Je=/(?:Total|Final) Evaluation[\s\S]+\n$/i;function Vt(ot,ft){var Ve,Tn={},Wt=ft.args||[],Mn="",pr=ft.onSignal,qr=ft.onError;function Cn(jn){je.log&&console.log("echo: ",jn.toString()),Mn+=jn.toString(),Mn.slice(-1)===`
`&&Tn.onmessage(Mn.slice(0,-1)+(Mn=""))}return ot.slice(-3).toLowerCase()===".js"&&(Wt=Wt.concat(ot),ot=P.execPath,P.version.substr(1,2)>11&&(Wt.unshift("--experimental-wasm-bulk-memory"),Wt.unshift("--experimental-wasm-threads"))),Ve=spawn(ot,Wt,{stdio:"pipe"}),Ve.stdout.on("data",Cn),Ve.stderr.on("data",Cn),qr&&(Ve.on("error",qr),Ve.stdin.on("error",qr),Ve.on("close",function(Ft){Ft&&qr(new Error("Engine errored with code "+Ft))})),pr&&Ve.on("close",function(Ft,At){pr(At)}),Tn.postMessage=function(jn){je.log&&console.log("postMessage: "+jn),Ve.stdin.write(jn+`
`)},Tn.terminate=function(){Ve.stdin.end(),Ve.kill(),Ve=null},Tn}function Zn(ot){var ft=[],Ve=[],Tn={},Wt={isFakeWorker:!0},Mn,pr=ot.replace(/^[^#]*#/,"");function qr(Ft,At){var qt=document.createElement("script");qt.setAttribute("src",Ft),qt.onload=function(){qt.remove(),At(qt._exports)},qt.onerror=function(Sn){Mn=!0,qt.remove(),Tn.onerror(Sn)},document.head.appendChild(qt)}function Cn(Ft){setTimeout(Ft,1)}function jn(Ft,At){var qt;Mn||(Ft.onmessage?(qt=At.concat(),At.length=0,qt.forEach(function(Xn){try{Ft.onmessage({data:Xn})}catch(Sn){console.error(Sn)}})):setTimeout(jn,5,Ft,At))}return qr(ot,function(Ft){var At=ot.replace(/[?#].*/,""),qt=At.replace(/\/[^\/]+$/,"/"),Xn={locateFile:function(Sn){return Sn.indexOf(".wasm")>-1&&pr?pr:Sn.indexOf(".worker.js")>-1?At+"#"+pr+",worker":qt+Sn}};Ft(Xn).then(function(Sn){Ft=null;function pe(){Sn=null,Mn=!0}window.addEventListener("beforeunload",pe,{once:!0}),Wt.onmessage=function(fe){var Z=fe.data;Sn.onCustomMessage(Z),Z==="quit"&&(Sn=null,Mn=!0,window.removeEventListener("beforeunload",pe))},Sn.addMessageListener(Wt.postMessage)}).catch(function(Sn){Ft=null,Mn=!0,Tn.onerror(Sn)})}),Tn.postMessage=function(Ft){ft.push(Ft),Cn(function(){jn(Wt,ft)})},Wt.postMessage=function(Ft){Ve.push(Ft),Cn(function(){jn(Tn,Ve)})},Tn.terminate=function(){},Tn}function Ht(ot,ft,Ve){var Tn=ft.useFakeWorker&&ft.useFakeWorker[ot.replace(/[?#].*$/,"")],Wt=Tn?Zn(ot):new Worker(ot),Mn={terminate:qr,postMessage:pr};function pr(jn){Wt.postMessage(jn)}function qr(){Wt.terminate()}function Cn(jn){var Ft=jn.concat();jn.length=0,Ft.forEach(function(At){At.cmd?At.cmd.substr(0,2)!=="go"&&Ve.send(At.cmd,At.cb,At.stream):(clearTimeout(At.timer),Ve.getBestMove(At.args,At.cb,At.stream))})}return Wt.onmessage=function(jn){typeof jn.data=="string"&&Mn.onmessage(jn.data)},Wt.onerror=function(jn){if(Ve.fallbackPath&&Ve.fallbackPath!==ot){try{jn.preventDefault()}catch{}try{Wt.terminate()}catch{}return Wt=Ht(Ve.fallbackPath,ft,Ve),Wt.onmessage=function(Ft){Mn.onmessage(Ft)},Cn(Ve._activeCommands()),Cn(Ve._bestMoveQueue()),!1}if(ft.onError)return ft.onError(jn)},Mn}function an(ot,ft){ft.fallbackPath=ot.pathToNonWasmEngine,ft.path=ot.enginePath||ot.pathToEngineWorker,ft.wasmPath=ot.pathToWasmEngine,ot.engines&&(ot.engines.multiThreaded&&je.supportsMultithreading()?!ot.engines.multiThreadedNoSIMD||je.supportsSIMD()?(ft.path=ot.engines.multiThreaded.loader,ft.wasmPath=ot.engines.multiThreaded.engine):(ft.path=ot.engines.multiThreadedNoSIMD.loader,ft.wasmPath=ot.engines.multiThreadedNoSIMD.engine):ot.engines.singleThreaded&&(ft.path=ot.engines.singleThreaded.loader,ft.wasmPath=ot.engines.singleThreaded.engine),ft.fallbackPath=ot.engines.asm||ft.fallbackPath)}function ie(ot,ft){var Ve;return an(ot,ft),Ve=ft.path,(ft.fallbackPath&&typeof WebAssembly>"u"||!Ve)&&(Ve=ft.fallbackPath),ft.wasmPath&&(Ve+="#"+ft.wasmPath),Ht(Ve||"stockfish.js",ot,ft)}function Ot(ot){for(var ft=ot.split(" "),Ve=ft.length,Tn=ft[0]==="info"?1:0,Wt={mtype:ft[0]},Mn,pr;Tn<Ve;++Tn)if(pr=ft[Tn],pr)if(Mn=x[pr],Mn===1){for(;!ft[++Tn]&&Tn<Ve;);Wt[pr]=Number(ft[Tn])}else if(Mn===2)Wt[pr]=!0;else if(Mn===3){for(;!ft[++Tn]&&Tn<Ve;);Wt[pr]=ft[Tn]}else for(Wt[pr]=[],++Tn;Tn<Ve;++Tn)if(!x[ft[Tn]])ft[Tn]&&Wt[pr].push(ft[Tn]);else{--Tn;break}return(Wt.bestmove==="(none)"||Wt.bestmove==="0000")&&(Wt.bestmove=void 0,Wt.bestmoveSan=void 0),(Wt.ponder==="(none)"||Wt.ponder==="0000")&&(Wt.ponder=void 0,Wt.ponderSan=void 0),Wt}function kt(ot){var ft=ot.indexOf(" ");return ft===-1?ot:ot.substr(0,ft)}function gr(ot){return(ot+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,function(ft,Ve,Tn,Wt){return" "+(3-Tn)+"+"+(3-Wt)+Ve})}function Ar(ot){return(ot+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,function(ft,Ve,Tn,Wt){return Wt+" +"+(3-Ve)+"+"+(3-Tn)})}function fi(ot,ft){var Ve,Tn=kt(ot),Wt,Mn,pr;for(Tn==="uciok"||Tn==="option"?Ve="uci":Tn==="readyok"||Tn==="ready"?Ve="isready":Tn==="json"||ot.indexOf("info string CEEError")>=0?Ve="fetch":Tn==="bestmove"||Tn==="info"?Ve="go":Ve="other",pr=ft.length,Mn=0;Mn<pr;Mn+=1)if(Wt=kt(ft[Mn].cmd),Wt===Ve||Ve==="other"&&(Wt==="d"||Wt==="eval"))return Mn;return 0}function at(ot){var ft=ot.match(/id name ((\S+) ([\d.a-z]+).*)/i);if(ft)return{all:ft[1].trim(),short:ft[2],version:ft[3],full:ft[2]+" "+ft[3],wasm:/ wasm/i.test(ot),multithreaded:/ multithreaded/i.test(ot)}}function Jt(ot,ft){var Ve={},Tn,Wt=[],Mn,pr=[],qr,Cn=null;function jn(pe){var C,fe=0,Z,Xe,De;if(pe.indexOf(`
`)>-1){for(Xe=pe.split(`
`),De=0;De<Xe.length;De+=1)jn(Xe[De]);return}if(je.log&&console.log("debug (onmessage): "+pe),Ve.stream&&Ve.stream(pe),!Wt.length||pe.indexOf("No such option")===0||pe.indexOf("Stockfish")===0||pe.indexOf("Komodo")===0||pe.indexOf("Explanation Engine")===0||pe.indexOf("info string variant")===0){if(ot.ceeMode&&pe.indexOf("Explanation Engine")===0){var ke=pe.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\s*\(C\)/);ke?Cn={date:ke[1],increment:ke[2]}:(ke=pe.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\.([0-9]+)/),Cn={major:parseInt(ke[1]),minor:parseInt(ke[2]),patch:parseInt(ke[3])})}return}if(fe=fi(pe,Wt),Z=Wt[fe],Z.stream&&!Z.discard&&Z.stream(pe),typeof Z.message>"u"?Z.message="":Z.message!==""&&(Z.message+=`
`),Z.message+=pe,pe.indexOf("uciok")===0)Ve.name=at(Z.message),C=!0;else if(pe.indexOf("ready")===0)C=!0;else if((pe.indexOf("bestmove")===0||kt(pe)==="bestmove")&&Z.cmd!=="bench")C=!0,Z.message=pe;else if(Z.cmd==="d")(pe.indexOf("Legal uci moves")===0||pe.indexOf("Key is")===0)&&(Z.done=!0,C=!0);else if(Z.cmd.indexOf("fetch")===0)try{var $n=Z.message.split(`
`).filter(function(j){return j.startsWith("json")}).join(`
`);$n&&(Z.message=JSON.parse($n.replace(/^json /mg,"").replace(/\n/g,"")),C=!0)}catch{}else Z.cmd==="eval"?Je.test(Z.message)&&(C=!0):(pe.indexOf("pawn key")===0||pe.indexOf("Nodes/second")===0||pe.indexOf("Unknown command")===0)&&(C=!0);C&&(Wt.splice(fe,1),Z.cb&&!Z.discard?Z.cb(Z.message):Z.ondiscard&&Z.ondiscard())}function Ft(pe){return pe!=="ucinewgame"&&pe!=="flip"&&pe!=="stop"&&pe!=="ponderhit"&&pe.indexOf("position")!==0&&pe.indexOf("setoption")!==0&&pe.indexOf("variation")!==0&&pe.indexOf("threat-variation")!==0&&pe.indexOf("push")!==0&&pe.indexOf("pop")!==0&&pe.indexOf("serve")!==0&&pe.indexOf("speech")!==0}Ve.send=function(pe,C,fe){var Z;pe=String(pe).trim(),Ft(pe)?Wt[Wt.length]={cmd:pe,cb:C,stream:fe}:Z=!0,Tn&&(je.log&&console.log("stdin: "+pe),Tn.postMessage(pe),Z&&C&&setTimeout(C,0))},Ve._activeCommands=function(){return Wt},Ve._bestMoveQueue=function(){return pr},Ve.quit=function(){if(Tn&&Tn.terminate){try{Ve.send("quit")}catch{}Tn.terminate(),Tn=null,Ve.ready=void 0}clearTimeout(Mn)},Ee.forEach(function(C){Ve[C]=function(Z,Xe){Ve.send(C,Z,Xe)}}),ze.forEach(function(C){Ve[C.cmd]=function(Z,Xe,De){var ke=[C.cmd];qr&&Z.fen&&(Z.fen=gr(Z.fen)),C.args.forEach(function(j){if(Z[j]||Z[j]===0){if(Me.indexOf(j)>-1){if(!Z[j]||!Z[j].length)return;Array.isArray(Z[j])&&(Z[j]=Z[j].join(" "))}ke.push(j),Ae.indexOf(j)===-1&&ke.push(Z[j])}}),Ve.send(ke.join(" "),Xe,De)}}),Ve.setoption=function(pe,C){Ve.send("setoption name "+pe+" value "+C)},Ve.setVariant=function(pe){var C;pe!==qr&&(C=String(pe).toLowerCase().replace(/ |-/g,""),!pe||C==="chess"?(C=void 0,Ve.setoption("UCI_Variant","chess"),Ve.setoption("UCI_Chess960","false")):C==="chess960"?(Ve.setoption("UCI_Variant","chess"),Ve.setoption("UCI_Chess960","true")):(C==="threecheck"&&(C="3check"),Ve.setoption("UCI_Variant",C),Ve.setoption("UCI_Chess960","false")),qr=C)},Ve.loadBook=function(pe,C){Ve.pathToBook=pe,H.loadBook(pe,function(Z,Xe){Ve.book=Xe,Ve.bookLoaded=!0,Z&&(console.error("Error loading opening book."),console.error(Z),Ve.pathToBook=null,Ve.bookLoaded=!1),C()})},Ve.getBookMove=function(pe){var C=je.createGame(pe),fe=Ve.book.pick({fen:C.fen(),type:typeof pe.bookPick<"u"?pe.bookPick:"random",chess960:C.header().Variant==="Chess960"}),Z=fe&&C.move(fe);if(Z)return{moveSan:Z.san,moveLan:fe,move:{from:Z.from,to:Z.to,promotion:Z.promotion||null},baseTurn:C.turn()===1?"b":"w",pv:[{moveSan:Z.san,moveLan:fe}],depth:null,score:null,mateIn:null,isBookMove:!0}};function At(){var pe=1,C=[],fe=[],Z,Xe,De=null,ke=pr[0].args,$n=pr[0].cb,j=pr[0].stream,Se,Le=1,Ge,ue=[],st=14,Bt=Jt._previousCP;pr[0].started=!0,Jt._previousCP=null;function Qn(en){var on=[],Kr=fe[en]||lo(C[en]);return C[en].forEach(function(Ji,Rr){on.push({moveSan:Kr[Rr],moveLan:Ji})}),on}function qn(en,on,Kr,wr){var Ji;for(Ji=C.length-1;Ji>=0;Ji-=1)if(C[Ji][0]===en)return Qn(Ji);return Kr?[{moveSan:on,moveLan:en},{moveSan:wr,moveLan:Kr}]:on?[{moveSan:on,moveLan:en}]:[]}function ai(en){var on=.03*Math.pow(32,en.depth/st);en.cp=Bt+(en.cp-Bt)*on}function It(en){en.mate===0?(en.mateIn=0,en.cp=-31800*Le):(en.mateIn=Number(en.mate*Le)||null,typeof en.mateIn=="number"&&!isNaN(en.mateIn)&&typeof en.cp!="number"?en.cp=31800*Le*(en.mate/Math.abs(en.mate)):(en.cp*=Le,Math.abs(en.cp)===9&&(en.cp=0),ke.normalize&&en.depth<=st&&typeof Bt=="number"&&en.multipv===1&&ai(en))),en.score=en.cp/100}function Qi(en){var on=Ot(en);if($r(on),pe>st&&Z<5e3&&Z>-5e3&&(Jt._previousCP=Z),on.pv=qn(on.moveLan,on.moveSan),on.pv.length===1&&on.ponder&&(on.pv=qn(on.moveLan,on.moveSan,on.ponder,on.ponderSan)),ue.length>1)ue.splice(ue.indexOf(on.moveLan),1),ke.searchmoves=ue,ke.getNextBest=0,qt(ke,function(){$n(on)},function(wr){j&&(wr.multipv=2,j(wr))});else if($n)try{$n(on)}catch(Kr){console.error(Kr)}pr.shift(),clearTimeout(Mn),pr.length>0&&At()}function $r(en){var on;en.baseTurn=Se,en.cp=Z,en.score=Z/100,en.mate=Xe,en.mateIn=De,en.depth=pe,en.moveLan=en.bestmove,en.moveLan&&(en.move=je.uciToObj(en.moveLan)[0],on=Ge.move(en.move),on&&(en.moveSan=en.bestmoveSan=on.san,en.ponder&&(on=Ge.move(je.uciToObj(en.ponder)[0]),on&&(en.ponderSan=on.san,Ge.undo(!0))),Ge.undo(!0)))}function lo(en){var on,Kr=en.length,wr=[],Ji;for(on=0;on<Kr&&(Ji=Ge.move(je.uciToObj(en[on])[0]),!!Ji);++on)wr.push(Ji.san);for(;on>0;--on)Ge.undo(!0);return wr}function ss(en){var on=Ot(en);on.score&&(on.baseTurn=Se,It(on),!on.multipv&&on.depth&&(on.multipv=1),(on.multipv===1||on.depth===0)&&(Z=on.cp,Xe=on.mate,De=on.mateIn)),on.pv&&j&&(on.pvSan=lo(on.pv)),on.pv&&!(on.lowerbound||on.upperbound)&&(C.push(on.pv),j&&fe.push(on.pvSan)),on.depth>pe?pe=on.depth:on.mtype==="bestmove"&&$r(on),j&&!(on.mateIn===0&&on.pv)&&j(on),si()}function si(){ke.timeout&&(clearTimeout(Mn),pr[0].timer=Mn=setTimeout(function(){Ve.stop(),$n&&($n(),$n=void 0)},ke.timeout))}ke.difficulty>=0&&ke.difficulty<20?(Ve.setoption("Skill Level",ke.difficulty),ke.maximumError>=0&&ke.maximumError<=4999&&Ve.setoption("Skill Level Maximum Error",ke.maximumError),ke.errorProbability>=1&&ke.errorProbability<=128&&Ve.setoption("Skill Level Probability",ke.errorProbability)):Ve.setoption("Skill Level",20),ke.contempt!==void 0?Ve.setoption("Contempt",ke.contempt):Ve.setoption("Contempt","0"),ke.multiPv>1?Ve.setoption("MultiPV",ke.multiPv):Ve.setoption("MultiPV",1),!ke.movetime&&(!ke.wtime||!ke.btime)&&!ke.depth&&(ke.btime=ke.btime||72e3,ke.wtime=ke.wtime||72e3),(ke.startpos||!ke.fen)&&!ke.moves&&!ke.variant?(Se="w",Ge=je.createGame({disableHashing:!0})):(Ge=je.createGame({fen:ke.fen?Ar(ke.fen):Fe,moves:ke.moves,variant:ke.variant,disableHashing:!0}),Ge.turn()===Ge.WHITE?Se="w":(Se="b",Le=-1)),Ve.setVariant(ke.variant),Ve.position(ke),Ve.go(ke,Qi,ss),ke.getNextBest&&$n&&Ge.moves({verbose:!0}).forEach(function(on){on=je.normalizeMoveObj(on),ue.push(on.from+on.to+(on.promotion||""))}),si()}function qt(pe,C,fe){pr.push({args:pe,cb:C,stream:fe}),pr.length===1&&At()}Ve.getBestMove=function(pe,C,fe){var Z;if(pe=pe||{},pe.fen=pe.fen||pe.baseFen,pe.is960&&(pe.variant="Chess960"),Ve.bookLoaded&&pe.useBook&&(Z=Ve.getBookMove(pe),Z))return setTimeout(function(){Z.mtype="bestmove",C(Z)},0);qt(pe,C,fe)},Ve.stopAll=function(pe){var C,fe=Wt.length,Z=0;function Xe(){Z-=1,Z===0&&pe()}for(pr=[],C=0;C<fe;C+=1)je.log&&console.log("debug (stop_moves): "+C,kt(Wt[C].cmd)),kt(Wt[C].cmd)==="go"&&!Wt[C].discard&&(Ve.stop(),Wt[C].discard=!0,pe&&(Z+=1,Wt[C].ondiscard=Xe));pe&&!Z&&Ve.isready(pe)},Ve.restartEngine=function(pe){return Ve.stopAll(),Ve.quit(),Wt=[],pr=[],Ve.bookLoaded&&!ot.book&&(ot=JSON.parse(JSON.stringify(ot)),ot.book=Ve.book),Jt(ot,pe)},Ve.stopFast=function(pe,C){var fe,Z=Ve,Xe;if(Ve._isStopping)return Ve._stopQueue.push(pe);Xe=function(De){Ve._stopQueue.forEach(function(ke){ke(De)}),Ve._stopQueue=null,Ve._isStopping=!1},Ve._isStopping=!0,Ve._stopQueue=[pe],Ve.stopAll(function(){clearTimeout(fe),Xe(Ve)}),fe=setTimeout(function(){Z.restartEngine(Xe)},Math.max(+C||5e3,50))};function Xn(){Ve.uci(function(){ot.settings&&Object.keys(ot.settings).forEach(function(fe){Ve.setoption(fe,ot.settings[fe])}),Ve.ready=!0,Sn()})}function Sn(){Ve.ready&&(Ve.bookLoaded||!Ve.pathToBook)&&ft&&ft(Ve)}return typeof Worker>"u"?!1:(ot.ceeMode&&(Et(Ve,ot),Ve.ceeVersion=function(){return JSON.parse(JSON.stringify(Cn))}),Tn=ie(ot,Ve),Tn.onmessage=jn,ot.book&&(Ve.book=ot.book,Ve.bookLoaded=!0,Ve.pathToBook=ot.pathToBook),Ve.getFenFromMoves=je.getFenFromMoves,Ve.getLegalMoves=je.getLegalMoves,Ve.getPositionInfo=je.getPositionInfo,Ve.isFenValid=je.isFenValid,Ve.ready=!1,Xn(),!Ve.book&&ot.pathToBook&&Ve.loadBook(ot.pathToBook,Sn),Ve)}function Et(ot,ft){var Ve=1e3,Tn=0,Wt,Mn;function pr(Cn){function jn(Ft){var At=jn.callbacks;jn.callbacks={},jn.original&&jn.original(Ft);for(var qt in At)At[qt](Ft)}return jn.callbacks={},jn.original=Cn,jn}ft.onError=Wt=pr(ft.onError),ft.onSignal=Mn=pr(ft.onSignal);function qr(Cn,jn,Ft,At){var qt,Xn=Date.now(),Sn=!1,pe=++Tn;function C(){clearTimeout(qt),delete Wt.callbacks[pe],delete Mn.callbacks[pe],Sn=!0}function fe(De){Sn||(C(),At({data:De,action:jn,uci:Cn},Cn))}function Z(De){fe({msg:"CEE process crashed unexpectedly",code:je.ERROR_CODES.CRASH,exitCode:De,err:new Error("CEE process exited with "+De)})}Wt.callbacks[pe]=Z,Mn.callbacks[pe]=Z,qt=setTimeout(function(){fe({msg:"CEE timed out",code:je.ERROR_CODES.TIMEOUT,timeout:Ve,duration:Date.now()-Xn,err:new Error("CEE timed out")})},Ve);for(var Xe=0;Xe<Cn.length;++Xe)ot.send(Cn[Xe]);ot.send("fetch "+jn,function(ke){Sn||(C(),Ft(ke,Cn))},function(ke){ke.indexOf("info string CEEError")>=0?fe({msg:"CEE crashed with error code",code:je.ERROR_CODES.ERROR,log:ke.match(/info string CEEError\s*(.*)/)[1],err:new Error(ke.match(/info string CEEError\s*(.*)/)[1])}):ot.ceeDebug&&ke.indexOf("not recognized")>=0&&fe({msg:"CEE received unknown UCI option (engine.ceeDebug mode on)",option:ke,code:je.ERROR_CODES.NONFATAL_ERROR,err:new Error(ke)})})}ot.fetch=function(Cn,jn,Ft){var At,qt;Cn=Cn||[],At=Cn.action||"analysis",Array.isArray(Cn)?qt=Cn:(qt=Cn.uciCommands?Cn.uciCommands.map(function(Xn){return Xn}):[],Cn.startFen&&(Cn.options=Cn.options||{},typeof Cn.options.ScoreWhiteToMove>"u"&&(Cn.options.ScoreWhiteToMove=!0),typeof Cn.options.SerializeLikeCEAC>"u"&&(Cn.options.SerializeLikeCEAC=!0),je.CEE_LIB.addOptions(qt,Cn.options),je.CEE_LIB.addVariant(qt,Cn.variant),je.CEE_LIB.addPosition(qt,Cn.startFen)),je.CEE_LIB.addVariations(qt,Cn.evals&&Cn.evals[0]),je.CEE_LIB.addVariations(qt,Cn.threats&&Cn.threats[0],"threat-variation"),(Cn.moves||[]).forEach(function(Xn,Sn){var pe=Sn+1;je.CEE_LIB.addPush(qt,Xn),je.CEE_LIB.addVariations(qt,Cn.evals&&Cn.evals[pe]),je.CEE_LIB.addVariations(qt,Cn.threats&&Cn.threats[pe],"threat-variation")})),qr(qt,At,jn,Ft)},ot.fetch.setTimeout=function(Cn){Ve=Cn},je.ERROR_CODES={TIMEOUT:1,CRASH:2,ERROR:3,NONFATAL_ERROR:4}}return Jt},tt=function(){var je=ae(),Fe,Ee="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ze=252,Me=255,Ae={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},x="pnbrq",Je=512,Vt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",Zn="qnrbkp";function Ht(C){var fe,Z=C.length,Xe=[],De,ke,$n;for(fe=0;fe<Z;fe+=2)$n={},De=Vt.indexOf(C[fe]),ke=Vt.indexOf(C[fe+1]),ke>63&&($n.promotion=Zn[Math.floor((ke-64)/3)],ke=De+(De<16?-8:8)+(ke-1)%3-1),De>75?$n.drop=Zn[De-79]:$n.from=Vt[De%8]+(Math.floor(De/8)+1),$n.to=Vt[ke%8]+(Math.floor(ke/8)+1),Xe.push($n);return Xe}function an(C){var fe,Z,Xe="",De,ke;for(Array.isArray(C)||(C=[C]),Z=C.length,fe=0;fe<Z;fe+=1)C[fe].drop?De=79+Zn.indexOf(C[fe].drop):De=Vt.indexOf(C[fe].from[0])+(C[fe].from[1]-1)*8,ke=Vt.indexOf(C[fe].to[0])+(C[fe].to[1]-1)*8,C[fe].promotion&&(ke=Zn.indexOf(C[fe].promotion)*3+64+(ke<De?9+ke-De:ke-De-7)),Xe+=Vt[De]+Vt[ke];return Xe}function ie(C){var fe=C.split(" "),Z,Xe=fe.length,De=[],ke;if(C)for(Z=0;Z<Xe;++Z)ke=fe[Z],ke.length===4?ke[1]==="@"?De.push({drop:ke[0].toLowerCase(),to:ke.substr(2,2)}):De.push({from:ke.substr(0,2),to:ke.substr(2,2)}):De.push({from:ke.substr(0,2),to:ke.substr(2,2),promotion:ke[4]});return De}function Ot(C,fe){return C.san===fe.san||C.to===fe.to&&(C.from===fe.from||!C.from&&!fe.from)&&(C.promotion===fe.promotion||!C.promotion&&!fe.promotion)&&(C.drop===fe.drop||!C.drop&&!fe.drop)}function kt(C,fe,Z){var Xe=[],De,ke,$n,j,Se,Le,Ge,ue,st,Bt,Qn=1,qn=8,ai=1,It=8,Qi={verbose:!0};for(Bt=C.turn(),st=3-Bt,j=ae("/",fe),j.turn(st),Z&&(Qn=qn=+Z[1],ai=It=Z.charCodeAt(0)-96),De=Qn;De<=qn;++De)for(ke=ai;ke<=It;++ke)Se=String.fromCharCode(ke+96)+De,$n=C.get(Se),$n&&$n.color===st&&(j.put($n,Se,!0),$n.type==="p"?(Le=String.fromCharCode(ke-1+96)+(De+(st===1?1:-1)),Ge=String.fromCharCode(ke+1+96)+(De+(st===1?1:-1)),j.put({type:"n",color:Bt},Le,!0),j.put({type:"n",color:Bt},Ge,!0)):$n.type==="k"&&(ue=C.fen().split(" ")[2],ue!=="-"&&j.load(j.fen().replace(/^(\S+\s\S\s)(\S+)/,"$1"+ue),fe,!0,!0)),Xe=Xe.concat(j.moves(Qi)),j.remove(Se,!0),$n.type==="p"&&(j.remove(Le,!0),j.remove(Ge,!0)));return fe&&C.hand()&&(j._hand[st]=18721,Xe=Xe.concat(j.moves({verbose:!0}).filter(function($r){return!Z||$r.to===Z}))),Xe.forEach(function($r){Mn($r)}),Xe}function gr(C,fe){var Z=C.header().Variant,Xe=kt(C,Z,fe.from),De,ke,$n,j,Se,Le=3-C.turn();for(De=Xe.length-1;De>=0;--De)if(ke=Xe[De],Ot(ke,fe)){$n=!0;break}if($n)return ke.drop?C.put({type:ke.drop,color:Le},ke.to):(j=C.remove(ke.from,!0),ke.flags===je.FLAGS.KSIDE_CASTLE?(Se=C.remove(Z==="Chess960"?ke.to:"h"+ke.from[1],!0),C.put(j,"g"+ke.from[1],!0),C.put(Se,"f"+ke.from[1])):ke.flags===je.FLAGS.QSIDE_CASTLE?(Se=C.remove(Z==="Chess960"?ke.to:"a"+ke.from[1],!0),C.put(j,"c"+ke.from[1],!0),C.put(Se,"d"+ke.from[1])):(ke.promotion&&(j.type=ke.promotion,j.promoted=!0),Se=C.get(ke.to),C.put(j,ke.to,j.type!=="k"&&j.type!=="r"&&(!Se||Se.color!==Le||Se.type!=="r")))),ke;if(fe.from&&(C.turn(Le),fe=C.fixMove(fe),C.turn(3-Le),fe))return gr(C,{san:fe,from:fe.from})}function Ar(C,fe){var Z=fe?{}:[],Xe=C._board(),De,ke,$n;if(fe)for(De=112;De>=0;++De)De&136&&(De-=24),(ke=Xe[De])&&($n=Vt[De&7]+(8-(De>>4)),Z[$n]={type:Ae[ke&ze],color:ke&3,promoted:(ke&Je)!==0,square:$n});else for(De=112;De>=0;++De)De&136&&(De-=24),(ke=Xe[De])&&Z.push({type:Ae[ke&ze],color:ke&3,promoted:(ke&Je)!==0,rank:8-(De>>4),file:(De&7)+1});return Z}function fi(C,fe){var Z=Math.min(Math.max(.20773843*Math.atan(2.49085889*C/100-2.47841945*fe/100)+.02262979*C/100-.02256839*fe/100+.52239679,0),1),Xe=Math.min(Math.max(-.20720905*Math.atan(2.49626837*C/100-2.48220286*fe/100)+-.02352551*C/100+.02172627*fe/100+.49443923,0),1),De=Math.min(Math.max(Math.exp(.037043456*C/100+.178106427*fe/100+-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(C/100-fe/100,2))+-.001625539,0),1),ke=Z+Xe+De;return{w:Z/ke,b:Xe/ke,d:De/ke}}function at(C,fe){var Z,Xe,De,ke;if(C=C||{},C.disableHashing=!0,Z=Ve(C),!Z)return null;if(fe){if(De=Z.move(fe),!De)return null;Z.extended||Mn(De)}return ke=Z.fen(),!C.skipValidation&&!Z.isPositionValid(C)?null:(Xe=ke.split(" "),{fen:ke,pieces:Ar(Z),sideToMove:Z.turn(),castling:Xe[2],epSquare:Xe[3]==="-"?null:Xe[3],halfMoves:+Xe[4],moveNumber:+Xe[5],move:De,hand:Z.hand(),checks:Z.checks()})}function Jt(C){var fe=Ve(C),Z,Xe,De,ke,$n,j,Se=[""],Le=[],Ge,ue,st;if(!fe)return!1;for(ue=fe.header(),st=ue.Variant||"",j=fe.hashes(),Z=typeof fe.origHistory=="function"?fe.origHistory(!0):fe.history(!0),$n=j.length,Xe=[j[0][0],j[0][1]],Le.push(H.to64BitHex(Xe)+st),j[0]=H.to64BitHex(j[0]),De=1;De<$n;++De)Xe[0]=(Xe[0]^j[De][0]*(De+58465))>>>0,Xe[1]=(Xe[1]^j[De][1]*(De+984))>>>0,j[De]=H.to64BitHex(j[De]),Le.push(H.to64BitHex(Xe)+st),ke=De-1,Mn(Z[ke]),Ge=(Z[ke].from?Z[ke].from:Z[ke].drop.toUpperCase()+"@")+Z[ke].to+(Z[ke].promotion||""),ke&&(Ge=Se[ke]+" "+Ge),Se.push(Ge);return{startingFen:ue.FEN||Ee,hashes:j,fingerprints:Le,moves:Se,variant:ue.Variant}}function Et(C,fe,Z,Xe){var De,ke,$n,j,Se,Le,Ge,ue,st,Bt,Qn;for(Z=Z||{},typeof fe=="string"&&(fe=fe.trim().split(" ")),$n=fe.length,De=0;De<$n;De+=1){if(fe[De].board==="b"||fe[De].board==="B"?Se=C.siblingGame:Se=C,typeof fe[De].moveLan=="string"?Le=ie(fe[De].moveLan)[0]:typeof fe[De]=="string"?Le=ie(fe[De])[0]:fe[De].san?Le=fe[De].san:Le=fe[De],!Se.move(Le))if(Z.autoPromote){if(Z.autoPromote===!0?Le.promotion="q":Le.promotion=Z.autoPromote,!Se.move(Le)){if(Z.skipBadLines)break;return!1}}else{if(Z.skipBadLines)break;return!1}if(Ge=Se._history(),ue=Ge[Ge.length-1],Xe&&(st=parseInt(Xe[De],10)),(typeof st!="number"||isNaN(st))&&(st=parseInt(fe[De].time,10)),typeof st=="number"&&!isNaN(st)&&(ue.time=st,st=void 0),fe[De].firstComment&&(Ge.initComment=fe[De].firstComment),fe[De].comment&&(ue.comment=fe[De].comment),fe[De].annotation&&(ue.annotation=fe[De].annotation),fe[De].additionalAnnotation&&(ue.additionalAnnotation=fe[De].additionalAnnotation),fe[De].commands&&(ue.commands=fe[De].commands),fe[De].lines)for(j=fe[De].lines.length,ke=0;ke<j;++ke){if(Bt=C._history().id,C.createVariation(),Qn=Et(C,fe[De].lines[ke],Z),!Qn&&!Z.skipBadLines)return!1;C.selectLine(Bt)}}return!0}function ot(C,fe,Z){var Xe=[Ht(fe[0]),Ht(fe[1])],De=[0,0],ke=[0,0],$n=Xe[0].length+Xe[1].length,j=Math.max(Z[0][0]|0,Z[0][1]|0,Z[1][0]|0,Z[1][1]|0),Se,Le=[0,0],Ge=[0,0],ue,st;for(j+=600-j%600,Se=[[j,j],[j,j]];$n--;){if(Ge[0]=Le[0]+Se[0][ke[0]]-Z[0][De[0]]||0,Ge[1]=Le[1]+Se[1][ke[1]]-Z[1][De[1]]||0,ue=Ge[0]<=Ge[1]?0:1,Xe[ue][De[ue]]||(ue^=1),st=ue?C.siblingGame:C,(!st.move(Xe[ue][De[ue]])||$n&&st.inCheckmate()&&st.undo(!0))&&(ue^=1,st=ue?C.siblingGame:C,!st.move(Xe[ue][De[ue]])))return!1;st._history()[De[ue]].time=Z[ue][De[ue]],Se[ue][ke[ue]]=Z[ue][De[ue]],Le[ue]=Ge[ue],ke[ue]^=1,++De[ue]}return!0}function ft(C){var fe,Z=-1,Xe=0,De;function ke(j,Se,Le){for(var Ge=j[Se],ue;typeof(ue=Ge.parentId)=="number";){if(ue===Le)return Ge.atMoveNode;Ge=j[ue]}return!1}function $n(j,Se){var Le={moveTime:j.moveTime,firstComment:j.firstComment,comment:j.comment,annotation:j.annotation,additionalAnnotation:j.additionalAnnotation,commands:j.commands};Object.keys(Le).forEach(function(Ge){j[Ge]=Se[Ge],Se[Ge]=Le[Ge]})}C.extended||(C.extended=!0,fe={header:C.header,load:C.load,loadPgn:C.loadPgn,createVariation:C.createVariation,undo:C.undo,pgn:C.pgn},C._move=C.move,C.undo=function(){return C.siblingGame?C.deleteBughouseMove(C.curBughouseMove()):C.deletePosition(Z,Xe)},C.getMove=function(j){return j&&(typeof j=="string"||j.to&&(j.from||j.drop))&&C._move(j)&&Mn(fe.undo())||null},C.premove=function(){var j,Se=[];return{queue:Se,move:function(Le){var Ge;return j=j||ae(C.fen(),C.header().Variant),Ge=gr(j,Le),!Ge||Xe||Z!==C._history().length-1?(Se.length||(j=void 0),null):(Se.push(Ge),Ge)},consume:function(){var Le=Se.shift(),Ge,ue,st;if(Le){if(Ge=C.move(Le),Ge){if(j=void 0,ue=Se.length,ue)for(j=ae(C.fen(),C.header().Variant),st=0;st<ue;++st)gr(j,Se[st]);return Ge}C.premove.cancel()}},moves:function(Le){return!Xe&&Z===C._history().length-1&&kt(j||C,C.header().Variant,Le)},getPieces:function(Le){return Ar(j||C,Le)},fen:function(){return(j||C).fen()},cancel:function(){Se.length=0,j=void 0}}}(),C.getPieces=function(j){return Ar(C,j)},C.material=function(){var j=C.getPieces(),Se={imbalance:0,white:{p:8,n:2,b:2,r:2,q:1,count:0},black:{p:8,n:2,b:2,r:2,q:1,count:0}},Le,Ge={p:1,n:3,b:3,r:5,q:9,k:0},ue,st;for(Le=j.length-1;Le>=0;--Le)j[Le].color===1?(ue=Se.white,st=Se.black):(ue=Se.black,st=Se.white),st[j[Le].type]&&--st[j[Le].type],ue.count+=Ge[j[Le].type];return Se.imbalance=Se.white.count-Se.black.count,Se},C.origHistory=C.history,C.history=function(j,Se){var Le=[],Ge,ue=C._history(),st=ue.length,Bt=C._lines(),Qn,qn;for(typeof j=="boolean"&&(j={verbose:j}),j=j||{},Se&&(j.noParentLines=Se),j.toCurrent&&(st=C.ids().move+1);;){if(--st===-1)if(ue.id&&!j.noParentLines){st=ue.atMoveNode,ue=Bt[ue.parentId];continue}else break;if(j.verbose){Ge={};for(Qn in ue[st])if(ue[st][Qn]&&typeof ue[st][Qn]=="object"){Ge[Qn]=ue[st][Qn].constructor===Array?[]:{};for(qn in ue[st][Qn])Ge[Qn][qn]=ue[st][Qn][qn]}else Ge[Qn]=ue[st][Qn];Le.unshift(Ge)}else Le.unshift(ue[st].san)}return Le},C._getPos=function(j,Se){var Le,Ge,ue;return typeof j!="number"&&(j=Z),typeof Se!="number"&&(Se=Xe),Ge=C._lines(),Le=Ge[Se],j>=0?Le[j]:Le.id?Le.atMoveNode?Ge[Le.parentId][Le.atMoveNode-1]:C._getPos(Le.atMoveNode-1,Le.parentId):(ue={fen:fe.header().FEN||Ee,hash:Le.hash,initial:!0,ids:{move:-1,line:0}},C.siblingGame&&(ue.bughouseOrder=-1),ue)},C.move=function(j,Se){var Le,Ge=C._history(),ue,st,Bt;if(j&&(typeof j=="string"||j.to&&(j.from||j.drop))){if(Xe===Ge.id&&Z<Ge.length-1||Se){if(C.moveForward(Se,j))return!0;Z<Ge.length-1&&(C.selectPosition(Z+1),C.createVariation(),Ge=C._history())}C.siblingGame&&(st=C.isDependent?C.siblingGame.fen():C.fen()),Le=C._move(j),Le&&(Mn(Le),Xe=Ge.id,Z=Ge.length-1,ue=Ge[Z],Bt=C._getPos(Z-1),C.siblingGame?(ue.fen=C.isDependent?C.siblingGame.fen():C.fen(),ue.beforeFen=st,ue.siblingIds=C.siblingGame.ids()):(ue.fen=C.fen(),ue.beforeFen=Bt.fen),Bt.initial?(ue.moveNumber=0,ue.previous=null):(ue.moveNumber=Bt.moveNumber+1,ue.previous=Bt.ids),Xe&&Z===0&&C._lines()[Ge.parentId][Ge.atMoveNode].move===ue.move&&(ue.isContinuation=!0),ue.flags=Le.flags,ue.to=Le.to,ue.from=Le.from,ue.drop=Le.drop,ue.capturedStr=Le.captured,ue.promotion=Le.promotion,ue.piece=Le.piece,Le.promoted&&(ue.promoted=!0),Le.capturedPromotedPawn&&(ue.capturedPromotedPawn=!0),ue.ids={move:Z,line:Xe})}return Le},C.moveDetails=function(j){return j=j||C._history()[Z],j&&(j.lines=j.lines||null,j.flags===je.FLAGS.KSIDE_CASTLE?(j.rookFrom=C.header().Variant==="Chess960"?j.to:"h"+j.to[1],j.rookTo="f"+j.to[1],j.kingTo="g"+j.to[1]):j.flags===je.FLAGS.QSIDE_CASTLE?(j.rookFrom=C.header().Variant==="Chess960"?j.to:"a"+j.to[1],j.rookTo="d"+j.to[1],j.kingTo="c"+j.to[1]):j.flags===je.FLAGS.EP_CAPTURE&&(j.epCapture=j.to[0]+j.from[1])),j},C.header=C.headers=function(j){var Se=fe.header(j);return C.siblingGame&&ft(C.siblingGame),Se},C.load=function(j,Se,Le,Ge){var ue=fe.load(j,Se,Le,Ge);return C.siblingGame&&ft(C.siblingGame),ue&&!Le&&(Z=-1,Xe=0),ue},C.removeEmptyLines=function(){var j=C._lines(),Se,Le;for(Se=j.length-1;Se>0;--Se)j[Se].length||(j[Se]=void 0,Le=!0);Le&&C.reorderLines()},C.loadPgn=function(j,Se,Le){var Ge=fe.loadPgn(j,Se,Le),ue=C._history();return C.removeEmptyLines(),Z=ue.length-1,Xe=ue.id,Xe&&C.selectLine(0),Ge},C.ids=function(){return{move:Z,line:Xe}},C.selectLine=function(j){C.selectPosition(null,j)},C.curBughouseMove=function(){return Math.max(C._getPos().bughouseOrder,C.siblingGame._getPos().bughouseOrder)},C.deleteBughouseMove=function(j){var Se=C.curBughouseMove(),Le=!1,Ge=C,ue,st,Bt;if(j>=0)for(Se>=j&&C.selectBughouseMove(j-1);;){for(ue=Ge._history(),st=ue.length,Bt=0;Bt<st;++Bt)if(ue[Bt].bughouseOrder>=j){ue.length=Bt,Le=!0;break}if(Ge===C.siblingGame)break;Ge=C.siblingGame}return Le},C.selectBughouseMove=function(j){var Se=C.isDependent?C.siblingGame:C,Le=Se,Ge,ue;if(j===-1)return Le.selectPosition(-1,0,!0),Le.siblingGame.selectPosition(-1,0,!0),Se.load(Se.header().FEN,"Bughouse",!0,!0);for(;;){for(Ge=Le._history(),ue=Ge.length-1;ue>=0;--ue)if(Ge[ue].bughouseOrder===j)return Le.selectPosition(Ge[ue].ids.move,0,!0),Le.siblingGame.selectPosition(Ge[ue].siblingIds.move,0,!0),Se.load(Ge[ue].fen,"Bughouse",!0,!0);if(Le===Se.siblingGame)return!1;Le=Se.siblingGame}},C.moveBackward=function(j){var Se;if(C.siblingGame)return C.selectBughouseMove(C.curBughouseMove()-1);if(Z<=1)if(Xe===0){if(Z===-1)return!1;C.selectPosition(Z-1)}else Se=C._getPos(Z-1,Xe),Se.isContinuation&&!j&&(Se=C._getPos(Se.ids.move-1,Se.ids.line),Se=C._getPos(Se.ids.move+1,Se.ids.line)),C.selectPosition(Se.ids.move,Se.ids.line);else C.selectPosition(Z-1);return!0},C.moveForward=function(j,Se){var Le=C._lines(),Ge,ue,st,Bt,Qn,qn;if(C.siblingGame)return C.selectBughouseMove(C.curBughouseMove()+1);if(Ge=Le[Xe][Z+1],typeof Se=="string"&&(Se={san:Se}),!Ge||Se&&!Ot(Se,Ge)){if(Se&&Ge&&Ge.lines){for(Qn=Ge.lines.length,Bt=0;Bt<Qn;++Bt)if(st=Le[Ge.lines[Bt]][0],st&&Ot(Se,st)){Ge=st,qn=!0;break}}if(!qn&&j&&(ue=Le[Xe][Z],ue&&ue.lines)){for(Qn=ue.lines.length,Bt=0;Bt<Qn;++Bt)if(st=Le[ue.lines[Bt]][0],st&&st.isContinuation&&(st=Le[ue.lines[Bt]][1],st&&(!Se||Ot(Se,st)))){Ge=st,qn=!0;break}}if(!qn){try{if(Se&&Se.san&&(Se=C.fixMove(Se.san))||Se&&Se.to&&Se.from&&Math.abs(Se.to.charCodeAt(0)-Se.from.charCodeAt(0))>1&&(Se=C.fixMove(Se)))return C.moveForward(j,Se)}catch{}return!1}}return C.selectPosition(Ge.ids.move,Ge.ids.line)},C.moveVariation=function(j,Se){var Le=C._lines(),Ge=Le[j],ue,st,Bt;if(Ge&&Ge.id){for(ue=Le[Ge.parentId][Ge.atMoveNode].lines,st=ue.length-1;st>=0;--st)if(ue[st]===j&&(Bt=st-(Se?1:-1),ue[Bt]))return ue[st]=ue[Bt],ue[Bt]=j,C.reorderLines(),!0}return!1},C.promoteVariation=function(j,Se){for(var Le=C._lines(),Ge=Le[j],ue,st,Bt,Qn,qn,ai;Ge&&Ge[0]&&Ge.id&&(Se!==-1||Ge.parentId);){for(Bt=Ge.parentId,ue=Le[Bt],Qn=Ge.atMoveNode,Ge[0].lines=ue[Qn].lines.concat(Ge[0].lines||[]),ue[Qn].lines=void 0,ai=ue.length-Qn,st=ue.splice(Qn,ai),qn=0;qn<ai;++qn)st[qn].ids.line=j,st[qn].ids.move=qn;for(st.id=j,st.parentId=Bt,st.atMoveNode=Qn,st.hash=Ge.hash,Qn===0?(st.initComment=ue.initComment,ue.initComment=Ge.initComment):Ge.initComment&&(ue[Qn-1].comment=((ue[Qn-1].comment||"")+" "+Ge.initComment).trim()),Le[j]=st,ai=Ge.length,qn=0;qn<ai;++qn)Ge[qn].ids.line=Bt,Ge[qn].ids.move=qn+Qn,ue.push(Ge[qn]);for(st[0].isContinuation=!!Ge[0].isContinuation,ue[Qn].isContinuation=!Qn&&typeof ue.parentId=="number"&&Le[ue.parentId][ue.atMoveNode].move===ue[0].move,ai=ue[Qn].lines.length,qn=0;qn<ai;++qn)Le[ue[Qn].lines[qn]].atMoveNode=Qn,Le[ue[Qn].lines[qn]][0]&&(Le[ue[Qn].lines[qn]][0].isContinuation=Le[ue[Qn].lines[qn]][0].move===ue[Qn].move);if(Xe===j?(Xe=Bt,Z+=Qn):Xe===Bt&&Z>=Qn&&(Xe=j,Z-=Qn),Se===1)break;j=Bt,Ge=Le[j]}return ue!==void 0?(C._history(Le[Xe]),C.reorderLines(),!Z&&Le[Xe][0].isContinuation&&C.selectPosition(Le[Xe].atMoveNode,Le[Xe].parentId),!0):!1},C.reorderLines=function(j,Se){var Le=C._lines(),Ge,ue,st,Bt,Qn,qn,ai,It,Qi,$r,lo=!1;for(j?Qi=Se.length-1:(j=0,Se=[Le[0]],Qi=0,De=!1),Ge=Le[j],st=Ge.length,ue=0;ue<st;++ue)if(Bt=Ge[ue],Bt.ids.line!==Qi&&(lo=!0,Bt.ids.line=Qi),Bt.lines)for(Qn=Bt.lines.length,qn=0;qn<Qn;++qn)ai=Bt.lines[qn],It=Le[ai],It?(It.atMoveNode=ue,$r=Se.length,Bt.lines[qn]=$r,It.parentId=Qi,!De&&ai===Xe&&(De=!0,Xe=$r),Se.push(It),lo=C.reorderLines(ai,Se)||lo):(Bt.lines.length===1?delete Bt.lines:Bt.lines.splice(qn,1),--qn,--Qn);return j||C.saveLines(Se,!0),lo},C.createVariation=function(){var j=C._history(),Se=C._lines(),Le,Ge,ue;return Z===j.length-1?(Le=fe.createVariation(),j=C._history(),Z=j.length-1,Xe=j.id,Le):Z===-1?!1:(Ge=[],ue=j[Z],Ge.parentId=j.id,Ge.id=Se.length,ue.lines||(ue.lines=[]),ue.lines.push(Ge.id),Ge.hash=C._getPos(Z-1).hash,Ge.atMoveNode=Z,Se.push(Ge),C.selectPosition(-1,Ge.id))},C.selectLineEnd=function(j){return C.siblingGame?C.selectBughouseMove(C._history().length+C.siblingGame._history().length-1):(typeof j!="number"&&(j=Xe),j!==Xe||Z<C._history().length-1?C.selectPosition(null,j,!0):!1)},C.selectLineStart=function(){var j,Se;return C.siblingGame?C.selectBughouseMove(-1):Xe?(Z>1||Z===1&&!C._getPos(0).isContinuation?j=C._history():(Se=C._getPos(-1),j=C._lines()[Se.ids.line]),C.selectPosition(j.id?j[1]&&j[0].isContinuation?1:0:-1,j.id)):Z===-1?!1:C.selectPosition(-1,0)},C.selectPosition=function(j,Se,Le){var Ge=C._lines(),ue=C._history();if(typeof Se=="number"&&(Se!==Xe||Le)){if(Se<0||Se>=Ge.length)return!1;if(ue=Ge[Se],typeof j!="number")j=ue.length-1;else if(j<-1||j>=ue.length)return!1;Xe=Se,C._history(ue),Le=!0}if(typeof j=="number"&&(j!==Z||Le)){if(j<-1||j>=ue.length)return!1;fe.load(C._getPos(j).fen,fe.header().Variant,!0,!0),Z=j}return!0},C.resetToMainLine=function(){var j=C._lines();C.selectLineEnd(0),j.length>1&&(j.length=1,C.reorderLines())},C.updateNode=function(j,Se,Le){var Ge=C._lines(),ue,st;Le=typeof Le=="number"?Le:Xe,Se=typeof Se=="number"?Se:Z,ue=Ge[Le][Se]||Ge[Le];for(st in j)ue[st]=j[st]},C.updateLineComment=function(j,Se){C.updateNode({initComment:j},-1,Se)},C.saveLines=function(j,Se){var Le=C._lines(),Ge,ue=j.length,st,Bt;for(j!==Le&&(Le.length=0),st=0;st<ue;++st){if(Ge=j[st],st&&typeof Ge.parentId!="number")return!1;j!==Le&&Le.push(Ge),Ge.id=st}return C._history(C._history()),Se||(Bt=C.ids(),C.selectPosition(-1,0,!0),C.selectPosition(Bt.move,Bt.line)),!0},C.deletePosition=function(j,Se){var Le=C._lines(),Ge,ue;return!Le[Se]||!Le[Se][j]&&(j!==-1||Se===0)?!1:(Se&&(j===0||j===1&&Le[Se][0].isContinuation)&&(j=-1),Xe>0&&Se!==Xe?(Ge=ke(Le,Xe,Se),ue=Ge!==!1&&Ge>=j):ue=Se===Xe&&j<=Z,ue&&(j>1?C.selectPosition(j-1,Se):(C.selectPosition((Le[Se][0].isContinuation||j===1)&&Le[Se][1]?1:0,Se),C.moveBackward())),j>0?Le[Se].length=j:Se?Le[Se]=null:Le[0].length=0,C.reorderLines(),C.ids())},C.mark=function(j,Se){var Le=Z<0?C._lines()[Xe]:C._lines()[Xe][Z],Ge=j.type,ue=1;j.color&&(Ge==="arrow"?C.mark({key:j.color+j.key,type:"cal"},Se):Ge==="square"&&C.mark({key:j.color+j.key,type:"csl"},Se)),Ge!=="cal"&&Ge!=="csl"&&(Ge="c_"+Ge,ue=0),Le.commands&&Le.commands[Ge]&&(Le.commands[Ge]=Le.commands[Ge].split(",").filter(function(Bt){return Bt.slice(ue).split(";")[0]!==j.key.slice(ue)}).join(","),Le.commands[Ge]||delete Le.commands[Ge]),Se||(Le.commands||(Le.commands={}),Le.commands[Ge]=(Le.commands[Ge]?Le.commands[Ge]+",":"")+j.key+(j.data?";"+j.data.join(";"):""))},C.markings=function(){var j={},Se=Z<0?C._lines()[Xe]:C._lines()[Xe][Z],Le,Ge,ue,st={cal:"arrow",csl:"square"},Bt,Qn,qn,ai,It;for(Ge in Se.commands){if(ue=Se.commands[Ge],st[Ge])Ge=st[Ge],Bt=0;else if(Ge.substr(0,2)==="c_")Ge=Ge.slice(2),Bt=1;else continue;for(j[Ge]=j[Ge]||{},Qn=ue.split(","),qn=Qn.length,Le=0;Le<qn;++Le)Bt?(ai=Qn[Le].split(";"),It=ai.shift(),j[Ge][It]=j[Ge][It]||{type:Ge,key:It},j[Ge][It].data=ai):(It=Qn[Le].slice(1),j[Ge][It]=j[Ge][It]||{type:Ge,key:It},j[Ge][It].color=Qn[Le][0])}return j},C.clearMarkings=function(){var j=Z<0?C._lines()[Xe]:C._lines()[Xe][Z],Se;for(Se in j.commands)/^c[sa]l$|^c_/.test(Se)&&delete j.commands[Se]},C.pgn=function(j){var Se=C.ids(),Le;return C.selectLineEnd(0),Le=fe.pgn(j),C.selectPosition(Se.move,Se.line),Le},C.loadMoves=function(j,Se){var Le,Ge,ue,st,Bt;if(Se=Se||{},typeof j=="string"&&(j=Ht(j)),j){for(Se.atCurrent||C.selectPosition(-1,0),ue=Xe,Ge=j.length,Le=0;Le<Ge;++Le){if(st=C.move(j[Le],!0),!st&&(j[Le].promotion=Se.autoPromote===!0?"q":Se.autoPromote,st=C.move(j[Le],!0),!st))return!1;Xe!==ue&&Se.method!=="merge"&&(C.promoteVariation(Xe,1),Se.method!=="promote"&&(C._history()[Z].lines=void 0,C.reorderLines()),ue=Xe)}if(Se.method==="promote"){if(Ge){for(C._history()[Z+1]&&(st=C._history()[Z],C.createVariation(),C.move(st),$n(C._history()[0],st),C.promoteVariation(Xe,1)),Bt=C._lines(),Le=Bt.length-1;Le>=0;--Le)Bt[Le].length===1&&Bt[Le][0].isContinuation&&($n(Bt[Le][0],Bt[Bt[Le].parentId][Bt[Le].atMoveNode]),Bt[Le].length=0);C.removeEmptyLines()}}else Se.method!=="merge"&&C.deletePosition(Z+1,Xe)}return!0})}function Ve(C){var fe,Z;if(C=C||{},C.game)return C.game;if(fe=ae(),C.analysis&&ft(fe),C.disableHashing&&fe.hashing(!1),C.pgn){if(!fe.loadPgn(C.pgn,C.index,C.options)&&(C.variant!=="detect"||!ae.variants.some(function(Xe){return C.options=C.options||{},C.options.variant=Xe,fe.loadPgn(C.pgn,C.index,C.options)})))return!1}else{if(C.headers&&(C.variant=C.headers.Variant||C.variant,C.fen||(C.fen=C.headers.FEN)),C.variant==="detect"&&C.fen&&(C.fen.indexOf("|")>-1?C.variant="Bughouse":C.fen.split("/").length===9?C.variant="Crazyhouse":C.fen.indexOf("+")>-1?C.variant="3-check":C.variant=void 0),(C.fen||C.variant)&&!fe.load(C.fen||Ee,C.variant))return!1;C.headers&&typeof C.headers=="object"&&!Array.isArray(C.headers)&&fe.header(C.headers)}if(C.tcn)if(typeof C.tcn=="object"){if(!ot(fe,C.tcn,C.timestamps||[[],[]]))return!1}else Z=Ht(C.tcn);else Z=C.moves;return Z&&!Et(fe,Z,C,C.timestamps)?!1:fe}function Tn(C){var fe;return C=C||{},C.disableHashing=!0,fe=Ve(C),fe?fe.pgn(C):!1}function Wt(C,fe){var Z,Xe=[],De;if(je.reset(),!je.loadPgn(C))return!1;if(Z=je.moveCount(),typeof fe=="number"){for(fe<0&&(fe=Z+fe+1),De=Z-1;De>=fe&&De>=0;De-=1)je.undo();return je.fen()}for(De=0;De<=Z;De+=1)Xe.unshift(je.fen()),je.undo();return Xe}function Mn(C){return C&&(C.piece&Je&&(C.promoted=!0),C.piece=Ae[C.piece&ze],C.captured&&(C.captured&Je&&(C.capturedPromotedPawn=!0),C.captured=Ae[C.captured&Me]),C.promotion&&(C.promotion=Ae[C.promotion&ze]),C.drop!==void 0&&(C.drop=x[C.drop])),C}function pr(C){var fe=C.history(!0,!0),Z,Xe,De,ke,$n,j,Se;if(C.siblingGame){for(Z=C.siblingGame.history(!0,!0),De=fe.length+Z.length,Xe=[],ke=0;ke<De;++ke)!fe.length||Z.length&&Z[0].bughouseOrder<fe[0].bughouseOrder?($n=Z.shift(),$n.board="b"):($n=fe.shift(),$n.board="a"),Xe.push($n);fe=Xe}for(De=fe.length,ke=0;ke<De;++ke)if(j=fe[ke],j.fen||Mn(j),j.lines)for(Se=j.lines.length-1;Se>=0;--Se)C.selectLine(j.lines[Se]),j.lines[Se]=pr(C).moves;return{moves:fe}}function qr(C,fe,Z){var Xe=[],De,ke=je;return typeof fe!="number"&&(Z=fe,fe=void 0),De=ke.tokenizePgn(C,Z),fe<0&&(fe=De.length+fe),De?(Z&&Z.includeFen&&(ke=Ve({analysis:!0})),De.forEach(function($n,j){var Se,Le;j===fe||fe===void 0?ke.loadPgn([$n],0,Z)?(Le=pr(ke),Se=ke.header(),Xe.push({headers:Se,moves:Le.moves})):Xe.push(!1):Xe.push(void 0)}),typeof fe=="number"?Xe[fe]:Xe):!1}function Cn(C,fe,Z){return je.reset(),je.load(fe,Z)?Mn(je.move(C)):!1}function jn(C,fe){return je.completeFen(C).split(" ").slice(0,fe||4).join(" ")}function Ft(C,fe,Z){return je.reset(),je.load(C,Z),fe&&!Et(je,fe)?!1:je.fen()}function At(C,fe){var Z,Xe,De,ke;if(typeof C=="string"){if(Xe=je,Xe.reset(),!Xe.load(C,fe))return null}else Xe=Ve(C);for(Z=Xe.moves({verbose:!0}),ke=Z.length,De=0;De<ke;++De)Mn(Z[De]);return Z}function qt(C,fe,Z){var Xe,De={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1},ke;if(Array.isArray(fe)||(Z=fe,fe=null),typeof Z=="boolean"?(Xe=Z,Z={}):(Z=Z||{},Xe=Z.variant),typeof C=="string"){if(ke=je,ke.reset(),ke.validateFen(C,Xe)!==0||!ke.load(C,Xe))return!1}else ke=Ve(C);return fe&&!Et(ke,fe)?!1:(Z.getLegalMoves&&(De.legalMoves=At({game:ke})),ke.inCheck()?(De.check=!0,De.checkmate=ke.inCheckmate()):De.stalemate=ke.inStalemate(),De.threefold=ke.inThreefoldRepetition(),De.insufficient=ke.insufficientMaterial(Z.color),De.fiftyMoveRule=ke.in50MoveRule(),De.draw=De.stalemate||De.threefold||De.insufficient||De.fiftyMoveRule||ke.inDraw(),Z.skipValidation||(De.isValid=ke.isPositionValid(Z)),Xe&&(De.variantWin=ke.isVariantWin(),De.variantWin===void 0&&(De.variantWin=ke.isBughouseWin())),De.gameOver=De.checkmate||De.draw||!!De.variantWin,De)}function Xn(C,fe){return je.validateFen(C,fe)===0}function Sn(C,fe){H.loadBook(C,function(Xe,De){if(!De||!De.json)return fe(Xe||new Error("Invalid book"));fe(Xe,function($n){var j,Se,Le,Ge,ue,st,Bt,Qn,qn;if($n.hash)typeof $n.hash=="string"?Se=[H.hex64ToDec($n.hash)]:Se=[$n.hash],Ge=1;else{if(j=Ve($n),!j)return!1;Se=j.hashes(),Ge=Se.length}for(Le=0;Le<Ge;++Le)if(ue=De.json[H.to64BitHex(Se[Le])],ue){if(ue.constructor===Array)if(st&&ue[0].m.indexOf(st.m)===-1){for(Qn=ue.length-1;Qn>=0;--Qn)if(!Qn||ue[Qn].m.indexOf(st.m)!==-1){qn=ue[Qn],qn.e=ue[0].e,qn.s=ue[0].s,qn.mate=ue[0].mate,qn.v=ue[0].v,qn.h=ue[0].h,qn.n=qn.n||ue[0].n,qn.u=qn.u||ue[0].u,qn.c=qn.c||ue[0].c;break}}else qn=ue[0];else qn=ue;(qn.n||$n.allowNameless)&&(st=qn)}else $n.mustEndInBook&&(st=void 0);if(st)return Bt={name:st.n},st.m&&(Bt.moves=st.m),st.d!==void 0&&(Bt.sdiff=st.d/100),st.c&&(Bt.code=st.c,Bt.url=st.u||st.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/ig,"-").replace(/(with-\d|St)\.+-?/,"$1-")),st.e?(Bt.eval=st.e,Bt.depth=st.h,Bt.score=st.e[0].cp/100,st.e[0].mate!==void 0&&(Bt.mate=st.e[0].mate)):(Bt.score=st.s/100,st.mate!==void 0&&(Bt.mate=st.mate)),st.v&&(Bt.bad=!0),Bt},De.json)})}function pe(C,fe){return Fe=Fe||Ye(pe),Fe(C,fe)}return pe.supportsMultithreading=function(){var C,fe=!!pe._hasThreads;if(typeof pe._hasThreads!="boolean"){try{C=new Worker("data:application/javascript,"),C.postMessage(new SharedArrayBuffer(1)),fe=!0}catch{}try{C.terminate()}catch{}pe._hasThreads=fe}return fe},pe.supportsSIMD=function(){return typeof pe._hasSIMD=="boolean"?pe._hasSIMD:pe._hasSIMD=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))},pe.gameFingerprints=Jt,pe.getFenFromMoves=Ft,pe.getLegalMoves=At,pe.getPositionInfo=qt,pe.isFenValid=Xn,pe.encodeTCN=an,pe.decodeTCN=Ht,pe.uciToObj=ie,pe.generatePgn=Tn,pe.pgnToFen=Wt,pe.pgnToJson=qr,pe.sanToObj=Cn,pe.completeFen=je.completeFen,pe.shortenFen=jn,pe.createGame=Ve,pe.getPositionDetails=at,pe.predict=fi,pe.normalizeMoveObj=Mn,pe.FLAGS=je.FLAGS,pe.loadECO=Sn,pe.CEE_LIB=function(){var C={};return C.addOptions=function(fe,Z){for(var Xe in Z)Z[Xe]!==void 0&&fe.push("setoption name "+Xe+" value "+Z[Xe]);return fe},C.addVariations=function(fe,Z,Xe){var De,ke;Z=Z||[],Xe=Xe||"variation";for(var $n=0;$n<Z.length;++$n)De=Z[$n],De.pv=Array.isArray(De.pv)&&De.pv.join(" ")||De.pv||"",ke=Xe+" "+De.pv,typeof De.mateIn=="number"?ke+=" mate "+De.mateIn:typeof De.mate=="number"?ke+=" mate "+De.mate:ke+=" cp "+Math.round(De.cp),typeof De.depth=="number"&&(ke+=" depth "+De.depth),fe.push(ke);return fe},C.addPush=function(fe,Z){var Xe;return typeof Z=="string"&&(Z={moveLan:Z}),Xe="push "+Z.moveLan,Z.isBook&&(Xe+=" isBook"),Z.isRetry&&(Xe+=" isRetry"),fe.push(Xe),fe},C.addPosition=function(fe,Z){return fe.push("position fen "+Z),fe},C.addVariant=function(fe,Z){return String(Z).toLowerCase().replace(/ |-/g,"")==="chess960"?(fe.push("setoption name UCI_Variant value chess"),fe.push("setoption name UCI_Chess960 value "+!0)):(fe.push("setoption name UCI_Variant value chess"),fe.push("setoption name UCI_Chess960 value "+!1)),fe},C}(),pe}();return ct.exports=tt,tt}()},9669:function(ct,Xt,we){ct.exports=we(1609)},5448:function(ct,Xt,we){"use strict";var P=we(4867),se=we(6026),H=we(4372),ae=we(5327),Ye=we(4097),tt=we(4109),je=we(7985),Fe=we(5061),Ee=we(5655),ze=we(5263);ct.exports=function(Ae){return new Promise(function(Je,Vt){var Zn=Ae.data,Ht=Ae.headers,an=Ae.responseType,ie;function Ot(){Ae.cancelToken&&Ae.cancelToken.unsubscribe(ie),Ae.signal&&Ae.signal.removeEventListener("abort",ie)}P.isFormData(Zn)&&delete Ht["Content-Type"];var kt=new XMLHttpRequest;if(Ae.auth){var gr=Ae.auth.username||"",Ar=Ae.auth.password?unescape(encodeURIComponent(Ae.auth.password)):"";Ht.Authorization="Basic "+btoa(gr+":"+Ar)}var fi=Ye(Ae.baseURL,Ae.url);kt.open(Ae.method.toUpperCase(),ae(fi,Ae.params,Ae.paramsSerializer),!0),kt.timeout=Ae.timeout;function at(){if(kt){var Et="getAllResponseHeaders"in kt?tt(kt.getAllResponseHeaders()):null,ot=!an||an==="text"||an==="json"?kt.responseText:kt.response,ft={data:ot,status:kt.status,statusText:kt.statusText,headers:Et,config:Ae,request:kt};se(function(Tn){Je(Tn),Ot()},function(Tn){Vt(Tn),Ot()},ft),kt=null}}if("onloadend"in kt?kt.onloadend=at:kt.onreadystatechange=function(){!kt||kt.readyState!==4||kt.status===0&&!(kt.responseURL&&kt.responseURL.indexOf("file:")===0)||setTimeout(at)},kt.onabort=function(){kt&&(Vt(Fe("Request aborted",Ae,"ECONNABORTED",kt)),kt=null)},kt.onerror=function(){Vt(Fe("Network Error",Ae,null,kt)),kt=null},kt.ontimeout=function(){var ot=Ae.timeout?"timeout of "+Ae.timeout+"ms exceeded":"timeout exceeded",ft=Ae.transitional||Ee.transitional;Ae.timeoutErrorMessage&&(ot=Ae.timeoutErrorMessage),Vt(Fe(ot,Ae,ft.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",kt)),kt=null},P.isStandardBrowserEnv()){var Jt=(Ae.withCredentials||je(fi))&&Ae.xsrfCookieName?H.read(Ae.xsrfCookieName):void 0;Jt&&(Ht[Ae.xsrfHeaderName]=Jt)}"setRequestHeader"in kt&&P.forEach(Ht,function(ot,ft){typeof Zn>"u"&&ft.toLowerCase()==="content-type"?delete Ht[ft]:kt.setRequestHeader(ft,ot)}),P.isUndefined(Ae.withCredentials)||(kt.withCredentials=!!Ae.withCredentials),an&&an!=="json"&&(kt.responseType=Ae.responseType),typeof Ae.onDownloadProgress=="function"&&kt.addEventListener("progress",Ae.onDownloadProgress),typeof Ae.onUploadProgress=="function"&&kt.upload&&kt.upload.addEventListener("progress",Ae.onUploadProgress),(Ae.cancelToken||Ae.signal)&&(ie=function(Et){kt&&(Vt(!Et||Et&&Et.type?new ze("canceled"):Et),kt.abort(),kt=null)},Ae.cancelToken&&Ae.cancelToken.subscribe(ie),Ae.signal&&(Ae.signal.aborted?ie():Ae.signal.addEventListener("abort",ie))),Zn||(Zn=null),kt.send(Zn)})}},1609:function(ct,Xt,we){"use strict";var P=we(4867),se=we(1849),H=we(321),ae=we(7185),Ye=we(5655);function tt(Fe){var Ee=new H(Fe),ze=se(H.prototype.request,Ee);return P.extend(ze,H.prototype,Ee),P.extend(ze,Ee),ze.create=function(Ae){return tt(ae(Fe,Ae))},ze}var je=tt(Ye);je.Axios=H,je.Cancel=we(5263),je.CancelToken=we(4972),je.isCancel=we(6502),je.VERSION=we(7288).version,je.all=function(Ee){return Promise.all(Ee)},je.spread=we(8713),je.isAxiosError=we(6268),ct.exports=je,ct.exports.default=je},5263:function(ct){"use strict";function Xt(we){this.message=we}Xt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Xt.prototype.__CANCEL__=!0,ct.exports=Xt},4972:function(ct,Xt,we){"use strict";var P=we(5263);function se(H){if(typeof H!="function")throw new TypeError("executor must be a function.");var ae;this.promise=new Promise(function(je){ae=je});var Ye=this;this.promise.then(function(tt){if(Ye._listeners){var je,Fe=Ye._listeners.length;for(je=0;je<Fe;je++)Ye._listeners[je](tt);Ye._listeners=null}}),this.promise.then=function(tt){var je,Fe=new Promise(function(Ee){Ye.subscribe(Ee),je=Ee}).then(tt);return Fe.cancel=function(){Ye.unsubscribe(je)},Fe},H(function(je){Ye.reason||(Ye.reason=new P(je),ae(Ye.reason))})}se.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},se.prototype.subscribe=function(ae){if(this.reason){ae(this.reason);return}this._listeners?this._listeners.push(ae):this._listeners=[ae]},se.prototype.unsubscribe=function(ae){if(this._listeners){var Ye=this._listeners.indexOf(ae);Ye!==-1&&this._listeners.splice(Ye,1)}},se.source=function(){var ae,Ye=new se(function(je){ae=je});return{token:Ye,cancel:ae}},ct.exports=se},6502:function(ct){"use strict";ct.exports=function(we){return!!(we&&we.__CANCEL__)}},321:function(ct,Xt,we){"use strict";var P=we(4867),se=we(5327),H=we(782),ae=we(3572),Ye=we(7185),tt=we(4875),je=tt.validators;function Fe(Ee){this.defaults=Ee,this.interceptors={request:new H,response:new H}}Fe.prototype.request=function(ze,Me){if(typeof ze=="string"?(Me=Me||{},Me.url=ze):Me=ze||{},!Me.url)throw new Error("Provided config url is not valid");Me=Ye(this.defaults,Me),Me.method?Me.method=Me.method.toLowerCase():this.defaults.method?Me.method=this.defaults.method.toLowerCase():Me.method="get";var Ae=Me.transitional;Ae!==void 0&&tt.assertOptions(Ae,{silentJSONParsing:je.transitional(je.boolean),forcedJSONParsing:je.transitional(je.boolean),clarifyTimeoutError:je.transitional(je.boolean)},!1);var x=[],Je=!0;this.interceptors.request.forEach(function(gr){typeof gr.runWhen=="function"&&gr.runWhen(Me)===!1||(Je=Je&&gr.synchronous,x.unshift(gr.fulfilled,gr.rejected))});var Vt=[];this.interceptors.response.forEach(function(gr){Vt.push(gr.fulfilled,gr.rejected)});var Zn;if(!Je){var Ht=[ae,void 0];for(Array.prototype.unshift.apply(Ht,x),Ht=Ht.concat(Vt),Zn=Promise.resolve(Me);Ht.length;)Zn=Zn.then(Ht.shift(),Ht.shift());return Zn}for(var an=Me;x.length;){var ie=x.shift(),Ot=x.shift();try{an=ie(an)}catch(kt){Ot(kt);break}}try{Zn=ae(an)}catch(kt){return Promise.reject(kt)}for(;Vt.length;)Zn=Zn.then(Vt.shift(),Vt.shift());return Zn},Fe.prototype.getUri=function(ze){if(!ze.url)throw new Error("Provided config url is not valid");return ze=Ye(this.defaults,ze),se(ze.url,ze.params,ze.paramsSerializer).replace(/^\?/,"")},P.forEach(["delete","get","head","options"],function(ze){Fe.prototype[ze]=function(Me,Ae){return this.request(Ye(Ae||{},{method:ze,url:Me,data:(Ae||{}).data}))}}),P.forEach(["post","put","patch"],function(ze){Fe.prototype[ze]=function(Me,Ae,x){return this.request(Ye(x||{},{method:ze,url:Me,data:Ae}))}}),ct.exports=Fe},782:function(ct,Xt,we){"use strict";var P=we(4867);function se(){this.handlers=[]}se.prototype.use=function(ae,Ye,tt){return this.handlers.push({fulfilled:ae,rejected:Ye,synchronous:tt?tt.synchronous:!1,runWhen:tt?tt.runWhen:null}),this.handlers.length-1},se.prototype.eject=function(ae){this.handlers[ae]&&(this.handlers[ae]=null)},se.prototype.forEach=function(ae){P.forEach(this.handlers,function(tt){tt!==null&&ae(tt)})},ct.exports=se},4097:function(ct,Xt,we){"use strict";var P=we(1793),se=we(7303);ct.exports=function(ae,Ye){return ae&&!P(Ye)?se(ae,Ye):Ye}},5061:function(ct,Xt,we){"use strict";var P=we(481);ct.exports=function(H,ae,Ye,tt,je){var Fe=new Error(H);return P(Fe,ae,Ye,tt,je)}},3572:function(ct,Xt,we){"use strict";var P=we(4867),se=we(8527),H=we(6502),ae=we(5655),Ye=we(5263);function tt(je){if(je.cancelToken&&je.cancelToken.throwIfRequested(),je.signal&&je.signal.aborted)throw new Ye("canceled")}ct.exports=function(Fe){tt(Fe),Fe.headers=Fe.headers||{},Fe.data=se.call(Fe,Fe.data,Fe.headers,Fe.transformRequest),Fe.headers=P.merge(Fe.headers.common||{},Fe.headers[Fe.method]||{},Fe.headers),P.forEach(["delete","get","head","post","put","patch","common"],function(Me){delete Fe.headers[Me]});var Ee=Fe.adapter||ae.adapter;return Ee(Fe).then(function(Me){return tt(Fe),Me.data=se.call(Fe,Me.data,Me.headers,Fe.transformResponse),Me},function(Me){return H(Me)||(tt(Fe),Me&&Me.response&&(Me.response.data=se.call(Fe,Me.response.data,Me.response.headers,Fe.transformResponse))),Promise.reject(Me)})}},481:function(ct){"use strict";ct.exports=function(we,P,se,H,ae){return we.config=P,se&&(we.code=se),we.request=H,we.response=ae,we.isAxiosError=!0,we.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},we}},7185:function(ct,Xt,we){"use strict";var P=we(4867);ct.exports=function(H,ae){ae=ae||{};var Ye={};function tt(Ae,x){return P.isPlainObject(Ae)&&P.isPlainObject(x)?P.merge(Ae,x):P.isPlainObject(x)?P.merge({},x):P.isArray(x)?x.slice():x}function je(Ae){if(P.isUndefined(ae[Ae])){if(!P.isUndefined(H[Ae]))return tt(void 0,H[Ae])}else return tt(H[Ae],ae[Ae])}function Fe(Ae){if(!P.isUndefined(ae[Ae]))return tt(void 0,ae[Ae])}function Ee(Ae){if(P.isUndefined(ae[Ae])){if(!P.isUndefined(H[Ae]))return tt(void 0,H[Ae])}else return tt(void 0,ae[Ae])}function ze(Ae){if(Ae in ae)return tt(H[Ae],ae[Ae]);if(Ae in H)return tt(void 0,H[Ae])}var Me={url:Fe,method:Fe,data:Fe,baseURL:Ee,transformRequest:Ee,transformResponse:Ee,paramsSerializer:Ee,timeout:Ee,timeoutMessage:Ee,withCredentials:Ee,adapter:Ee,responseType:Ee,xsrfCookieName:Ee,xsrfHeaderName:Ee,onUploadProgress:Ee,onDownloadProgress:Ee,decompress:Ee,maxContentLength:Ee,maxBodyLength:Ee,transport:Ee,httpAgent:Ee,httpsAgent:Ee,cancelToken:Ee,socketPath:Ee,responseEncoding:Ee,validateStatus:ze};return P.forEach(Object.keys(H).concat(Object.keys(ae)),function(x){var Je=Me[x]||je,Vt=Je(x);P.isUndefined(Vt)&&Je!==ze||(Ye[x]=Vt)}),Ye}},6026:function(ct,Xt,we){"use strict";var P=we(5061);ct.exports=function(H,ae,Ye){var tt=Ye.config.validateStatus;!Ye.status||!tt||tt(Ye.status)?H(Ye):ae(P("Request failed with status code "+Ye.status,Ye.config,null,Ye.request,Ye))}},8527:function(ct,Xt,we){"use strict";var P=we(4867),se=we(5655);ct.exports=function(ae,Ye,tt){var je=this||se;return P.forEach(tt,function(Ee){ae=Ee.call(je,ae,Ye)}),ae}},5655:function(ct,Xt,we){"use strict";var P=we(4155),se=we(4867),H=we(6016),ae=we(481),Ye={"Content-Type":"application/x-www-form-urlencoded"};function tt(ze,Me){!se.isUndefined(ze)&&se.isUndefined(ze["Content-Type"])&&(ze["Content-Type"]=Me)}function je(){var ze;return(typeof XMLHttpRequest<"u"||typeof P<"u"&&Object.prototype.toString.call(P)==="[object process]")&&(ze=we(5448)),ze}function Fe(ze,Me,Ae){if(se.isString(ze))try{return(Me||JSON.parse)(ze),se.trim(ze)}catch(x){if(x.name!=="SyntaxError")throw x}return(Ae||JSON.stringify)(ze)}var Ee={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:je(),transformRequest:[function(Me,Ae){return H(Ae,"Accept"),H(Ae,"Content-Type"),se.isFormData(Me)||se.isArrayBuffer(Me)||se.isBuffer(Me)||se.isStream(Me)||se.isFile(Me)||se.isBlob(Me)?Me:se.isArrayBufferView(Me)?Me.buffer:se.isURLSearchParams(Me)?(tt(Ae,"application/x-www-form-urlencoded;charset=utf-8"),Me.toString()):se.isObject(Me)||Ae&&Ae["Content-Type"]==="application/json"?(tt(Ae,"application/json"),Fe(Me)):Me}],transformResponse:[function(Me){var Ae=this.transitional||Ee.transitional,x=Ae&&Ae.silentJSONParsing,Je=Ae&&Ae.forcedJSONParsing,Vt=!x&&this.responseType==="json";if(Vt||Je&&se.isString(Me)&&Me.length)try{return JSON.parse(Me)}catch(Zn){if(Vt)throw Zn.name==="SyntaxError"?ae(Zn,this,"E_JSON_PARSE"):Zn}return Me}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Me){return Me>=200&&Me<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};se.forEach(["delete","get","head"],function(Me){Ee.headers[Me]={}}),se.forEach(["post","put","patch"],function(Me){Ee.headers[Me]=se.merge(Ye)}),ct.exports=Ee},7288:function(ct){ct.exports={version:"0.25.0"}},1849:function(ct){"use strict";ct.exports=function(we,P){return function(){for(var H=new Array(arguments.length),ae=0;ae<H.length;ae++)H[ae]=arguments[ae];return we.apply(P,H)}}},5327:function(ct,Xt,we){"use strict";var P=we(4867);function se(H){return encodeURIComponent(H).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}ct.exports=function(ae,Ye,tt){if(!Ye)return ae;var je;if(tt)je=tt(Ye);else if(P.isURLSearchParams(Ye))je=Ye.toString();else{var Fe=[];P.forEach(Ye,function(Me,Ae){Me===null||typeof Me>"u"||(P.isArray(Me)?Ae=Ae+"[]":Me=[Me],P.forEach(Me,function(Je){P.isDate(Je)?Je=Je.toISOString():P.isObject(Je)&&(Je=JSON.stringify(Je)),Fe.push(se(Ae)+"="+se(Je))}))}),je=Fe.join("&")}if(je){var Ee=ae.indexOf("#");Ee!==-1&&(ae=ae.slice(0,Ee)),ae+=(ae.indexOf("?")===-1?"?":"&")+je}return ae}},7303:function(ct){"use strict";ct.exports=function(we,P){return P?we.replace(/\/+$/,"")+"/"+P.replace(/^\/+/,""):we}},4372:function(ct,Xt,we){"use strict";var P=we(4867);ct.exports=P.isStandardBrowserEnv()?function(){return{write:function(ae,Ye,tt,je,Fe,Ee){var ze=[];ze.push(ae+"="+encodeURIComponent(Ye)),P.isNumber(tt)&&ze.push("expires="+new Date(tt).toGMTString()),P.isString(je)&&ze.push("path="+je),P.isString(Fe)&&ze.push("domain="+Fe),Ee===!0&&ze.push("secure"),document.cookie=ze.join("; ")},read:function(ae){var Ye=document.cookie.match(new RegExp("(^|;\\s*)("+ae+")=([^;]*)"));return Ye?decodeURIComponent(Ye[3]):null},remove:function(ae){this.write(ae,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:function(ct){"use strict";ct.exports=function(we){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(we)}},6268:function(ct,Xt,we){"use strict";var P=we(4867);ct.exports=function(H){return P.isObject(H)&&H.isAxiosError===!0}},7985:function(ct,Xt,we){"use strict";var P=we(4867);ct.exports=P.isStandardBrowserEnv()?function(){var H=/(msie|trident)/i.test(navigator.userAgent),ae=document.createElement("a"),Ye;function tt(je){var Fe=je;return H&&(ae.setAttribute("href",Fe),Fe=ae.href),ae.setAttribute("href",Fe),{href:ae.href,protocol:ae.protocol?ae.protocol.replace(/:$/,""):"",host:ae.host,search:ae.search?ae.search.replace(/^\?/,""):"",hash:ae.hash?ae.hash.replace(/^#/,""):"",hostname:ae.hostname,port:ae.port,pathname:ae.pathname.charAt(0)==="/"?ae.pathname:"/"+ae.pathname}}return Ye=tt(window.location.href),function(Fe){var Ee=P.isString(Fe)?tt(Fe):Fe;return Ee.protocol===Ye.protocol&&Ee.host===Ye.host}}():function(){return function(){return!0}}()},6016:function(ct,Xt,we){"use strict";var P=we(4867);ct.exports=function(H,ae){P.forEach(H,function(tt,je){je!==ae&&je.toUpperCase()===ae.toUpperCase()&&(H[ae]=tt,delete H[je])})}},4109:function(ct,Xt,we){"use strict";var P=we(4867),se=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];ct.exports=function(ae){var Ye={},tt,je,Fe;return ae&&P.forEach(ae.split(`
`),function(ze){if(Fe=ze.indexOf(":"),tt=P.trim(ze.substr(0,Fe)).toLowerCase(),je=P.trim(ze.substr(Fe+1)),tt){if(Ye[tt]&&se.indexOf(tt)>=0)return;tt==="set-cookie"?Ye[tt]=(Ye[tt]?Ye[tt]:[]).concat([je]):Ye[tt]=Ye[tt]?Ye[tt]+", "+je:je}}),Ye}},8713:function(ct){"use strict";ct.exports=function(we){return function(se){return we.apply(null,se)}}},4875:function(ct,Xt,we){"use strict";var P=we(7288).version,se={};["object","boolean","number","function","string","symbol"].forEach(function(Ye,tt){se[Ye]=function(Fe){return typeof Fe===Ye||"a"+(tt<1?"n ":" ")+Ye}});var H={};se.transitional=function(tt,je,Fe){function Ee(ze,Me){return"[Axios v"+P+"] Transitional option '"+ze+"'"+Me+(Fe?". "+Fe:"")}return function(ze,Me,Ae){if(tt===!1)throw new Error(Ee(Me," has been removed"+(je?" in "+je:"")));return je&&!H[Me]&&(H[Me]=!0,console.warn(Ee(Me," has been deprecated since v"+je+" and will be removed in the near future"))),tt?tt(ze,Me,Ae):!0}};function ae(Ye,tt,je){if(typeof Ye!="object")throw new TypeError("options must be an object");for(var Fe=Object.keys(Ye),Ee=Fe.length;Ee-- >0;){var ze=Fe[Ee],Me=tt[ze];if(Me){var Ae=Ye[ze],x=Ae===void 0||Me(Ae,ze,Ye);if(x!==!0)throw new TypeError("option "+ze+" must be "+x);continue}if(je!==!0)throw Error("Unknown option "+ze)}}ct.exports={assertOptions:ae,validators:se}},4867:function(ct,Xt,we){"use strict";var P=we(1849),se=Object.prototype.toString;function H(at){return Array.isArray(at)}function ae(at){return typeof at>"u"}function Ye(at){return at!==null&&!ae(at)&&at.constructor!==null&&!ae(at.constructor)&&typeof at.constructor.isBuffer=="function"&&at.constructor.isBuffer(at)}function tt(at){return se.call(at)==="[object ArrayBuffer]"}function je(at){return se.call(at)==="[object FormData]"}function Fe(at){var Jt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Jt=ArrayBuffer.isView(at):Jt=at&&at.buffer&&tt(at.buffer),Jt}function Ee(at){return typeof at=="string"}function ze(at){return typeof at=="number"}function Me(at){return at!==null&&typeof at=="object"}function Ae(at){if(se.call(at)!=="[object Object]")return!1;var Jt=Object.getPrototypeOf(at);return Jt===null||Jt===Object.prototype}function x(at){return se.call(at)==="[object Date]"}function Je(at){return se.call(at)==="[object File]"}function Vt(at){return se.call(at)==="[object Blob]"}function Zn(at){return se.call(at)==="[object Function]"}function Ht(at){return Me(at)&&Zn(at.pipe)}function an(at){return se.call(at)==="[object URLSearchParams]"}function ie(at){return at.trim?at.trim():at.replace(/^\s+|\s+$/g,"")}function Ot(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function kt(at,Jt){if(!(at===null||typeof at>"u"))if(typeof at!="object"&&(at=[at]),H(at))for(var Et=0,ot=at.length;Et<ot;Et++)Jt.call(null,at[Et],Et,at);else for(var ft in at)Object.prototype.hasOwnProperty.call(at,ft)&&Jt.call(null,at[ft],ft,at)}function gr(){var at={};function Jt(ft,Ve){Ae(at[Ve])&&Ae(ft)?at[Ve]=gr(at[Ve],ft):Ae(ft)?at[Ve]=gr({},ft):H(ft)?at[Ve]=ft.slice():at[Ve]=ft}for(var Et=0,ot=arguments.length;Et<ot;Et++)kt(arguments[Et],Jt);return at}function Ar(at,Jt,Et){return kt(Jt,function(ft,Ve){Et&&typeof ft=="function"?at[Ve]=P(ft,Et):at[Ve]=ft}),at}function fi(at){return at.charCodeAt(0)===65279&&(at=at.slice(1)),at}ct.exports={isArray:H,isArrayBuffer:tt,isBuffer:Ye,isFormData:je,isArrayBufferView:Fe,isString:Ee,isNumber:ze,isObject:Me,isPlainObject:Ae,isUndefined:ae,isDate:x,isFile:Je,isBlob:Vt,isFunction:Zn,isStream:Ht,isURLSearchParams:an,isStandardBrowserEnv:Ot,forEach:kt,merge:gr,extend:Ar,trim:ie,stripBOM:fi}},6905:function(ct,Xt){var we,P,se;(function(H,ae){var Ye=ae();P=[],we=Ye.Routing,se=typeof we=="function"?we.apply(Xt,P):we,se!==void 0&&(ct.exports=se)})(this,function(){"use strict";var H=Object.assign||function(Ee){for(var ze=1;ze<arguments.length;ze++){var Me=arguments[ze];for(var Ae in Me)Object.prototype.hasOwnProperty.call(Me,Ae)&&(Ee[Ae]=Me[Ae])}return Ee},ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},Ye=function(){function Ee(ze,Me){for(var Ae=0;Ae<Me.length;Ae++){var x=Me[Ae];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(ze,x.key,x)}}return function(ze,Me,Ae){return Me&&Ee(ze.prototype,Me),Ae&&Ee(ze,Ae),ze}}();function tt(Ee,ze){if(!(Ee instanceof ze))throw new TypeError("Cannot call a class as a function")}var je=function(){function Ee(ze,Me){tt(this,Ee),this.context_=ze||{base_url:"",prefix:"",host:"",port:"",scheme:"",locale:""},this.setRoutes(Me||{})}return Ye(Ee,[{key:"setRoutingData",value:function(Me){this.setBaseUrl(Me.base_url),this.setRoutes(Me.routes),"prefix"in Me&&this.setPrefix(Me.prefix),"port"in Me&&this.setPort(Me.port),"locale"in Me&&this.setLocale(Me.locale),this.setHost(Me.host),this.setScheme(Me.scheme)}},{key:"setRoutes",value:function(Me){this.routes_=Object.freeze(Me)}},{key:"getRoutes",value:function(){return this.routes_}},{key:"setBaseUrl",value:function(Me){this.context_.base_url=Me}},{key:"getBaseUrl",value:function(){return this.context_.base_url}},{key:"setPrefix",value:function(Me){this.context_.prefix=Me}},{key:"setScheme",value:function(Me){this.context_.scheme=Me}},{key:"getScheme",value:function(){return this.context_.scheme}},{key:"setHost",value:function(Me){this.context_.host=Me}},{key:"getHost",value:function(){return this.context_.host}},{key:"setPort",value:function(Me){this.context_.port=Me}},{key:"getPort",value:function(){return this.context_.port}},{key:"setLocale",value:function(Me){this.context_.locale=Me}},{key:"getLocale",value:function(){return this.context_.locale}},{key:"buildQueryParams",value:function(Me,Ae,x){var Je=this,Vt=void 0,Zn=new RegExp(/\[\]$/);if(Ae instanceof Array)Ae.forEach(function(Ht,an){Zn.test(Me)?x(Me,Ht):Je.buildQueryParams(Me+"["+((typeof Ht>"u"?"undefined":ae(Ht))==="object"?an:"")+"]",Ht,x)});else if((typeof Ae>"u"?"undefined":ae(Ae))==="object")for(Vt in Ae)this.buildQueryParams(Me+"["+Vt+"]",Ae[Vt],x);else x(Me,Ae)}},{key:"getRoute",value:function(Me){var Ae=this.context_.prefix+Me,x=Me+"."+this.context_.locale,Je=this.context_.prefix+Me+"."+this.context_.locale,Vt=[Ae,x,Je,Me];for(var Zn in Vt)if(Vt[Zn]in this.routes_)return this.routes_[Vt[Zn]];throw new Error('The route "'+Me+'" does not exist.')}},{key:"generate",value:function(Me,Ae){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Je=this.getRoute(Me),Vt=Ae||{},Zn=H({},Vt),Ht="",an=!0,ie="",Ot=typeof this.getPort()>"u"||this.getPort()===null?"":this.getPort();if(Je.tokens.forEach(function(Jt){if(Jt[0]==="text"){Ht=Ee.encodePathComponent(Jt[1])+Ht,an=!1;return}if(Jt[0]==="variable"){var Et=Je.defaults&&Jt[3]in Je.defaults;if(an===!1||!Et||Jt[3]in Vt&&Vt[Jt[3]]!=Je.defaults[Jt[3]]){var ot=void 0;if(Jt[3]in Vt)ot=Vt[Jt[3]],delete Zn[Jt[3]];else if(Et)ot=Je.defaults[Jt[3]];else{if(an)return;throw new Error('The route "'+Me+'" requires the parameter "'+Jt[3]+'".')}var ft=ot===!0||ot===!1||ot==="";if(!ft||!an){var Ve=Ee.encodePathComponent(ot);Ve==="null"&&ot===null&&(Ve=""),Ht=Jt[1]+Ve+Ht}an=!1}else Et&&Jt[3]in Zn&&delete Zn[Jt[3]];return}throw new Error('The token type "'+Jt[0]+'" is not supported.')}),Ht===""&&(Ht="/"),Je.hosttokens.forEach(function(Jt){var Et=void 0;if(Jt[0]==="text"){ie=Jt[1]+ie;return}Jt[0]==="variable"&&(Jt[3]in Vt?(Et=Vt[Jt[3]],delete Zn[Jt[3]]):Je.defaults&&Jt[3]in Je.defaults&&(Et=Je.defaults[Jt[3]]),ie=Jt[1]+Et+ie)}),Ht=this.context_.base_url+Ht,Je.requirements&&"_scheme"in Je.requirements&&this.getScheme()!=Je.requirements._scheme){var kt=ie||this.getHost();Ht=Je.requirements._scheme+"://"+kt+(kt.indexOf(":"+Ot)>-1||Ot===""?"":":"+Ot)+Ht}else if(typeof Je.schemes<"u"&&typeof Je.schemes[0]<"u"&&this.getScheme()!==Je.schemes[0]){var gr=ie||this.getHost();Ht=Je.schemes[0]+"://"+gr+(gr.indexOf(":"+Ot)>-1||Ot===""?"":":"+Ot)+Ht}else ie&&this.getHost()!==ie+(ie.indexOf(":"+Ot)>-1||Ot===""?"":":"+Ot)?Ht=this.getScheme()+"://"+ie+(ie.indexOf(":"+Ot)>-1||Ot===""?"":":"+Ot)+Ht:x===!0&&(Ht=this.getScheme()+"://"+this.getHost()+(this.getHost().indexOf(":"+Ot)>-1||Ot===""?"":":"+Ot)+Ht);if(Object.keys(Zn).length>0){var Ar=void 0,fi=[],at=function(Et,ot){ot=typeof ot=="function"?ot():ot,ot=ot===null?"":ot,fi.push(Ee.encodeQueryComponent(Et)+"="+Ee.encodeQueryComponent(ot))};for(Ar in Zn)this.buildQueryParams(Ar,Zn[Ar],at);Ht=Ht+"?"+fi.join("&")}return Ht}}],[{key:"getInstance",value:function(){return Fe}},{key:"setData",value:function(Me){var Ae=Ee.getInstance();Ae.setRoutingData(Me)}},{key:"customEncodeURIComponent",value:function(Me){return encodeURIComponent(Me).replace(/%2F/g,"/").replace(/%40/g,"@").replace(/%3A/g,":").replace(/%21/g,"!").replace(/%3B/g,";").replace(/%2C/g,",").replace(/%2A/g,"*").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}},{key:"encodePathComponent",value:function(Me){return Ee.customEncodeURIComponent(Me).replace(/%3D/g,"=").replace(/%2B/g,"+").replace(/%21/g,"!").replace(/%7C/g,"|")}},{key:"encodeQueryComponent",value:function(Me){return Ee.customEncodeURIComponent(Me).replace(/%3F/g,"?")}}]),Ee}();je.Route,je.Context;var Fe=new je;return{Router:je,Routing:Fe}})},5494:function(ct,Xt,we){"use strict";var P=we(6734);const se=["additionalAnnotation","annotation","arrows","color","comment","commentBefore","fen","flags","from","ids","lines","moveNumber","piece","previous","promotion","san","time","to"],H=()=>{let ae;const Ye={lines:[]};return{state:Ye,updateLines:je=>{Ye.lines=[...je],(je||[]).forEach((Fe,Ee)=>{ae=P.x.isContinuation(je,Fe.id),Ye.lines[Ee]=Fe.map(ze=>{const Me={};return se.forEach(Ae=>{typeof ze[Ae]<"u"&&(Me[Ae]=ze[Ae])}),ae&&ze.ids.move===0&&(Me.commentBefore=Fe.initComment),Me}),Ye.lines[Ee].atMoveNode=Fe.atMoveNode,Ye.lines[Ee].id=Fe.id,Ye.lines[Ee].parentId=Fe.parentId})}}};Xt.Z=H()},6734:function(ct,Xt,we){"use strict";we.d(Xt,{x:function(){return P}});const P={getLine:(se,H)=>se[H]||null,getNode:(se,H,ae)=>{if(typeof H=="number"){if(typeof ae<"u"){const tt=P.getLine(se,Math.max(0,H));return tt?tt[ae]:null}return null}else if(!H)return null;const Ye=P.getLine(se,Math.max(0,H.line));return Ye?Ye[H.move]:null},getSelectedLine:se=>P.getLine(se.jce._lines(),se.tree.selected.line),getSelectedNode:se=>P.getNode(se.jce._lines(),se.tree.selected),nodeIsSelected:(se,H)=>!H&&!H.line&&!H.move?!1:se.selected.line===H.line&&se.selected.move===H.move,getLinesFromJce:se=>P.formatLinesFromJce(se.jce._lines()),getJceSelectedLine:se=>se._lines()[se._history().id],formatLinesFromJce:se=>P.consolidateComments(se),consolidateComments:se=>se.map(H=>{const ae=P.isContinuation(se,H.id)?P.getNode(se,H.id,1):P.getNode(se,H.id,0);return ae&&H.initComment&&(ae.commentBefore=H.initComment),H}),isContinuation:(se,H)=>{const ae=P.getLine(se,H);if(!ae)return!1;if(typeof ae.parentId<"u"&&typeof ae[0]<"u"){const Ye=P.getNode(se,ae.parentId,ae.atMoveNode);return!Ye||!Ye.move?!1:Ye.move===ae[0].move}return!1},isMainLine:se=>se===0,getNextNodeIds:(se,H)=>!se||se.move+H<0?null:{line:se.line,move:se.move+H},getNextContinuationLineId:(se,H)=>{const ae=P.getNode(se,H);if(!ae||!ae.lines)return null;const Ye=ae.lines.find(tt=>P.isContinuation(se,tt));return Ye!==-1?Ye:null},getParentNode:(se,H)=>{const ae={line:se[H.line].parentId,move:se[H.line].atMoveNode};return P.findNode(se,ae)},getParentNodeIds:(se,H)=>{const ae=P.getLine(se,H.line);return!ae||typeof ae.parentId>"u"?null:{line:ae.parentId,move:ae.atMoveNode}},deleteRemainingNodes:(se,H)=>se?(se.length=H+1,se):null,deleteNode:(se,H)=>P.prune(se,{line:H.line,move:H.move-1}),deleteLine:(se,H)=>{const ae=P.getLine(se,H);if(typeof ae.parentId<"u"){const tt=P.getNode(se,{line:ae.parentId,move:ae.atMoveNode});tt.lines=tt.lines.filter(je=>je!==H),tt.lines.length===0&&delete tt.lines}const Ye=se.filter(tt=>P.isMainLine(tt.id)||tt.id!==H);return P.rebuildIds(Ye)},rebuildIds:se=>{const H=[];return se.forEach((ae,Ye)=>{ae.id!==Ye&&(H[ae.id]=Ye)}),se.map(ae=>(ae.id=typeof H[ae.id]<"u"?H[ae.id]:ae.id,typeof H[ae.parentId]<"u"&&(ae.parentId=H[ae.parentId]),ae.forEach(Ye=>{Ye.ids.line=typeof H[Ye.ids.line]<"u"?H[Ye.ids.line]:Ye.ids.line,Ye.lines&&Ye.lines.length>0&&(Ye.lines=Ye.lines.map(tt=>typeof H[tt]<"u"?H[tt]:tt).filter(tt=>typeof se[tt]<"u"),Ye.lines.length===0&&delete Ye.lines)}),ae))},prune:(se,H)=>P.getNode(se,{line:H.line,move:H.move+1})?(se[H.line]=P.deleteRemainingNodes(se[H.line],H.move),!P.isMainLine(H.line)&&P.isFirstVisibleNode(se,H)&&se.splice(se.findIndex(ae=>ae.id===H.line),1),se.sort((ae,Ye)=>ae.id-Ye.id).reduce((ae,Ye)=>{const tt=P.getNode(ae,{line:Ye.parentId,move:Ye.atMoveNode});return(P.isMainLine(Ye.id)||tt)&&ae.push(Ye),ae},[])):se,isFirstNodeInTree:se=>se.line===0&&se.move===-1,isFirstVisibleNode:(se,H)=>P.isContinuation(se,H.line)?H.move===1:H.move===0,isFirstNodeInLine:(se,H)=>H&&se&&se[H.line]&&se[H.line][0]&&se[H.line][0].ids&&se[H.line][0].ids.line===H.line&&se[H.line][0].ids.move===H.move,isHead:(se,H)=>H&&se[H.line].length-1===H.move||!1,getHeadIds:(se,H)=>({line:H,move:se[H].length-1}),nodeMatchesMove:(se,H,ae)=>{const Ye=P.getNode(se,H);return Ye?Ye.from===ae.from&&Ye.to===ae.to&&(Ye.promotion||null)===(ae.promotion||null):!1},shouldMatchMove:(se,H,ae)=>se&&H===1&&ae===0,getNextMatchingNode:(se,H={},ae)=>{const Ye=P.getNode(se,H),tt=P.getNode(se,H.line,H.move+1);return se.reduce((Fe,Ee)=>Fe.concat(Ee),[]).filter(Fe=>Ye&&Fe.moveNumber===Ye.moveNumber+1||tt&&Fe.moveNumber===tt.moveNumber).filter(Fe=>!!(Ye&&Fe.ids.line===Ye.ids.line||tt&&Fe.ids.line===tt.ids.line||Ye&&Ye.lines&&Ye.lines.indexOf(Fe.ids.line)!==-1&&P.isContinuation(se,Fe.ids.line)||tt&&tt.lines&&tt.lines.indexOf(Fe.ids.line)!==-1&&!P.isContinuation(se,Fe.ids.line))).filter(Fe=>P.nodeMatchesMove(se,Fe.ids,ae)).sort((Fe,Ee)=>Fe.ids.line-Ee.ids.line)[0]||null},clearNode:(se,H)=>{const ae=P.getNode(se,H);return ae?(delete ae.comment,delete ae.annotation,ae):null},findNode:(se,H={},ae=void 0,Ye=!0)=>{if(!se||typeof H.line>"u")return null;if(typeof ae=="string")switch(H.move){case"begin":H.move=0;break;case"end":H.move=se[0].length-1;break;default:break}else if(typeof H.move>"u")return se[H.line];let tt;return ae&&Math.abs(ae)!==0&&(H=new Array(Math.abs(ae)).fill(ae/Math.abs(ae)).reduce((je,Fe)=>{if(je===null)return null;const Ee=P.isContinuation(se,je.line);let ze=P.getNextNodeIds(je,Fe);if(P.getNode(se,ze)&&!(Fe===-1&&Ee&&ze.move===0))return ze;switch(Fe){case 1:return Ye?je:(tt=P.getNextContinuationLineId(se,je),tt!==null?{line:tt,move:1}:null);case-1:return ze=Ee?P.getParentNodeIds(se,je):P.getNextNodeIds(P.getParentNodeIds(se,je),-1),P.getNode(se,ze)?ze:je;default:return null}},H)),P.getNode(se,H)||null},clearNodeMarkings:(se,H)=>{const ae=P.getNode(se,H);return ae?(delete ae.squares,delete ae.arrows,delete ae.effects,ae):null},clearNodeAnalysis:(se,H)=>{const ae=P.getNode(se,H);return ae?(delete ae.comment,delete ae.annotation,delete ae.additionalAnnotation,ae):null},clearAllMarkings:se=>se?(se.forEach(H=>{H.length>0&&H.forEach(ae=>P.clearNodeMarkings(se,{line:ae.ids.line,move:ae.ids.move}))}),se):null,clearAnalysis:se=>se?(se.forEach(H=>{H.length>0&&H.forEach(ae=>P.clearNodeAnalysis(se,{line:ae.ids.line,move:ae.ids.move}))}),se):null}},3162:function(ct,Xt,we){var P,se,H;(function(ae,Ye){se=[],P=Ye,H=typeof P=="function"?P.apply(Xt,se):P,H!==void 0&&(ct.exports=H)})(this,function(){"use strict";function ae(Me,Ae){return typeof Ae>"u"?Ae={autoBom:!1}:typeof Ae!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Ae={autoBom:!Ae}),Ae.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Me.type)?new Blob(["\uFEFF",Me],{type:Me.type}):Me}function Ye(Me,Ae,x){var Je=new XMLHttpRequest;Je.open("GET",Me),Je.responseType="blob",Je.onload=function(){ze(Je.response,Ae,x)},Je.onerror=function(){console.error("could not download file")},Je.send()}function tt(Me){var Ae=new XMLHttpRequest;Ae.open("HEAD",Me,!1);try{Ae.send()}catch{}return 200<=Ae.status&&299>=Ae.status}function je(Me){try{Me.dispatchEvent(new MouseEvent("click"))}catch{var Ae=document.createEvent("MouseEvents");Ae.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Me.dispatchEvent(Ae)}}var Fe=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof we.g=="object"&&we.g.global===we.g?we.g:void 0,Ee=Fe.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),ze=Fe.saveAs||(typeof window!="object"||window!==Fe?function(){}:"download"in HTMLAnchorElement.prototype&&!Ee?function(Me,Ae,x){var Je=Fe.URL||Fe.webkitURL,Vt=document.createElement("a");Ae=Ae||Me.name||"download",Vt.download=Ae,Vt.rel="noopener",typeof Me=="string"?(Vt.href=Me,Vt.origin===location.origin?je(Vt):tt(Vt.href)?Ye(Me,Ae,x):je(Vt,Vt.target="_blank")):(Vt.href=Je.createObjectURL(Me),setTimeout(function(){Je.revokeObjectURL(Vt.href)},4e4),setTimeout(function(){je(Vt)},0))}:"msSaveOrOpenBlob"in navigator?function(Me,Ae,x){if(Ae=Ae||Me.name||"download",typeof Me!="string")navigator.msSaveOrOpenBlob(ae(Me,x),Ae);else if(tt(Me))Ye(Me,Ae,x);else{var Je=document.createElement("a");Je.href=Me,Je.target="_blank",setTimeout(function(){je(Je)})}}:function(Me,Ae,x,Je){if(Je=Je||open("","_blank"),Je&&(Je.document.title=Je.document.body.innerText="downloading..."),typeof Me=="string")return Ye(Me,Ae,x);var Vt=Me.type==="application/octet-stream",Zn=/constructor/i.test(Fe.HTMLElement)||Fe.safari,Ht=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ht||Vt&&Zn||Ee)&&typeof FileReader<"u"){var an=new FileReader;an.onloadend=function(){var kt=an.result;kt=Ht?kt:kt.replace(/^data:[^;]*;/,"data:attachment/file;"),Je?Je.location.href=kt:location=kt,Je=null},an.readAsDataURL(Me)}else{var ie=Fe.URL||Fe.webkitURL,Ot=ie.createObjectURL(Me);Je?Je.location=Ot:location.href=Ot,Je=null,setTimeout(function(){ie.revokeObjectURL(Ot)},4e4)}});Fe.saveAs=ze.saveAs=ze,ct.exports=ze})},4155:function(ct){var Xt=ct.exports={},we,P;function se(){throw new Error("setTimeout has not been defined")}function H(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?we=setTimeout:we=se}catch{we=se}try{typeof clearTimeout=="function"?P=clearTimeout:P=H}catch{P=H}})();function ae(Je){if(we===setTimeout)return setTimeout(Je,0);if((we===se||!we)&&setTimeout)return we=setTimeout,setTimeout(Je,0);try{return we(Je,0)}catch{try{return we.call(null,Je,0)}catch{return we.call(this,Je,0)}}}function Ye(Je){if(P===clearTimeout)return clearTimeout(Je);if((P===H||!P)&&clearTimeout)return P=clearTimeout,clearTimeout(Je);try{return P(Je)}catch{try{return P.call(null,Je)}catch{return P.call(this,Je)}}}var tt=[],je=!1,Fe,Ee=-1;function ze(){!je||!Fe||(je=!1,Fe.length?tt=Fe.concat(tt):Ee=-1,tt.length&&Me())}function Me(){if(!je){var Je=ae(ze);je=!0;for(var Vt=tt.length;Vt;){for(Fe=tt,tt=[];++Ee<Vt;)Fe&&Fe[Ee].run();Ee=-1,Vt=tt.length}Fe=null,je=!1,Ye(Je)}}Xt.nextTick=function(Je){var Vt=new Array(arguments.length-1);if(arguments.length>1)for(var Zn=1;Zn<arguments.length;Zn++)Vt[Zn-1]=arguments[Zn];tt.push(new Ae(Je,Vt)),tt.length===1&&!je&&ae(Me)};function Ae(Je,Vt){this.fun=Je,this.array=Vt}Ae.prototype.run=function(){this.fun.apply(null,this.array)},Xt.title="browser",Xt.browser=!0,Xt.env={},Xt.argv=[],Xt.version="",Xt.versions={};function x(){}Xt.on=x,Xt.addListener=x,Xt.once=x,Xt.off=x,Xt.removeListener=x,Xt.removeAllListeners=x,Xt.emit=x,Xt.prependListener=x,Xt.prependOnceListener=x,Xt.listeners=function(Je){return[]},Xt.binding=function(Je){throw new Error("process.binding is not supported")},Xt.cwd=function(){return"/"},Xt.chdir=function(Je){throw new Error("process.chdir is not supported")},Xt.umask=function(){return 0}},4279:function(ct){function Xt(){}Xt.prototype={on:function(we,P,se){var H=this.e||(this.e={});return(H[we]||(H[we]=[])).push({fn:P,ctx:se}),this},once:function(we,P,se){var H=this;function ae(){H.off(we,ae),P.apply(se,arguments)}return ae._=P,this.on(we,ae,se)},emit:function(we){var P=[].slice.call(arguments,1),se=((this.e||(this.e={}))[we]||[]).slice(),H=0,ae=se.length;for(H;H<ae;H++)se[H].fn.apply(se[H].ctx,P);return this},off:function(we,P){var se=this.e||(this.e={}),H=se[we],ae=[];if(H&&P)for(var Ye=0,tt=H.length;Ye<tt;Ye++)H[Ye].fn!==P&&H[Ye].fn._!==P&&ae.push(H[Ye]);return ae.length?se[we]=ae:delete se[we],this}},ct.exports=Xt,ct.exports.TinyEmitter=Xt},4752:function(ct){ct.exports=Xt;function Xt(we){return we=we||7,Math.random().toString(35).substr(2,we)}},6437:function(ct,Xt,we){ct.exports=we(4474)(279)},9402:function(ct,Xt,we){ct.exports=we(4474)(475)},4338:function(ct,Xt,we){ct.exports=we(4474)(629)},7739:function(ct,Xt,we){ct.exports=we(4474)(717)},1916:function(ct,Xt,we){ct.exports=we(4474)(848)},4474:function(ct){"use strict";ct.exports=vueDLL}},E6={};function ir(ct){var Xt=E6[ct];if(Xt!==void 0)return Xt.exports;var we=E6[ct]={id:ct,loaded:!1,exports:{}};return w6[ct].call(we.exports,we,we.exports,ir),we.loaded=!0,we.exports}ir.m=w6,function(){ir.n=function(ct){var Xt=ct&&ct.__esModule?function(){return ct.default}:function(){return ct};return ir.d(Xt,{a:Xt}),Xt}}(),function(){var ct=Object.getPrototypeOf?function(we){return Object.getPrototypeOf(we)}:function(we){return we.__proto__},Xt;ir.t=function(we,P){if(P&1&&(we=this(we)),P&8||typeof we=="object"&&we&&(P&4&&we.__esModule||P&16&&typeof we.then=="function"))return we;var se=Object.create(null);ir.r(se);var H={};Xt=Xt||[null,ct({}),ct([]),ct(ct)];for(var ae=P&2&&we;typeof ae=="object"&&!~Xt.indexOf(ae);ae=ct(ae))Object.getOwnPropertyNames(ae).forEach(function(Ye){H[Ye]=function(){return we[Ye]}});return H.default=function(){return we},ir.d(se,H),se}}(),function(){ir.d=function(ct,Xt){for(var we in Xt)ir.o(Xt,we)&&!ir.o(ct,we)&&Object.defineProperty(ct,we,{enumerable:!0,get:Xt[we]})}}(),function(){ir.f={},ir.e=function(ct){return Promise.all(Object.keys(ir.f).reduce(function(Xt,we){return ir.f[we](ct,Xt),Xt},[]))}}(),function(){ir.u=function(ct){if(ct===48)return"web.chunk.client.14a0accd.js";if(ct===525)return"web.chunk.client.589695c7.js";if(ct===804)return"web.chunk.client.daa5e193.js";if(ct===155)return"web.chunk.client.34a7557e.js";if(ct===442)return"web.chunk.client.27d48565.js";if(ct===790)return"web.chunk.client.c69a41c4.js"}}(),function(){ir.miniCssF=function(ct){if(ct===961)return"embed-diagrams.client.8b2d54d5.css"}}(),function(){ir.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){ir.hmd=function(ct){return ct=Object.create(ct),ct.children||(ct.children=[]),Object.defineProperty(ct,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+ct.id)}}),ct}}(),function(){ir.o=function(ct,Xt){return Object.prototype.hasOwnProperty.call(ct,Xt)}}(),function(){var ct={},Xt="client:";ir.l=function(we,P,se,H){if(ct[we]){ct[we].push(P);return}var ae,Ye;if(se!==void 0)for(var tt=document.getElementsByTagName("script"),je=0;je<tt.length;je++){var Fe=tt[je];if(Fe.getAttribute("src")==we||Fe.getAttribute("data-webpack")==Xt+se){ae=Fe;break}}ae||(Ye=!0,ae=document.createElement("script"),ae.charset="utf-8",ae.timeout=120,ir.nc&&ae.setAttribute("nonce",ir.nc),ae.setAttribute("data-webpack",Xt+se),ae.src=we),ct[we]=[P];var Ee=function(Me,Ae){ae.onerror=ae.onload=null,clearTimeout(ze);var x=ct[we];if(delete ct[we],ae.parentNode&&ae.parentNode.removeChild(ae),x&&x.forEach(function(Je){return Je(Ae)}),Me)return Me(Ae)},ze=setTimeout(Ee.bind(null,void 0,{type:"timeout",target:ae}),12e4);ae.onerror=Ee.bind(null,ae.onerror),ae.onload=Ee.bind(null,ae.onload),Ye&&document.head.appendChild(ae)}}(),function(){ir.r=function(ct){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ct,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ct,"__esModule",{value:!0})}}(),function(){ir.p="/bundles/app/js/"}(),function(){if(typeof ir<"u"){var ct=ir.u,Xt=ir.e,we=new Map,P=new Map;ir.u=function(se){var H=ct(se);return H+(we.has(se)?"?"+we.get(se):"")},ir.e=function(se){var H=Xt(se);return H.catch(function(ae){var Ye=P.has(se)?P.get(se):2;if(Ye<1){var tt=ct(se);throw ae.message="Loading chunk "+se+` failed after 2 retries.
(`+tt+")",ae.request=tt,ae}return new Promise(function(je){setTimeout(function(){var Fe=2-Ye+1,Ee="&retry-attempt="+Fe,ze="cache-bust=true"+Ee;we.set(se,ze),P.set(se,Ye-1),je(ir.e(se))},0)})})}}}(),function(){var ct={961:0};ir.f.j=function(P,se){var H=ir.o(ct,P)?ct[P]:void 0;if(H!==0)if(H)se.push(H[2]);else{var ae=new Promise(function(Fe,Ee){H=ct[P]=[Fe,Ee]});se.push(H[2]=ae);var Ye=ir.p+ir.u(P),tt=new Error,je=function(Fe){if(ir.o(ct,P)&&(H=ct[P],H!==0&&(ct[P]=void 0),H)){var Ee=Fe&&(Fe.type==="load"?"missing":Fe.type),ze=Fe&&Fe.target&&Fe.target.src;tt.message="Loading chunk "+P+` failed.
(`+Ee+": "+ze+")",tt.name="ChunkLoadError",tt.type=Ee,tt.request=ze,H[1](tt)}};ir.l(Ye,je,"chunk-"+P,P)}};var Xt=function(P,se){var H=se[0],ae=se[1],Ye=se[2],tt,je,Fe=0;if(H.some(function(ze){return ct[ze]!==0})){for(tt in ae)ir.o(ae,tt)&&(ir.m[tt]=ae[tt]);if(Ye)var Ee=Ye(ir)}for(P&&P(se);Fe<H.length;Fe++)je=H[Fe],ir.o(ct,je)&&ct[je]&&ct[je][0](),ct[je]=0},we=(typeof self<"u"?self:this).wpChessCom_i9Sk=(typeof self<"u"?self:this).wpChessCom_i9Sk||[];we.forEach(Xt.bind(null,0)),we.push=Xt.bind(null,we.push.bind(we))}();var pM={};(function(){"use strict";var ct={component:"embed-diagrams-component","play-at-chess":"embed-diagrams-play-at-chess"}})(),function(){"use strict";var ct=ir(6905),Xt=ir.n(ct);function we(){return Xt()}function P(e){var n,a,u;const d=we();if(!d.routes_[e]){try{Object.assign(d.context_,{base_url:"",prefix:"",host:"www.chess.com",port:"",scheme:"https",locale:""})}catch{}if(Object.isFrozen(d.routes_)&&(d.routes_=Object.assign({},d.routes_)),(a=(n=window.chesscom)==null?void 0:n.routes)!=null&&a[e]){const h=window.chesscom.routes[e],g=".chess-dev.com",_=window.location.host.replace(/^[^.]+/,"");_&&((u=h.hosttokens)==null||u.forEach(b=>{b.forEach((A,T)=>{A.includes(g)&&(b[T]=A.replace(g,_))})})),d.routes_[e]=h}}}class se{generate(n,a,u){const d=a||{};typeof d.username=="string"&&(d.username=d.username.toLowerCase()),P(n);try{return we().generate(n,d,u)}catch{const g=new Error(`Couldn't find missing route '${n}'.`);return console.error(g),"/"}}i18nable(n){return`i18n_${n}`in window.chesscom.routes}i18n(n,a,u){var d,h;let g=n;const _=a||{};if((h=(d=window.context)==null?void 0:d.route)!=null&&h.startsWith("i18n")&&this.i18nable(n)){const A="_locale";_[A]=window.context.locale.slice(0,2),g=`i18n_${n}`}const b=this.generate(g,_,u);return u?b:b.replace(/^.*\/\/[^/]+/,"")}}var H=new se;const ae=(e,n,a)=>{let u=e;const d=n;if(a){const h=document.querySelector("[data-url-locale]"),g=h?.getAttribute("data-url-locale"),_=g?.split("_")[0]!=="en"&&g?.split("_")[0];_&&d&&(u=a,d._locale=_)}return H.generate(u,d)};var Ye=ir(9402),tt=ir.n(Ye),je,Fe;const Ee=((Fe=(je=window.context)==null?void 0:je.i18n)==null?void 0:Fe.locale)==="fr_FR";tt().placeHolderPrefix="",tt().placeHolderSuffix="";const ze=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Me=e=>{const n={};return e!==null&&typeof e<"u"&&Object.keys(e).forEach(a=>{const u=ze(a);u!=null&&u.length>0&&(n[u]=e[a])}),n},Ae=(e,n="messages",a)=>{if(window.chesscom_translations&&window.chesscom_translations[n]&&window.chesscom_translations[n][e])return window.chesscom_translations[n][e];if(window.chesscom_live_translations&&window.chesscom_live_translations[n]&&window.chesscom_live_translations[n][e])return window.chesscom_live_translations[n][e];if(n==="live"&&window.i18n_phrases&&window.i18n_phrases[e])return window.i18n_phrases;if(n==="countries"&&window.Country&&window.Country[e])return window.Country;if(!a)return n!=="javascript"?Ae(e,"javascript"):e},x=(e,n,a)=>tt().trans(Ae(e,a),Me(n),a),Je=(e,n,a,u)=>{if(typeof n>"u")return"";const d=Ae(e,u),h=Me(a);return Ee?Vt(d,n,h,u):tt().transChoice(d,n,h)};function Vt(e,n,a,u){const[d,h,g]=e.split("|").map(_=>_.trim());return n===0||n===1?tt().trans(d,a,u):n%1e6===0?tt().trans(h,a,u):tt().trans(g,a,u)}const Zn=(e,n)=>!!Ae(e,n,!0),Ht=()=>{if(window.chesscom_translations&&window.chesscom_translations.countries)return window.chesscom_translations.countries;if(window.chesscom_live_translations&&window.chesscom_live_translations.countries)return window.chesscom_live_translations.countries;if(window.Country)return window.Country},an={trans:x,transChoice:Je};var ie=an;const Ot={FAILED:"Failed",SOLVED:"Solved"},kt={ANALYSIS:"analysis",BIG_SCREEN_HEIGHT:567,DESKTOP_WIDTH:768,DIAGRAM_OBSERVED:"data-diagram-observed",MULTI_GAMES_PGN:"multi-games-pgn.pgn",MULTI_PGN_VIEWER:"multi-pgn-viewer",TIMEOUT:500,VARIATION_HEIGHT:25},gr={INSIDE:"inside"},Ar={COMMON:"?",DATE:"????.??.??",DAY:"??",MONTHS:"??",RESULT:"*",YEAR:"????"},fi={FORWARD:"forward",BACKWARD:"backward"},at={BOARD_INITIALIZED:"board-initialized",DAILY_PUZZLE:"Daily Puzzle",DIAGRAM_VIEWER_BLUR:"DIAGRAM_VIEWER_BLUR",DIAGRAM_VIEWER_FOCUS:"DIAGRAM_VIEWER_FOCUS",FOCUS_ON_WIDGET:"focus-on-widget"},Jt={ANALYSIS:"chess-board-search",DOWNLOAD:"download",FLIPBOARD:"repeat",HINT:"lightbulb",LEFT:"chevron-left",NEXT:"chevron-next",PAUSE:"pause",PLAY:"play",PREVIOUS:"chevron-previous",RESET:"redo",RIGHT:"chevron-right",SHARE:"share",SOLUTION:"circle-question"},Et={DOWN:40,ENTER:13,LEFT:37,RIGHT:39,UP:38,X:88},ot=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ft={BLACK_TO_MOVE:"Black to Move",CORRECT:"Correct!",INCORRECT:"Incorrect",WHITE_TO_MOVE:"White to Move",SOLVED:"Solved!"},Ve={CHESS_DIAGRAM:"chessDiagramDiv",CHESS_DAILY_PUZZLE:"dailyPuzzleDiv"},Tn={analysis:ae("web_analysis_board_editor"),votechess:ae("web_votechess_game")},Wt={BLACK:"black",DATE:"date",ECO:"eco",EVENT:"event",RESULT:"result",ROUND:"round",SITE:"site",WHITE:"white"},Mn={analysis:ie.trans("Go To Analysis"),download:ie.trans("Download all PGNs"),firstMove:ie.trans("First Move"),flipBoard:ie.trans("Flip Board"),hint:ie.trans("Hint"),lastMove:ie.trans("Last Move"),nextMove:ie.trans("Next Move"),playPause:ie.trans("Play / Pause"),previousMove:ie.trans("Previous Move"),reset:ie.trans("Reset"),share:ie.trans("Share"),solution:ie.trans("Solution"),unknownPlayer:ie.trans("Unknown player")},pr={DIAGRAM:"diagram",DAILY_PUZZLE:"daily-puzzle"},qr={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function Cn(e){const n=e.getAttribute("id")||"";let a="";if(n){const u=n.split("_").reverse();a=`${u[0]}_${u[1]}`}return a}var jn=ir(3527),Ft=ir.n(jn),At=Ft();const qt=(e,...n)=>JSON.parse(e,...n),Xn=(e,...n)=>JSON.stringify(e,...n),Sn={getId:e=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array(e||20).fill(void 0).reduce(a=>a+n.charAt(Math.floor(Math.random()*n.length)),"")},getInitialFen:()=>"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",formatJSTimestampForPgn:e=>{const n=new Date(e),a=`0${n.getUTCDate()}`.slice(-2),u=`0${n.getUTCMonth()+1}`.slice(-2);return`${n.getFullYear()}-${u}-${a}`},getSanFromFileRank:e=>!e||!e.file||!e.rank?null:String.fromCharCode(96+e.file)+e.rank.toString(),getFileRankFromSan:e=>e?{file:e.toLowerCase().charCodeAt(0)-96,rank:Number(e.charAt(1))}:null,getPieceAt:(e,n)=>e.setup.pieces.find(a=>a.file===n.file&&a.rank===n.rank),cloneGame:e=>({id:e.id,variant:e.variant,jce:e.jce,tree:Sn.cloneTree(e.tree),setup:qt(Xn(e.setup)),markings:{...e.markings},settings:{...e.settings},history:[...e.history],premoves:e.premoves.map(n=>qt(Xn(n)))}),cloneTree:e=>({...e,initialMarkings:JSON.parse(JSON.stringify(e.initialMarkings)),selected:{...e.selected},selectedNode:e.selectedNode?{...e.selectedNode,ids:{...e.selectedNode.ids},hash:[...e.selectedNode.hash],lines:e.selectedNode.lines&&[...e.selectedNode.lines],arrows:e.selectedNode.arrows&&[...e.selectedNode.arrows]}:null}),getFirstFen:e=>e.tree.lines[0].length?e.tree.lines[0][0].beforeFen:e.setup.fen},pe="8/8/8/8/8/8/8/8 w KQkq - 0 1",C="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",fe="rnbqkbnr/ppp1pppp/8/3p4/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1",Z="rnbqkbnr/ppp1pppp/8/3p4/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1",Xe="r3k2r/pppqbppp/2npbn2/4p3/4P3/2NPBN2/PPPQBPPP/R3K2R w KQkq - 0 1",De="r3k2r/pppqbppp/2npbn2/4p3/4P3/2NPBN2/PPPQBPPP/R3K2R b KQkq - 0 1",ke="rnbqkbnr/pppp1ppp/4p3/8/6P1/5P2/PPPPP2P/RNBQKBNR b KQkq g3 0 2",$n="7k/4Q3/6K1/8/8/8/8/8 w - - 0 1",j="4k3/8/8/3Pp3/8/8/8/4K3 w - e6 0 1",Se="rnb1k2r/1pp2pp1/1Q3n2/2bpp3/3PPB2/5Nq1/1PP2PP1/RN2KB1R w KQkq - 0 1",Le="rnbqkb1r/ppppppPp/8/8/8/8/PPPPPP1P/RNBQKBNR w KQkq - 0 1",Ge="rnbqkbnr/pppppp1p/8/8/8/8/PPPPPPpP/RNBQKBNR b KQkq - 0 1",ue="rnbqkbnr/ppppp1pp/5p2/8/8/4P3/PPPP1PPP/RNBQKBNR w KQkq - 0 2",st="rnbqkbnr/ppppp1pp/5p2/7Q/8/4P3/PPPP1PPP/RNB1KBNR b KQkq - 1 2",Bt="rn1qkbnr/ppp3pp/4b3/8/8/8/PPPP1PPP/RNB1KBNR w KQkq - 0 6",Qn="rnbqkbnr/pppppppp/8/8/8/4P3/PPPP1PPP/RNBQKBNR b KQkq - 0 1",qn="7k/5K2/6Q1/8/8/8/8/8 b - - 0 1",ai="7k/4N3/5K2/5BN1/8/8/8/r7 b - - 100 113",It="7k/8/8/8/2N5/8/1K6/8 w - - 0 1",Qi="rnb2bnr/pppp2pp/7k/6Q1/2BPP3/8/PPP2PPP/RNB1K2R b K -",$r="rnbqkbnr/ppp1p1pp/8/3pPp2/8/8/PPPP1PPP/RNBQKBNR w KQkq f6 0 3";function lo(){this.__data__=[],this.size=0}var ss=lo;function si(e,n){return e===n||e!==e&&n!==n}var en=si;function on(e,n){for(var a=e.length;a--;)if(en(e[a][0],n))return a;return-1}var Kr=on,wr=Array.prototype,Ji=wr.splice;function Rr(e){var n=this.__data__,a=Kr(n,e);if(a<0)return!1;var u=n.length-1;return a==u?n.pop():Ji.call(n,a,1),--this.size,!0}var vi=Rr;function Ua(e){var n=this.__data__,a=Kr(n,e);return a<0?void 0:n[a][1]}var da=Ua;function zs(e){return Kr(this.__data__,e)>-1}var ls=zs;function us(e,n){var a=this.__data__,u=Kr(a,e);return u<0?(++this.size,a.push([e,n])):a[u][1]=n,this}var cs=us;function vo(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}vo.prototype.clear=ss,vo.prototype.delete=vi,vo.prototype.get=da,vo.prototype.has=ls,vo.prototype.set=cs;var fa=vo;function Bu(){this.__data__=new fa,this.size=0}var ds=Bu;function Dl(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}var Du=Dl;function Fl(e){return this.__data__.get(e)}var zl=Fl;function zo(e){return this.__data__.has(e)}var hn=zo,Wn=typeof global=="object"&&global&&global.Object===Object&&global,yt=Wn,Oe=typeof self=="object"&&self&&self.Object===Object&&self,Rt=yt||Oe||Function("return this")(),tn=Rt,dn=tn.Symbol,Nt=dn,Gt=Object.prototype,On=Gt.hasOwnProperty,re=Gt.toString,ee=Nt?Nt.toStringTag:void 0;function xe(e){var n=On.call(e,ee),a=e[ee];try{e[ee]=void 0;var u=!0}catch{}var d=re.call(e);return u&&(n?e[ee]=a:delete e[ee]),d}var L=xe,Re=Object.prototype,J=Re.toString;function Ke(e){return J.call(e)}var $e=Ke,fn="[object Null]",mt="[object Undefined]",gt=Nt?Nt.toStringTag:void 0;function Rn(e){return e==null?e===void 0?mt:fn:gt&&gt in Object(e)?L(e):$e(e)}var w=Rn;function O(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var q=O,ge="[object AsyncFunction]",ht="[object Function]",et="[object GeneratorFunction]",ne="[object Proxy]";function xt(e){if(!q(e))return!1;var n=w(e);return n==ht||n==et||n==ge||n==ne}var er=xt,Or=tn["__core-js_shared__"],Vr=Or,nr=function(){var e=/[^.]+$/.exec(Vr&&Vr.keys&&Vr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ln(e){return!!nr&&nr in e}var pt=ln,qe=Function.prototype,vn=qe.toString;function An(e){if(e!=null){try{return vn.call(e)}catch{}try{return e+""}catch{}}return""}var Pr=An,Sr=/[\\^$.*+?()[\]{}|]/g,Er=/^\[object .+?Constructor\]$/,Yn=Function.prototype,Hr=Object.prototype,Qr=Yn.toString,Fr=Hr.hasOwnProperty,gn=RegExp("^"+Qr.call(Fr).replace(Sr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cn(e){if(!q(e)||pt(e))return!1;var n=er(e)?gn:Er;return n.test(Pr(e))}var Kn=cn;function lt(e,n){return e?.[n]}var nn=lt;function rn(e,n){var a=nn(e,n);return Kn(a)?a:void 0}var S=rn,me=S(tn,"Map"),he=me,be=S(Object,"create"),Ue=be;function Ze(){this.__data__=Ue?Ue(null):{},this.size=0}var zn=Ze;function K(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var ye=K,Be="__lodash_hash_undefined__",We=Object.prototype,k=We.hasOwnProperty;function N(e){var n=this.__data__;if(Ue){var a=n[e];return a===Be?void 0:a}return k.call(n,e)?n[e]:void 0}var B=N,Y=Object.prototype,G=Y.hasOwnProperty;function ce(e){var n=this.__data__;return Ue?n[e]!==void 0:G.call(n,e)}var oe=ce,Mt="__lodash_hash_undefined__";function _t(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Ue&&n===void 0?Mt:n,this}var Qe=_t;function X(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}X.prototype.clear=zn,X.prototype.delete=ye,X.prototype.get=B,X.prototype.has=oe,X.prototype.set=Qe;var rt=X;function bn(){this.size=0,this.__data__={hash:new rt,map:new(he||fa),string:new rt}}var Jn=bn;function sr(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var tr=sr;function wn(e,n){var a=e.__data__;return tr(n)?a[typeof n=="string"?"string":"hash"]:a.map}var fs=wn;function rd(e){var n=fs(this,e).delete(e);return this.size-=n?1:0,n}var id=rd;function Fu(e){return fs(this,e).get(e)}var od=Fu;function Ul(e){return fs(this,e).has(e)}var Us=Ul;function ad(e,n){var a=fs(this,e),u=a.size;return a.set(e,n),this.size+=a.size==u?0:1,this}var sd=ad;function na(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}na.prototype.clear=Jn,na.prototype.delete=id,na.prototype.get=od,na.prototype.has=Us,na.prototype.set=sd;var ld=na,Hl=200;function zu(e,n){var a=this.__data__;if(a instanceof fa){var u=a.__data__;if(!he||u.length<Hl-1)return u.push([e,n]),this.size=++a.size,this;a=this.__data__=new ld(u)}return a.set(e,n),this.size=a.size,this}var ud=zu;function Ha(e){var n=this.__data__=new fa(e);this.size=n.size}Ha.prototype.clear=ds,Ha.prototype.delete=Du,Ha.prototype.get=zl,Ha.prototype.has=hn,Ha.prototype.set=ud;var Uu=Ha;function Gl(e,n){for(var a=-1,u=e==null?0:e.length;++a<u&&n(e[a],a,e)!==!1;);return e}var kn=Gl,ur=function(){try{var e=S(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wt=ur;function Ne(e,n,a){n=="__proto__"&&wt?wt(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}var jt=Ne,yn=Object.prototype,En=yn.hasOwnProperty;function Kt(e,n,a){var u=e[n];(!(En.call(e,n)&&en(u,a))||a===void 0&&!(n in e))&&jt(e,n,a)}var Zt=Kt;function Bn(e,n,a,u){var d=!a;a||(a={});for(var h=-1,g=n.length;++h<g;){var _=n[h],b=u?u(a[_],e[_],_,a,e):void 0;b===void 0&&(b=e[_]),d?jt(a,_,b):Zt(a,_,b)}return a}var xn=Bn;function Jr(e,n){for(var a=-1,u=Array(e);++a<e;)u[a]=n(a);return u}var Un=Jr;function $t(e){return e!=null&&typeof e=="object"}var Cr=$t,Gn="[object Arguments]";function or(e){return Cr(e)&&w(e)==Gn}var zt=or,hi=Object.prototype,ci=hi.hasOwnProperty,Vi=hi.propertyIsEnumerable,ji=zt(function(){return arguments}())?zt:function(e){return Cr(e)&&ci.call(e,"callee")&&!Vi.call(e,"callee")},go=ji,oi=Array.isArray,Ci=oi;function ra(){return!1}var Ki=ra,_i=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ui=_i&&typeof module=="object"&&module&&!module.nodeType&&module,To=Ui&&Ui.exports===_i,hs=To?tn.Buffer:void 0,Mo=hs?hs.isBuffer:void 0,oo=Mo||Ki,Oo=oo,Hs=9007199254740991,gi=/^(?:0|[1-9]\d*)$/;function cd(e,n){var a=typeof e;return n=n??Hs,!!n&&(a=="number"||a!="symbol"&&gi.test(e))&&e>-1&&e%1==0&&e<n}var Gs=cd,Vl=9007199254740991;function dd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vl}var ao=dd,xo="[object Arguments]",jl="[object Array]",Hu="[object Boolean]",Vs="[object Date]",ps="[object Error]",Gu="[object Function]",$l="[object Map]",Wl="[object Number]",Vu="[object Object]",ju="[object RegExp]",pi="[object Set]",ql="[object String]",fd="[object WeakMap]",Io="[object ArrayBuffer]",ms="[object DataView]",hd="[object Float32Array]",vs="[object Float64Array]",Pa="[object Int8Array]",Kl="[object Int16Array]",pd="[object Int32Array]",$u="[object Uint8Array]",Wu="[object Uint8ClampedArray]",$="[object Uint16Array]",le="[object Uint32Array]",V={};V[hd]=V[vs]=V[Pa]=V[Kl]=V[pd]=V[$u]=V[Wu]=V[$]=V[le]=!0,V[xo]=V[jl]=V[Io]=V[Hu]=V[ms]=V[Vs]=V[ps]=V[Gu]=V[$l]=V[Wl]=V[Vu]=V[ju]=V[pi]=V[ql]=V[fd]=!1;function _e(e){return Cr(e)&&ao(e.length)&&!!V[w(e)]}var de=_e;function ve(e){return function(n){return e(n)}}var bt=ve,Yt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,St=Yt&&typeof module=="object"&&module&&!module.nodeType&&module,nt=St&&St.exports===Yt,Dn=nt&&yt.process,cr=function(){try{var e=St&&St.require&&St.require("util").types;return e||Dn&&Dn.binding&&Dn.binding("util")}catch{}}(),yr=cr,zr=yr&&yr.isTypedArray,ti=zr?bt(zr):de,Ct=ti,Pn=Object.prototype,M0=Pn.hasOwnProperty;function O0(e,n){var a=Ci(e),u=!a&&go(e),d=!a&&!u&&Oo(e),h=!a&&!u&&!d&&Ct(e),g=a||u||d||h,_=g?Un(e.length,String):[],b=_.length;for(var A in e)(n||M0.call(e,A))&&!(g&&(A=="length"||d&&(A=="offset"||A=="parent")||h&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||Gs(A,b)))&&_.push(A);return _}var Zl=O0,Ev=Object.prototype;function Av(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||Ev;return e===a}var qu=Av;function md(e,n){return function(a){return e(n(a))}}var x0=md,Sv=x0(Object.keys,Object),kv=Sv,Uo=Object.prototype,Pv=Uo.hasOwnProperty;function I0(e){if(!qu(e))return kv(e);var n=[];for(var a in Object(e))Pv.call(e,a)&&a!="constructor"&&n.push(a);return n}var Cv=I0;function vd(e){return e!=null&&ao(e.length)&&!er(e)}var Yl=vd;function Tv(e){return Yl(e)?Zl(e):Cv(e)}var js=Tv;function Mv(e,n){return e&&xn(n,js(n),e)}var Ov=Mv;function gd(e){var n=[];if(e!=null)for(var a in Object(e))n.push(a);return n}var R0=gd,xv=Object.prototype,Ro=xv.hasOwnProperty;function Iv(e){if(!q(e))return R0(e);var n=qu(e),a=[];for(var u in e)u=="constructor"&&(n||!Ro.call(e,u))||a.push(u);return a}var Rv=Iv;function N0(e){return Yl(e)?Zl(e,!0):Rv(e)}var Xl=N0;function L0(e,n){return e&&xn(n,Xl(n),e)}var Ku=L0,B0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,eo=B0&&typeof module=="object"&&module&&!module.nodeType&&module,D0=eo&&eo.exports===B0,F0=D0?tn.Buffer:void 0,Ei=F0?F0.allocUnsafe:void 0;function _d(e,n){if(n)return e.slice();var a=e.length,u=Ei?Ei(a):new e.constructor(a);return e.copy(u),u}var bd=_d;function Nv(e,n){var a=-1,u=e.length;for(n||(n=Array(u));++a<u;)n[a]=e[a];return n}var yd=Nv;function gs(e,n){for(var a=-1,u=e==null?0:e.length,d=0,h=[];++a<u;){var g=e[a];n(g,a,e)&&(h[d++]=g)}return h}var Lv=gs;function Bv(){return[]}var wd=Bv,Dv=Object.prototype,Fv=Dv.propertyIsEnumerable,z0=Object.getOwnPropertySymbols,zv=z0?function(e){return e==null?[]:(e=Object(e),Lv(z0(e),function(n){return Fv.call(e,n)}))}:wd,Ca=zv;function U0(e,n){return xn(e,Ca(e),n)}var H0=U0;function Uv(e,n){for(var a=-1,u=n.length,d=e.length;++a<u;)e[d+a]=n[a];return e}var Ed=Uv,Hv=x0(Object.getPrototypeOf,Object),Ad=Hv,Gv=Object.getOwnPropertySymbols,Vv=Gv?function(e){for(var n=[];e;)Ed(n,Ca(e)),e=Ad(e);return n}:wd,G0=Vv;function jv(e,n){return xn(e,G0(e),n)}var $v=jv;function Wv(e,n,a){var u=n(e);return Ci(e)?u:Ed(u,a(e))}var V0=Wv;function qv(e){return V0(e,js,Ca)}var Sd=qv;function kd(e){return V0(e,Xl,G0)}var Kv=kd,j0=S(tn,"DataView"),Pd=j0,ia=S(tn,"Promise"),Cd=ia,Zv=S(tn,"Set"),Td=Zv,Yv=S(tn,"WeakMap"),Md=Yv,$0="[object Map]",Xv="[object Object]",W0="[object Promise]",_s="[object Set]",q0="[object WeakMap]",K0="[object DataView]",Qv=Pr(Pd),Z0=Pr(he),Jv=Pr(Cd),e1=Pr(Td),Y0=Pr(Md),bs=w;(Pd&&bs(new Pd(new ArrayBuffer(1)))!=K0||he&&bs(new he)!=$0||Cd&&bs(Cd.resolve())!=W0||Td&&bs(new Td)!=_s||Md&&bs(new Md)!=q0)&&(bs=function(e){var n=w(e),a=n==Xv?e.constructor:void 0,u=a?Pr(a):"";if(u)switch(u){case Qv:return K0;case Z0:return $0;case Jv:return W0;case e1:return _s;case Y0:return q0}return n});var Od=bs,t1=Object.prototype,Ql=t1.hasOwnProperty;function Jl(e){var n=e.length,a=new e.constructor(n);return n&&typeof e[0]=="string"&&Ql.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var Ga=Jl,X0=tn.Uint8Array,Q0=X0;function n1(e){var n=new e.constructor(e.byteLength);return new Q0(n).set(new Q0(e)),n}var xd=n1;function r1(e,n){var a=n?xd(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var i1=r1,o1=/\w*$/;function a1(e){var n=new e.constructor(e.source,o1.exec(e));return n.lastIndex=e.lastIndex,n}var s1=a1,J0=Nt?Nt.prototype:void 0,eh=J0?J0.valueOf:void 0;function l1(e){return eh?Object(eh.call(e)):{}}var u1=l1;function c1(e,n){var a=n?xd(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var th=c1,nh="[object Boolean]",rh="[object Date]",ih="[object Map]",d1="[object Number]",f1="[object RegExp]",vt="[object Set]",$s="[object String]",Ws="[object Symbol]",ha="[object ArrayBuffer]",oh="[object DataView]",ah="[object Float32Array]",Va="[object Float64Array]",sh="[object Int8Array]",h1="[object Int16Array]",p1="[object Int32Array]",m1="[object Uint8Array]",v1="[object Uint8ClampedArray]",g1="[object Uint16Array]",lh="[object Uint32Array]";function uh(e,n,a){var u=e.constructor;switch(n){case ha:return xd(e);case nh:case rh:return new u(+e);case oh:return i1(e,a);case ah:case Va:case sh:case h1:case p1:case m1:case v1:case g1:case lh:return th(e,a);case ih:return new u;case d1:case $s:return new u(e);case f1:return s1(e);case vt:return new u;case Ws:return u1(e)}}var _1=uh,ch=Object.create,b1=function(){function e(){}return function(n){if(!q(n))return{};if(ch)return ch(n);e.prototype=n;var a=new e;return e.prototype=void 0,a}}(),dh=b1;function fh(e){return typeof e.constructor=="function"&&!qu(e)?dh(Ad(e)):{}}var Id=fh,y1="[object Map]";function w1(e){return Cr(e)&&Od(e)==y1}var E1=w1,hh=yr&&yr.isMap,eu=hh?bt(hh):E1,A1=eu,Zu="[object Set]";function S1(e){return Cr(e)&&Od(e)==Zu}var ph=S1,Ho=yr&&yr.isSet,ja=Ho?bt(Ho):ph,mh=ja,k1=1,P1=2,C1=4,uo="[object Arguments]",T1="[object Array]",M1="[object Boolean]",O1="[object Date]",A6="[object Error]",vh="[object Function]",Rd="[object GeneratorFunction]",Yu="[object Map]",x1="[object Number]",Ta="[object Object]",tu="[object RegExp]",gh="[object Set]",I1="[object String]",R1="[object Symbol]",oa="[object WeakMap]",N1="[object ArrayBuffer]",Nd="[object DataView]",di="[object Float32Array]",No="[object Float64Array]",qs="[object Int8Array]",Xu="[object Int16Array]",L1="[object Int32Array]",B1="[object Uint8Array]",D1="[object Uint8ClampedArray]",F1="[object Uint16Array]",z1="[object Uint32Array]",yi={};yi[uo]=yi[T1]=yi[N1]=yi[Nd]=yi[M1]=yi[O1]=yi[di]=yi[No]=yi[qs]=yi[Xu]=yi[L1]=yi[Yu]=yi[x1]=yi[Ta]=yi[tu]=yi[gh]=yi[I1]=yi[R1]=yi[B1]=yi[D1]=yi[F1]=yi[z1]=!0,yi[A6]=yi[vh]=yi[oa]=!1;function nu(e,n,a,u,d,h){var g,_=n&k1,b=n&P1,A=n&C1;if(a&&(g=d?a(e,u,d,h):a(e)),g!==void 0)return g;if(!q(e))return e;var T=Ci(e);if(T){if(g=Ga(e),!_)return yd(e,g)}else{var I=Od(e),F=I==vh||I==Rd;if(Oo(e))return bd(e,_);if(I==Ta||I==uo||F&&!d){if(g=b||F?{}:Id(e),!_)return b?$v(e,Ku(g,e)):H0(e,Ov(g,e))}else{if(!yi[I])return d?e:{};g=_1(e,I,_)}}h||(h=new Uu);var U=h.get(e);if(U)return U;h.set(e,g),mh(e)?e.forEach(function(te){g.add(nu(te,n,a,te,e,h))}):A1(e)&&e.forEach(function(te,Pe){g.set(Pe,nu(te,n,a,Pe,e,h))});var z=A?b?Kv:Sd:b?Xl:js,Q=T?void 0:z(e);return kn(Q||e,function(te,Pe){Q&&(Pe=te,te=e[Pe]),Zt(g,Pe,nu(te,n,a,Pe,e,h))}),g}var U1=nu,H1=1,G1=4;function V1(e){return U1(e,H1|G1)}var j1=V1,Ks=j1;function _h(e){const n=e.split(" ")[2];return n?!n.toLowerCase().split("").some(a=>["-","k","q"].includes(a)):!1}const ys=e=>e&&!Object.keys(e).length;function Wr(e,n){return n.every(a=>e[a])}function Ld(e,n){return n.some(a=>e[a])}const $1=(e={},n)=>Object.prototype.hasOwnProperty.call(e,n),Z4=(e,n=[])=>Object.keys(e).filter(a=>!n.includes(a)).reduce((a,u)=>({...a,[u]:e[u]}),{}),bh=e=>Object.keys(e).reduce((n,a)=>({...n,[e[a]]:a}),{}),S6=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),k6=e=>Object.keys(e).reduce((n,a)=>{let u=e[a];return typeof u=="boolean"&&(u=u?"1":"0"),n[a]=u,n},{}),W1=e=>{const n={};for(const a in e)if($1(e,a)){const u=typeof e[a]=="object"?W1(e[a]):e[a];n[camelCase(a)]=u}return n};function q1(e={},n={}){if(Object.keys(e).length!==Object.keys(n).length)return!0;for(const a in e)if(e[a]!==n[a])return!0;return!1}function yh(e,n){return Object.entries(e).reduce((a,[u,d])=>(n.includes(u)&&(a[u]=d),a),{})}var P6=ir(5653),mn=ir(2117),aa=Object.defineProperty,wh=Object.defineProperties,Zr=Object.getOwnPropertyDescriptors,co=Object.getOwnPropertySymbols,Zs=Object.prototype.hasOwnProperty,K1=Object.prototype.propertyIsEnumerable,Qu=(e,n,a)=>n in e?aa(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,Ys=(e,n)=>{for(var a in n||(n={}))Zs.call(n,a)&&Qu(e,a,n[a]);if(co)for(var a of co(n))K1.call(n,a)&&Qu(e,a,n[a]);return e},ru=(e,n)=>wh(e,Zr(n));function Z1(e){return e===!0||e===!1}function Y1(e,n,a){return e.reduce((u,d)=>{const h=n.classList.contains(mn.aX.Pseudo3d),g=(0,mn.aY)(d,h?":after":void 0),_=(0,mn.aZ)(g,a),{file:b,rank:A}=(0,mn.a_)(d.dataset.testSquare);return!_||!b||!A||(u[8-A][b-1]=_),u},[[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".","."]]).map(u=>u.join("").replace(/(\.+)/g,d=>d.length.toString())).join("/")}function X1(e,n,a){return new Cypress.Promise(u=>{const d=n.getBoundingClientRect();let h,g;const _=(d.right-d.left)/8,b=(0,mn.a_)(e);a&&(b.file=9-b.file,b.rank=9-b.rank),b!==null?(h=(b.file-1)*_+_/2,g=(9-b.rank)*_-_/2):(h=-1,g=-1),u({x:h,y:g})})}function Q1({color:e,opacity:n,options:a}){return e==="#ffff00"&&n===a.highlightOpacity?"default":e===a.premoveHighlightColor&&n===a.premoveHighlightOpacity?"premove":e===a.analysisHighlightColors.alt&&n===a.analysisHighlightOpacity?"altAnalysis":e===a.analysisHighlightColors.default&&n===a.analysisHighlightOpacity?"defaultAnalysis":e===a.analysisHighlightColors.shift&&n===a.analysisHighlightOpacity?"shiftAnalysis":e===a.analysisHighlightColors.ctrl&&n===a.analysisHighlightOpacity?"ctrlAnalysis":e&&n?{color:e,opacity:n}:null}function J1(e){return e.substring(1)}function eg({boardRect:e,elRect:n,flipped:a=!1}){const u=e.width/8,d=(n.left-e.left)/u+1,h=(n.top-e.top)/u+1;return a?(0,mn.a$)({file:9-d,rank:h}):(0,mn.a$)({file:d,rank:9-h})}function tg(e,n){cy.get(n).should(a=>{e?expect(a[0]).to.exist:expect(a[0]).to.not.exist})}function ng({event:e,options:n={},data:a={},pointerCoordsFn:u}){const{eventName:d,which:h}=rg(e);if(h&&Object.assign(n,{which:h}),a.keyPressed&&Object.assign(n,{[`${a.keyPressed}Key`]:!0}),a.deltaY&&Object.assign(n,{deltaY:a.deltaY}),a.el){const g=a.position||"center";a.withText?cy.get(a.el).contains(a.withText).first().trigger(d,g,n):cy.get(a.el).first().trigger(d,g,n)}else if(typeof a.square<"u"&&a.square===null)cy.wait(0),cy.document().trigger(d,1,1,n);else{const{board:g,flipped:_}=n;cy.getBoard(g).then(b=>{a.coords?cy.getBoard(g).trigger(d,a.coords.x,a.coords.y,n):typeof a.square<"u"?u(a.square,b[0],_).then(A=>{cy.getBoard(g).trigger(d,A.x,A.y,n)}):a.deltaY&&a.forced?cy.getBoard(g).trigger(d,ru(Ys({},n),{force:!0})):cy.getBoard(g).trigger(d,n)})}}function rg(e){return e==="Pointermove"?{eventName:"pointermove"}:e==="PointerdownLeft"?{eventName:"pointerdown",which:0}:e==="PointerdownMiddle"?{eventName:"pointerdown",which:2}:e==="PointerdownRight"?{eventName:"pointerdown",which:3}:e==="MousedownLeft"?{eventName:"mousedown",which:0}:e==="MousedownRight"?{eventName:"mousedown",which:3}:e==="Pointerup"?{eventName:"pointerup"}:e==="DoubleClick"?{eventName:"dblclick"}:e==="Wheel"?{eventName:"wheel"}:{eventName:e}}function ig(e){switch(e){case"true":return!0;case"false":return!1;default:return e}}const og={bp:"p",bb:"b",bn:"n",br:"r",bq:"q",bk:"k",wp:"P",wb:"B",wn:"N",wr:"R",wq:"Q",wk:"K"},ag={p:"bp",b:"bb",n:"bn",r:"br",q:"bq",k:"bk",P:"wp",B:"wb",N:"wn",R:"wr",Q:"wq",K:"wk"},sg={"8_bit":"#ffff00",bases:"#f5cc2a",blackwhite:"#5b91b3",blue:"#00a5ff",brown:"#ffff00",bubblegum:"#de5d6f",burled_wood:"#ee9016",dark_wood:"#cc9122",dash:"#eca722",default:"#ffff00",glass:"#5b91b3",graffiti:"#f39011",green:"#ffff00",grey:"#a4b8c4",icy_sea:"#5ed7f1",light:"#a4b8c4",lolz:"#a3becd",marble:"#f0db86",marbleblue:"#65daf7",marblebrown:"#f39011",marblegreen:"#f0db86",metal:"#a3becd",natural:"#f0e464",nature:"#eef396",neon:"#6d90a6",newspaper:"#99976e",orange:"#ffff00",overlay:"#0d9acf",parchment:"#d8cc66",pink:"#de5d6f",purple:"#7dacc9",red:"#f8f893",sand:"#e2bc87",sky:"#65daf7",stone:"#36525f",tan:"#f7d84a",tournament:"#a4c25b",translucent:"#5b91b3",walnut:"#d1a52d",winboard:"#a4c25b",wood:"#cc9122",wooddark:"#ee9016",woodlight:"#d8cc66",woodmid:"#cc9122",woodolive:"#a3becd"};var pa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",highlights:sg}),lg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",booleanArgumentPassed:Z1,config:pa,getBoardPosition:Y1,getCoordsFromSquare:X1,getElementBackgroundImage:mn.aY,getFileRankFromSan:mn.a_,getHighlightType:Q1,getPieceShortStringFromUrl:mn.aZ,getSanFromFileRank:mn.a$,getSelectorName:J1,getSquareFromRects:eg,pieceNameToTestShortString:og,rgbToHex:mn.r,shouldExist:tg,testShortStringToPieceName:ag,triggerEvent:ng,trueFalseToBoolean:ig});function ug(e){return e.api.extendAPI("siblingGame",{siblingGame:function(a){return createAPI({game:a.game.siblingGame,options:{}})}})}function C6(){let e;return{create:n,destroy:h,match:[{condition:isOneOf([Core.APIEvents.CreateGame,Core.APIEvents.Load]),handler:a}],apiOverrides:{isAtEndOfLine:g=>{const _=g.api.isAtEndOfLine;return()=>g.api.siblingGame?_()&&g.api.siblingGame.isAtEndOfLine():_()},selectNode:{handler:g=>function(b){const{game:A,api:T}=g;return T.siblingGame&&(A.selectBughouseMove(A.moveDetails().bughouseOrder),T.siblingGame.reload()),b},run:"after"}},name:BughouseAPI.Plugin.Name};function n(g){g.api.getVariant()===Game.Variants.Bughouse&&u(g)}function a(g,_){e?.(),_.api.getVariant()===Game.Variants.Bughouse&&u(_)}function u(g){e=ug(g),d(g);const{siblingGame:_,getContext:b}=g.api,{respond:A}=b();_.onMany(positionChangeEvents,()=>A(HandPieces.Events.SetHand))}function d(g){g.api.siblingGame.overrideAPI(BughouseAPI.Plugin.Name,{move:_=>{const{move:b,getContext:A}=_.api,T=b,I=handleMoveOnPreviousNodeFactory(A());return F=>(I(),T(F))}})}function h(){e?.()}}var T6=`.sibling-board {
  background-size: 100%;
  display: block;
  height: 0;
  padding-bottom: 100%;
  position: relative;
  width: 100%;
}

.sibling-board.board {
  height: auto;
  margin-left: 10%;
  padding-bottom: 90%;
  width: 90%;
}
.sibling-board.board.board-webgl-3d {
  margin-left: 7.5%;
  padding-bottom: 69.369%;
  width: 92.5%;
}
.sibling-board.board.board-webgl-3d canvas, .sibling-board.board.board-webgl-2d canvas {
  position: absolute;
}`;function cg(e){return[...createStandardPlugins().filter(a=>!e.includes(a.name)),createHandPiecesPlugin({replaceContainer:!1})]}const dg=[mn.b8.Plugin.Name,mn.b9.Plugin.Name];function fg({context:e,el:n,mainBoardRenderer:a}){const u=e.api.getOptions(),d=ru(Ys({},u),{flipped:!u.flipped,id:`${u.id}-sibling`});n.classList.add("board");const h=a.createRenderer(ru(Ys({},a.getRendererOptions()),{containerEl:n,el:n,options:d,testElement:TestElements.SiblingBoard}));return createGame({api:e.api.siblingGame,el:n,mode:create(),options:d,plugins:cg(dg),renderer:h})}function M6(e){let n,a;return{create:u,destroy:g,match:[{condition:isOneOf([Core.APIEvents.Load,Core.APIEvents.CreateGame,Core.InstanceEvents.RendererSet]),handler:d},{condition:isOneOf(positionChangeEvents),handler:b},{condition:is(Core.OptionsEvents.Update),handler:A},{condition:is(Core.UIEvents.Resize),handler:h}],name:BughouseSiblingBoard.Plugin.Name};function u(I){I.api.siblingGame&&(_(I),b())}function d(I,F){u(F)}function h(){clearTimeout(a),a=setTimeout(()=>{var I;(I=n?.resize)==null||I.call(n)},10)}function g(){T()}function _(I){const{renderer:F}=I;F&&(T(),n=fg({context:I,el:e,mainBoardRenderer:F}),n.resize())}function b(){if(!n)return;const{respond:I}=n.getContext();I(Core.APIEvents.SetBoardPosition,{pieces:n.getPieces()}),I(HandPieces.Events.SetHand)}function A({data:I}){I.flipped!==void 0&&n?.setOptions({flipped:!I.flipped})}function T(){var I;(I=n?.destroy)==null||I.call(n)}}function hg({timers:e}){let n=!0;return Ys({activate:a,deactivate:u,isActive:d,resetClocks:h,stopClocks:g},e);function a(){n=!0}function u(){n=!1}function d(){return n}function h(_){const{baseTime:b}=_;e[Game.ColorsAsNumbers.Black].reset(b),e[Game.ColorsAsNumbers.White].reset(b)}function g(){e[Game.ColorsAsNumbers.Black].stop(),e[Game.ColorsAsNumbers.White].stop()}}function pg(e,n){const a=[Game.ColorsAsNumbers.Black,Game.ColorsAsNumbers.White].reduce((d,h)=>{return e[h].on(Timer.Events.End,u),d.push(g),d;function g(){e[h].off({handler:u,type:Timer.Events.End})}},[]);return function(){a.forEach(h=>h())};function u(d){d.color&&n.outOfTime(d.color)}}function mg(e){return createStateMachine({initialState:Timer.States.Initial,states:{[Timer.States.Ended]:{[Timer.Actions.Reset]:n},[Timer.States.Going]:{[Timer.Actions.Reset]:n,[Timer.Actions.Stop]:()=>(e.timeSpent=Date.now()-e.startTimestamp,Timer.States.Stopped),[Timer.Actions.Tick]:()=>(e.timeSpent=Date.now()-e.startTimestamp,e.currentTime=e.resetTime-e.timeSpent,e.currentTime<=0?Timer.States.Ended:Timer.States.Going)},[Timer.States.Initial]:{[Timer.Actions.Reset]:n,[Timer.Actions.Start]:()=>(e.startTimestamp=Date.now(),Timer.States.Going)},[Timer.States.Stopped]:{[Timer.Actions.Reset]:n,[Timer.Actions.Start]:()=>(e.startTimestamp=Date.now()-e.timeSpent,Timer.States.Going)}}});function n(a){return Object.assign(e,{currentTime:a,resetTime:a,timeSpent:0}),Timer.States.Initial}}const Eh=1e3,vg=100;function Ah({color:e,decisecondThreshold:n=Eh*20,emitter:a=createEventEmitter(),initialTime:u,interval:d=Eh}={}){const h={color:e,currentTime:u||0,lastTickTimestamp:0,resetTime:u||0,startTimestamp:0,state:Timer.States.Initial,timeSpent:0},g=mg(h);return g.on(StateMachine.Event.Types.OnEnter,I),g.on(StateMachine.Event.Types.OnReEnter,F),ru(Ys({},a),{add:_,destroy:A,get:T,reset:U,start:Q,stop:te});function _(Pe){h.startTimestamp-=Pe,h.timeSpent-=Pe,h.currentTime+=Pe,b(Timer.Events.TimeAdded)}function b(Pe){a.emit(Pe,ru(Ys({},T()),{type:Pe}))}function A(){g.off({handler:I,type:StateMachine.Event.Types.OnEnter}),g.off({handler:F,type:StateMachine.Event.Types.OnReEnter})}function T(){return g.getCurrentState()===Timer.States.Going&&(h.timeSpent=h.startTimestamp?Date.now()-h.startTimestamp:0),h.currentTime=h.resetTime-h.timeSpent,h}function I(Pe){let Ce;switch(Pe.nextState){case Timer.States.Ended:Ce=Timer.Events.End;break;case Timer.States.Going:z(),Ce=Timer.Events.Start;break;case Timer.States.Initial:Ce=Timer.Events.Reset;break;case Timer.States.Stopped:Ce=Timer.Events.Stop;break}h.state=Pe.nextState,Ce&&b(Ce)}function F(Pe){let Ce;switch(Pe.nextState){case Timer.States.Going:z(),Ce=Timer.Events.Tick;break;case Timer.States.Initial:Ce=Timer.Events.Reset;break;case Timer.States.Stopped:break}Ce&&b(Ce)}function U(Pe){g.transition(Timer.Actions.Stop),g.transition(Timer.Actions.Reset,Pe||h.resetTime)}function z(){const Pe=Math.round(h.currentTime/d)*d;n&&Pe<=n?setTimeout(()=>{g.transition(Timer.Actions.Tick)},vg):setTimeout(()=>{g.transition(Timer.Actions.Tick)},d)}function Q(){g.transition(Timer.Actions.Start)}function te(){g.transition(Timer.Actions.Stop)}}function gg(e){return{[Game.ColorsAsNumbers.White]:Ah({color:Game.ColorsAsNumbers.White,initialTime:e.baseTime}),[Game.ColorsAsNumbers.Black]:Ah({color:Game.ColorsAsNumbers.Black,initialTime:e.baseTime})}}function _g(e){const n=e.api.load;return function(u){const{api:d}=e,h=d.getHeaders().TimeControl,g=n(u);return d.setGameDetails({TimeControl:h}),g}}function bg(){return function(n){const a=n.api.move;return function(d){const{api:h}=n,g=h.timeControl.get();if(!h.clocks.isActive()||!g)return a(d);const{clock:_,moveTime:b,increment:A}=getClockTime(h);d.time=b;const T=a(d);return A&&T?.type===Core.APIEvents.Move&&_.add(A),T}}}function O6(){const e=gg(DEFAULT_TIME_CONTROL);let n;return{api:()=>hg({timers:e}),apiOverrides:{load:_g,move:bg()},create:u,destroy:d,match:[{condition:is(Core.APIEvents.Move),handler:a},{condition:g,handler:h}],name:Clocks.Plugin.Name};function a(_,b){const{api:A,queue:T}=b,I=_.data.move,{color:F}=I;if(!A.timeControl.get()||!A.clocks.isActive())return;const{clock:z,increment:Q}=getClockTime(A,F);_.data.consumedPremove&&Q&&T.add(z.add,Q),A.clocks[F].stop(),A.clocks[getOppositeColor(F)].start()}function u(_){const{api:b}=_;n=pg(e,b)}function d(){n()}function h(_,b){const{api:A}=b,T=A.timeControl.get();T?A.clocks.resetClocks(T):A.clocks.stopClocks()}function g(_){return is(Core.APIEvents.UpdatePGNHeaders)(_)&&_.data.TimeControl}}function yg(e){let n=StateMachine$1.States.Idle,a,u={droppedFramesByState:{all:0},totalFramesByState:{all:0},totalTimeByState:{all:0}};return{startRecording:d,stopRecording:h,getMetrics:g,clearMetrics:_,setBoardState:b};function d(A=100){let T=performance.now(),I=A;a=requestAnimationFrame(F);function F(U){const z=U-T;if(T=U,z>1e3){a=requestAnimationFrame(F);return}if(u.totalFramesByState[n]||(u.totalFramesByState[n]=0,u.totalTimeByState[n]=0,u.droppedFramesByState[n]=0),u.totalFramesByState.all+=1,u.totalFramesByState[n]+=1,u.totalTimeByState.all+=z,u.totalTimeByState[n]+=z,I>=1){I--,a=requestAnimationFrame(F);return}z>u.totalTimeByState.all/u.totalFramesByState.all+1&&(u.droppedFramesByState.all+=1,u.droppedFramesByState[n]+=1),a=requestAnimationFrame(F)}}function h(){return cancelAnimationFrame(a),u}function g(){return u}function _(){u={droppedFramesByState:{all:0},totalFramesByState:{all:0},totalTimeByState:{all:0}}}function b(A){n=A}}function x6(){return{name:PerformanceMetrics.Plugin.Name,api:yg,match:[{condition:isOneOf([Core.UserEvents.MousedownLeft,Core.UserEvents.MousedownRight,Core.UserEvents.PointerdownRight,Core.UserEvents.PointerdownLeft,Core.UserEvents.Pointerup]),handler:e}]};function e(n,a){a.api[PerformanceMetrics.Plugin.Name].setBoardState(a.state.get().machineState)}}function I6(){let e,n;return{create:a,match:[{condition:is(Core.InstanceEvents.RendererSet),handler:g},{condition:is(Core.OptionsEvents.Update),handler:_}],destroy:d,name:ScrollThroughMoves.Plugin.Name};function a(b){const{api:A,el:T}=b;n=T,u(!1),e||(e=h(A)),u(b.options.enabled)}function u(b){b?n.addEventListener("wheel",e):n.removeEventListener("wheel",e)}function d(){u(!1)}function h(b){return function(T){T.preventDefault(),T.deltaY<0?b.moveBackward():b.moveForward()}}function g(b,A){a(A)}function _(b){"enabled"in b.data&&u(b.data.enabled)}}function wg(e){return Object.keys(e).filter(n=>["pins","undefended","underdefended"].includes(n)).reduce((n,a)=>(n.push(...e[a]||[]),n),[]).map(n=>n.slice(-2))}function R6(e){const n=e.game.threats;let a=!0,u=null;return{enable:T(d),getAsArray:h,getAsObject:g,isEnabled:_,isShowingThreatsCreatedByColor:A,onlyShowThreatsCreatedByColor:T(b)};function d(I=!0){a=I}function h(){return wg(n())}function g(){return n()}function _(){return a}function b(I){u=I}function A(I){return u===I||u===null}function T(I){return function(...U){I(...U),e.respond(Threats.Events.Updated)}}}function Nn(e,n){const{api:a,options:u}=n;return!a.threats||!a.threats.isEnabled()||!a.threats.isShowingThreatsCreatedByColor(getOppositeColor(a.getTurn()))?[]:a.threats.getAsArray().map(d=>{if(d)return createKeyedHighlight({color:u.threatSquareColor,opacity:u.threatSquareOpacity,square:d,type:"threat"})})}function ws(){return{api:R6,create:n,destroy:a,match:[{condition:is(Core.InstanceEvents.ModeChanged),handler:u}],name:Threats.Plugin.Name};function e(d){var h;(h=d.highlights)==null||h.addModule(Nn)}function n(d){e(d.api)}function a(d){var h;const{api:g}=d;(h=g.highlights)==null||h.removeModule(Nn)}function u(d,h){e(h.api)}}function Ti(e,n){return Object.entries(e).every(([u,d])=>{const h=n[u];return d.type===h.type&&d.color===h.color})&&Object.keys(e).length===Object.keys(n).length}function Hi(){return{afterRender:!0,match:[{condition:e,handler:n}],name:Validate.Plugin.Name};function e(a){return isOneOf([...Object.values(Core.APIEvents),...Object.values(Core.InstanceEvents),...Object.values(Core.OptionsEvents)])(a)}function n(a,u){const{api:d,renderer:h}=u;if(!h)return;const g=h.getPieces(),_=d.getPieces().getCollection();Ti(g,_)||d.logger.log({code:Validate.ErrorCodes.InvalidPosition,data:{APIPieces:_,boardPieces:g},level:Logger.Levels.Error,message:Validate.ErrorMessages.InvalidPosition})}}const $i={config:{perspective:mn.a0.Perspective.TOP_DOWN},board:{assets:{background:"https://www.chess.com/boards/green/150.png"},config:{highlightSquareHex:"#ffff00",darkSquareCoordinateHex:"#edeed1",lightSquareCoordinateHex:"#779952"}},pieces:{assets:mn.a4},sound:{assets:{capture:{webm:"https://www.chess.com/sounds/_WEBM_/default/capture.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/capture.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/capture.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/capture.wav"},castle:{webm:"https://www.chess.com/sounds/_WEBM_/default/castle.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/castle.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/castle.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/castle.wav"},gameEnd:{webm:"https://www.chess.com/sounds/_WEBM_/default/game-end.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/game-end.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/game-end.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/game-end.wav"},gameStart:{webm:"https://www.chess.com/sounds/_WEBM_/default/game-start.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/game-start.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/game-start.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/game-start.wav"},illegal:{webm:"https://www.chess.com/sounds/_WEBM_/default/illegal.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/illegal.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/illegal.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/illegal.wav"},moveCheck:{webm:"https://www.chess.com/sounds/_WEBM_/default/move-check.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/move-check.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/move-check.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/move-check.wav"},moveOpponent:{webm:"https://www.chess.com/sounds/_WEBM_/default/move-opponent.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/move-opponent.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/move-opponent.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/move-opponent.wav"},moveSelf:{webm:"https://www.chess.com/sounds/_WEBM_/default/move-self.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/move-self.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/move-self.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/move-self.wav"},notify:{webm:"https://www.chess.com/sounds/_WEBM_/default/notify.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/notify.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/notify.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/notify.wav"},premove:{webm:"https://www.chess.com/sounds/_WEBM_/default/premove.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/premove.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/premove.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/premove.wav"},promote:{webm:"https://www.chess.com/sounds/_WEBM_/default/promote.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/promote.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/promote.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/promote.wav"},tenSeconds:{webm:"https://www.chess.com/sounds/_WEBM_/default/tenseconds.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/tenseconds.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/tenseconds.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/tenseconds.wav"}}}};function Ni(e){return positionChangeEvents.includes(e.type)}function Eg(e){const n=Object.keys(mn.bq).sort((d,h)=>h.length-d.length),a=new Set(mn.br);let u=e;return n.forEach(d=>{var h,g;const _=d==="N",b=`[^=]\\${(h=mn.bs[d])!=null?h:d}`,A=_?b:`\\${(g=mn.bs[d])!=null?g:d}`,T=a.has(d)||_?` ${mn.bq[d]}`:mn.bq[d];u=u.replace(new RegExp(A,"gm"),T)}),u}function Sh(e){if(!e)return"";const n=e.lastIndexOf('"]')+2,a=e.slice(0,n).trim(),u=e.slice(n).trim();return`${a}

${Eg(u)}`}function Ag(e,n){const a=Object.values(e).map(u=>u.name);return n.reduce((u,d)=>{const h=a.indexOf(d.name);return h>-1?u.splice(h,1,d):u.push(d),u},e)}const kh={},Sg=(e,n="game")=>{kh[n]=e},Yr=(e="game")=>kh[e];var kg={gameStoreNamespace:"game",historyFENs:[],isAtEndOfLine:!0,isGameOver:!1,isNewBoard:!0,legalMoves:[],lines:[],mainLine:[],mode:"playing",material:{},pgn:null,pgnHeaders:null,playingAs:0,positionDetails:null,result:mn.G.Results.None,selectedNode:{color:1,moveNumber:0},startingMoveNumber:1,tcn:"",turn:1,variant:"chess"},Pg={changeSettings({commit:e,state:{gameStoreNamespace:n}},a){Yr(n).setOptions(a),a.variant&&e("setVariant",a.variant)},clearBoard({state:{gameStoreNamespace:e}}){Yr(e).load({fen:"8/8/8/8/8/8/8/8"})},getCurrentFullLine({state:{gameStoreNamespace:e}}){return Yr(e).getCurrentFullLine()},clearMarkings({state:{gameStoreNamespace:e}}){Yr(e).clearMarkings()},createContinuation({state:{gameStoreNamespace:e}}){Yr(e).createContinuation()},deleteNode({state:{gameStoreNamespace:e}},n){const a=Yr(e);let u=n;n||(u=a.getLastMove().ids);const{line:d,move:h}=u;a.deletePosition(h,d)},restorePosition({state:{gameStoreNamespace:e}}){var n;(n=Yr(e).observing)==null||n.restorePosition()},getPgn({commit:e,state:{gameStoreNamespace:n}},a){const u=Yr(n);e("setPgn",u.getPGN(a))},getPgnHeaders({commit:e,state:{gameStoreNamespace:n}}){const a=Yr(n);e("setPgnHeaders",a.getHeaders())},getPieces({state:{gameStoreNamespace:e}}){return Yr(e).getPieces().getCollection()},goToNode({state:{gameStoreNamespace:e}},{line:n=0,move:a}){Yr(e).selectNode(n,a)},init({dispatch:e},n={}){if(ys(n)||!Object.keys(n).find(a=>n[a])){e("load",{fen:C,moves:""});return}typeof n.pgn=="string"&&!n.pgn.length&&(n.moves=""),n.tcn&&(n.moves=n.tcn),e("load",n)},load({state:{gameStoreNamespace:e}},n){Yr(e).load(n,n.options)},loadFromFen({state:{gameStoreNamespace:e}},n){if(!n)return null;Yr(e).load({fen:n,variant:_h(n)?"chess960":"chess"})},loadFromPgn({state:{gameStoreNamespace:e}},{pgn:n}){if(!n)return null;Yr(e).load({pgn:n})},loadFromSanMoves({state:{gameStoreNamespace:e}},n){var a;const u=Yr(e),{canAddMovesToMainLine:d}=u.getMode().getOptions();!d&&u.isAtEndOfLine()&&((a=u.getSelectedNode().ids)==null?void 0:a.line)===0&&u.createContinuation(),u.load({moves:n},{atCurrent:!0,method:"merge"})},makeMove({dispatch:e},n){var a;e("move",(a=n.san)!=null?a:n)},makeOpponentMove({state:{gameStoreNamespace:e}},n){Yr(e).move(n)},makeOpponentTcnMove({state:{gameStoreNamespace:e}},n){Yr(e).move({tcn:n})},makeTcnMove({state:{gameStoreNamespace:e}},n){Yr(e).move({tcn:n})},mark({state:{gameStoreNamespace:e}},n){var a;Yr(e).mark(n,(a=n.isNodeMarking)!=null?a:!0)},markArrow({state:{gameStoreNamespace:e}},n){Yr(e).mark({arrow:{...n,from:n.fromMove,to:n.toMove}},!0)},markEffect({dispatch:e},{effect:n,persist:a}){e("updateMarkings",{effect:n,isNodeMarking:!a})},markSquare({state:{gameStoreNamespace:e}},n){Yr(e).mark({square:n},!0)},moveBackward({state:{gameStoreNamespace:e}}){Yr(e).moveBackward()},moveForward({state:{gameStoreNamespace:e}}){Yr(e).moveForward()},move({state:{gameStoreNamespace:e}},n){var a;let u=n;(a=n.to)!=null&&a.file&&(u={from:Sn.getSanFromFileRank(n.from),to:Sn.getSanFromFileRank(n.to)}),Yr(e).move(u)},moveListContextMenuAction(){},moveToStart({state:{gameStoreNamespace:e}}){Yr(e).selectLineStart()},moveToEnd({state:{gameStoreNamespace:e}}){Yr(e).selectLineEnd()},onNodeChange({commit:e,state:{gameStoreNamespace:n}}){var a;const u=Yr(n);e("setSelectedNode",u.getSelectedNode()),e("setIsAtEndOfLine",u.isAtEndOfLine()),e("setMaterial",u.getMaterial()),e("setHistoryFENs",u.getHistoryFENs()),e("setMainLine",Ks(u.getLine(0))),e("setLegalMoves",u.getLegalMoves()),e("setPositionDetails",u.getPositionDetails()),e("setLines",Ks(u.getRawLines())),e("setPgn",u.getPGN()),e("setResult",u.getResult()),e("setTurn",u.getTurn()),e("setPlayingAs",(a=u.getPlayingAs)==null?void 0:a.call(u)),e("setVariant",u.getVariant()),e("setIsGameOver",u.isGameOver()),e("setTcn",At.encodeTCN(u.getLine(0))),e("setStartingMoveNumber",u.getStartingMoveNumber())},resetGame({state:{gameStoreNamespace:e}}){Yr(e).load({fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"})},resetToMainLine({state:{gameStoreNamespace:e}}){Yr(e).resetToMainLine()},selectLineEnd({state:{gameStoreNamespace:e}},n=0){Yr(e).selectLineEnd(n)},selectLineStart({state:{gameStoreNamespace:e}}){Yr(e).selectLineStart()},setMode({commit:e},{mode:n}){e("setMode",n)},setPlayingAs({commit:e,state:{gameStoreNamespace:n}},a){var u;const d=Yr(n);(u=d.setPlayingAs)==null||u.call(d,a),e("setPlayingAs",a)},setResult({commit:e,state:{gameStoreNamespace:n}},a){Yr(n).setResult(a),e("setResult",a)},setTimestamps({commit:e,state:{gameStoreNamespace:n}},a){const u=Yr(n);u.timestamps.setMany(a),e("setMainLine",Ks(u.getLine(0)))},takeBackMove({state:{gameStoreNamespace:e}}){const n=Yr(e),{line:a,move:u}=n.getLastMove().ids;n.deletePosition(u,a)},unmark({state:{gameStoreNamespace:e}},n){Yr(e).unmark(n)},updateMarkings({state:{gameStoreNamespace:e}},{effect:n,arrow:a,isNodeMarking:u=!0,resetFirst:d=!0,types:h=[]}){const g=Yr(e);d&&g.clearMarkings(h),n&&g.mark({effect:n},u),a?.squares&&g.mark({arrow:{color:a.color,opacity:.95,from:a.squares.substring(0,2),to:a.squares.substring(2,4)}},u)},updateNode({state:{gameStoreNamespace:e}},{ids:n,data:a}){const u=Yr(e);if(a.insertCommentAfterLastNode){const d=[...u.getLine(n.line)].pop();u.updateNode(d.ids,{comment:a.insertCommentAfterLastNode})}a.commentBefore&&u.updateLineComment(a.commentBefore,n.line),u.updateNode(n,a)},updatePgnHeaders({commit:e,state:{gameStoreNamespace:n}},a){const u=Yr(n);u.setGameDetails(a),e("setPgnHeaders",a),e("setPgn",u.getPGN())},resize({state:{gameStoreNamespace:e}}){Yr(e).resize()}};function Cg({selectedNode:e,startingMoveNumber:n,turn:a}){if(!e?.wholeMoveNumber){const d=(0,mn.bh)(a);return u(d===mn.G.ColorsAsNumbers.White?n:n-1,d)}return u(e.wholeMoveNumber,e.color);function u(d,h){return d*2-(h===mn.G.ColorsAsNumbers.White?1:0)}}var Tg={atFinalMoveNode:e=>e.isAtEndOfLine,canMoveForward:e=>!e.isAtEndOfLine,game:e=>e,gameNodes:e=>e.mainLine,getCurrentFen:e=>e.historyFENs[e.historyFENs.length-1],getMoveList:e=>e.tcn,getMoveText:e=>e.selectedNode.san,getSanMoves:e=>e.mainLine.map(n=>n.san),isUserTurn:e=>e.playingAs===e.turn,selectedMoveNodeIndex:e=>e.selectedNode.moveNumber,selectedNode:e=>e.selectedNode,selectedPly:e=>Cg({selectedNode:e.selectedNode,startingMoveNumber:e.startingMoveNumber,turn:e.turn}),variant:e=>e.variant},Mg={setGameStoreNamespace(e,n){e.gameStoreNamespace=n},setHistoryFENs(e,n){e.historyFENs=n},setIsGameOver(e,n){e.isGameOver=n},setLegalMoves(e,n){e.legalMoves=n},setMaterial(e,n){e.material=n},setPlayingAs(e,n){e.playingAs=n},setPositionDetails(e,n){if(n){const{castling:a}=n;e.positionDetails={...e.positionDetails,castling:a}}else e.positionDetails=null},setIsAtEndOfLine(e,n){e.isAtEndOfLine=n},setMode(e,n){e.mode=n},setResult(e,n){e.result=n},setSelectedNode(e,n){e.selectedNode=Ks(n)},setStartingMoveNumber(e,n){e.startingMoveNumber=n},setTurn(e,n){e.turn=n},setMainLine(e,n){e.mainLine=n},setLines(e,n){e.lines=n},setPgn(e,n){e.pgn=n},setPgnHeaders(e,n){e.pgnHeaders=n},setTcn(e,n){e.tcn=n},setVariant(e,n){e.variant=n}},Og={namespaced:!0,actions:Pg,getters:Tg,mutations:Mg,state:kg},Lo=ir(7739);function Ph(e){const n=Cn(e);Lo.default.hasModule(n)||(Lo.default.registerModule(n,Ks(Og)),Lo.default.commit(`${n}/setGameStoreNamespace`,n))}const Ch={DIAGRAM:".diagram-viewer-component",ID:"id"},Th=()=>{let e;const n=document.querySelector(Ch.DIAGRAM);if(e!==n.offsetHeight){const a={frameHeight:n.offsetHeight,id:n.getAttribute(Ch.ID)};window.parent.postMessage(a,"*")}},xg=e=>{Object.keys(e).forEach(n=>{const a=e[n];(!Lo.default.state||!Lo.default.state[n])&&Lo.default.registerModule(n,a)})},N6=e=>{e.forEach(n=>{Lo.default.state&&Lo.default.state[n]&&Lo.default.unregisterModule(n)})},Ig=7e3,iu={badRequest:ie.trans("Oops. Looks like there was an error. Sorry! Please refresh.")},L6={avatarUploaded:ie.trans("Avatar uploaded"),commentCreated:ie.trans("Thank you for your comment."),commentDeleted:ie.trans("Comment deleted."),commentEmptyContent:ie.trans("You cannot send an empty comment"),commentUpdated:ie.trans("Comment updated."),commentLinkCopied:ie.trans("Comment link is copied to clipboard"),copied:ie.trans("Copied to clipboard"),forumsMarkedAsRead:ie.trans("All forum topics have been marked as read"),featureContent:ie.trans("Feature Set! It might take a minute or two to appear."),inviteEmpty:ie.trans("Please select the players for whom to send the invitation"),inviteSent:ie.trans("Your invitations were sent successfully"),pgnCopied:ie.trans("PGN copied to buffer")},Rg={ALERT_FLASH_CONTAINER:"widget-alert-flash",DISMISSING:"alert-banner-dismissing"},Es={error:"error",info:"info",success:"success"},B6={type:Es.error,message:iu.badRequest};function Ng(e){const n=document.querySelector(`link[data-href*="/${e}.client"]`);n&&(n.setAttribute("href",n.getAttribute("data-href")),n.removeAttribute("data-href"))}function D6(e){const n=document.getElementById(`alert-${e}`);n&&ec(n)}function $a(e=2){var n;const a=Ju();Array.from((n=a?.querySelectorAll(`.alerts-alert:not(:nth-last-child(-n + ${e}))`))!=null?n:[]).forEach(ec)}function Mh(){const e=Ju();e&&(e.innerHTML="")}function Lg(e){var n;e.type!==Es.success&&$a(2),Ng("alerts");const a=document.createElement("div");a.classList.add("alerts-alert"),a.classList.add("alerts-enter"),a.classList.add(`alerts-${e.type}`),a.setAttribute("id",`alert-${e.id}`);const u=document.createElement("span");u.classList.add("alerts-message"),u.innerHTML=e.message;const d=document.createElement("button");d.classList.add("alerts-close"),d.setAttribute("type","button"),d.innerHTML='<span class="icon-font-chess x"></span>',a.appendChild(u),a.appendChild(d),(n=Ju())==null||n.appendChild(a),d.addEventListener("click",Dg),e.type===Es.success&&setTimeout(ec,Ig,a)}function Ju(){return document.getElementById(Rg.ALERT_FLASH_CONTAINER)}function ec(e){e.classList.add("alerts-leave"),setTimeout(Bg,200,e)}function Bg(e){var n;try{(n=Ju())==null||n.removeChild(e)}catch{Mh()}}function Dg(e){var n,a;const u=(a=(n=e.target)==null?void 0:n.closest)==null?void 0:a.call(n,".alerts-alert");u&&ec(u)}var Fg=ir(4752),F6=ir.n(Fg);const zg=(e,n)=>{const a=document.getElementById(`alert-${e}`);a&&a.classList.add(refs.DISMISSING),setTimeout(()=>{n()},200)};function Xs({message:e,type:n,id:a}){Lg({id:a??F6()(),type:n,message:e})}function z6(e){Xs({type:types.success,message:e})}function U6(e=errors.badRequest){Xs({type:types.error,message:e})}const _r={BACKGROUND:"icon-background",COMPONENT:"icon-component",COMPONENT_SHADOW:"icon-component-shadow",SHADOW:"icon-shadow"},Bd=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>
  <path d="M9 3.72a.48.48 0 0 0-.44.3L7.24 7.46l-3.68.19a.48.48 0 0 0-.27.84l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56 2.86-2.32a.48.48 0 0 0-.27-.84l-3.68-.19L9.44 4A.48.48 0 0 0 9 3.72z" opacity=".1"/>
  <path d="M9 3.22a.48.48 0 0 0-.44.3L7.24 7l-3.68.19a.48.48 0 0 0-.27.81l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56L14.71 8a.48.48 0 0 0-.27-.84L10.76 7 9.44 3.52a.48.48 0 0 0-.44-.3z" fill="#fff"/>
`,Ai=`
  <path class="${_r.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
  <path class="${_r.BACKGROUND}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".3" d="M8.4,6c-1-.75-2.52-1.09-4.83-1.09H2.49v8.71H3.57A8.13,8.13,0,0,1,8.4,14.76Z"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".3" d="M9.49,14.76a8.14,8.14,0,0,1,4.84-1.17h1.08V4.88H14.33C12,4.88,10.52,5.22,9.49,6Z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M8.4,5.47c-1-.75-2.52-1.09-4.83-1.09H3v8.71h.58A8.13,8.13,0,0,1,8.4,14.26Z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M9.49,14.26a8.14,8.14,0,0,1,4.84-1.17h.58V4.38h-.58c-2.32,0-3.81.34-4.84,1.09Z"/>
`,Ug=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>
  <g class="${_r.COMPONENT_SHADOW}" opacity=".2">
    <path d="M14.68 5.48a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.19 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.66a.45.45 0 0 0 .19 0l.11-.09a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .42-.23 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .65-.64A4.62 4.62 0 0 0 14 9a5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1 2.76 2.76 0 0 0-.31-1.19zM12.3 12.72h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.06zM6.68 12.72H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.06zM8.28 4.56A3.63 3.63 0 0 0 7.19 4 3.86 3.86 0 0 0 6 3.81 3.78 3.78 0 0 0 4.79 4a6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41l1 1.21a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.09a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.52.53 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7 8.22 8.22 0 0 1 .66-.64A5.68 5.68 0 0 0 8.36 9a7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.11z"/>
  </g>
  <path class="${_r.COMPONENT}" fill="#fff" d="M14.68 5a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.17 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.16a.45.45 0 0 0 .19 0l.09-.16a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .44-.16 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .62-.66 4.62 4.62 0 0 0 .54-.46 5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1A2.76 2.76 0 0 0 14.68 5zM12.3 12.22h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.09zM6.68 12.22H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.09zM8.28 4.06a3.63 3.63 0 0 0-1.09-.56A3.86 3.86 0 0 0 6 3.31a3.78 3.78 0 0 0-1.2.17 6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41L4.09 6a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.07a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.48.57 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7A8.22 8.22 0 0 1 7.84 9a5.68 5.68 0 0 0 .52-.48 7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.13z"/>
`,Hg=`
  <path class="${_r.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
  <path class="${_r.BACKGROUND}" fill="#1baca6" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".2" d="M12.57,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,4.15A.42.42,0,0,1,10,3.91a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M12.57,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,3.65A.42.42,0,0,1,10,3.41a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".2" d="M8.07,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.92a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,4.15a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M8.07,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.42a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,3.65a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>
`,Dd=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>
  <path class="${_r.COMPONENT_SHADOW}" d="M15.11 6.81l-5.66 5.66-1.66 1.65a.38.38 0 0 1-.55 0L2.89 9.78a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0l2.69 2.69 5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .55z" opacity=".2"/>
  <path class="${_r.COMPONENT}" d="M15.11 6.31L9.45 12l-1.66 1.62a.38.38 0 0 1-.55 0L2.89 9.28a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0L7.52 10l5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .58z" fill="#fff"/>
`,Oh=`
  <path class="${_r.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
  <path class="${_r.BACKGROUND}" fill="#5a9ac0" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".2" d="M15,6.8,7.81,14a.38.38,0,0,1-.55,0L3,9.73a.41.41,0,0,1,0-.55L4.36,7.81a.4.4,0,0,1,.54,0l2.63,2.64L13.1,4.9a.38.38,0,0,1,.55,0L15,6.25A.38.38,0,0,1,15,6.8Z"/>
  <path class="${_r.COMPONENT}" fill="#ffffff" d="M15,6.3,7.81,13.49a.38.38,0,0,1-.55,0L3,9.23a.41.41,0,0,1,0-.55L4.36,7.31a.4.4,0,0,1,.54,0L7.53,10,13.1,4.4a.38.38,0,0,1,.55,0L15,5.75A.38.38,0,0,1,15,6.3Z"/>
`,Qs=`
  <path class="${_r.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z" />
  <path class="${_r.BACKGROUND}" fill="#95bb4a" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z" />
  <path class="${_r.COMPONENT_SHADOW}" opacity=".1"
    d="M4.44,5.41v7.68a1,1,0,0,0,1,1h7.68a1,1,0,0,0,1-1V5.41a1,1,0,0,0-1-1H5.41A1,1,0,0,0,4.44,5.41ZM12,12H6.53V6.53H12Z" />
  <path class="${_r.COMPONENT}" fill="#ffffff"
    d="M4.19,5.16v7.68a1,1,0,0,0,1,1h7.68a1,1,0,0,0,1-1V5.16a1,1,0,0,0-1-1H5.16A1,1,0,0,0,4.19,5.16Zm7.53,6.56H6.28V6.28h5.44Z" />
`,xh=`
  <path class="${_r.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
  <path class="${_r.BACKGROUND}" fill="#a09f9e" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M9,2.5A6.5,6.5,0,1,0,15.5,9,6.5,6.5,0,0,0,9,2.5Z"/>
  <path class="${_r.BACKGROUND}" fill="#a09f9e" d="M9,5a4,4,0,1,0,4,4A4,4,0,0,0,9,5Z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M9,7.5A1.5,1.5,0,1,0,10.5,9,1.5,1.5,0,0,0,9,7.5Z"/>
`,Gg=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#f0c15c"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".3" d="M13.51 14.85a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24V13a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M13.51 14.35a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24v-1.9a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>
  <path class="${_r.COMPONENT_SHADOW}" opacity=".3" d="M7.5 14.87a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.48 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.67a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.13l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38A6.65 6.65 0 0 1 5.29 4a3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.17 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.06 2.19 3.1 3.1 0 0 1-.13.96z"/>
  <path class="${_r.COMPONENT}" fill="#fff" d="M7.5 14.37a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.46 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.17a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.31.16l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.15l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38 6.65 6.65 0 0 1 .9-.37 3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.19 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.1 2.23 3.1 3.1 0 0 1-.13.96z"/>
`,Vg=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>
  <path class="${_r.COMPONENT_SHADOW}" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>
  <path class="${_r.COMPONENT}" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>
`,jg=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#dd5357"/>
  <path class="${_r.COMPONENT_SHADOW}" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>
  <path class="${_r.COMPONENT}" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>
`,$g=`
  <path class="${_r.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>
  <path class="${_r.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#e6912c"/>
  <path class="${_r.COMPONENT_SHADOW}" d="M9.82 14.87a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.71a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.53.53 0 0 1-.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38A5.72 5.72 0 0 1 7.61 4a3.68 3.68 0 0 1 1.19-.19A3.86 3.86 0 0 1 10 4a3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" opacity=".2"/>
  <path class="${_r.COMPONENT}" d="M9.82 14.37a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.21a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.16l-.1.09a.53.53 0 0 1-.24.06C7 6.14 6.93 6.1 6.91 6l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38 5.72 5.72 0 0 1 .9-.37 3.68 3.68 0 0 1 1.22-.13 3.86 3.86 0 0 1 1.2.19 3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" fill="#fff"/>
`,Fd=`
    <path class="${_r.SHADOW}" d="M6.33,16.85l-6-12A3,3,0,0,1,3,.5H15a3,3,0,0,1,2.67,4.33l-6,12A3,3,0,0,1,6.33,16.85Z" opacity=".3"/>
    <path class="${_r.BACKGROUND}" d="M6.33,16.35l-6-12A3,3,0,0,1,3,0H15a3,3,0,0,1,2.67,4.33l-6,12A3,3,0,0,1,6.33,16.35Z" fill="#c93430"/>
    <path class="${_r.COMPONENT_SHADOW}" d="M8.92,2,5.9,9.3A.14.14,0,0,0,6,9.48h2.6a.14.14,0,0,1,.14.14l0,5.4c0,.12.18.19.23.08l3.7-7.92A.13.13,0,0,0,12.53,7H9.64a.14.14,0,0,1-.14-.13L9.15,2.05C9.15,1.93,9,1.87,8.92,2Z" opacity=".2"/>
    <path class="${_r.COMPONENT}" d="M8.92,1.48,5.9,8.8A.14.14,0,0,0,6,9h2.6a.14.14,0,0,1,.14.14l0,5.4c0,.12.18.19.23.08l3.7-7.92a.13.13,0,0,0-.13-.18H9.64a.14.14,0,0,1-.14-.13L9.15,1.55C9.15,1.43,9,1.37,8.92,1.48Z" fill="#fff"/>
`,Wg=`
  <path
    class="${_r.SHADOW}"
    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"
    opacity=".3"></path>

  <path
    class="${_r.BACKGROUND}"
    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"
    fill="#8a8886"></path>

  <path
    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"
    class="${_r.COMPONENT_SHADOW}"
    opacity=".3"></path>

  <path
    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"
    class="${_r.COMPONENT}"
    fill="#ffffff"></path>
`,H6=()=>({begin:{},focus:{},end:{}}),qg={BLACK:2,WHITE:1},Li={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$9:"\u2612",$10:"=",$11:"=",$12:"=",$13:"\u221E",$14:"\u2A72",$15:"\u2A71",$16:"\xB1",$17:"\u2213",$18:"+-",$19:"-+",$22:"\u2A00",$23:"\u2A00",$32:"\u27F3",$33:"\u27F3",$36:"\u2192",$37:"\u2192",$40:"\u2191",$41:"\u2191",$44:"\u221E/=",$45:"=/\u221E",$132:"\u21C6",$133:"\u21C6",$146:"N"},Ih=bh(Li),Kg={DIAGRAM_EDITOR:"diagram-editor-container"},Zg={defaultCharLength:7,defaultCharWidth:6},Yg={pieces:["real3d"],animations:["arcade","natural"]},zd="//images.chesscomfiles.com",Xg="bundles/web/images/webgl_data",Qg="bundles/web/images/variants",G6={ARCADE:mn.B.Animation.Types.Arcade,DEFAULT:mn.B.Animation.Types.Default,FAST:mn.B.Animation.Types.Fast,NATURAL:mn.B.Animation.Types.Natural,NONE:mn.B.Animation.Types.None,SLOW:mn.B.Animation.Types.Slow},V6={ALMOST_CORRECT:{color:"#8a8886",icon:Wg,type:"Undo"},BEST_MOVE:{color:"#9EBA5A",icon:Bd,key:"bestMove",label:x("Best Move"),phrase:x("is best"),type:"BestMove"},BLUNDER:{annotation:Li.$4,color:"#b33430",icon:Ug,key:"blunder",label:x("Blunder"),phrase:x("is a blunder"),type:"Blunder"},BOOK:{icon:Ai,key:"book",label:x("Book"),phrase:x("is a book move"),type:"Book"},BRILLIANT:{color:"#1baca6",icon:Hg,key:"brilliant",label:x("Brilliant"),phrase:x("is brilliant"),type:"Brilliant"},CORRECT:{color:"#acce59",key:"correct",icon:Dd,label:x("Correct"),type:"Correct"},CRITICAL:{key:"critical",label:x("Critical")},EXCELLENT:{color:"#5a9ac0",icon:Oh,key:"excellent",label:x("Excellent"),phrase:x("is excellent"),type:"Excellent"},FORCED:{icon:Qs,key:"forced",label:x("Forced"),phrase:x("is forced"),type:"Forced"},GOOD:{icon:xh,key:"good",label:x("Good"),phrase:x("is good"),type:"Good"},INACCURACY:{annotation:Li.$6,color:"#f0c15c",icon:Gg,key:"inaccuracy",label:x("Inaccuracy"),phrase:x("is an inaccuracy"),type:"Inaccuracy"},INCORRECT:{color:"#c93430",icon:Vg,key:"incorrect",label:x("Incorrect"),type:"Incorrect"},MISSED_WIN:{color:"#dd5357",icon:jg,key:"missedWin",label:x("Missed Win"),phrase:x("is a missed win"),type:"MissedWin"},MISTAKE:{annotation:Li.$2,color:"#e6912c",icon:$g,key:"mistake",label:x("Mistake"),phrase:x("is a mistake"),type:"Mistake"},STAR:{color:"#e6912c",icon:Bd,key:"star",type:"BestMove"},THREAT:{color:"#c93430",icon:Fd,key:"threat",label:x("Threat"),phrase:x("is threat"),type:"Threat"}},Jg={RETRY_HINT_COLOR:"rgba(27, 172, 166, 0.5)",RETRY_HINT_COLOR_IN_HEX:"#1baca6"},j6={WHITE:1,BLACK:2},$6={COORDINATE_FILE:".coordinates .letter"},W6={boards:`${zd}/chess-themes/boards`,pieces:`${zd}/chess-themes/pieces`,sounds:`${zd}/chess-themes/sounds`,variants:Qg,webglData:Xg},Y4={boardStyle:"green",pieceStyle:"neo",highlightColor:"#FFFF33",highlightOpacity:.5,arrowColor:"rgb(255, 168, 0)",flipped:!1,files:8,ranks:8},ou={DARK_MODE_CHANGE:"darkModeChange"},Rh=[{value:"off",label:x("None")},{value:"inside",label:x("Inside")},{value:"outside",label:x("Outside")}],Nh={board:".board-board",resize:".board-controls",sidebar:".board-sidebar"},q6={minSidebarWidth:300,boardPaddingLeft:30},K6={COMPUTER_MOVING:0,MOVE_CORRECT:1,MOVE_INCORRECT:2,PLAYER_MOVING:3,SOLVED:4},Ud="8/pppppppp8/8/8/8/PPPPPPPP/8",Z6="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Lh=(e,n)=>reloadRequired.animations.indexOf(e)>-1||reloadRequired.animations.indexOf(n)>-1,e_=(e,n,a,u)=>{const d=Sn.getId(),h={id:d,interval:n,times:a,...u};return e.markings.blinkingSquares.push(h),setTimeout(()=>{const g=e.markings.blinkingSquares.findIndex(_=>_.id===d);e.markings.blinkingSquares.splice(g,1)},0),e};var mr=ir(6734);const Bh=(e,n)=>{const a=[];return(e.tree.lines||ir(5494).Z.state.lines)[0].some((d,h)=>typeof n=="number"&&h>=n?!0:(a.push(d.san),!1)),a},t_=e=>{const n=[e.setup.fen];return(e.tree.lines||ir(5494).Z.state.lines)[0].forEach(u=>{n.push(u.fen)}),n},n_=e=>{const n=ic.getTcn(e);return n.substr(n.length-2)},Dh={},Y6=e=>{var n,a;return((a=(n=window.chesscom)==null?void 0:n.features)==null?void 0:a.includes(e))?!0:!!Dh[e]},r_=({feature:e,hasAccess:n})=>{Dh[e]=n},X6=e=>{const n=e.dataset,a=Object.keys(n),u="feature";a.forEach(d=>{d.indexOf(u)===0&&r_({feature:d.substring(u.length).split(/(?=[A-Z])/).join("_").toLowerCase(),hasAccess:!!n[d]})})},vr={createJce:e=>{const n=Object.assign({},e,{analysis:!0});return At.createGame(n)||null},updateIdsFromJce:e=>!e||!e.jce?null:(e.tree.selected=e.jce.ids(),e),getSelectedIds:e=>e.jce.ids(),getPositionInfo:e=>{const n=At.getPositionInfo({game:e.jce},{skipValidation:!0,getLegalMoves:!0});return e.settings.premoves?n.legalPremoves=vr.getLegalPremoves(e):n.legalPremoves=[],n},getPositionDetails:e=>Object.assign(At.getPositionDetails({game:e.jce,kings:!1,skipValidation:!0}),{hand:vr.getHand(e)}),addExtraCastlingMoves:e=>{e.setup.legalMoves.forEach(n=>{(n.flags===16||n.flags===32)&&(e.variant==="chess960"?vr.addCastlingMoves960(e,n):vr.addCastlingMoves(e,n))})},addCastlingMoves:(e,n)=>{const a=n.color===1?1:8;(n.flags===16?[8]:[1,2]).forEach(d=>{e.setup.legalMoves.push({color:n.color,flags:n.flags,piece:"k",from:n.from,san:n.flags===16?"O-O":"O-O-O",to:Sn.getSanFromFileRank({file:d,rank:a})})})},addCastlingMoves960:(e,n)=>{const u=Sn.getFileRankFromSan(n.from).rank;let d=1,h=0;for(;h<2;){const g=Sn.getPieceAt(e,{file:d,rank:u});typeof g<"u"&&g.type==="r"&&h++,(h===1&&n.flags===32||h===2&&n.flags===16)&&e.setup.legalMoves.push({color:n.color,flags:n.flags,piece:"k",from:n.from,san:n.flags===16?"O-O":"O-O-O",to:Sn.getSanFromFileRank({file:d,rank:u})})}d++},getHeaders:e=>e.jce.header(),getFen:e=>e.jce.fen(),getPgn:(e,n)=>e.jce.pgn(n),getPremoves:e=>e.jce.premove.queue.map(n=>({move:n,pieces:e.jce.premove.getPieces()})),getHand:e=>e.jce.hand(),getChecks:e=>e.jce.checks(),getLegalPremoves:e=>e.jce.premove.moves(),load:(e,n)=>(e.jce.load(n)&&vr.updateIdsFromJce(e),e),loadPgn:(e,n)=>(e.jce.loadPgn(n)&&vr.updateIdsFromJce(e),e),loadPgnSoft(e,n){if(!e.jce.loadPgn(n)){const a=At.createGame({variant:"detect",pgn:n});a&&(n=a.pgn())}return e.jce.loadPgn(n)||vr.updateIdsFromJce(e),e},createVariation:e=>(e.jce.createVariation()&&(e.jce.reorderLines(),vr.updateIdsFromJce(e)),e),getJCEMove:(e,n)=>{let a=n;return vr.isValidMoveObject(n)?(a.san?a=At.sanToObj(a.san,vr.getFen(e),e.variant):a.tcn&&(a=At.decodeTCN(a.tcn)[0]),a):null},move:(e,n,a=!0)=>{if(!n)return null;let u=!1;if(a===!1){const d=n.from?e.jce.get(n.from):null,h=n.to?e.jce.get(n.to):null;if(d&&h&&h.type==="k")return null;e.jce.remove(n.to),e.jce.remove(n.from);const g=n.drop||n.put;u=e.jce.put(d||{type:g.toLowerCase(),color:g&&g.toUpperCase()===g?1:2},n.to),n.from&&d&&n.to===null&&(u=!0)}else n.drop&&(n.drop=n.drop.toLowerCase()),u=e.jce.move(n);return u&&vr.updateIdsFromJce(e),u},selectLine:(e,n)=>{const a=mr.x.getLine(e.tree.lines,n);return a&&(e.jce.selectLine(n),e.tree.selected={line:n,move:a.length-1}),e},selectNode:(e,n={line:0,move:0})=>(e.jce.selectPosition(n.move,n.line),e),updateHeaders:(e,n)=>e.jce.header(n),clear:e=>e.jce.clear(e.variant),isFileRankEqual:(e,n)=>e.file&&n.file&&e.rank&&n.rank&&e.file===n.file&&e.rank===n.rank,isValidMoveObject:e=>typeof e.from=="string"&&typeof e.to=="string"||typeof e.san=="string"||typeof e.tcn=="string"||!e.from&&typeof e.to=="string"&&typeof e.drop=="string"||e.to===null&&typeof e.from=="string"||!e.from&&typeof e.to=="string"&&typeof e.put=="string",movesMatch:(e,n)=>e.from===n.from&&e.to===n.to&&(!e.promotion||e.promotion===n.promotion)&&(!e.drop||e.drop===n.drop),getMoveNumber:(e,n)=>e===1?Math.ceil(n/2+1):Math.floor(n/2+1),isUserTurn:e=>e.setup.playingAs===e.setup.sideToMove,getFens:t_,getLastTcn:n_,getSanMoves:Bh},ei={ADD_BLINKING_SQUARE:"ADD_BLINKING_SQUARE",CLEAR_ARROW:"CLEAR_ARROW",CLEAR_BLINKING_SQUARE:"CLEAR_BLINKING_SQUARE",CLEAR_EFFECT:"CLEAR_EFFECT",CLEAR_MARKED_SQUARE:"CLEAR_MARKED_SQUARE",INIT:"INIT",LOAD:"LOAD",MAKE_MOVE:"MAKE_MOVE",ILLEGAL_MOVE:"ILLEGAL_MOVE",JUMP_TO_POSITION:"JUMP_TO_POSITION",TREE_CHANGE:"TREE_CHANGE",TREE_AMENDED:"TREE_AMENDED",SETTINGS_CHANGE:"SETTINGS_CHANGE",PGN_HEADERS_UPDATED:"PGN_HEADERS_UPDATED",CANCEL_PREMOVES:"CANCEL_PREMOVES",PREMOVE:"PREMOVE",GUESS_THE_MOVE:"GUESS_THE_MOVE",CANCEL_GUESS_THE_MOVE:"CANCEL_GUESS_THE_MOVE",UPDATE_NODE:"UPDATE_NODE"},Xr={MAX_HISTORY_LIMIT:200,getInitialHistory(){return[]},add(e,n,a={}){if(e.length>Xr.MAX_HISTORY_LIMIT-1){const u=e.findIndex(d=>d!==null);e[u]=null}e.push({type:n,payload:a})},getLastItem(e){return e[e.length-1]}};let Hd={};const i_={q:9,r:5,b:3,n:3,p:1,k:0},Dr={getInitialSettings:()=>({variations:!1,analysis:!1,mainLineIsImmutable:!1,rules:!0,premoves:!1,GTM:!1}),getInitialSetup:()=>({ranks:8,files:8}),getInitialTree:()=>({initialMarkings:{arrows:[],effects:[],squares:[]}}),getInitialMarkings:()=>({arrows:[],blinkingSquares:[],effects:[],squares:[]}),clearState:e=>(e.setup=Dr.getInitialSetup(),e),updateState:e=>{e.setup=Object.assign({},e.setup,vr.getPositionInfo(e),vr.getPositionDetails(e)),vr.addExtraCastlingMoves(e),e.tree.lines=mr.x.getLinesFromJce(e),e.tree.selected=e.jce.ids(),e.tree.selectedNode=mr.x.getSelectedNode(e),e.setup.capturedPieces=Dr.getCapturedPieces(e.setup),e.setup.capturedScores=Dr.getCapturedScores(e.setup),e.setup.result=Dr.getResult(e),e.premoves=vr.getPremoves(e),e.variant=vr.getHeaders(e).Variant||e.variant,e.startingMoveNumber=e.setup.moveNumber;const n=mr.x.getNode(e.tree.lines,vr.getSelectedIds(e))||e.tree.initialMarkings;return n&&(e.markings.squares=n.squares?n.squares.map(a=>({...a})):[],e.markings.arrows=n.arrows?n.arrows.map(a=>({...a})):[],e.setup.effects?e.markings.effects=e.setup.effects:n.effects?e.markings.effects=n.effects.map(a=>({...a})):e.markings.effects=[]),Hd[e.id]=!0,e.sibling&&!Hd[e.sibling.id]&&(e.sibling=Dr.updateState(e.sibling)),Hd={},e},getCapturedPieces:e=>e.pieces.reduce((n,a)=>{if(a.type==="k")return n;const u=a.promoted?"p":a.type;return n[a.color-1][u]-=1,n},[{p:8,n:2,b:2,r:2,q:1},{p:8,n:2,b:2,r:2,q:1}]),getCapturedScores:e=>e.pieces.reduce((n,a)=>(n[a.color-1]+=i_[a.type],n),[0,0]),getResult:e=>{const n=vr.getHeaders(e).Result;return n!=="*"?n:e.setup.insufficient||e.setup.stalemate?"1/2-1/2":e.setup.gameOver&&!e.setup.draw?e.setup.sideToMove===1?"0-1":"1-0":"*"}},_o=(e,n={},a=0,u=!0)=>{const d=mr.x.findNode(e.jce._lines(),n,a,u),{line:h,move:g}={...e.tree.selected};if(!d)return e;let _={};return n.move+a<0&&n.line===d.ids.line?_={line:0,move:-1}:_=d.ids,vr.selectNode(e,_),Xr.add(e.history,ei.JUMP_TO_POSITION,{from:{line:h,move:g},to:_}),Dr.updateState(e)},Wa=(e,n,a={})=>{const u={...e.tree.selected};if(!e.settings.variations)return null;typeof a.line<"u"&&typeof a.move<"u"?vr.selectNode(e,a):a=e.tree.selected;const d=mr.x.getNode(e.jce._lines(),{line:a.line,move:a.move}).san;return vr.createVariation(e),n&&vr.move(e,d),Xr.add(e.history,ei.JUMP_TO_POSITION,{from:u,to:a}),Dr.updateState(e)},Gd=e=>e.tree.selected.move!==-1&&e.settings.mainLineIsImmutable&&mr.x.isMainLine(e.tree.selected.line),Fh=(e,n)=>At.getPositionDetails({fen:vr.getFen(e),variant:vr.getHeaders(e).Variant||"Chess"},n)!==null,Ma=(e,n,a=!1)=>{const u=vr.getJCEMove(e,n);if(u===null)return Xr.add(e.history,ei.ILLEGAL_MOVE),e;const d=e.settings.analysis||a;if(mr.x.isHead(e.jce._lines(),e.tree.selected)){if(!d&&!vr.isUserTurn(e))return Xr.add(e.history,ei.ILLEGAL_MOVE),e;if(d&&e.settings.variations&&Gd(e)&&Fh(e,u)){const h=mr.x.getNextMatchingNode(e.jce._lines(),e.tree.selected,u);return h?_o(e,h.ids):(Wa(e,!0),Dr.updateState(e),Ma(e,u))}}else{if(!d)return _o(e,mr.x.getHeadIds(e.jce._lines(),e.tree.selected.line));const h=mr.x.getNextMatchingNode(e.jce._lines(),e.tree.selected,u);if(h)return _o(e,h.ids);if(Fh(e,u)){if(Xr.add(e.history,ei.TREE_AMENDED),e.settings.variations)return vr.selectNode(e,{line:e.tree.selected.line,move:e.tree.selected.move+1}),vr.createVariation(e),Dr.updateState(e),Ma(e,u);if(!e.settings.mainLineIsImmutable)return mr.x.prune(e.jce._lines(),e.tree.selected),Ma(e,u)}return Xr.add(e.history,ei.ILLEGAL_MOVE),e}return!Gd(e)&&vr.move(e,u,e.settings.rules)?(Xr.add(e.history,ei.MAKE_MOVE,u),Dr.updateState(e)):(Xr.add(e.history,ei.ILLEGAL_MOVE),e)},tc=(e,n)=>([1,2].indexOf(n)>=0&&(e.setup.playingAs=n),e),o_=(e,n)=>(tc(e,3-e.setup.playingAs),Ma(e,n),tc(e,3-e.setup.playingAs),Dr.updateState(e)),a_=(e,n)=>{let a=!1;if(!e.settings.rules)return!0;for(let u=0;u<e.setup.legalMoves.length;u++){const d=e.setup.legalMoves[u];if(d.from===n.from&&d.to===n.to){a=!0;break}}return a},s_=(e,n)=>(n&&(_o(e,{line:0,move:0}),n.match(/.{2}/g).forEach(u=>Ma(e,{tcn:u},!0))),e),l_=(e,n=1)=>{if(e.tree.selected.line===0&&e.tree.selected.move-n<-1)return!1;const a=e.tree.lines||ir(5494).Z.state.lines;return mr.x.findNode(a,e.tree.selected,n*-1,!1)!==null},u_=(e,n=1)=>{const a=e.tree.lines||ir(5494).Z.state.lines;return mr.x.findNode(a,e.tree.selected,n,!1)!==null},Q6={premove:(e,n)=>{let a=!1;return e.settings.premoves&&!e.settings.analysis&&e.jce.premove.queue.length<8&&(a=e.jce.premove.move(n)),a},cancelPremoves:e=>e.jce.premove.queue.length?(e.jce.premove.cancel(),!0):!1,consumePremove:e=>(e.jce.premove.consume(),!0)},c_=(e,n)=>{const a=Game.getJCEMove(e,n);if(a===null)return History.add(e.history,Events.ILLEGAL_MOVE),e;if(!Line.isHead(e.jce._lines(),e.tree.selected)&&!e.settings.analysis)return selectNode(e,Line.getHeadIds(e.jce._lines(),e.tree.selected.line));if(!e.settings.analysis)return GamePremoves.premove(e,a)?(History.add(e.history,Events.PREMOVE),State.updateState(e)):History.add(e.history,Events.ILLEGAL_MOVE),e},zh=e=>(Q6.cancelPremoves(e)&&(Xr.add(e.history,ei.CANCEL_PREMOVES),Dr.updateState(e)),e),d_=e=>(e.premoves.length&&(GamePremoves.consumePremove(e)?(History.add(e.history,Events.MAKE_MOVE),State.updateState(e)):cancelPremoves(e)),e),Vd=(e,n)=>{const a=Object.prototype.hasOwnProperty.call(n,"premoves")&&e.settings.premoves!==n.premoves;return e.settings=Object.assign(e.settings,n),e.settings.premoves||zh(e),Xr.add(e.history,ei.SETTINGS_CHANGE),a&&Dr.updateState(e),e},f_=e=>{const n=ic.resetToMainLine(e),a=mr.x.clearAnalysis(n.jce._lines());return n.jce.saveLines(a),Xr.add(n.history,ei.TREE_CHANGE),Dr.updateState(e)},h_=(e,n,a)=>{const u=mr.x.getNode(e.jce._lines(),a)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;u.arrows||(u.arrows=[]);const d=u.arrows.findIndex(h=>vr.isFileRankEqual(h.fromFileRank,n.fromFileRank)&&vr.isFileRankEqual(h.toFileRank,n.toFileRank));return d!==-1&&(u.arrows.splice(d,1),Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE)),e},p_=(e,n)=>(e.markings.blinkingSquares[n]&&delete e.markings.blinkingSquares[n],e),jd=(e,n)=>n?(mr.x.clearAllMarkings(e.jce._lines()),vr.load(e,n),Xr.add(e.history,ei.LOAD),Dr.updateState(e)):null,m_=e=>(Vd(e,{rules:!1}),jd(e,"8/8/8/8/8/8/8/8 w - - 0 1"),Xr.add(e.history,ei.LOAD),Dr.updateState(e)),v_=(e,n,a)=>{const u=mr.x.getNode(e.jce._lines(),a)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;u.effects||(u.effects=[]);const d=u.effects.findIndex(h=>vr.isFileRankEqual(h.square,n.square));return d!==-1&&(u.effects.splice(d,1),Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE)),e},g_=(e,n,a)=>{const u=mr.x.getNode(e.jce._lines(),a)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;u.squares||(u.squares=[]);const d=u.squares.findIndex(h=>vr.isFileRankEqual(h,n));return d!==-1&&(u.squares.splice(d,1),Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE)),e},Uh=(e,n,a=!0)=>{const u=mr.x.getNode(e.jce._lines(),n)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;return(u.arrows&&u.arrows.length||u.squares&&u.squares.length||u.effects&&u.effects.length)&&(u.arrows=[],u.squares=[],u.effects=[],a&&(Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE))),e},__=(e,n={})=>{const a=e.jce._lines();if(!a)return e;if(typeof n.line>"u"&&typeof n.move>"u")return a.forEach(u=>{u.forEach((d,h)=>mr.x.clearNode(a,{line:d.ids.line,move:h}))}),Xr.add(e.history,ei.TREE_CHANGE),e;if(typeof n.move>"u"){const u=mr.x.getLine(e.jce._lines(),n.line);return u&&(u.forEach((d,h)=>mr.x.clearNode(a,{line:u.id,move:h})),Xr.add(e.history,ei.TREE_CHANGE)),e}return mr.x.getNode(a,n)&&(mr.x.clearNode(a,n),Xr.add(e.history,ei.TREE_CHANGE)),e},Hh=(e="")=>e.charCodeAt(0)-97+1,b_=(e=[])=>({fromFileRank:{file:Hh(e[0]),rank:Number(e[1])},toFileRank:{file:Hh(e[2]),rank:Number(e[3])}}),Gh=(e={})=>{const n={id:Sn.getId(),variant:e.variant||"chess",settings:Object.assign(Dr.getInitialSettings(),e.settings),setup:Object.assign(Dr.getInitialSetup(),e.setup),tree:Object.assign(Dr.getInitialTree(),e.tree),history:Xr.getInitialHistory(),markings:Object.assign(Dr.getInitialMarkings(),e.markings),premoves:[]};return tc(n,e.player||1),Object.defineProperty(n,"jce",{writable:!1,enumerable:!1,configurable:!1,value:vr.createJce(e)}),vr.updateIdsFromJce(n),Xr.add(n.history,ei.INIT),n.jce.siblingGame&&!n.sibling&&(n.sibling={id:Sn.getId(),variant:n.variant||"chess",sibling:n,settings:n.settings,setup:Dr.getInitialSetup(),tree:Dr.getInitialTree(),history:Xr.getInitialHistory(),markings:Object.assign(Dr.getInitialMarkings(),e.markings),premoves:[]},Object.defineProperty(n.sibling,"jce",{writable:!1,enumerable:!1,configurable:!1,value:vr.createJce({game:n.jce.siblingGame})}),vr.updateIdsFromJce(n.sibling)),Dr.updateState(n),n},y_=(e,n)=>e.jce.deletePosition(-1,n)?(Xr.add(e.history,ei.TREE_CHANGE),Dr.updateState(e),e):null,nc={AFTER:"after",BEFORE:"before"},xr={ADD_ANNOTATION:"addAnnotation",ADD_EVAL_NOTATION:"addEvalNotation",CLEAR_ANALYSIS:"clearAnalysis",CREATE_CONTINUATION:"createContinuation",CREATE_VARIATION:"createVariation",DELETE_COMMENT:"deleteComment",DELETE_LINE:"deleteLine",DELETE_MOVE:"deleteMove",INSERT_COMMENT:"insertComment",MOVE_VARIATION_DOWN:"moveVariationDown",MOVE_VARIATION:"moveVariation",PROMOTE_VARIATION:"promoteVariation",REMOVE_ANNOTATION:"removeAnnotation",REMOVE_BEGIN:"removeBegin",REMOVE_END:"removeEnd",REMOVE_EVAL_ANNOTATION:"removeEvalAnnotation",REMOVE_FOCUS:"removeFocus",SET_BEGIN:"setBegin",SET_END:"setEnd",SET_FOCUS:"setFocus",UPDATE_COMMENT:"updateComment"},J6={CLEAR_ANALYSIS:"clear-analysis-on-confirm"},w_=[{code:"$1",display:Li.$1,meaning:ie.trans("Good move"),action:xr.ADD_ANNOTATION},{code:"$2",display:Li.$2,meaning:ie.trans("Bad move"),action:xr.ADD_ANNOTATION},{code:"$3",display:Li.$3,meaning:ie.trans("Excellent move"),action:xr.ADD_ANNOTATION},{code:"$4",display:Li.$4,meaning:ie.trans("Blunder"),action:xr.ADD_ANNOTATION},{code:"$5",display:Li.$5,meaning:ie.trans("Speculative move"),action:xr.ADD_ANNOTATION},{code:"$6",display:Li.$6,meaning:ie.trans("Dubious move"),action:xr.ADD_ANNOTATION},{code:"$10",display:Li.$10,meaning:ie.trans("Drawish"),action:xr.ADD_EVAL_NOTATION},{code:"$13",display:Li.$13,meaning:ie.trans("Unclear"),action:xr.ADD_EVAL_NOTATION},{code:"$14",display:Li.$14,meaning:ie.trans("White has a slight advantage"),action:xr.ADD_EVAL_NOTATION},{code:"$15",display:Li.$15,meaning:ie.trans("Black has a slight advantage"),action:xr.ADD_EVAL_NOTATION},{code:"$16",display:Li.$16,meaning:ie.trans("White has a moderate advantage"),action:xr.ADD_EVAL_NOTATION},{code:"$17",display:Li.$17,meaning:ie.trans("Black has a moderate advantage"),action:xr.ADD_EVAL_NOTATION},{code:"$18",display:Li.$18,meaning:ie.trans("White has a decisive advantage"),action:xr.ADD_EVAL_NOTATION},{code:"$19",display:Li.$19,meaning:ie.trans("Black has a decisive advantage"),action:xr.ADD_EVAL_NOTATION},{code:"$22",display:Li.$22,meaning:ie.trans("The position is in zugzwang"),action:xr.ADD_EVAL_NOTATION},{code:"$146",display:Li.$146,meaning:ie.trans("Novelty"),action:xr.ADD_EVAL_NOTATION}],ew={CLEAR_ALL_ANALYSIS:{name:ie.trans("Clear All Analysis"),action:xr.CLEAR_ANALYSIS},CREATE_CONTINUATION:{name:ie.trans("Insert Continuation"),action:xr.CREATE_CONTINUATION},CREATE_VARIATION:{name:ie.trans("Insert Alternate Line"),action:xr.CREATE_VARIATION},DELETE_COMMENT_AFTER:{name:ie.trans("Delete Comment After"),action:xr.DELETE_COMMENT,position:nc.AFTER},DELETE_COMMENT_BEFORE:{name:ie.trans("Delete Comment Before"),action:xr.DELETE_COMMENT,position:nc.BEFORE},DELETE_LINE:{name:ie.trans("Delete Entire Variation"),action:xr.DELETE_LINE},DELETE_MOVE:{name:ie.trans("Delete Move"),action:xr.DELETE_MOVE},INSERT_COMMENT_AFTER:{name:ie.trans("Comment After"),action:xr.INSERT_COMMENT,position:nc.AFTER},INSERT_COMMENT_BEFORE:{name:ie.trans("Comment Before"),action:xr.INSERT_COMMENT,position:nc.BEFORE},MOVE_VARIATION_DOWN:{name:ie.trans("Move Variation Down"),action:xr.MOVE_VARIATION_DOWN},MOVE_VARIATION_UP:{name:ie.trans("Move Variation Up"),action:xr.MOVE_VARIATION},PROMOTE_VARIATION:{name:ie.trans("Promote"),action:xr.PROMOTE_VARIATION},REMOVE_ANNOTATION:{name:ie.trans("Remove Annotation"),action:xr.REMOVE_ANNOTATION},REMOVE_BEGIN:{name:ie.trans("Remove Begin"),action:xr.REMOVE_BEGIN},REMOVE_END:{name:ie.trans("Remove End"),action:xr.REMOVE_END},REMOVE_EVAL_ANNOTATION:{name:ie.trans("Remove Evaluation Annotation"),action:xr.REMOVE_EVAL_ANNOTATION},REMOVE_FOCUS:{name:ie.trans("Remove Focus"),action:xr.REMOVE_FOCUS},SET_BEGIN:{name:ie.trans("Set Begin"),action:xr.SET_BEGIN},SET_END:{name:ie.trans("Set End"),action:xr.SET_END},SET_FOCUS:{name:ie.trans("Set Focus"),action:xr.SET_FOCUS}},E_=[xr.SET_BEGIN,xr.SET_END,xr.SET_FOCUS,xr.REMOVE_BEGIN,xr.REMOVE_END,xr.REMOVE_FOCUS],Js={BEGIN:"begin",END:"end",FOCUS:"focus"},tw={SET:{[xr.SET_BEGIN]:Js.BEGIN,[xr.SET_END]:Js.END,[xr.SET_FOCUS]:Js.FOCUS},REMOVE:{[xr.REMOVE_BEGIN]:Js.BEGIN,[xr.REMOVE_END]:Js.END,[xr.REMOVE_FOCUS]:Js.FOCUS}},nw=(()=>{const e=[];return w_.forEach(n=>{const a=e[e.length-1]||null;!a||a.length===4?e.push([n]):a.push(n)}),e})(),Go=e=>!Object.prototype.hasOwnProperty.call(Li,e)&&!Object.prototype.hasOwnProperty.call(Ih,e)?e||"":Wd(e)?Li[e]:Go(Ih[e]),$d=(e,n)=>e.additionalAnnotation&&Array.isArray(e.additionalAnnotation)&&Go(e.additionalAnnotation[0])===Go(n),A_=(e,n)=>Go(e.annotation)===Go(n),Wd=e=>e&&e.charAt(0)==="$",rw=e=>e.additionalAnnotation&&e.additionalAnnotation[0],iw=e=>Object.prototype.hasOwnProperty.call(e,"annotation"),au=e=>!!(e&&typeof e.comment=="string"),ow=e=>!!(e&&typeof e.commentBefore=="string"),aw=e=>!!(e&&e.lines&&e.lines.length),S_=e=>e.flags===4,sw=(e,n)=>e.ids.line===n.lines[0],k_=(e,n)=>e.ids.move===n.lines[e.ids.line].length-1,lw=(e={})=>e.move===0&&e.line===0,P_=(e,n)=>e.ids.line===n.lines[n.lines.length-1],C_=e=>Line.isMainLine(e.ids.line),uw=(e,n,a)=>Object.prototype.hasOwnProperty.call(e,a)&&Object.prototype.hasOwnProperty.call(e[a],"ids")&&e[a].ids.move===n.ids.move&&e[a].ids.line===n.ids.line,cw=(e,n)=>{const a=e[nodeLimitTypes.END];return a&&Object.prototype.hasOwnProperty.call(a,"ids")?n.ids.line>a.ids.line||n.ids.line===a.ids.line&&n.ids.move>a.ids.move:!1},T_=(e,n)=>{const a=e[nodeLimitTypes.BEGIN];return a&&Object.prototype.hasOwnProperty.call(a,"ids")?n.ids.line<e.begin.ids.line||n.ids.line===e.begin.ids.line&&n.ids.move<e.begin.ids.move:!1},X4=(e,n)=>!(n&&C_(e)),dw=e=>{var n,a;let u="";return e.annotation&&(u=`${u}${Go(e.annotation)}`),((n=e.additionalAnnotation)==null?void 0:n.length)===1&&(u=`${u}&nbsp;${Go(e.additionalAnnotation[0])}`),((a=e.additionalAnnotation)==null?void 0:a.length)>1&&(u=`${u}&nbsp;${Go(e.additionalAnnotation.join(""))}`),u},fw=e=>e.ids.move===0,M_=e=>!!(e.isWhite||e.isFirstNodeOnLine||e.previousHasComment||e.previousHasLines),Vh=e=>!!(!e.isWhite&&(e.previousHasComment||e.previousHasLines||e.isFirstNodeOnLine));function O_(e,n){let a="";return M_(e)&&(a+=`${e.nodeMoveNumber+(n-1)}.`,Vh(e)&&(a+=".."),a+="&nbsp;"),a}const qd=e=>{let n=mr.x.getSelectedLine(e),a=0;const u={...e.tree.selected};e.tree.selected.move===0&&typeof n.parentId<"u"?(vr.selectLine(e,n.parentId),n=mr.x.getSelectedLine(e)):mr.x.isMainLine(n.id)&&(a=-1);const d={line:n.id,move:a};return vr.selectNode(e,d),Xr.add(e.history,ei.JUMP_TO_POSITION,{from:u,to:d}),Dr.updateState(e)},x_=e=>(mr.x.isMainLine(e.tree.selected.line)||vr.selectLine(e,0),qd(e),Dr.updateState(e)),su=(e,n={})=>{const a=Object.assign(e.tree.selected,n);return a.line>0&&(a.move<=0||mr.x.isFirstVisibleNode(e.jce._lines(),a))&&(a.move=-1),e.jce.deletePosition(a.move,a.line),Xr.add(e.history,ei.TREE_CHANGE),Dr.updateState(e),e},Kd=(e,n={})=>{const a=Object.assign(e.tree.selected,n);return su(e,{move:a.move+1,line:a.line})},jh=e=>{const n=e.jce._history().length-e.jce.ids().move-1,a=e.jce.history(!0);return n===0?a:a.slice(0,-n)},I_=(e,n)=>vr.getPgn(e,n),R_=e=>vr.getHeaders(e),N_=e=>mr.x.getSelectedNode(e),Zd=(e,n)=>{const a=e.jce&&e.jce._lines()||ir(5494).Z.state.lines;return At.encodeTCN(mr.x.getLine(a,n)||a[0])},L_=(e,n,a,u)=>{const d=n.map(h=>At.encodeTCN({from:h.slice(0,2),to:h.slice(2,4),promotion:h.slice(4,5)||void 0})).join("");return ic.loadFromTcn(e,d,a,u)},hw=e=>!!(e&&e.tree&&e.tree.lines),B_=e=>(Object.keys(Li).forEach(function(n){e=e.replace(new RegExp(`\\${n}\\b`,"gm"),Go(n))}),e),pw=e=>{var n;return(n=e?.[0])==null?void 0:n.length},mw=({moveIds:e,moveList:n,scrollEl:a})=>{if(!e||!n||!a)return;const u=n.getComponentRefByLineMove(e.line,e.move);if(!u)return;const d=a.getBoundingClientRect(),h=u.$el?u.$el.getBoundingClientRect():u.getBoundingClientRect(),g=a.scrollTop,b=d.top+Math.floor(d.height/2)-h.top;a.scrollTop=g-b},D_=(e,n,a,u=!1)=>{if(!n)return e;const d=B_(n);return u&&!e.jce.loadPgn(d)?vr.loadPgnSoft(e,d):vr.loadPgn(e,d),Dr.updateState(e),a?_o(e,e.tree.selected,a):(Xr.add(e.history,ei.LOAD),e)},F_=(e,n,a,u)=>!n||!n.length?null:(a&&vr.load(e,a),n.forEach(d=>Ma(e,{san:d},!0)),Dr.updateState(e),u?_o(e,e.tree.selected,-1):(Xr.add(e.history,ei.LOAD),e)),As={p:1,n:32,b:256,r:2048,q:16384},$h=(e,n,a)=>(e.jce._hand[n]=a.split("").reduce((u,d)=>u+As[d],0),e.setup.hand=e.jce.hand(),e),rc=(e,n,a=Sn.getInitialFen(),u)=>{jd(e,a);const d=At.decodeTCN(n);return d?(d.forEach(h=>{(e.variant==="Crazyhouse"||e.variant==="Bughouse")&&h.drop&&$h(e,e.setup.sideToMove,h.drop),Ma(e,h,!0)}),Dr.updateState(e),u?_o(e,e.tree.selected,-1):(Xr.add(e.history,ei.LOAD),e)):null},Wh=(e,n,a,u=!0)=>{const d=mr.x.getNode(e.jce._lines(),a)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;return d.arrows||(d.arrows=[]),d.arrows.find(h=>vr.isFileRankEqual(h.fromFileRank,n.fromFileRank)&&vr.isFileRankEqual(h.toFileRank,n.toFileRank))||(d.arrows.push(n),u&&(Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE))),e},qh=({game:e,effect:n,ids:a,persist:u,updateState:d=!0})=>{if(u)return e.setup.effects=n?[n]:null,Dr.updateState(e),e;const h=mr.x.getNode(e.jce._lines(),a)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;return h.effects||(h.effects=[]),h.effects.find(g=>vr.isFileRankEqual(g.square,n.square))||(h.effects.push(n),d&&(Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE))),e},Kh=(e,n,a,u=!0)=>{const d=mr.x.getNode(e.jce._lines(),a)||mr.x.getNode(e.jce._lines(),vr.getSelectedIds(e))||e.tree.initialMarkings;return d.squares||(d.squares=[]),d.squares.find(h=>vr.isFileRankEqual(h,n))||(d.squares.push(n),u&&(Dr.updateState(e),Xr.add(e.history,ei.TREE_CHANGE))),e},Yd=(e,n)=>{const a=Gh({variant:e.variant,fen:Sn.getFirstFen(e)});return rc(a,n,a.setup.fen),Zd(a)},Zh=(e,n,a)=>{if(typeof n!="string"||e.settings.mainLineIsImmutable)return null;if(n==="")return qd(e),rc(e,"",e.setup.fen);const u={...e.tree.selected};let d=Zd(e),h=n;const g=e.history.length-1;if(!d.includes(h)&&!h.includes(d)&&(d=Yd(e,d),h=Yd(e,h),!d.includes(h)&&!h.includes(d)))return rc(e,h);if(h.length<d.length)_o(e,{line:0,move:h.length/2-1}),Kd(e);else if(h.length>d.length){_o(e,{line:0,move:d.length/2-1});let _;if(h.slice(d.length).match(/.{2}/g).forEach(b=>{_=At.decodeTCN(b)[0],(e.variant==="Crazyhouse"||e.variant==="Bughouse")&&_.drop&&$h(e,e.setup.sideToMove,_.drop),Ma(e,_,!0)}),e.history.slice(g+1).some(b=>b&&b.type===ei.ILLEGAL_MOVE))return _o(e,u),Kd(e),e.history=e.history.slice(0,g),Zh(e,Yd(e,h))}else return e;if(a)return _o(e,e.tree.selected,-1);if(u.line!==e.tree.selected.line||u.move!==e.tree.selected.move){const _=mr.x.getNode(e.jce._lines(),u)?u:e.tree.selected;return _o(e,_)}return e},z_=(e,n=1)=>_o(e,e.tree.selected,n*-1,!1),Yh=(e,n=1)=>_o(e,e.tree.selected,n,!1),Xd=(e,n=e.tree.selected.line)=>{const a=mr.x.getLine(e.jce._lines(),n).length-1,u={...e.tree.selected};if(e.tree.selected.move!==a||n!==e.tree.selected.line){const d={line:n,move:a};return vr.selectNode(e,d),Xr.add(e.history,ei.JUMP_TO_POSITION,{from:u,to:d}),Dr.updateState(e)}return e},ic={addBlinkingSquare:e_,addVariant:s_,canMoveBackward:l_,canMoveForward:u_,changeSettings:Vd,clearAnalysis:f_,clearArrow:h_,clearBlinkingSquare:p_,clearBoard:m_,clearEffect:v_,clearMarkedSquare:g_,clearMarkings:Uh,clearNodes:__,convertLanToFileRanks:b_,createGame:Gh,createVariation:Wa,deleteLine:y_,deleteNode:su,deleteRemainingNodes:Kd,getCurrentFullLine:jh,getPgn:I_,getPgnHeaders:R_,getSelectedNode:N_,getTcn:Zd,isMoveLegal:a_,loadFromFen:jd,loadFromLan:L_,loadFromPgn:D_,loadFromSanMoves:F_,loadFromTcn:rc,makeMove:Ma,makeOpponentMove:o_,markArrow:Wh,markEffect:qh,markSquare:Kh,mergeTcn:Zh,moveBackward:z_,moveForward:Yh,moveToEnd:e=>(mr.x.isMainLine(e.tree.selected.line)||vr.selectLine(e,0),Xd(e),Dr.updateState(e)),moveToStart:x_,moveVariation:(e,n,a=!0)=>{const u=mr.x.getLine(e.jce._lines(),n);if(u&&typeof u.parentId<"u"){const d=mr.x.getLine(e.jce._lines(),u.parentId)[u.atMoveNode];let h=-1;if(d.lines.forEach((g,_)=>{n===g&&(h=_)}),h>-1){let g=null;a&&h>0?(g=d.lines[h-1],d.lines[h-1]=n,d.lines[h]=g):!a&&h<d.lines.length-1&&(g=d.lines[h+1],d.lines[h+1]=n,d.lines[h]=g)}Xr.add(e.history,ei.TREE_CHANGE)}return e},promoteVariation:(e,n)=>{let a=n;typeof a>"u"&&(a=e.tree.selected);let u=mr.x.getLine(e.jce._lines(),a.line);if(u&&typeof u.parentId<"u"){let d=a.move;for(;typeof u.parentId<"u"&&!(e.settings.mainLineIsImmutable&&mr.x.isMainLine(u.parentId));){const h=mr.x.getLine(e.jce._lines(),u.parentId),g=mr.x.isContinuation(e.jce._lines(),u.id)?1:0,_=u[g]&&u[g].commentBefore,b=u.atMoveNode,A=u.slice(0);u.length=0,_&&h[b-1]&&(h[b-1].comment?(h[b-1].comment.substr(-1)!==" "&&(h[b-1].comment+=" "),h[b-1].comment+=_):h[b-1].comment=_,delete A[g].commentBefore,delete u.initComment);const T=h.slice(b),I=T[0].lines.map(F=>F);delete T[0].lines,T.forEach((F,U)=>{F.lines&&F.lines.length&&F.lines.forEach(z=>{const Q=mr.x.getLine(e.jce._lines(),z);Q.parentId=u.id,Q.atMoveNode=U})}),h.length=b,A.forEach(F=>{F.ids={line:h.id,move:h.length},F.lines&&F.lines.length&&F.lines.forEach(U=>{const z=mr.x.getLine(e.jce._lines(),U);z.parentId=h.id,z.atMoveNode=h.length}),h.push(F)}),T.forEach((F,U)=>{F.ids={line:u.id,move:U},u.push(F)}),h[b].lines=I,h[b].lines.forEach(F=>{const U=mr.x.getLine(e.jce._lines(),F);U.parentId=h.id}),vr.selectNode(e,{line:h.id,move:b+d}),u=mr.x.getLine(e.jce._lines(),u.parentId),d=b+d}}return e.jce.saveLines(e.tree.lines),Xr.add(e.history,ei.TREE_CHANGE),Dr.updateState(e)},resetToMainLine:e=>{const n={...e.tree.selected};mr.x.isMainLine(e.tree.selected.line)||vr.selectLine(e,0),Xd(e);const a=e.tree.selected;return e.tree.lines.length=1,e.tree.lines=mr.x.rebuildIds(e.tree.lines),e.jce.saveLines(e.tree.lines),Xr.add(e.history,ei.JUMP_TO_POSITION,{from:n,to:a}),Dr.updateState(e)},selectLineEnd:Xd,selectLineStart:qd,selectNode:_o,setPlayingAs:tc,updateMarkings:({arrow:e,effect:n,game:a,ids:u,square:d,resetFirst:h=!0})=>(h&&Uh(a,u,!1),e&&Wh(a,e,u,!1),n&&qh({game:a,effect:n,ids:u,updateState:!1}),d&&Kh(a,d,u,!1),Dr.updateState(a),Xr.add(a.history,ei.TREE_CHANGE),a),updateNode:(e,n={},a)=>{const u=e.jce._lines(),d=mr.x.findNode(u,n);if(!d||!a||a.commentBefore&&!mr.x.isFirstVisibleNode(u,n))return null;const h=mr.x.getLine(u,n.line);if(a.commentBefore===void 0&&mr.x.isFirstVisibleNode(u,n)?delete h.initComment:a.commentBefore&&(h.initComment=a.commentBefore),a.insertCommentAfterLastNode&&h.length){const g=h[h.length-1];g&&(g.comment=a.insertCommentAfterLastNode,delete a.insertCommentAfterLastNode)}if(a.annotation&&(a.annotation=A_(d,a.annotation)?"":Go(a.annotation)),a.additionalAnnotation){if(!Wd(a.additionalAnnotation))return null;$d(d,a.additionalAnnotation)&&(a.additionalAnnotation=[]),a.additionalAnnotation=[].concat(Go(a.additionalAnnotation))}return Object.assign(d,a),Xr.add(e.history,ei.UPDATE_NODE,{line:n.line,move:n.move}),Dr.updateState(e)},updatePgnHeaders:(e,n)=>{if(!n)return null;const a=Object.keys(n).reduce((u,d)=>(d==="Date"&&typeof n[d]=="number"&&(n[d]=Sn.formatJSTimestampForPgn(n[d])),u.push(d),u.push(n[d]),u),[]);return vr.updateHeaders(e,a),Xr.add(e.history,ei.PGN_HEADERS_UPDATED),e.setup.result=Dr.getResult(e),e}},U_=({path:e="",size:n=24,viewBox:a="0 0 18 19"})=>`
  <svg width="${n}" height="${n}" viewBox="${a}">
    ${e}
  </svg>
`,H_=({icon:e,node:n,square:a})=>({position:{x:"right",y:"top"},square:a||ic.convertLanToFileRanks(`${n.from}${n.to}`).toFileRank,template:U_({path:e,size:"100%"})});var Xh=ir(9669),oc=ir.n(Xh),ac=oc();function Qd(e){return Qh(e)||Jh(e)||G_(e)}function Qh(e){return e.startsWith("/service/")||e.includes(".com/service/")}function Jh(e){return e.includes("chessbomb.com")}function G_(e){return/https:\/\/(?!www)([\S]+)chess.com/.test(e)}const V_=["delete","patch","post","put"];function j_(e){return!e||Qd(e.url)||!V_.includes(e.method)||(e.data instanceof FormData||e.data instanceof URLSearchParams?e.data.append("_token",window.context.csrf.token):e.data=Object.assign({_token:window.context.csrf.token},e.data||{})),e}const Aw={BADGE_COUNT:"data-badge-count",BADGE_TEXT:"data-badge-text",BADGE_TYPE:"data-badge",SEEK_IS_SEEKER:"data-seek-is-seeker",SHAREABLE_GAME_UUID:"data-seek-short-uuid",SHAREABLE_SHARE_LINK:"data-seek-share-link"},ep={PUZZLE_BATTLE_CHALLENGE_TOASTER:"puzzle-battle-challenge-toaster",PUZZLE_BATTLE_CHALLENGE_USER:"puzzle-battle-challenge-user",HOME_NOTIFICATIONS:"home-sb-notifications",LOGIN_REGISTER_MODAL:"login-register-modal",OFFLINE_CHALLENGE_TOASTER:"offline-challenge-toaster",NAV_ROOT:"sb",SHAREABLE_GAME_URL_MODAL:"shareable-game-url-modal",SHAREABLE_GAME_SHORT_UUID:"shareable-game-short-uuid"},Sw={BADGES:".svelte-badge"},tp=()=>Math.random().toString(36).substring(2,15),$_=e=>{let n=tp();for(;n.length<e;)n+=tp();return n.substring(0,e)},W_=()=>{const e=document.getElementById(ep.NAV_ROOT);return e?!!e.dataset.featureClientRequestId:!1};function q_(e){return W_()&&(e.headers.common["X-Chesscom-Request-Id"]=$_(32)),e}const np=e=>(Object.keys(e).forEach(n=>{const a=e[n];typeof a=="boolean"&&(e[n]=Number(a)),typeof a=="object"&&a!==null&&(e[n]=np(a))}),e);function K_(e){return!e||Qd(e.url)||typeof e.data=="object"&&(e.data=np(e.data)),e}var Z_=[j_,q_,K_];const Y_=oc().create(),X_=[/api\.iterable\.com/];function ma(e){var n;if(X_.some(u=>u.test(e.requestUrl)))return;const a={ip:window.context.ip,error:{message:e.message,method:e.method,requestHost:(n=e.requestHost)!=null?n:window.location.hostname,requestUrl:e.requestUrl,stack:e.stack,status:e.status,type:"HTTP_REQUEST"},user:window.context.user?{countryCode:window.context.user.country.code,id:window.context.user.id,membershipCode:window.context.user.membershipCode,membershipLevel:window.context.user.membershipLevel,timezone:window.context.user.timezone,username:window.context.user.username}:{},userAgent:window.navigator.userAgent};Jd(a)}function Jd(e){window.chesscom.features.includes("client_metrics_error_reporting")&&Y_.post(`${window.chesscom.clientMetricsDomain}/error-reporting/web`,e)}function rp(e){const n=e.config,a=e.response;if(e.toString()==="Cancel")return Promise.reject(e);try{n.data=JSON.parse(n.data)}catch{return Promise.reject(e)}if(a&&a.status===403&&a.headers["x-chesscom-csrf-token"]&&n&&!n.data.retry){const u=a.headers["x-chesscom-csrf-token"];return n.data._token=u,n.data.retry=!0,window.context.csrf.token=u,ac(n)}if(a?.status>=400)try{ma({message:e.message,method:e.config.method,requestUrl:e.config.url.replace("https://www.chess.com"),stack:e.stack,status:e.response.status})}catch{}return Promise.reject(e)}async function lu(){return ir.e(48).then(ir.bind(ir,6048))}async function uu(){try{return!!(await lu()).getCurrentHub().getClient()}catch{return!1}}async function ef(e){if(!await uu())return;(await lu()).configureScope(a=>{Object.keys(e).forEach(u=>{a.setExtra(u,e[u])})})}const el=({key:e,value:n})=>{window.chesscom||(window.chesscom={}),window.chesscom[e]||(window.chesscom[e]=n)},tl=()=>{el({key:"logData",value:{}})},sc=({key:e,value:n})=>{tl(),window.chesscom.logData[e]=n,ef({[e]:n})},Q_=({key:e,value:n})=>{tl();const a=window.chesscom.logData[e]||[];Array.isArray(a)?window.chesscom.logData[e]=[...a,n]:window.chesscom.logData[e]=[a,n]},kw=()=>{tl(),window.chesscom.logData={}};function Bo(e){return e.headers&&e.headers["x-chesscom-request-id-cdn"]&&(sc({key:"x-chesscom-request-id-cdn",value:e.headers["x-chesscom-request-id-cdn"]}),sc({key:"x-chesscom-request-id-lb",value:e.headers["x-chesscom-request-id-lb"]})),e}function cu(e,n){var a;if(!n.name)throw new Error("interceptor must be a named function");return(a=e.handlers)==null?void 0:a.find(u=>{var d;return((d=u.fulfilled)==null?void 0:d.name)===n.name})}function J_(e){Z_.forEach(n=>{cu(e.interceptors.request,n)||e.interceptors.request.use(n)}),cu(e.interceptors.response,Bo)||e.interceptors.response.use(Bo,rp)}J_(ac);var Oa=ac;const ip=(e,n)=>{if(!["chess","chess960"].includes(e.toLowerCase()))return null;const a=n.match(/\/(daily|live)(?:\/game)?\/([0-9]+)/);return a?Router.generate("web_game_get_gif_url",{type:a[1],id:parseInt(a[2],10)}):null},tf=(e,n)=>{Oa.get(e).then(a=>{a.status===202?setTimeout(tf.bind(null,e,n),2e3):a.status===200&&n(e)}).catch(()=>{n(e)})},e3=(e,n)=>{const a=ip(e,n);return http.get(a).then(u=>new Promise(d=>{tf(u.data,d)}))},nf=({tcn:e,flip:n,isChess960:a,initialPosition:u})=>{const d=H.generate("web_game_callback_create_dyn_gif_url"),h={tcn:e,flip:n,isChess960:a,initialSetup:u};return Oa.post(d,h).then(g=>new Promise(_=>{tf(g.data,_)}))},t3=(e=0)=>{const n=Nh.board.substr(1),a=document.getElementsByClassName(n)[e];return a||null},n3=()=>{const e=t3();if(!e)return null;const{childNodes:n}=e;return Array.from(n).find(u=>u.nodeType===1)},Pw=(e,n)=>{const a=e===n,u=reloadRequired.pieces.indexOf(e)>-1||reloadRequired.pieces.indexOf(n)>-1;return!a&&u},Cw=e=>{const n=document.querySelector(domClasses.board);n&&typeof e=="number"&&(n.style.width=`${e}px`)},Tw=()=>{const e=document.querySelector(domClasses.resize);e&&(e.style.visibility="visible")},Mw=(e=0)=>{const n=document.querySelector(domSelectors.COORDINATE_FILE);if(!n)return e;const{height:a}=n.getBoundingClientRect();return a},to={animationType:"web_user_game_settings_email_callback_animation_type",boardStyle:"web_user_game_settings_email_callback_board_color",coordinates:"web_user_game_settings_email_callback_coordinates",darkMode:"web_user_game_settings_callback_dark_mode_toggle",highlightLegalMoves:"web_user_game_settings_email_callback_show_legal_moves_toggle",highlightMoves:"web_user_game_settings_email_callback_highlight_last_move_toggle",isWhiteOnBottom:"web_user_game_settings_email_callback_is_white_on_bottom_toggle",moveListDisplayType:"web_user_game_settings_email_callback_move_list_display_type",moveMethod:"web_user_game_settings_email_callback_move_method",pieceStyle:"web_user_game_settings_email_callback_piece",playSounds:"web_user_game_settings_email_callback_sound_toggle",showTimestamps:"web_user_game_settings_email_callback_show_timestamps",soundTheme:"web_user_game_settings_email_callback_sound_theme"},du={getOptions:"web_user_callback_get_board_settings",getStyles:"web_themes_data_callback",updateOption:to},Ow=.3,Wi=525,xa={pieces:["real3d"],animations:["arcade","natural"]};function op(e){return!e||e==="default"?"medium":e}function rf(e){return!e||e==="medium"||e==="battle"?"default":e}function r3(e){switch(e){case"drag_only":return"drag-only";case"click":return"click";case"drag":default:return"drag"}}function i3(e){switch(e){case"click":return"click";case"drag-only":return"drag_only";case"drag":default:return"drag"}}const o3=["boardStyle","pieceStyle","soundTheme"],a3=e=>Object.entries(e).reduce((n,[a,u])=>{if(o3.includes(a))return n;const[d,h]=s3(a,u);return n[d]=h,n},{}),s3=(e,n)=>{const a=l3(e);return[a,u3(a,n)]},l3=e=>{switch(e){case"animationType":return"board.animation_type";case"coordinates":return"board.coordinates";case"highlightLegalMoves":return"board.show_legal_moves";case"highlightMoves":return"board.highlight_moves";case"isWhiteOnBottom":return"board.white_always_on_bottom";case"moveListDisplayType":return"board.move_list_style";case"moveMethod":return"board.move_method";case"playSounds":return"board.play_sounds";case"showTimestamps":return"gameplay.show_timestamps";default:return e}},u3=(e,n)=>{switch(e){case"board.animation_type":return op(n);case"board.move_method":return i3(n);case"board.coordinates":return["off","inside","outside"].includes(n)?n:["off","inside","outside"][n];default:return n}},c3={CONNECT:"connect",DISCONNECT:"disconnect",FAILURE:"failure",MESSAGE:"message",RECONNECT:"reconnect",SUBSCRIBE:"subscribe",SUBSCRIBE_FAIL:"subscribe_fail",UNSUBSCRIBE:"unsubscribe",ERROR:"error"};var nl=(e=>(e.Base="base",e.Chat="chat",e.Classroom="classroom",e.Matcher="matcher",e.Play="play",e.Presence="presence",e.Ratings="ratings",e.Insights="insights",e.TopPlayers="topplayers",e.Users="users",e.Invitations="invitations",e.Settings="settings",e.GameList="gamelist",e))(nl||{}),ap=(e=>(e.Classroom="classroom",e.Game="game",e.Disable="disable",e.Messages="messages",e.Mute="mute",e.Unmute="unmute",e.User="user",e))(ap||{}),d3=(e=>(e.Users="users",e))(d3||{}),xw=(e=>(e.Accept="accept",e.Cancel="cancel",e.Challenges="challenges",e.Decline="reject",e.Games="games",e.Seeks="seeks",e))(xw||{}),sp=(e=>(e.Actions="actions",e.Games="games",e.Moves="moves",e))(sp||{}),f3=(e=>(e.Alias="alias",e.Arrows="arrows",e.AudioSettings="audio-settings",e.AutoSave="auto-save",e.Boards="boards",e.ChatSettings="chat-settings",e.Clock="clock",e.CollectionIds="collection-ids",e.Commands="commands",e.Confirmations="confirmations",e.Current="current",e.Enrollment="enrollment",e.EvaluationSettings="evaluation-settings",e.Flipped="flipped",e.GameId="game-id",e.Images="images",e.Invitees="invitees",e.LargeClassroom="large-classroom",e.Moves="moves",e.Notifications="notifications",e.PinnedVideos="pinned-videos",e.Players="players",e.Position="position",e.Publish="publish",e.SelectedCollectionId="selected-collection-id",e.Sequence="sequence",e.Sessions="sessions",e.Squares="squares",e.Stopwatch="stopwatch",e.Timer="timer",e.Title="title",e.Twilio="twilio",e.Users="users",e.Webrtc="webrtc",e))(f3||{}),h3=(e=>(e.Users="users",e))(h3||{}),of=(e=>(e.Users="users",e))(of||{});const lp=window.PubSub;async function p3(e){const{data:n}=await lp.fetch({method:"get",path:"users/me",service:nl.Settings,params:{include:e.join(",")}});return n}const af=["off","inside","outside"];function m3(e){const n=Number.parseInt(e,10);return Number.isInteger(n)?af[n]:e}const up={BOARD_POPOVER:"v-board-popover",CONFIRM_POPOVER:"v-confirm-popover",TOOLTIP:"v-tooltip",USER_POPOVER:"v-user-popover"};var cp,dp;const Ss={ARIA_CONTROLS:"aria-controls",ARIA_LABEL:"aria-label",ARIA_SELECTED:"aria-selected",AVATAR:"data-avatar",ALIGN_DROPDOWN:"data-align-dropdown",BORDER_TOP:"data-border-top",BORDER_TOP_WIDE:"data-border-top-wide",BUTTON_TEXT:"data-button-text",CATEGORIES:"data-categories",CONTROL_LABEL_TEXT:"data-control-label-text",CUSTOM_BTN_CLASS:"data-custom-btn-class",CUSTOM_COLLAPSE_CLASS:"data-custom-collapse-class",DARK_MODE:"data-dark-mode",HIDDEN:"hidden",ICON_BUTTON:"data-icon-button",NEXT_LESSON_HINT:"data-next-lesson-hint",OPTIONS:"data-options",SHOW_ICON:"data-show-icon",SELECTED_LANGUAGES:"data-selected-languages",SELECTED_PAGE:"data-selected-page",SELECTED_VALUE:"data-selected-value",SLOTS:"data-stats-slots",SRC:"src",STATS:"data-stats",SURVEY_DATA:"data-survey",SURVEY_VOTED:"data-voted-survey",TAB_URL_PARAM:"data-tab-url-param",TYPE:"data-type",USERNAME:"data-username",USER_LANGUAGE:"data-user-language",VALUE:"data-value",VS_STATS:"data-vs-stats"},fp={getArticleAuthors:"web_article_callback_list_authors",lockUnlockComments:{article:"web_article_callback_lock_coments",blog:"web_blog_callback_lock_coments",news:"web_news_callback_lock_coments",video:"web_video_callback_lock_coments"},setArticleFeature:"web_content_callback_feature_article",setBlogFeature:"web_content_callback_feature_blog",setLessonsFeature:"web_content_callback_feature_lesson_course",setNewsFeature:"web_content_callback_feature_news",setVideoFeature:"web_content_callback_feature_chess_video"},hp={BLOG:"blog",CSRF_TOKEN:(dp=(cp=window.context)==null?void 0:cp.csrf)==null?void 0:dp.token,DARK_MODE:"dark-mode",DEFAULT_LOCALE:"en_US",LESSONS:"lessons",NEWS:"news",VIDEO:"video",GRID_VIEW:"grid",LIST_VIEW:"list",LOCALE:window.context&&window.context.locale||"en_US",LOGGED_IN:window.context&&window.context.user,PUZZLES_COUNT:500,TIME:{hour:36e5},USERNAME:window.context&&window.context.user?window.context.user.username:null,USER_COLOR_SCHEME:"COLOR_SCHEME"},Iw={CHESS_960:"chess960"},rl={category:e=>ie.trans(e,{},"dynamic"),commentsSynced:ie.trans("Comment count will be recalculated in few moments"),daysOfWeek:[ie.trans("Sunday"),ie.trans("Monday"),ie.trans("Tuesday"),ie.trans("Wednesday"),ie.trans("Thursday"),ie.trans("Friday"),ie.trans("Saturday")],loading:ie.trans("Loading..."),months:[ie.trans("January"),ie.trans("February"),ie.trans("March"),ie.trans("April"),ie.trans("May"),ie.trans("June"),ie.trans("July"),ie.trans("August"),ie.trans("September"),ie.trans("October"),ie.trans("November"),ie.trans("December")],monthsAbbreviated:[ie.trans("Jan"),ie.trans("Feb"),ie.trans("Mar"),ie.trans("Apr"),ie.trans("May"),ie.trans("Jun"),ie.trans("Jul"),ie.trans("Aug"),ie.trans("Sep"),ie.trans("Oct"),ie.trans("Nov"),ie.trans("Dec")],noResult:ie.trans("No results found."),pleaseEnter:e=>ie.trans("Please enter %number% or more characters",{"%number%":e}),showMore:ie.trans("More"),showLess:ie.trans("Less"),lessonsHintMessage:ie.trans("Let me help you learn everything you need to know with this guide."),nextLessonHintMessage:ie.trans("Your next lesson is ready. Study daily if you really want to improve!"),openingsHintMessage:ie.trans("Let me help you improve your openings!")},v3={AMPLITUDE_LOGGER:"amplitude-logger",AMPLITUDE_LOG_SELECTION:"[data-log-selection-to-amplitude]",BOARD_POPOVER:up.BOARD_POPOVER,CAPTCHA:"captcha",COLLAPSE:"v-toggle-collapse",COLLAPSED:"toggle-collapsed",CONTENT_AD:"content-ad",CONTENT_CATEGORY_SELECT:"content-category-select",CONTENT_LANGUAGE_SELECT:"content-language-select",CONFIRM_OPEN:"confirm-open",CONFIRM_POPOVER:"v-confirm-popover",CONFIRM_POPOVER_INLINE:"confirm-popover-inline",DELETE_CONTENT:"post-category-link-delete",DELETE_SPAM_CONTENT:"post-category-link-delete-spam",DONATE_MODAL:"donate-modal",FEATURE_SIDEBAR_LINK:"post-category-link-feature",FILTERS:"page-filters",FOLLOW_UNFOLLOW_AUTHOR:"follow-unfollow-author",FORM_DATEPICKER:"v-datepicker",FORM_DROPDOWN:"form-dropdown",GAME_PREVIEW:"game-preview",GIFT_MEMBERSHIP_BUTTON:"give-gift-membership",GIFT_MEMBERSHIP_MODAL:"gift-membership-modal",HEADLINE_SIDEBAR_LINK:"post-category-link-headline",HIDDEN:"toggle-hidden",HINT_WRAPPER:"hint-wrapper",LANGUAGE_DROPDOWN:"post-view-languages",LOCK_UNLOCK_CONTENT:"lock-unlock-content",MESSAGE_PARENT:"vue-message",NAVIGATION_FOOTER:"navigation-footer",NEW_GAME:"new-game",PAGINATION_BOTTOM:"pagination-bottom",PAGINATION_BUTTON:"ui_pagination-item-component",PAGINATION_TOP:"pagination-top",PAGINATION_SCROLL_TOP:".pagination-scroll-to-top",POST_AUTHOR_FOLLOW:"post-author-follow",POST_CAN_EDIT_URL:"post-can-edit-url",POST_EDIT_URL:"post-edit-url",POST_EDIT_URL_FIELD:"post-edit-url-field",POST_IMAGE_BUTTON:"image-upload-button",POST_IMAGE_THUMBNAIL:"image-upload-thumbnail",PUBLISH_CONTENT:"post-category-link-publish",SCROLL_TOP_ANCHOR:"scroll-top-anchor",SHORT_SIDEBAR_AD_BOTTOM:"short-sidebar-ad-bottom",SHORT_SIDEBAR_AD_TOP:"short-sidebar-ad-top",SIDEBAR_STATS:"sidebar-stats",SIDEBAR_SURVEY:"sidebar-survey",SIDEBAR_TOGGLE_BUTTON_TEXT:"toggle-content-button-text",SIDEBAR_TOGGLE_ICON:"toggle-content-icon",SIDEBAR_USER_ITEMS:"sidebar-users-grid-toggle-item",SIDEBAR_USERS_TOGGLE_BUTTON:"toggle-content-button",STAT_CHART:"stat-chart",TABS_BUTTON:"v5-tabs-button",TABS_PANEL:"v5-tabs-panel",TABS_WRAPPER:"v5-tabs-wrapper",TIMEZONES:"page-timezones",TOOLTIP:up.TOOLTIP,TOOLTIP_CLASS:"tooltip",TOOLTIP_TOP:"top",UPGRADE_ACCORDION:"upgrade-accordion",USER_LEAGUE:"user-league",USER_TAGLINE:"post-view-meta-user",VERSION_DROPDOWN:"version-dropdown"},pp={CONFIRM_POPOVER_YES:"confirm-popover-yes",SHOW_MODAL:"show-confirm-popover",VOTE_COUNTED:"vote-counted",VIEW_CHANGE:"view-change",VIEW_GRID:"view-grid",VIEW_LIST:"view-list"},g3={changeContentLanguage:()=>H.generate("web_user_callback_set_content_language"),enPassant:()=>H.generate("web_article_view",{url:"how-to-capture-en-passant"}),inviteLink:(e,n,a)=>H.generate(e,{url:n,secret:a}),lockUnlockComments:(e,n)=>H.generate(fp.lockUnlockComments[e],{id:n}),loginPage:H.generate("web_security_login_and_go"),redirectToLoginPage:e=>H.generate("web_security_login_and_go",{redirectUrl:e}),surveyVote:(e,n)=>H.generate("web_survey_callback_vote",{id:e,optionId:n}),teamMatch:e=>H.generate("web_team_match_view",{match:e}),tournament:e=>H.generate("web_tournament_view",{url:e}),userProfile:e=>H.generate("web_member_view",{username:e})},sa={LESSONS_ADMIN_SECTION_STATE:"lessons_admin_section_state",LESSONS_SECTION_STATE:"lessons_section_state"},Rw={OPENINGS_HINT_STATE:"openings_hint_state",LESSONS_HINT_STATE:"lessons_hint_state"},_3=90;function sf(e,n,a){let u="";if(a){const d=new Date;d.setTime(d.getTime()+Math.min(_3,a)*24*60*60*1e3),u=`; expires=${d.toUTCString()}`}document.cookie=`${e}=${n||""}${u}; path=/; samesite=none; secure`}function lc(e){sf(e,"",-3650)}function mp(e){const n={};return document.cookie.split("; ").forEach(a=>{const[u,d]=a.split("=");u&&d&&(n[u]=d)}),n[e]||null}var Nw={getCookie:mp,deleteCookie:lc,setCookie:sf};const ks="dark-mode",lf=()=>document.body.classList.contains(ks),b3=lf(),uf=e=>e?document.body.classList.add(ks):document.body.classList.remove(ks),Lw=e=>e?setCookie(constants.USER_COLOR_SCHEME,ks,30):setCookie(constants.USER_COLOR_SCHEME,"",30),cf=e=>{const a=window.tinymce;a?.editors.forEach(({id:u})=>{e?(a.get(u).settings.body_class=ks,a.get(u).getBody().classList.add(ks)):(a.get(u).settings.body_class="",a.get(u).getBody().classList.remove(ks))})},Bw=e=>{const n=document.querySelectorAll("[data-tweet-id]"),a=e?"theme=light":"theme=dark",u=e?"theme=dark":"theme=light";n.forEach(d=>{const h=d.getAttribute(attributes.SRC);d.setAttribute(attributes.SRC,h?h.replace(a,u):"")})},uc={},cc={};async function y3(e){var n;const u=await Oa.get(H.generate(e));return uc[e]=u,(n=cc[e])==null||n.forEach(d=>d(uc[e])),u}function Dw(e,n){cc[e]=cc[e]||[],cc[e].push(n),uc[e]&&n(uc[e])}async function w3(){const e=lf();if(window.chesscom.features.includes("settings_service_read")){const Q=await p3(["board.animation_type","board.coordinates","board.show_legal_moves","board.highlight_moves","board.white_always_on_bottom","board.move_list_style","board.move_method","board.play_sounds","gameplay.show_timestamps"]);return{animationType:rf(Q["board.animation_type"]),boardSize:"auto",coordinates:Q["board.coordinates"],darkMode:e,highlightLegalMoves:Q["board.show_legal_moves"],highlightMoves:Q["board.highlight_moves"],isWhiteOnBottom:Q["board.white_always_on_bottom"],moveListDisplayType:Q["board.move_list_style"],moveMethod:r3(Q["board.move_method"]),playSounds:Q["board.play_sounds"],showTimestamps:Q["gameplay.show_timestamps"]}}const{data:n}=await y3("web_user_callback_get_board_settings"),{animationType:a,boardCoords:u,boardSize:d,colorScheme:h,highlightLegalMoves:g,highlightMoves:_,isWhiteOnBottom:b,moveListDisplayType:A,moveMethod:T,pieceStyle:I,playSounds:F,soundTheme:U,showTimestamps:z}=n;return{animationType:rf(a),boardSize:d,boardStyle:h,coordinates:m3(u),darkMode:e,highlightLegalMoves:g==="1",highlightMoves:_==="1",isWhiteOnBottom:b,moveListDisplayType:A,moveMethod:T,pieceStyle:I,playSounds:F==="1",soundTheme:U,showTimestamps:!!z}}const E3=(e,n)=>[e,A3(e,n)],A3=(e,n)=>{switch(e){case"coordinates":return fu(n);default:return n}},fu=e=>["off","inside","outside"].includes(e)?["off","inside","outside"].indexOf(e):e;async function S3(e,n){if(!to[e])throw new Error(`${e} is not a valid board option`);const[a,u]=E3(e,n);await Oa.post(H.generate(to[a]),{action:u})}async function k3(e){window.chesscom.features.includes("settings_service_data_sync")&&Object.keys(e).length>0&&await lp.publish({method:"post",service:nl.Settings,path:"users/me",data:e})}var il={getDefaultOptions:()=>({allowMarkings:!0,animationType:mn.B.Animation.Types.Default,autoPromote:!1,boardStyle:"green",captureKeyStrokes:!0,coordinates:mn.B.CoordinatesPositions.Inside,darkMode:b3,diagramStyle:!0,enabled:!0,highlightColor:"#f8f893",highlightLegalMoves:!1,highlightMoves:!0,highlightOpacity:.5,isWhiteOnBottom:!1,legalPositionCheck:"full",moveMethod:mn.B.MoveMethods.Drag,overlayInAnalysisMode:!0,pieceStyle:"neo",playSounds:!0,premoveHighlightColor:"#f42a32",premoveHighlightOpacity:.5,real3D:!1,rounded:!0,soundTheme:"default",showTimestamps:!1}),getOptions:()=>w3(),getStyles:()=>oc().get(H.generate(du.getStyles)).then(e=>e.data),updateOption:(e,n)=>(window.chesscom.features.includes("settings_service_data_sync")&&k3(a3({[e]:n})),S3(e,n))};function P3(e,n,a,u){const d=`$unbind${e}`;n[d]&&n[d](),Object.keys(a).forEach(h=>{n.addEventListener(h,a[h],u)}),n[d]=()=>{Object.keys(a).forEach(h=>{n.removeEventListener(h,a[h]),delete a[h]}),delete n[d]}}const df=window.AudioContext||window.webkitAudioContext;let ff=!!df;function C3(){try{return new df}catch{return null}}function hu(){return ff}function T3(e){if(df){if(window.chessComAudioContext||(window.chessComAudioContext=C3()),!window.chessComAudioContext||!window.chessComAudioContext.resume){ff=!1,e();return}window.chessComAudioContext.resume().then(()=>{ff=!1,e()})}}const M3=3,hf={SOUND_SUSPENDED:"sound-suspended",SOUND_ENABLED:"sound-enabled"},pf=["webm","ogg","mp3","wav"],O3="default",mf="//images.chesscomfiles.com/chess-themes/sounds",vp=["move-check","premove","capture","castle","game-end","game-start","promote","move-opponent","move-self"],x3=vp.concat(["click","correct","drawoffer","illegal","incorrect","notify","tenseconds"]);function gp(e,n,a=O3){return`${mf}/_${n.toUpperCase()}_/${a}/${e}.${n}`}function _p(e,n){return vp.includes(e)?pf.map(a=>gp(e,a,n)):x3.includes(e)?pf.map(a=>gp(e,a)):[`/bundles/web/sounds/${e}.mp3`]}var va=Object.defineProperty,I3=(e,n,a)=>n in e?va(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,vf=(e,n,a)=>(I3(e,typeof n!="symbol"?n+"":n,a),a);class bp{constructor(n,a){vf(this,"code"),vf(this,"theme"),vf(this,"tags"),this.code=n,this.theme=a,this.tags=[]}load(){this.unload(),this.addTag()}addTag(){const n=document.createElement("audio");n.setAttribute("preload","auto"),_p(this.code,this.theme).forEach(a=>{const u=a.split(".").pop(),d=u==="mp3"?"audio/mpeg":`audio/${u}`,h=document.createElement("source");h.setAttribute("src",a),h.setAttribute("type",d),n.appendChild(h)}),document.body.appendChild(n),n.pause&&n.pause(),this.tags.push(n)}unload(){for(;this.tags.length;){const n=this.tags.shift();n?.parentNode&&n.parentNode.removeChild(n)}}play(){const n=this.tags.find(u=>u.paused||u.ended);if(!n){if(this.tags.length>=5)return;this.addTag(),this.play();return}const a=n.play();a&&a.catch(()=>{})}}function gf(e){window.postMessage(e,window.location.origin)}let dc=0,fc=!1;function pu(){hu()&&T3(()=>{dc=0,fc=!1,gf({key:hf.SOUND_ENABLED}),window.$unbindSound&&window.$unbindSound()})}function yp(e){const n=a=>{a&&a.data&&a.data.key===hf.SOUND_ENABLED&&(e(),window.removeEventListener("message",n))};window.addEventListener("message",n)}function R3(){window.$unbindSound||P3("Sound",window,{mousedown:pu,keydown:pu,touchstart:pu,touchend:pu})}function qa(e,n){const a=new bp(e,n);return hu()?(R3(),yp(()=>a.load())):a.load(),a}function N3(e){e.unload()}function L3(e){hu()?!fc&&dc>M3?(dc=0,fc=!0,gf({key:hf.SOUND_SUSPENDED})):fc||(dc++,pu(),yp(()=>e.play())):e.play()}var B3=Object.defineProperty,D3=(e,n,a)=>n in e?B3(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,F3=(e,n,a)=>(D3(e,typeof n!="symbol"?n+"":n,a),a);const z3=["game-start","game-end","capture","castle","premove","move-self","move-check","move-opponent","promote","notify","tenseconds","illegal"];class U3{constructor(n,a){F3(this,"sounds"),this.sounds={},this.load(n,a)}load(n,a){let u=a;a||(u=z3),u.forEach(d=>{this.sounds[d]=qa(d,n)})}play(n){L3(this.sounds[n])}removeAll(){Object.values(this.sounds).forEach(N3),this.sounds={}}}var wp=ir(4279),ol=ir.n(wp),_f=new(ol());function H3(e){return e!==void 0}function G3(e){return q3(e)&&Object.keys(e).length===0}function bf(e){return e===null}function V3(e){return e===void 0}function al(e){return!bf(e)&&typeof e=="object"}function j3(e){return typeof e=="string"}function yf(e){return typeof e=="function"}function $3(e){return typeof e=="number"&&!isNaN(e)}function Fw(e){return bf(e)||V3(e)}function zw(e){return Array.isArray(e)}function W3(e){if(!al(e))return!1;const n=Object.prototype.toString.call(e);return n==="[object Error]"||n==="[object DOMException]"}function q3(e){return al(e)?e.constructor&&e.constructor.name==="Object":!1}function Ap(e){return typeof e=="boolean"}function K3(e,n,a){const u=e.classList,d=u.contains(n),h=Ap(a)?a:!d;h!==d&&(h?u.add(n):u.remove(n))}function wf(e,n){K3(document.body,e,n)}function Z3(e,n){if(!e)return!1;const a=e.match(/Chrom(e|ium)\/([0-9]+)\./);return a?parseInt(a[2],10)===n:!1}const Ps={KOMODO:"KOMODO",STOCKFISH:"STOCKFISH",STOCKFISH_NNUE:"STOCKFISH (NNUE)",OFF:"OFF"},hc=X3(),Sp={[Ps.STOCKFISH]:{...hc},[Ps.STOCKFISH_NNUE]:{...hc,name:window.chesscom.features.includes("stockfish_15_1")?"Stockfish 15.1 NNUE":"Stockfish 15 NNUE",description:x("stronger, %filesize%",{"%filesize%":"45MB"}),paths:{...hc.paths,settings:{EvalFile:window.Config.threadedEnginePaths.stockfish.multiThreaded.nnue,Threads:(navigator.hardwareConcurrency/2).toString(),"Use NNUE":"true"}},multithreadingRequired:!0},[Ps.KOMODO]:{name:"Komodo",paths:{pathToEngineWorker:window.Config.pathToExplanationEngineWorker,pathToWasmEngine:window.Config.pathToWasmExplanationEngine,pathToNonWasmEngine:window.Config.pathToNonWasmKomodo}},[Ps.OFF]:{label:x("Engine Off"),name:"Engine Off"}},Uw={name:"Komodo Threats",paths:{pathToEngineWorker:window.Config.pathToExplanationEngineWorker,pathToWasmEngine:window.Config.pathToWasmExplanationEngine}},kp={LATEST:{value:"latest",label:"Stockfish 10"},SF12:{value:"stockfish12",label:"Stockfish 12 (NNUE)"}},Pp=Ps.STOCKFISH;function Hw(e){return Sp[e??Pp]}function Gw(){const e={...Sp};return Object.entries(e).filter(Cp).map(([n,a])=>{var u;return{value:n,label:(u=a.label)!=null?u:a.description?`${a.name} (${a.description})`:a.name}})}function Cp([e,n]){return!!(!n.multithreadingRequired||loadEngine.supportsMultithreading())}function Y3(){var e;if(!window.chesscom.features.includes("use_fake_worker_stockfish"))return!1;const n=window.Config.threadedEnginePaths.stockfish.fakeWorkerBrowserVersions;if(!n)return!1;for(let a=0;a<n.length;a++){const u=n[a];if(u.browser==="chrome"&&Z3((e=window.navigator)==null?void 0:e.userAgent,u.version))return!0}return!1}function X3(){const{stockfish:e}=window.Config.threadedEnginePaths,n=e.fakeWorker&&Y3(),a=window.chesscom.features.includes("stockfish_15_1")?"Stockfish 15.1":"Stockfish 15";return{name:Ft().supportsMultithreading()?a:"Stockfish 11",description:Ft().supportsMultithreading()?x("faster"):"",paths:{engines:{multiThreaded:{loader:n?e.fakeWorker.loader:e.multiThreaded.loader,engine:n?e.fakeWorker.engine:e.multiThreaded.engine},singleThreaded:{loader:e.singleThreaded.loader,engine:e.singleThreaded.engine},asm:e.asm},useFakeWorker:n?{[e.fakeWorker.loader]:!0}:{},pathToBook:window.Config.pathToBookSmall}}}const Ef={komodo:14,stockfish:14},pc="analysis_engine_settings";function Q3(){const e=[];return{emit:n,listeners:e,off:a,offAll:u,offMany:d,on:h,onAll:g,onMany:_,once:b};function n(A,T){let I;for(I of e)I.type!==A&&I.type!=="all"||I.handler(T)}function a(A){const T=e.findIndex(I=>A.type===I.type&&A.handler===I.handler);T!==-1&&e.splice(T,1)}function u(A){return a({handler:A,type:"all"})}function d(A=[]){A.forEach(T=>a(T))}function h(A,T){const I={handler:T,type:A};e.push(I)}function g(A){h("all",A)}function _(A=[],T){A.forEach(I=>h(I,T))}function b(A,T){const I={handler:(...F)=>{a(I),T(...F)},type:A};e.push(I)}}const J3=Q3();var Tp,Mp;const Ka={depth:20,timeLimit:10,linesCount:3,engineName:Pp,isWdlBarSupported:!1,hasChosenWdlBar:!1,wdlBarEnabled:!1,tbBarEnabled:!1,complexityModeEnabled:!1,criticalPositionEnabled:!1};Object.assign(Ka,eb(),{isWdlBarSupported:(Mp=(Tp=window.chesscom)==null?void 0:Tp.features)==null?void 0:Mp.includes("analysis_eval_bar_modes")});function eb(){try{return JSON.parse(window.localStorage.getItem(pc)||"")}catch{return{}}}function tb(e){Object.keys(e).some(a=>e[a]!==Ka[a])&&(Object.assign(Ka,e),window.localStorage.setItem(pc,JSON.stringify(Ka)),J3.emit("evaluation.settings-update"))}function Vw(){return Ka}function jw(){return Ka.engineName===Ps.KOMODO?50:200}function nb(){return Ka.engineName===Ps.KOMODO?Ef.komodo:Ef.stockfish}const mc=()=>Ka.isWdlBarSupported;let sl;var Af={async loadOptions({commit:e,dispatch:n},a=!1){sl||(sl=il.getOptions());try{const u={...await sl,fetched:!0};if(a&&u.pieceStyle==="real3d"&&(u.pieceStyle=il.getDefaultOptions().pieceStyle),u.pieceStyle==="real3d"&&xa.animations.indexOf(u.animationType)>=0){const d=il.getDefaultOptions().animationType;n("updateOption",{option:"animationType",value:d}),u.animationType=d}e("setOptions",u),sl=null}catch{Xs({type:Es.error,message:iu.badRequest}),sl=null}},loadStyles({commit:e}){return il.getStyles().then(n=>e("setStyles",n)).catch(()=>Xs({type:Es.error,message:iu.badRequest}))},playSound({state:e},n){const a=new U3(e.boardOptions.soundTheme);return e.boardOptions.playSounds&&a.play(n),a},updateBoardEffect({dispatch:e,rootState:n},{classification:a,node:u={},square:d=null,persist:h=!1,gameStore:g="game"}){if(n[g].isNewBoard){if(!u)return;const A={square:u.to,type:a.type};e(`${g||"game"}/markEffect`,{effect:A,persist:h},{root:!0});return}const{icon:_}=a||{},b=H_({icon:_,node:u,square:d});e(`${g||"game"}/markEffect`,{effect:b,persist:h},{root:!0})},updateOption({commit:e,rootState:n},{option:a,value:u,save:d=!0}){a==="highlightMoves"&&e("setOption",{option:"highlightMovesUI",value:u}),a==="darkMode"&&(_f.emit(ou.DARK_MODE_CHANGE,u),wf("dark-mode",u)),a==="evaluationBarType"&&tb({hasChosenWdlBar:!!u});let h=a;if(a==="colorScheme"&&(h="boardStyle"),e("setOption",{option:h,value:u}),n.user&&n.user.isLoggedIn&&du.updateOption[a]&&d)return il.updateOption(a,u).catch(()=>Xs({type:Es.error,message:iu.badRequest}))},flipBoard({commit:e,state:n}){e("setOption",{option:"flipBoard",value:!n.boardOptions.flipBoard})}};const Op=(e=window.navigator.userAgent)=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),Za=()=>encodeURIComponent(window.document.title),Ya=()=>encodeURIComponent(window.location.href),rb=window.location.pathname,Sf=Za(),kf=Ya(),xp=()=>{if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(Sf,kf,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(kf,Sf);else{const e=window.navigator.userAgent.toLowerCase().indexOf("mac")!==-1?"Cmd":"Ctrl";alert(`Press ${e}+D to bookmark this page.`)}},Ia={chrome:"Chrome",edge:"edge",firefox:"Firefox",ie:"IE",safari:"Safari"},Ip={chrome:79,edge:79,firefox:75,ie:Number.POSITIVE_INFINITY,safari:13.1},ib=()=>{window.print()},vc=(e,n)=>{window.location.href=`mailto:?${e}&${n}`},Ra=(e,n)=>n.appVersion.indexOf(e)>-1,ob=(e=window.navigator.userAgent)=>e.match(/Edg/)!==null,$w=(e=window.navigator.userAgent)=>e.match(/Android/)!==null,Ww=(e=window.navigator.userAgent)=>!!["macintosh","iphone","ipad"].find(n=>e.toLowerCase().indexOf(n)>=0),qw=(e=window.navigator.userAgent)=>!!["iphone","ipad"].find(n=>e.toLowerCase().indexOf(n)>=0),Pf=(e=window.navigator.userAgent)=>{let n,a=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(ob(e)){const u=e.indexOf("Edg");let d=4;e.match("Edge/")&&(d=5);const h=u+d;return{name:"Edge",version:parseInt(e.substring(h,e.indexOf(".",h)),10)}}return/trident/i.test(a[1])?(n=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(n[1]||"-1",10)}):a[1]===Ia.chrome&&(n=e.match(/\bOPR\/(\d+)/),n!=null)?{name:"Opera",version:parseInt(n[1],10)}:(a=a[2]?[a[1],a[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],a[0]===Ia.safari&&(n=e.match(/version\/(\d+)/i),n!=null&&a.splice(1,1,n[1])),a[0]==="MSIE"?{name:Ia.ie,version:parseInt(a[1],10)}:{name:a[0],version:parseInt(a[1],10)})},Kw=(e=window.navigator)=>Ra("NT",e)?Ra("Windows NT 5.1",e)||Ra("Windows NT 6.0",e)?6:Ra("Windows NT 6.1",e)?7:Ra("Windows NT 6.2",e)||Ra("Windows NT 6.3",e)?8:10:-1,ab=(e=window.navigator.userAgent)=>{const n=Pf(e);return n.name==null||n.name.length===0?!1:Object.keys(Ia).some(a=>n.name.toLowerCase()===Ia[a].toLowerCase()&&n.version<Ip[a])},Zw=e=>{var n;const a=[Ia.chrome.toLowerCase(),Ia.edge.toLowerCase(),Ia.firefox.toLowerCase(),Ia.safari.toLowerCase()],u=Pf(e);return u.name==null||u.name.length===0||((n=a.indexOf)==null?void 0:n.call(a,u.name.toLowerCase()))===-1?!1:!ab(e)};class sb{static getAnimationType(n){return n==="battle"?"default":n}static getAnimationTypes(n,a){if(!Array.isArray(n))return n;const u=[...n];let d=["battle"];return xa.pieces.indexOf(a)>=0&&(d=d.concat(xa.animations)),d.forEach(h=>{const g=u.findIndex(_=>_.code===h);g>-1&&u.splice(g,1)}),u}static getPieceStyles(n){if(!Array.isArray(n)||Pf().name!=="IE")return n;const a=n.findIndex(u=>u.code==="real3d");return a>-1&&n.splice(a,1),n}static pieceChangeRequiresRefresh(n,a){const u=n===a,d=xa.pieces.indexOf(n)>-1||xa.pieces.indexOf(a)>-1;return!u&&d}static animationChangeRequiresRefresh(n,a){return xa.animations.indexOf(n)>-1||xa.animations.indexOf(a)>-1}static validateSize(n,a,u,d){let h=Math.min(n,a);return h=Math.max(h,u),h=Math.floor(h/d)*d,h=h>=u?h:h+d,h}}var Rp=sb,gc;(e=>{let n;(a=>{a.Ad="with-und",a.Analysis="with-analysis",a.AnalysisCollapsed="with-analysis-collapsed",a.Comments="with-comments",a.DoubleBoard="double-board",a.Evaluation="with-evaluation",a.Pseudo3d="pseudo-3d",a.FocusMode="focus-mode",a.HandPieces="with-pieces",a.HideBoardIcons="hide-board-icons",a.MobileBoardHidden="mobile-board-hidden",a.OutsideCoords="outside-coords",a.Players="with-players",a.Real3d="real-3d",a.Tabs="with-tabs",a.TheatreMode="theatre-mode",a.Videos="with-videos"})(n=e.BodyClass||(e.BodyClass={}))})(gc||(gc={}));function Cf(e){wf(gc.BodyClass.Pseudo3d,e)}var lb={setOption(e,{option:n,value:a}){e.boardOptions[n]=a},setOptions(e,n){var a;let u=n.animationType||e.boardOptions.animationType;xa.pieces.indexOf(n.pieceStyle)>=0&&xa.animations.indexOf(n.animationType)>=0&&(u="default");const d=(a=n.pieceStyle)==null?void 0:a.startsWith("3d");Ap(d)&&Cf(d),e.boardOptions=Object.assign(e.boardOptions,n,{animationType:u})},setStyle(e,{style:n,value:a}){e.styles[n]=a},setSettings(e,n){e.settings=Object.assign({},e.settings,n)},setStyles(e,n){const a=Rp.getAnimationTypes(n.animationTypes),u=Rp.getPieceStyles(n.pieceStyles);e.styles=Object.assign(e.styles,n,{animationTypes:a},{pieceStyles:u})},setDebugMode(e,n){e.debugMode=n}},ub=()=>window.location.href.indexOf(H.generate("web_2fa_login"))!==-1;function Tf(){var e;return!!((e=window.context)!=null&&e.user&&!ub())}const ni={guest:0,cheater:5,abuser:6,voluntarilyClosed:7,unspecifiedClosed:8,basic:10,silver:20,gold:30,platinum:40,diamond:50,moderator:80,staff:90},Yw={CAN_EDIT_FLAIR:"data-can-edit-flair",IS_ENABLED:"data-is-enabled",MEMBERSHIP_LEVEL:"data-membership-level",USERNAME:"data-username",USER_ID:"data-user-id"},Xw={REPORT_USER:"web_user_callback_report_user",REPORT_TV_USER:"web_tv_callback_report",USER_POPUP:"web_user_callback_popup"},Qw="membership_icons",Jw=[{key:"membership_icons",title:ie.trans("Membership Icons")},{key:"emoji",title:ie.trans("Emoji")},{key:"chess",title:ie.trans("Chess")},{key:"holiday",title:ie.trans("Holiday")},{key:"hosts",title:ie.trans("Hosts")},{key:"computer_chess",title:ie.trans("Computer Chess")},{key:"pro_chess_league",title:ie.trans("PRO Chess League")}],e8={category:"membership_icons",code:"nothing",description:ie.trans("Nothing"),id:206,imageCode:"nothing",membershipLevelCode:"staff",name:ie.trans("Nothing"),status:""},t8="diamond_traditional",n8=["blocked","clear","clear_light"],r8=500,i8=200,cb={USER_FLAIR:"user-flair",USER_SEARCH:"user-search",USER_POPOVER_CONTAINER:"user-popover"},o8={about:()=>H.generate("web_about"),membership:(e="icon")=>H.generate("web_membership",{c:e}),usernameSearch:e=>H.generate("web_user_callback_username_search",{activeDays:4e3,...e}),userDivision:({league:e,division:n})=>H.generate("web_league_division",{league:e,division:n}),userProfile:e=>H.generate("web_member_view",{username:e})},a8={acceptFriendRequest:ie.trans("Accept Friend Request"),addFriend:ie.trans("Add Friend"),block:ie.trans("Block"),blockConfirm:ie.trans("Are you sure you want to block this user?"),blockUser:e=>ie.trans("Block %username%?",{"%username%":e}),cancel:ie.trans("Cancel"),cancelFriendRequest:ie.trans("Cancel Friend Request"),challenge:ie.trans("Challenge"),follow:ie.trans("Follow"),gameArchive:ie.trans("Game Archive"),giftMembership:ie.trans("Gift Membership"),giveTrophy:ie.trans("Give Award"),joinedDate:e=>ie.trans("Joined %1$s%",{"%1$s%":e}),lastOnline:e=>ie.trans("Online %1$s%",{"%1$s%":e}),moderator:ie.trans("Moderator"),onlineNow:ie.trans("Online Now"),inLiveNow:ie.trans("In Live"),removeFriend:ie.trans("Remove Friend"),removeFriendConfirm:ie.trans("Are you sure you want to remove this friend from your list?"),report:ie.trans("Report"),reportUser:e=>ie.trans("Report %username%",{"%username%":e}),sendMessage:ie.trans("Send Message"),showYourFlair:ie.trans("Show your flair!"),staff:ie.trans("Staff"),unblock:ie.trans("Unblock"),unfollow:ie.trans("Unfollow"),userReportError:ie.trans("Tell us more...")},Np=225,s8={[ni.diamond]:"diamond",[ni.abuser]:"abuser",[ni.cheater]:"cheater",[ni.voluntarilyClosed]:"inactive",[ni.unspecifiedClosed]:"cheater",[ni.gold]:"gold",[ni.moderator]:"pawn-blue",[ni.platinum]:"platinum",[ni.staff]:"pawn-green"},l8={[ni.basic]:ie.trans("Basic Membership"),[ni.diamond]:ie.trans("Diamond Membership"),[ni.cheater]:ie.trans("Closed: Fair Play"),[ni.abuser]:ie.trans("Closed: Abuse"),[ni.voluntarilyClosed]:ie.trans("Closed: Inactive"),[ni.unspecifiedClosed]:ie.trans("Account Closed"),[ni.gold]:ie.trans("Gold Membership"),[ni.moderator]:ie.trans("Moderator Account"),[ni.platinum]:ie.trans("Platinum Membership"),[ni.silver]:ie.trans("Silver Membership"),[ni.staff]:ie.trans("Staff Account")},u8={GM:ie.trans("Grandmaster"),WGM:ie.trans("Woman Grandmaster"),IM:ie.trans("International Master"),WIM:ie.trans("Woman International Master"),FM:ie.trans("FIDE Master"),WFM:ie.trans("Woman FIDE Master"),NM:ie.trans("National Master"),CM:ie.trans("FIDE Candidate Master"),WCM:ie.trans("FIDE Woman Candidate Master"),WNM:ie.trans("Woman National Master")},c8=e=>e===!0||e==="online",d8=e=>e==="onlive",f8={AUTOCOMPLETE_CLEAR_SELECTED:"form-autocomplete-clear-selected"},h8={FETCH_ROLES:"fetchRoles"};function p8(){var e,n;return!!((n=(e=window.context)==null?void 0:e.user)!=null&&n.isGuest)}const Nr=window.context,m8=()=>{var e;return!!(isLoggedIn()&&((e=Nr.user)!=null&&e.isEnabled))},db=()=>{var e;return!!(Tf()&&((e=Nr.user)!=null&&e.isImpersonating))},v8=()=>{var e;return(e=Nr.user)==null?void 0:e.isPremium},g8=()=>isLoggedIn()&&!isGuest(),_8=()=>{var e;return!!(isLoggedIn()&&((e=Nr.user)!=null&&e.eligibleFirstTrial))},b8=e=>!!e.chess_title,fb=e=>{if(!Tf())return!1;let n=!1;switch(e){case"isActivated":n=Nr.user.isActivated;break;case"isStaff":n=Nr.user.membershipLevel>=ni.staff;break;case"isStaffOnly":n=Nr.user.membershipLevel===ni.staff;break;case"isModerator":n=Nr.user.membershipLevel>=ni.moderator;break;case"isModeratorOnly":n=Nr.user.membershipLevel===ni.moderator;break;case"isDiamond":n=Nr.user.membershipLevel>=ni.diamond;break;case"isDiamondOnly":n=Nr.user.membershipLevel===ni.diamond;break;case"isPlatinum":n=Nr.user.membershipLevel>=ni.platinum;break;case"isPlatinumOnly":n=Nr.user.membershipLevel===ni.platinum;break;case"isSilver":n=Nr.user.membershipLevel>=ni.silver;break;case"isSilverOnly":n=Nr.user.membershipLevel===ni.silver;break;case"isGold":n=Nr.user.membershipLevel>=ni.gold;break;case"isGoldOnly":n=Nr.user.membershipLevel===ni.gold;break;case"isPremium":n=Nr.user.membershipLevel>=ni.silver;break;case"isBasic":n=Nr.user.membershipLevel===ni.basic;break;case"isNewlyRegistered":n=Nr.user.isNewlyRegistered;break;case"isGuest":n=Nr.user.isGuest;break;case"chessTitle":n=Nr.user.chessTitle;break;default:n=!1;break}return n},y8=e=>{var n,a,u,d,h,g,_,b,A,T,I,F,U,z,Q,te,Pe,Ce,He;let it=!1;if(!isLoggedIn()){switch(e){case"diagramSettings":it={};break;case"isDarkMode":it=getIsDarkMode();break;default:it=null;break}return it}switch(e){case"cohort":it=(n=Nr.user)==null?void 0:n.cohort;break;case"country":it=(a=Nr.user)==null?void 0:a.country;break;case"flairCode":it=(u=Nr.user)==null?void 0:u.flairCode;break;case"getUserId":it=(d=Nr.user)==null?void 0:d.id;break;case"getUsername":it=(h=Nr.user)==null?void 0:h.username;break;case"getAvatarUrl":it=(g=Nr.user)==null?void 0:g.avatarUrl;break;case"getAvatarLargeUrl":it=(_=Nr.user)==null?void 0:_.avatarLargeUrl;break;case"getSettingsAvatarUrl":it=(b=Nr.user)==null?void 0:b.settingsAvatarUrl;break;case"getLastLoginDate":it=(A=Nr.user)==null?void 0:A.lastLoginDate;break;case"registerDate":it=(T=Nr.user)==null?void 0:T.registerDate;break;case"getBrowserTimezone":it=window.jstz.determine().name();break;case"getTimezone":it=(I=Nr.user)==null?void 0:I.timezone;break;case"getDiagramSettings":it=Nr.diagramSettings;break;case"language":it=Nr.i18n.locale;break;case"contentLanguage":it=Nr.i18n.contentLanguage;break;case"speaksEnglish":it=Nr.i18n.locale==="en_US";break;case"eligibleFirstTrial":it=(F=Nr.user)==null?void 0:F.eligibleFirstTrial;break;case"fairPlayAgree":it=(U=Nr.user)==null?void 0:U.fairPlayAgree;break;case"getArchiveView":it=(z=Nr.user)!=null&&z.archiveView?Nr.user.archiveView:"grid";break;case"homeContentType":it="following";break;case"getMembershipLevel":it=(Q=Nr.user)==null?void 0:Q.membershipLevel;break;case"isContentHidden":it=(te=Nr.user)==null?void 0:te.isContentHidden;break;case"isDarkMode":it=getIsDarkMode();break;case"rating":it=(Pe=Nr.user)==null?void 0:Pe.rating;break;case"safeMode":it=(Ce=Nr.user)==null?void 0:Ce.safeMode;break;case"uuid":it=(He=Nr.user)==null?void 0:He.uuid;break;default:it=!1;break}return it},w8=()=>isLoggedIn()?window.location.href===Router.generate("web_member_view",{username:(void 0).getUsername()}):!1,E8=e=>e==="grid"||e==="list",A8=e=>e==="following"||e==="my_activity",S8=()=>{var e;return isLoggedIn()?(e=Nr.user)==null?void 0:e.features:{}},k8=e=>e?`<a href="${Router.generate("web_member_view",{username:e})}" target="_self">${e}</a>`:"",P8=(e,n)=>{if(!e||!n)return"";switch(n){case"profile":return Router.generate("web_member_view",{username:e});case"trophies":return Router.generate("web_member_view",{username:e,view:"trophies"});case"stats":return Router.generate("web_stats",{username:e});default:return Router.generate("web_member_view",{username:e})}},Lp=(e,n)=>!n&&e>=ni.basic?ni.unspecifiedClosed:e,C8=e=>Object.keys(membership).filter(n=>membership[n]===e||n===e)[0],T8={excludeByMembershipType:(e,{user:n})=>n.membership_level!==e,excludeUsersWithComparisonArray:(e,{user:n})=>{if(e.findIndex(a=>a.id===n.id)===-1)return n}};var hb=Object.defineProperty,pb=(e,n,a)=>n in e?hb(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,mb=(e,n,a)=>(pb(e,typeof n!="symbol"?n+"":n,a),a);function vb(){const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}class gb{constructor(){mb(this,"enabled"),this.enabled=vb()}get(n){return JSON.parse(localStorage.getItem(n))}set(n,a){localStorage.setItem(n,JSON.stringify(a))}}var _b=Object.defineProperty,Bp=(e,n,a)=>n in e?_b(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,Mf=(e,n,a)=>(Bp(e,typeof n!="symbol"?n+"":n,a),a);class bb{constructor(n,a={}){Mf(this,"cache"),Mf(this,"cacheKey"),Mf(this,"memory"),this.cache=new gb,this.cacheKey=n,this.memory=a}get ready(){return this.cache.enabled!==!1}get(n,a=null){return this.memory[n]?this.memory[n]:this.ready?(this.pull(),typeof this.memory[n]<"u"?this.memory[n]:a):a}pull(){return this.memory=this.cache.get(this.cacheKey)||{},this}push(){return this.cache.set(this.cacheKey,this.memory),this}remove(n){return this.ready?(this.pull(),typeof this.memory[n]>"u"?this:(delete this.memory[n],this.push())):this}set(n,a){return this.ready?(this.pull(),this.memory[n]=a,this.push()):this}}const yb="json_settings";var ll=new bb(yb);const wb={board:{}},ul=qt(ll.get("chessComAppState")),Eb=ul&&ul.user&&ul.user.isImpersonating||db(),Ab=al(ul)&&ul.board;var Sb=!Eb&&Ab?ul:wb;function kb(e,n,a){(a!==void 0&&!en(e[n],a)||a===void 0&&!(n in e))&&jt(e,n,a)}var Of=kb;function Pb(e){return function(n,a,u){for(var d=-1,h=Object(n),g=u(n),_=g.length;_--;){var b=g[e?_:++d];if(a(h[b],b,h)===!1)break}return n}}var Cb=Pb,Tb=Cb(),Dp=Tb;function Mb(e){return Cr(e)&&Yl(e)}var Ob=Mb,xb="[object Object]",Ib=Function.prototype,Rb=Object.prototype,Fp=Ib.toString,Nb=Rb.hasOwnProperty,Lb=Fp.call(Object);function Bb(e){if(!Cr(e)||w(e)!=xb)return!1;var n=Ad(e);if(n===null)return!0;var a=Nb.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Fp.call(a)==Lb}var zp=Bb;function Db(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var xf=Db;function Fb(e){return xn(e,Xl(e))}var M8=Fb;function zb(e,n,a,u,d,h,g){var _=xf(e,a),b=xf(n,a),A=g.get(b);if(A){Of(e,a,A);return}var T=h?h(_,b,a+"",e,n,g):void 0,I=T===void 0;if(I){var F=Ci(b),U=!F&&Oo(b),z=!F&&!U&&Ct(b);T=b,F||U||z?Ci(_)?T=_:Ob(_)?T=yd(_):U?(I=!1,T=bd(b,!0)):z?(I=!1,T=th(b,!0)):T=[]:zp(b)||go(b)?(T=_,go(_)?T=M8(_):(!q(_)||er(_))&&(T=Id(b))):I=!1}I&&(g.set(b,T),d(T,b,u,h,g),g.delete(b)),Of(e,a,T)}var Ub=zb;function Up(e,n,a,u,d){e!==n&&Dp(n,function(h,g){if(d||(d=new Uu),q(h))Ub(e,n,g,a,Up,u,d);else{var _=u?u(xf(e,g),h,g+"",e,n,d):void 0;_===void 0&&(_=h),Of(e,g,_)}},Xl)}var Hb=Up;function Gb(e){return e}var _c=Gb;function Vb(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}var Hp=Vb,Gp=Math.max;function jb(e,n,a){return n=Gp(n===void 0?e.length-1:n,0),function(){for(var u=arguments,d=-1,h=Gp(u.length-n,0),g=Array(h);++d<h;)g[d]=u[n+d];d=-1;for(var _=Array(n+1);++d<n;)_[d]=u[d];return _[n]=a(g),Hp(e,this,_)}}var $b=jb;function Wb(e){return function(){return e}}var qb=Wb,Kb=wt?function(e,n){return wt(e,"toString",{configurable:!0,enumerable:!1,value:qb(n),writable:!0})}:_c,Zb=Kb,Vp=800,Yb=16,Xb=Date.now;function Qb(e){var n=0,a=0;return function(){var u=Xb(),d=Yb-(u-a);if(a=u,d>0){if(++n>=Vp)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}var Jb=Qb,ey=Jb(Zb),ty=ey;function jp(e,n){return ty($b(e,n,_c),e+"")}var ny=jp;function ry(e,n,a){if(!q(a))return!1;var u=typeof n;return(u=="number"?Yl(a)&&Gs(n,a.length):u=="string"&&n in a)?en(a[n],e):!1}var bc=ry;function iy(e){return ny(function(n,a){var u=-1,d=a.length,h=d>1?a[d-1]:void 0,g=d>2?a[2]:void 0;for(h=e.length>3&&typeof h=="function"?(d--,h):void 0,g&&bc(a[0],a[1],g)&&(h=d<3?void 0:h,d=1),n=Object(n);++u<d;){var _=a[u];_&&e(n,_,u,h)}return n})}var cl=iy,oy=cl(function(e,n,a){Hb(e,n,a)}),ay=oy,sy=ay;const $p={boardColors:[{code:"8_bit",name:"8-Bit"},{code:"bases",name:"Bases"},{code:"blue",name:"Blue"},{code:"brown",name:"Brown"},{code:"bubblegum",name:"Bubblegum"},{code:"burled_wood",name:"Burled Wood"},{code:"dark_wood",name:"Dark Wood"},{code:"dash",name:"Dash"},{code:"glass",name:"Glass"},{code:"graffiti",name:"Graffiti"},{code:"green",name:"Green"},{code:"icy_sea",name:"Icy Sea"},{code:"light",name:"Light"},{code:"lolz",name:"Lolz"},{code:"marble",name:"Marble"},{code:"metal",name:"Metal"},{code:"neon",name:"Neon"},{code:"newspaper",name:"Newspaper"},{code:"orange",name:"Orange"},{code:"overlay",name:"Overlay"},{code:"parchment",name:"Parchment"},{code:"purple",name:"Purple"},{code:"red",name:"Red"},{code:"sand",name:"Sand"},{code:"sky",name:"Sky"},{code:"stone",name:"Stone"},{code:"tan",name:"Tan"},{code:"tournament",name:"Tournament"},{code:"translucent",name:"Translucent"},{code:"walnut",name:"Walnut"}],pieceStyles:[{code:"8_bit",name:"8-Bit"},{code:"alpha",name:"Alpha"},{code:"bases",name:"Bases"},{code:"blindfold",name:"Blindfold"},{code:"book",name:"Book"},{code:"bubblegum",name:"Bubblegum"},{code:"cases",name:"Cases"},{code:"classic",name:"Classic"},{code:"club",name:"Club"},{code:"condal",name:"Condal"},{code:"dash",name:"Dash"},{code:"game_room",name:"Game Room"},{code:"glass",name:"Glass"},{code:"gothic",name:"Gothic"},{code:"graffiti",name:"Graffiti"},{code:"icy_sea",name:"Icy Sea"},{code:"light",name:"Light"},{code:"lolz",name:"Lolz"},{code:"marble",name:"Marble"},{code:"maya",name:"Maya"},{code:"metal",name:"Metal"},{code:"modern2",name:"Modern"},{code:"nature",name:"Nature"},{code:"neon",name:"Neon"},{code:"neo",name:"Neo"},{code:"neo_wood",name:"Neo-Wood"},{code:"newspaper",name:"Newspaper"},{code:"ocean",name:"Ocean"},{code:"sky",name:"Sky"},{code:"space",name:"Space"},{code:"tigers",name:"Tigers"},{code:"tournament",name:"Tournament"},{code:"vintage",name:"Vintage"},{code:"wood",name:"Wood"},{code:"3dwood",name:"3D - Wood"},{code:"3d_staunton",name:"3D - Staunton"},{code:"3dplastic",name:"3D - Plastic"},{code:"3dchesskid",name:"3D - ChessKid"},{code:"real3d",name:"Real 3D"}],sounds:[{code:"default",name:"Default"},{code:"nature",name:"Nature"},{code:"metal",name:"Metal"},{code:"marble",name:"Marble"},{code:"space",name:"Space"},{code:"beat",name:"Beat"},{code:"silly",name:"Silly"},{code:"lolz",name:"Lolz"},{code:"newspaper",name:"Newspaper"}],moveListDisplayTypes:[{code:"text",name:"Text"},{code:"figurine",name:"Figurine"}],animationTypes:[{code:"default",name:"Default"},{code:"none",name:"None"},{code:"slow",name:"Slow"},{code:"natural",name:"Natural"},{code:"arcade",name:"Arcade"}],coordinates:[{code:null,name:"Off"},{code:"inside",name:"Inside"},{code:"outside",name:"Outside"}],component:"standard",moveMethods:[{code:"click",name:"Click Squares"},{code:"drag",name:"Drag Pieces"}]},Wp=il.getDefaultOptions(),ly={boardId:`board${Date.now()}`,boardOptions:{...Wp,highlightMovesUI:!0,maxWidth:0},debugMode:!1,settings:$p,styles:{boardColors:[],pieceStyles:[],userSize:null}},yc={boardOptions:{allowMarkings:!0,captureKeyStrokes:!0,enabled:!0,fadeSetup:0,fetched:!1,flipBoard:!1,flipped:!1,highlightColor:null,highlightOpacity:Wp.highlightOpacity}};var qp=sy(ly,Sb.board,yc),Cs={namespaced:!0,actions:Af,mutations:lb,state:qp};function dl({game:e,setup:{endNode:n}},a){const u=e.getNodeIds(),d=u.move===-1?a:u.move+a;return(n!==0?n:e.getRawLines()[0].length)>d}function uy(e,n){const a=e.getSelectedNode();if(!a)return;const u=a.ids;return n.reduce((d,h)=>{const g=h.filter(({beforeFen:_})=>_===a.fen).map(_=>{const b={ids:_.ids,san:_.san,selected:!1};return b.color=_.color,b.moveNumber=_.moveNumber,b});return g.forEach(_=>{_.ids.move===u.move+1&&_.ids.line===u.line&&(_.selected=!0)}),d.concat(g)},[])}var wc=new(ol());const If={};function Zp(e){If[e]||(If[e]=new Promise(n=>{wc.on(e,a=>n(a))}))}function Ec(e){return Zp(e),If[e]}const O8=(e,n,a)=>Math.min(a,Math.max(n,e)),x8=({decimals:e=1,method:n=Math.round,number:a})=>{const u=10**e;return n(a*u)/u},Ac=e=>!!(e%2);function I8(e,n){const{decimalPlaces:a,total:u}=Object.assign({total:void 0,collection:[],decimalPlaces:1},n),d=u||e.reduce((A,T)=>A+T),h=100*10**a,g=e.map(A=>Math.round(A/d*h)),_=g.reduce((A,T)=>A+T),b=h-_;return g[g.length-1]+=b,g.map(A=>A/10**a)}var Rf={correctMove({commit:e,dispatch:n,rootState:a},{id:u,text:d,type:h}){const{selectedGame:g}=a.diagramViewer.viewers[u],{game:_,setup:b}=g;_.canMoveForward(2)&&dl(g,2)?(h==="board"?e("changePuzzleButtonText",{id:u,text:d}):n("hintMove",{id:u,text:d}),setTimeout(()=>{let T=b.puzzleSetup.isWhite?ft.WHITE_TO_MOVE:ft.BLACK_TO_MOVE;dl(g,2)||(T=ft.SOLVED,n("lastPuzzleMove",u)),n("hintMove",{id:u,text:T})},kt.TIMEOUT)):(n("lastPuzzleMove",u),n("hintMove",{id:u,text:ft.SOLVED}))},async hintMove({commit:e,dispatch:n,rootState:a},{id:u,text:d}){e("changePuzzleButtonText",{id:u,text:d}),await n("moveForward",u);const{game:h}=a.diagramViewer.viewers[u].selectedGame,g=h.getSelectedNode();e("pushMoveOnPuzzleMoveList",{id:u,move:g})},init({commit:e,dispatch:n},a){e("setViewer",a),n("loadNewGame",a.id)},lastPuzzleMove({commit:e},n){e("clearPuzzleMoveList",n),e("puzzleSolution",n)},loadFromPgn({dispatch:e},{id:n,pgn:a}){e(`${n}/loadFromPgn`,{pgn:a},{root:!0})},async loadNewGame({commit:e,dispatch:n,rootState:a},u){await Ec(at.BOARD_INITIALIZED);const{setup:d}=a.diagramViewer.viewers[u].selectedGame,{moveListDisplayType:h}=a.diagramViewerBoard.boardOptions,g=1;n(`${u}/changeSettings`,{moveListDisplayType:h},{root:!0}),n(`${u}/loadFromPgn`,{pgn:d.pgnBody},{root:!0}),n("selectLineStart",u),d.beginNode&&n(`${u}/goToNode`,{line:0,move:d.beginNode-g},{root:!0}),d.focusNode&&n(`${u}/goToNode`,{line:0,move:d.focusNode-g},{root:!0});const _=document.getElementById(`board-${u}`).game;if(e("setNewGame",{id:u,game:_}),d.diagramType==="chessProblem"){const b=_.getHistorySANs(),A=Ac(b.length)?b:b.slice(0,-1);e("loadSolutionSANs",{id:u,solutions:A})}},moveBackward({dispatch:e},n){e(`${n}/moveBackward`,void 0,{root:!0})},moveForward({dispatch:e},n){e(`${n}/moveForward`,void 0,{root:!0})},moveToEnd({dispatch:e},n){e(`${n}/moveToEnd`,void 0,{root:!0})},moveToStart({dispatch:e,rootState:n},a){const{selectedGame:u}=n.diagramViewer.viewers[a],{game:d,setup:h}=u,{move:g}=d.getNodeIds();h?.beginNode!==g+1?e(`${a}/goToNode`,{line:0,move:h.beginNode-1},{root:!0}):e(`${a}/moveToStart`,void 0,{root:!0})},resetPuzzle({dispatch:e,rootState:n},a){const{selectedGame:u}=n.diagramViewer.viewers[a],{setup:d}=u;d.beginNode!==0?e(`${a}/goToNode`,{line:0,move:d.beginNode-1},{root:!0}):d.focusNode!==0?e(`${a}/goToNode`,{line:0,move:d.focusNode-1},{root:!0}):e(`${a}/moveToStart`,void 0,{root:!0})},onNodeChange({dispatch:e},n){e(`${n}/onNodeChange`,void 0,{root:!0})},selectLineStart({dispatch:e},n){e(`${n}/selectLineStart`,void 0,{root:!0})},selectNode({dispatch:e},{id:n,ids:a}){e(`${n}/goToNode`,{line:a.line,move:a.move},{root:!0})},selectVariation({commit:e,rootState:n},{id:a,step:u}){const d=n.diagramViewer.viewers[a].selectedGame.setup.variations;let g=d.findIndex(({selected:_})=>_===!0)+u;g<0?g=0:g>d.length-1&&(g=d.length-1),e("clearSelectedVariations",a),e("switchVariation",{id:a,index:g})},setSelectedGame({commit:e,dispatch:n},{id:a,game:u}){e("setSelectedGame",{id:a,game:u}),n("loadNewGame",a)},setVariations({commit:e,rootState:n},{id:a,lines:u}){const{game:d}=n.diagramViewer.viewers[a].selectedGame,h=uy(d,u);e("setVariations",{id:a,variations:h})}};const Nf=/https?:\/\/(?:www.)?chess(?:-dev|-\d+)?.com\/a\/[\d\w]{12}/,R8={large:600,small:320},N8={K:"K",k:"k",Q:"Q",q:"q"},dy={K:!1,Q:!1,k:!1,q:!1},L8={BLACK:"black",WHITE:"white"},B8={BLACK:"b",WHITE:"w"},D8={DEFAULT:"-",FULLMOVE_DEFAULT:"1",HALFMOVE_DEFAULT:"0"},F8={INSIDE:"inside"},Vo={CHESS_GAME:"chessGame",CHESS_PROBLEM:"chessProblem",SIMPLE_DIAGRAM:"simpleDiagram"},Yp={INVALID_ANALYSIS_URL:ie.trans("We cannot find an analysis with that URL."),INVALID_GAME_URL:ie.trans("We cannot find the game in that URL."),WRONG_PGN:ie.trans("Something wrong with loaded PGN, we load it in soft mode")},fy={BOARD_INITIALIZED:"board-initialized"},hy={daily:"game",game:"game",games:"game_archive",live:"game_live",votechess:"votechess_game"},Lf=/https?:\/\/(?:www.)?chess(?:-dev|-\d+)?.com\/(votechess|games|daily|live|game)\/(?:game|view|daily)\/(\d+)\/?/,la="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",mi={CHEVRON_BOTTOM:"chevron-bottom",CHEVRON_UP:"chevron-up"},bo={desktop:900,mobile:640},Q4={FIRST_MOVE:0},py={BLACK_ELO:"BlackElo",ROUND:"Round",WHITE_ELO:"WhiteElo"},my={DIAGRAM_WRAPPER:"diagram-editor"},vy=[{label:ie.trans("No Result (*)"),value:"*"},{label:ie.trans("White Won (1-0)"),value:"1-0"},{label:ie.trans("Black Won (0-1)"),value:"0-1"},{label:ie.trans("Draw (1/2-1/2)"),value:"1/2-1/2"}],Sc={getChessDiagram:e=>H.generate("web_tinymce_get_chessdiagram",{id:e||"new"}),getSavedAnalysisFromUrl:e=>H.generate("web_analysis_game_callback_view",{uuid:e})},z8={DETAILS:"details",MOVES:"moves",SETUP:"setup",THEME:"theme"},U8={LOAD_FEN:"fen",LOAD_PGN:"pgn",LOAD_URL:"url",LOAD_FILE:"file",SETUP_POSITION:"setup-position"},H8=[{label:ie.trans("White to move"),value:"white"},{label:ie.trans("Black to move"),value:"black"}],G8=[{label:"-",value:"-"},{label:"a6",value:"a6"},{label:"b6",value:"b6"},{label:"c6",value:"c6"},{label:"d6",value:"d6"},{label:"e6",value:"e6"},{label:"f6",value:"f6"},{label:"g6",value:"g6"},{label:"h6",value:"h6"}],gy=[{label:"-",value:"-"},{label:"a3",value:"a3"},{label:"b3",value:"b3"},{label:"c3",value:"c3"},{label:"d3",value:"d3"},{label:"e3",value:"e3"},{label:"f3",value:"f3"},{label:"g3",value:"g3"},{label:"h3",value:"h3"}],_y=[{label:"Standard",value:null},{label:"Chess960",value:"Chess960"}],mu={CHESS:"Chess",CHESS960:"Chess960",ODDS_CHESS:"Odds Chess",KING_OF_THE_HILL:"King of the Hill",THREE_CHECK:"Three-Check"},Bf={CHESS:"chess",KING_OF_THE_HILL:"kingofthehill",THREE_CHECK:"threecheck"},V8={MAX_RATING:3500,MAX_ROUND:100,MIN:1};function Df(e){return e===Vo.CHESS_GAME}function by(e){return e===Vo.CHESS_PROBLEM}function Ff(e){return e===Vo.SIMPLE_DIAGRAM}var yy={getGameById:e=>n=>e.viewers[n].selectedGame,getPuzzleButtonText:e=>n=>e.viewers[n].selectedGame.setup.puzzleSetup.puzzleButtonText,getPuzzleMoveList:e=>n=>e.viewers[n].selectedGame.setup.puzzleSetup.puzzleMoveList,getPuzzleStart:e=>n=>e.viewers[n].selectedGame.setup.puzzleSetup.puzzleStart,getShareModal:e=>n=>e.viewers[n].shareModal,getVariations:e=>n=>e.viewers[n].selectedGame.setup.variations,getVariationPopover:e=>n=>e.viewers[n].variationPopover,getViewerById:e=>n=>e.viewers[n],isBlackAtBottom:e=>n=>e.viewers[n].selectedGame.setup.boardFlip,isChessGame:e=>n=>Df(e.viewers[n].selectedGame.setup.diagramType),isChessProblem:e=>n=>by(e.viewers[n].selectedGame.setup.diagramType),isSimpleDiagram:e=>n=>Ff(e.viewers[n].selectedGame.setup.diagramType),isWhiteMove:e=>n=>e.viewers[n].selectedGame.setup.puzzleSetup.isWhite,getSolutions:e=>n=>e.viewers[n].selectedGame.setup.puzzleSetup.solutions};function wy(e){return e.map(n=>{const a={isWhite:!0,puzzleButtonText:ft.WHITE_TO_MOVE,puzzleMoveList:[],puzzleStart:!0,lastMovePlayed:!1,solveState:"none",solution:[]},u={...n,puzzleSetup:a,variations:[],variationParentNode:{}},d={allowMarkings:!0,captureKeyStrokes:!1,boardStyle:u.colorScheme,coordinates:u.boardCoords?gr.INSIDE:!1,enabled:!0,flipBoard:u.boardFlip,overlayInAnalysisMode:!1,pieceStyle:u.pieceStyle,playSounds:!1};return{game:{},boardOptions:d,setup:u}})}function Ey(e){const n=e.getRawLines(),a=e.getNodeIds();return n.reduce((u,d)=>u||d.find(h=>{var g;return(g=h.lines)==null?void 0:g.includes(a.line)}),null)}var Ay={changePuzzleButtonText(e,{id:n,text:a}){e.viewers[n].selectedGame.setup.puzzleSetup.puzzleButtonText=a},clearVariationParentNode(e,n){e.viewers[n].selectedGame.setup.variationParentNode={}},clearPuzzleMoveList(e,n){e.viewers[n].selectedGame.setup.puzzleSetup.puzzleMoveList=[]},clearSelectedVariations(e,n){e.viewers[n].selectedGame.setup.variations.forEach(a=>a.selected=!1)},clearVariations(e,n){e.viewers[n].selectedGame.setup.variations=[]},firstTryOfLastMove(e,n){e.viewers[n].selectedGame.setup.puzzleSetup.lastMovePlayed=!0},flipBoard(e,n){e.viewers[n].selectedGame.boardOptions.flipBoard=!e.viewers[n].selectedGame.boardOptions.flipBoard},hideShareModal(e,n){e.viewers[n].shareModal=!1},hideVariationPopover(e,n){e.viewers[n].variationPopover=!1},pushMoveOnPuzzleMoveList(e,{id:n,move:a}){e.viewers[n].selectedGame.setup.puzzleSetup.puzzleMoveList.push(a)},puzzleReset(e,n){e.viewers[n].selectedGame.setup.puzzleSetup.puzzleStart=!0},puzzleSolution(e,n){e.viewers[n].selectedGame.setup.puzzleSetup.puzzleStart=!1},setBlackAtBottom(e,n){e.viewers[n].selectedGame.boardOptions.flipBoard=!0},setVariationParentNode(e,{id:n,game:a}){e.viewers[n].selectedGame.setup.variationParentNode=Ey(a)},setViewer(e,{id:n,setup:a}){const u=wy(a);e.viewers={...e.viewers,[n]:{games:u,selectedGame:u[0],shareModal:!1,variationPopover:!1}}},setSelectedGame(e,{id:n,game:a}){e.viewers[n].selectedGame=a},setFirstMoveIsWhite(e,{id:n,type:a}){e.viewers[n].selectedGame.setup.puzzleSetup.isWhite=a},showShareModal(e,n){e.viewers[n].shareModal=!0},showVariationPopover(e,n){e.viewers[n].variationPopover=!0},setVariations(e,{id:n,variations:a}){e.viewers[n].selectedGame.setup.variations=a},setNewGame(e,{id:n,game:a}){e.viewers[n].selectedGame.game=a},switchVariation(e,{id:n,index:a}){e.viewers[n].selectedGame.setup.variations[a].selected=!0},changeSolveState(e,{id:n,solveState:a}){e.viewers[n].selectedGame.setup.puzzleSetup.solveState=a},loadSolutionSANs(e,{id:n,solutions:a}){e.viewers[n].selectedGame.setup.puzzleSetup.solutions=a}},Sy={viewers:{}},ky={namespaced:!0,actions:Rf,getters:yy,mutations:Ay,state:Sy};const j8=()=>window.parent.innerWidth,$8=(e,n,a)=>{let u=a,d=null;if(!e||!n||!a)return d;for(;u&&u!==e&&!d;)u.classList.contains(n)&&(d=u),u=u.parentElement;return d},J4=e=>document.querySelector(`.${e}`),zf=e=>document.getElementsByClassName(e),W8=e=>{const n=window.getComputedStyle(e),a=parseFloat(n.marginLeft)+parseFloat(n.marginRight),u=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),d=parseFloat(n.marginBottom)+parseFloat(n.marginTop),h=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),g=parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),_=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{height:e.offsetHeight+d-h+_,width:e.offsetWidth+a-u+g}},q8=()=>window,Py=(e,n)=>e?e.classList&&e.classList.contains(n)?!0:!!e.parentElement&&Py(e.parentElement,n):!1;function Cy(e,n){return e?e===n?!0:Cy(e.parentElement,n):!1}const K8=e=>{e.forEach(n=>{const a=document.getElementsByClassName(n)[0];a&&a.style.display!=="none"&&(a.style.display="none")})},Z8=e=>{document.getElementsByClassName(e)[0].style.display=""};function Y8(e,n,a,u){const d=zf(e);Array.from(d).forEach(h=>{const g=h.getAttribute("data-key"),_=document.querySelectorAll(`.${n}[data-key=${g}]`),b=h.querySelector(`.${a}`),A=h.querySelector(`.${u}`);b.innerHTML=translations.showMore,h.addEventListener("click",()=>{const T=b.innerHTML===translations.showMore;b.innerHTML=T?translations.showLess:translations.showMore,A.classList.toggle("toggle-content-icon-up"),Array.from(_).forEach(I=>{I.style.display=I.style.display==="block"?"none":"block"})})})}const X8=e=>document.querySelectorAll(`script[src="${e}"]`).length>0,Ty=e=>document.querySelectorAll(`link[href="${e}"]`).length>0;function My(){return[`&-diagramtype:
`,`simpleDiagram
`,`&-colorscheme:
`,`green
`,`&-piecestyle:
`,`neo
`,`&-float:
`,`left
`,`&-flip:
`,`false
`,`&-size:
`,`45
`,`&-lastmove:
`,`
`,`&-focusnode:
`,`
`,`&-beginnode:
`,`
`,`&-endnode:
`,`
`,`&-hideglobalbuttons:
`,`false
`,`&-pgnbody:
`,`[Event ""]
`,`[Site ""]
`,`[Date "????.??.??"]
`,`[Round ""]
`,`[White ""]
`,`[Black ""]
`,`[Result "*"]
`,`[FEN "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"]
`,`
`,`*
`].join("")}const Oy=e=>e.data.replace(/^\s+/,"").replace(/\s+$/,"").replace(/^&amp;-/gm,"&-"),xy=e=>e&&e.childNodes[0]?Oy(e.childNodes[0]):My();function Uf(e){return e===`.${Ve.CHESS_DAILY_PUZZLE}`?pr.DAILY_PUZZLE:pr.DIAGRAM}var Ir=ir(1916);/*!
  * vue-router v3.5.1
  * (c) 2021 Evan You
  * @license MIT
  */function Iy(e,n){if(!e)throw new Error("[vue-router] "+n)}function Xp(e,n){}function jo(e,n){for(var a in n)e[a]=n[a];return e}var fl=/[!'()*]/g,kc=function(e){return"%"+e.charCodeAt(0).toString(16)},Na=/%2C/g,Ts=function(e){return encodeURIComponent(e).replace(fl,kc).replace(Na,",")};function Pc(e){try{return decodeURIComponent(e)}catch{}return e}function Qp(e,n,a){n===void 0&&(n={});var u=a||Jp,d;try{d=u(e||"")}catch{d={}}for(var h in n){var g=n[h];d[h]=Array.isArray(g)?g.map(Hf):Hf(g)}return d}var Hf=function(e){return e==null||typeof e=="object"?e:String(e)};function Jp(e){var n={};return e=e.trim().replace(/^(\?|#|&)/,""),e&&e.split("&").forEach(function(a){var u=a.replace(/\+/g," ").split("="),d=Pc(u.shift()),h=u.length>0?Pc(u.join("=")):null;n[d]===void 0?n[d]=h:Array.isArray(n[d])?n[d].push(h):n[d]=[n[d],h]}),n}function em(e){var n=e?Object.keys(e).map(function(a){var u=e[a];if(u===void 0)return"";if(u===null)return Ts(a);if(Array.isArray(u)){var d=[];return u.forEach(function(h){h!==void 0&&(h===null?d.push(Ts(a)):d.push(Ts(a)+"="+Ts(h)))}),d.join("&")}return Ts(a)+"="+Ts(u)}).filter(function(a){return a.length>0}).join("&"):null;return n?"?"+n:""}var Lr=/\/?$/;function Cc(e,n,a,u){var d=u&&u.options.stringifyQuery,h=n.query||{};try{h=ga(h)}catch{}var g={name:n.name||e&&e.name,meta:e&&e.meta||{},path:n.path||"/",hash:n.hash||"",query:h,params:n.params||{},fullPath:jr(n,d),matched:e?Ry(e):[]};return a&&(g.redirectedFrom=jr(a,d)),Object.freeze(g)}function ga(e){if(Array.isArray(e))return e.map(ga);if(e&&typeof e=="object"){var n={};for(var a in e)n[a]=ga(e[a]);return n}else return e}var Xa=Cc(null,{path:"/"});function Ry(e){for(var n=[];e;)n.unshift(e),e=e.parent;return n}function jr(e,n){var a=e.path,u=e.query;u===void 0&&(u={});var d=e.hash;d===void 0&&(d="");var h=n||em;return(a||"/")+h(u)+d}function Gf(e,n,a){return n===Xa?e===n:n?e.path&&n.path?e.path.replace(Lr,"")===n.path.replace(Lr,"")&&(a||e.hash===n.hash&&Qa(e.query,n.query)):e.name&&n.name?e.name===n.name&&(a||e.hash===n.hash&&Qa(e.query,n.query)&&Qa(e.params,n.params)):!1:!1}function Qa(e,n){if(e===void 0&&(e={}),n===void 0&&(n={}),!e||!n)return e===n;var a=Object.keys(e).sort(),u=Object.keys(n).sort();return a.length!==u.length?!1:a.every(function(d,h){var g=e[d],_=u[h];if(_!==d)return!1;var b=n[d];return g==null||b==null?g===b:typeof g=="object"&&typeof b=="object"?Qa(g,b):String(g)===String(b)})}function Vf(e,n){return e.path.replace(Lr,"/").indexOf(n.path.replace(Lr,"/"))===0&&(!n.hash||e.hash===n.hash)&&Tc(e.query,n.query)}function Tc(e,n){for(var a in n)if(!(a in e))return!1;return!0}function jf(e){for(var n=0;n<e.matched.length;n++){var a=e.matched[n];for(var u in a.instances){var d=a.instances[u],h=a.enteredCbs[u];if(!(!d||!h)){delete a.enteredCbs[u];for(var g=0;g<h.length;g++)d._isBeingDestroyed||h[g](d)}}}}var Ja={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,a){var u=a.props,d=a.children,h=a.parent,g=a.data;g.routerView=!0;for(var _=h.$createElement,b=u.name,A=h.$route,T=h._routerViewCache||(h._routerViewCache={}),I=0,F=!1;h&&h._routerRoot!==h;){var U=h.$vnode?h.$vnode.data:{};U.routerView&&I++,U.keepAlive&&h._directInactive&&h._inactive&&(F=!0),h=h.$parent}if(g.routerViewDepth=I,F){var z=T[b],Q=z&&z.component;return Q?(z.configProps&&hl(Q,g,z.route,z.configProps),_(Q,g,d)):_()}var te=A.matched[I],Pe=te&&te.components[b];if(!te||!Pe)return T[b]=null,_();T[b]={component:Pe},g.registerRouteInstance=function(He,it){var Pt=te.instances[b];(it&&Pt!==He||!it&&Pt===He)&&(te.instances[b]=it)},(g.hook||(g.hook={})).prepatch=function(He,it){te.instances[b]=it.componentInstance},g.hook.init=function(He){He.data.keepAlive&&He.componentInstance&&He.componentInstance!==te.instances[b]&&(te.instances[b]=He.componentInstance),jf(A)};var Ce=te.props&&te.props[b];return Ce&&(jo(T[b],{route:A,configProps:Ce}),hl(Pe,g,A,Ce)),_(Pe,g,d)}};function hl(e,n,a,u){var d=n.props=Ny(a,u);if(d){d=n.props=jo({},d);var h=n.attrs=n.attrs||{};for(var g in d)(!e.props||!(g in e.props))&&(h[g]=d[g],delete d[g])}}function Ny(e,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(e);case"boolean":return n?e.params:void 0;default:}}function tm(e,n,a){var u=e.charAt(0);if(u==="/")return e;if(u==="?"||u==="#")return n+e;var d=n.split("/");(!a||!d[d.length-1])&&d.pop();for(var h=e.replace(/^\//,"").split("/"),g=0;g<h.length;g++){var _=h[g];_===".."?d.pop():_!=="."&&d.push(_)}return d[0]!==""&&d.unshift(""),d.join("/")}function Ly(e){var n="",a="",u=e.indexOf("#");u>=0&&(n=e.slice(u),e=e.slice(0,u));var d=e.indexOf("?");return d>=0&&(a=e.slice(d+1),e=e.slice(0,d)),{path:e,query:a,hash:n}}function Ms(e){return e.replace(/\/\//g,"/")}var Mc=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},pl=Wf,By=vu,Dy=Hy,Fy=Mi,zy=$f,Uy=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function vu(e,n){for(var a=[],u=0,d=0,h="",g=n&&n.delimiter||"/",_;(_=Uy.exec(e))!=null;){var b=_[0],A=_[1],T=_.index;if(h+=e.slice(d,T),d=T+b.length,A){h+=A[1];continue}var I=e[d],F=_[2],U=_[3],z=_[4],Q=_[5],te=_[6],Pe=_[7];h&&(a.push(h),h="");var Ce=F!=null&&I!=null&&I!==F,He=te==="+"||te==="*",it=te==="?"||te==="*",Pt=_[2]||g,Ut=z||Q;a.push({name:U||u++,prefix:F||"",delimiter:Pt,optional:it,repeat:He,partial:Ce,asterisk:!!Pe,pattern:Ut?nm(Ut):Pe?".*":"[^"+Os(Pt)+"]+?"})}return d<e.length&&(h+=e.substr(d)),h&&a.push(h),a}function Hy(e,n){return Mi(vu(e,n),n)}function ml(e){return encodeURI(e).replace(/[\/?#]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}function Gy(e){return encodeURI(e).replace(/[?#]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}function Mi(e,n){for(var a=new Array(e.length),u=0;u<e.length;u++)typeof e[u]=="object"&&(a[u]=new RegExp("^(?:"+e[u].pattern+")$",gl(n)));return function(d,h){for(var g="",_=d||{},b=h||{},A=b.pretty?ml:encodeURIComponent,T=0;T<e.length;T++){var I=e[T];if(typeof I=="string"){g+=I;continue}var F=_[I.name],U;if(F==null)if(I.optional){I.partial&&(g+=I.prefix);continue}else throw new TypeError('Expected "'+I.name+'" to be defined');if(Mc(F)){if(!I.repeat)throw new TypeError('Expected "'+I.name+'" to not repeat, but received `'+JSON.stringify(F)+"`");if(F.length===0){if(I.optional)continue;throw new TypeError('Expected "'+I.name+'" to not be empty')}for(var z=0;z<F.length;z++){if(U=A(F[z]),!a[T].test(U))throw new TypeError('Expected all "'+I.name+'" to match "'+I.pattern+'", but received `'+JSON.stringify(U)+"`");g+=(z===0?I.prefix:I.delimiter)+U}continue}if(U=I.asterisk?Gy(F):A(F),!a[T].test(U))throw new TypeError('Expected "'+I.name+'" to match "'+I.pattern+'", but received "'+U+'"');g+=I.prefix+U}return g}}function Os(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function nm(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function vl(e,n){return e.keys=n,e}function gl(e){return e&&e.sensitive?"":"i"}function Vy(e,n){var a=e.source.match(/\((?!\?)/g);if(a)for(var u=0;u<a.length;u++)n.push({name:u,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return vl(e,n)}function gu(e,n,a){for(var u=[],d=0;d<e.length;d++)u.push(Wf(e[d],n,a).source);var h=new RegExp("(?:"+u.join("|")+")",gl(a));return vl(h,n)}function jy(e,n,a){return $f(vu(e,a),n,a)}function $f(e,n,a){Mc(n)||(a=n||a,n=[]),a=a||{};for(var u=a.strict,d=a.end!==!1,h="",g=0;g<e.length;g++){var _=e[g];if(typeof _=="string")h+=Os(_);else{var b=Os(_.prefix),A="(?:"+_.pattern+")";n.push(_),_.repeat&&(A+="(?:"+b+A+")*"),_.optional?_.partial?A=b+"("+A+")?":A="(?:"+b+"("+A+"))?":A=b+"("+A+")",h+=A}}var T=Os(a.delimiter||"/"),I=h.slice(-T.length)===T;return u||(h=(I?h.slice(0,-T.length):h)+"(?:"+T+"(?=$))?"),d?h+="$":h+=u&&I?"":"(?="+T+"|$)",vl(new RegExp("^"+h,gl(a)),n)}function Wf(e,n,a){return Mc(n)||(a=n||a,n=[]),a=a||{},e instanceof RegExp?Vy(e,n):Mc(e)?gu(e,n,a):jy(e,n,a)}pl.parse=By,pl.compile=Dy,pl.tokensToFunction=Fy,pl.tokensToRegExp=zy;var _l=Object.create(null);function bl(e,n,a){n=n||{};try{var u=_l[e]||(_l[e]=pl.compile(e));return typeof n.pathMatch=="string"&&(n[0]=n.pathMatch),u(n,{pretty:!0})}catch{return""}finally{delete n[0]}}function _u(e,n,a,u){var d=typeof e=="string"?{path:e}:e;if(d._normalized)return d;if(d.name){d=jo({},e);var h=d.params;return h&&typeof h=="object"&&(d.params=jo({},h)),d}if(!d.path&&d.params&&n){d=jo({},d),d._normalized=!0;var g=jo(jo({},n.params),d.params);if(n.name)d.name=n.name,d.params=g;else if(n.matched.length){var _=n.matched[n.matched.length-1].path;d.path=bl(_,g,"path "+n.path)}return d}var b=Ly(d.path||""),A=n&&n.path||"/",T=b.path?tm(b.path,A,a||d.append):A,I=Qp(b.query,d.query,u&&u.options.parseQuery),F=d.hash||b.hash;return F&&F.charAt(0)!=="#"&&(F="#"+F),{_normalized:!0,path:T,query:I,hash:F}}var $y=[String,Object],yl=[String,Array],Oc=function(){},Q8,xc,J8,Wy={name:"RouterLink",props:{to:{type:$y,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:yl,default:"click"}},render:function(n){var a=this,u=this.$router,d=this.$route,h=u.resolve(this.to,d,this.append),g=h.location,_=h.route,b=h.href,A={},T=u.options.linkActiveClass,I=u.options.linkExactActiveClass,F=T??"router-link-active",U=I??"router-link-exact-active",z=this.activeClass==null?F:this.activeClass,Q=this.exactActiveClass==null?U:this.exactActiveClass,te=_.redirectedFrom?Cc(null,_u(_.redirectedFrom),null,u):_;A[Q]=Gf(d,te,this.exactPath),A[z]=this.exact||this.exactPath?A[Q]:Vf(d,te);var Pe=A[Q]?this.ariaCurrentValue:null,Ce=function(ui){wl(ui)&&(a.replace?u.replace(g,Oc):u.push(g,Oc))},He={click:wl};Array.isArray(this.event)?this.event.forEach(function(ui){He[ui]=Ce}):He[this.event]=Ce;var it={class:A},Pt=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:b,route:_,navigate:Ce,isActive:A[z],isExactActive:A[Q]});if(Pt){if(Pt.length===1)return Pt[0];if(Pt.length>1||!Pt.length)return Pt.length===0?n():n("span",{},Pt)}if(this.tag==="a")it.on=He,it.attrs={href:b,"aria-current":Pe};else{var Ut=rm(this.$slots.default);if(Ut){Ut.isStatic=!1;var sn=Ut.data=jo({},Ut.data);sn.on=sn.on||{};for(var Ln in sn.on){var Hn=sn.on[Ln];Ln in He&&(sn.on[Ln]=Array.isArray(Hn)?Hn:[Hn])}for(var _n in He)_n in sn.on?sn.on[_n].push(He[_n]):sn.on[_n]=Ce;var hr=Ut.data.attrs=jo({},Ut.data.attrs);hr.href=b,hr["aria-current"]=Pe}else it.on=He}return n(this.tag,it,this.$slots.default)}};function wl(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){var n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function rm(e){if(e){for(var n,a=0;a<e.length;a++)if(n=e[a],n.tag==="a"||n.children&&(n=rm(n.children)))return n}}var Ic;function $o(e){if(!($o.installed&&Ic===e)){$o.installed=!0,Ic=e;var n=function(d){return d!==void 0},a=function(d,h){var g=d.$options._parentVnode;n(g)&&n(g=g.data)&&n(g=g.registerRouteInstance)&&g(d,h)};e.mixin({beforeCreate:function(){n(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Ja),e.component("RouterLink",Wy);var u=e.config.optionMergeStrategies;u.beforeRouteEnter=u.beforeRouteLeave=u.beforeRouteUpdate=u.created}}var bu=typeof window<"u";function yo(e,n,a,u,d){var h=n||[],g=a||Object.create(null),_=u||Object.create(null);e.forEach(function(F){qf(h,g,_,F,d)});for(var b=0,A=h.length;b<A;b++)h[b]==="*"&&(h.push(h.splice(b,1)[0]),A--,b--);if(!1)var T,I;return{pathList:h,pathMap:g,nameMap:_}}function qf(e,n,a,u,d,h){var g=u.path,_=u.name,b=u.pathToRegexpOptions||{},A=Ky(g,d,b.strict);typeof u.caseSensitive=="boolean"&&(b.sensitive=u.caseSensitive);var T={path:A,regex:qy(A,b),components:u.components||{default:u.component},alias:u.alias?typeof u.alias=="string"?[u.alias]:u.alias:[],instances:{},enteredCbs:{},name:_,parent:d,matchAs:h,redirect:u.redirect,beforeEnter:u.beforeEnter,meta:u.meta||{},props:u.props==null?{}:u.components?u.props:{default:u.props}};if(u.children&&u.children.forEach(function(Q){var te=h?Ms(h+"/"+Q.path):void 0;qf(e,n,a,Q,T,te)}),n[T.path]||(e.push(T.path),n[T.path]=T),u.alias!==void 0)for(var I=Array.isArray(u.alias)?u.alias:[u.alias],F=0;F<I.length;++F){var U=I[F],z={path:U,children:u.children};qf(e,n,a,z,d,T.path||"/")}_&&(a[_]||(a[_]=T))}function qy(e,n){var a=pl(e,[],n);if(!1)var u;return a}function Ky(e,n,a){return a||(e=e.replace(/\/$/,"")),e[0]==="/"||n==null?e:Ms(n.path+"/"+e)}function Zy(e,n){var a=yo(e),u=a.pathList,d=a.pathMap,h=a.nameMap;function g(U){yo(U,u,d,h)}function _(U,z){var Q=typeof U!="object"?h[U]:void 0;yo([z||U],u,d,h,Q),Q&&yo(Q.alias.map(function(te){return{path:te,children:[z]}}),u,d,h,Q)}function b(){return u.map(function(U){return d[U]})}function A(U,z,Q){var te=_u(U,z,!1,n),Pe=te.name;if(Pe){var Ce=h[Pe];if(!Ce)return F(null,te);var He=Ce.regex.keys.filter(function(Ln){return!Ln.optional}).map(function(Ln){return Ln.name});if(typeof te.params!="object"&&(te.params={}),z&&typeof z.params=="object")for(var it in z.params)!(it in te.params)&&He.indexOf(it)>-1&&(te.params[it]=z.params[it]);return te.path=bl(Ce.path,te.params,'named route "'+Pe+'"'),F(Ce,te,Q)}else if(te.path){te.params={};for(var Pt=0;Pt<u.length;Pt++){var Ut=u[Pt],sn=d[Ut];if(Yy(sn.regex,te.path,te.params))return F(sn,te,Q)}}return F(null,te)}function T(U,z){var Q=U.redirect,te=typeof Q=="function"?Q(Cc(U,z,null,n)):Q;if(typeof te=="string"&&(te={path:te}),!te||typeof te!="object")return F(null,z);var Pe=te,Ce=Pe.name,He=Pe.path,it=z.query,Pt=z.hash,Ut=z.params;if(it=Pe.hasOwnProperty("query")?Pe.query:it,Pt=Pe.hasOwnProperty("hash")?Pe.hash:Pt,Ut=Pe.hasOwnProperty("params")?Pe.params:Ut,Ce){var sn=h[Ce];return A({_normalized:!0,name:Ce,query:it,hash:Pt,params:Ut},void 0,z)}else if(He){var Ln=Kf(He,U),Hn=bl(Ln,Ut,'redirect route with path "'+Ln+'"');return A({_normalized:!0,path:Hn,query:it,hash:Pt},void 0,z)}else return F(null,z)}function I(U,z,Q){var te=bl(Q,z.params,'aliased route with path "'+Q+'"'),Pe=A({_normalized:!0,path:te});if(Pe){var Ce=Pe.matched,He=Ce[Ce.length-1];return z.params=Pe.params,F(He,z)}return F(null,z)}function F(U,z,Q){return U&&U.redirect?T(U,Q||z):U&&U.matchAs?I(U,z,U.matchAs):Cc(U,z,Q,n)}return{match:A,addRoute:_,getRoutes:b,addRoutes:g}}function Yy(e,n,a){var u=n.match(e);if(u){if(!a)return!0}else return!1;for(var d=1,h=u.length;d<h;++d){var g=e.keys[d-1];g&&(a[g.name||"pathMatch"]=typeof u[d]=="string"?Pc(u[d]):u[d])}return!0}function Kf(e,n){return tm(e,n.parent?n.parent.path:"/",!0)}var im=bu&&window.performance&&window.performance.now?window.performance:Date;function Zf(){return im.now().toFixed(3)}var om=Zf();function yu(){return om}function am(e){return om=e}var sm=Object.create(null);function Rc(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,n=window.location.href.replace(e,""),a=jo({},window.history.state);return a.key=yu(),window.history.replaceState(a,"",n),window.addEventListener("popstate",El),function(){window.removeEventListener("popstate",El)}}function Wo(e,n,a,u){if(e.app){var d=e.options.scrollBehavior;d&&e.app.$nextTick(function(){var h=Xy(),g=d.call(e,n,a,u?h:null);g&&(typeof g.then=="function"?g.then(function(_){Sl(_,h)}).catch(function(_){}):Sl(g,h))})}}function Nc(){var e=yu();e&&(sm[e]={x:window.pageXOffset,y:window.pageYOffset})}function El(e){Nc(),e.state&&e.state.key&&am(e.state.key)}function Xy(){var e=yu();if(e)return sm[e]}function Qy(e,n){var a=document.documentElement,u=a.getBoundingClientRect(),d=e.getBoundingClientRect();return{x:d.left-u.left-n.x,y:d.top-u.top-n.y}}function lm(e){return kr(e.x)||kr(e.y)}function _a(e){return{x:kr(e.x)?e.x:window.pageXOffset,y:kr(e.y)?e.y:window.pageYOffset}}function wu(e){return{x:kr(e.x)?e.x:0,y:kr(e.y)?e.y:0}}function kr(e){return typeof e=="number"}var Al=/^#\d/;function Sl(e,n){var a=typeof e=="object";if(a&&typeof e.selector=="string"){var u=Al.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(u){var d=e.offset&&typeof e.offset=="object"?e.offset:{};d=wu(d),n=Qy(u,d)}else lm(e)&&(n=_a(e))}else a&&lm(e)&&(n=_a(e));n&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:n.x,top:n.y,behavior:e.behavior}):window.scrollTo(n.x,n.y))}var Do=bu&&function(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&typeof window.history.pushState=="function"}();function wo(e,n){Nc();var a=window.history;try{if(n){var u=jo({},a.state);u.key=yu(),a.replaceState(u,"",e)}else a.pushState({key:am(Zf())},"",e)}catch{window.location[n?"replace":"assign"](e)}}function kl(e){wo(e,!0)}function Eu(e,n,a){var u=function(d){d>=e.length?a():e[d]?n(e[d],function(){u(d+1)}):u(d+1)};u(0)}var La={redirected:2,aborted:4,cancelled:8,duplicated:16};function es(e,n){return Au(e,n,La.redirected,'Redirected when going from "'+e.fullPath+'" to "'+Jy(n)+'" via a navigation guard.')}function Yf(e,n){var a=Au(e,n,La.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return a.name="NavigationDuplicated",a}function ua(e,n){return Au(e,n,La.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+n.fullPath+'" with a new navigation.')}function Fo(e,n){return Au(e,n,La.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+n.fullPath+'" via a navigation guard.')}function Au(e,n,a,u){var d=new Error(u);return d._isRouter=!0,d.from=e,d.to=n,d.type=a,d}var um=["params","query","hash"];function Jy(e){if(typeof e=="string")return e;if("path"in e)return e.path;var n={};return um.forEach(function(a){a in e&&(n[a]=e[a])}),JSON.stringify(n,null,2)}function Pl(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Lc(e,n){return Pl(e)&&e._isRouter&&(n==null||e.type===n)}function cm(e){return function(n,a,u){var d=!1,h=0,g=null;Xf(e,function(_,b,A,T){if(typeof _=="function"&&_.cid===void 0){d=!0,h++;var I=Qf(function(Q){t2(Q)&&(Q=Q.default),_.resolved=typeof Q=="function"?Q:Ic.extend(Q),A.components[T]=Q,h--,h<=0&&u()}),F=Qf(function(Q){var te="Failed to resolve async component "+T+": "+Q;g||(g=Pl(Q)?Q:new Error(te),u(g))}),U;try{U=_(I,F)}catch(Q){F(Q)}if(U)if(typeof U.then=="function")U.then(I,F);else{var z=U.component;z&&typeof z.then=="function"&&z.then(I,F)}}}),d||u()}}function Xf(e,n){return dm(e.map(function(a){return Object.keys(a.components).map(function(u){return n(a.components[u],a.instances[u],a,u)})}))}function dm(e){return Array.prototype.concat.apply([],e)}var e2=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol";function t2(e){return e.__esModule||e2&&e[Symbol.toStringTag]==="Module"}function Qf(e){var n=!1;return function(){for(var a=[],u=arguments.length;u--;)a[u]=arguments[u];if(!n)return n=!0,e.apply(this,a)}}var ca=function(n,a){this.router=n,this.base=n2(a),this.current=Xa,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};ca.prototype.listen=function(n){this.cb=n},ca.prototype.onReady=function(n,a){this.ready?n():(this.readyCbs.push(n),a&&this.readyErrorCbs.push(a))},ca.prototype.onError=function(n){this.errorCbs.push(n)},ca.prototype.transitionTo=function(n,a,u){var d=this,h;try{h=this.router.match(n,this.current)}catch(_){throw this.errorCbs.forEach(function(b){b(_)}),_}var g=this.current;this.confirmTransition(h,function(){d.updateRoute(h),a&&a(h),d.ensureURL(),d.router.afterHooks.forEach(function(_){_&&_(h,g)}),d.ready||(d.ready=!0,d.readyCbs.forEach(function(_){_(h)}))},function(_){u&&u(_),_&&!d.ready&&(!Lc(_,La.redirected)||g!==Xa)&&(d.ready=!0,d.readyErrorCbs.forEach(function(b){b(_)}))})},ca.prototype.confirmTransition=function(n,a,u){var d=this,h=this.current;this.pending=n;var g=function(Q){!Lc(Q)&&Pl(Q)&&(d.errorCbs.length?d.errorCbs.forEach(function(te){te(Q)}):console.error(Q)),u&&u(Q)},_=n.matched.length-1,b=h.matched.length-1;if(Gf(n,h)&&_===b&&n.matched[_]===h.matched[b])return this.ensureURL(),g(Yf(h,n));var A=fm(this.current.matched,n.matched),T=A.updated,I=A.deactivated,F=A.activated,U=[].concat(Bc(I),this.router.beforeHooks,hm(T),F.map(function(Q){return Q.beforeEnter}),cm(F)),z=function(Q,te){if(d.pending!==n)return g(ua(h,n));try{Q(n,h,function(Pe){Pe===!1?(d.ensureURL(!0),g(Fo(h,n))):Pl(Pe)?(d.ensureURL(!0),g(Pe)):typeof Pe=="string"||typeof Pe=="object"&&(typeof Pe.path=="string"||typeof Pe.name=="string")?(g(es(h,n)),typeof Pe=="object"&&Pe.replace?d.replace(Pe):d.push(Pe)):te(Pe)})}catch(Pe){g(Pe)}};Eu(U,z,function(){var Q=Su(F),te=Q.concat(d.router.resolveHooks);Eu(te,z,function(){if(d.pending!==n)return g(ua(h,n));d.pending=null,a(n),d.router.app&&d.router.app.$nextTick(function(){jf(n)})})})},ca.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},ca.prototype.setupListeners=function(){},ca.prototype.teardown=function(){this.listeners.forEach(function(n){n()}),this.listeners=[],this.current=Xa,this.pending=null};function n2(e){if(!e)if(bu){var n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return e.charAt(0)!=="/"&&(e="/"+e),e.replace(/\/$/,"")}function fm(e,n){var a,u=Math.max(e.length,n.length);for(a=0;a<u&&e[a]===n[a];a++);return{updated:n.slice(0,a),activated:n.slice(a),deactivated:e.slice(a)}}function Jf(e,n,a,u){var d=Xf(e,function(h,g,_,b){var A=r2(h,n);if(A)return Array.isArray(A)?A.map(function(T){return a(T,g,_,b)}):a(A,g,_,b)});return dm(u?d.reverse():d)}function r2(e,n){return typeof e!="function"&&(e=Ic.extend(e)),e.options[n]}function Bc(e){return Jf(e,"beforeRouteLeave",e0,!0)}function hm(e){return Jf(e,"beforeRouteUpdate",e0)}function e0(e,n){if(n)return function(){return e.apply(n,arguments)}}function Su(e){return Jf(e,"beforeRouteEnter",function(n,a,u,d){return i2(n,u,d)})}function i2(e,n,a){return function(d,h,g){return e(d,h,function(_){typeof _=="function"&&(n.enteredCbs[a]||(n.enteredCbs[a]=[]),n.enteredCbs[a].push(_)),g(_)})}}var pm=function(e){function n(a,u){e.call(this,a,u),this._startLocation=Ba(this.base)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var u=this;if(!(this.listeners.length>0)){var d=this.router,h=d.options.scrollBehavior,g=Do&&h;g&&this.listeners.push(Rc());var _=function(){var b=u.current,A=Ba(u.base);u.current===Xa&&A===u._startLocation||u.transitionTo(A,function(T){g&&Wo(d,T,b,!0)})};window.addEventListener("popstate",_),this.listeners.push(function(){window.removeEventListener("popstate",_)})}},n.prototype.go=function(u){window.history.go(u)},n.prototype.push=function(u,d,h){var g=this,_=this,b=_.current;this.transitionTo(u,function(A){wo(Ms(g.base+A.fullPath)),Wo(g.router,A,b,!1),d&&d(A)},h)},n.prototype.replace=function(u,d,h){var g=this,_=this,b=_.current;this.transitionTo(u,function(A){kl(Ms(g.base+A.fullPath)),Wo(g.router,A,b,!1),d&&d(A)},h)},n.prototype.ensureURL=function(u){if(Ba(this.base)!==this.current.fullPath){var d=Ms(this.base+this.current.fullPath);u?wo(d):kl(d)}},n.prototype.getCurrentLocation=function(){return Ba(this.base)},n}(ca);function Ba(e){var n=window.location.pathname;return e&&n.toLowerCase().indexOf(e.toLowerCase())===0&&(n=n.slice(e.length)),(n||"/")+window.location.search+window.location.hash}var t0=function(e){function n(a,u,d){e.call(this,a,u),!(d&&mm(this.base))&&n0()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var u=this;if(!(this.listeners.length>0)){var d=this.router,h=d.options.scrollBehavior,g=Do&&h;g&&this.listeners.push(Rc());var _=function(){var A=u.current;n0()&&u.transitionTo(qo(),function(T){g&&Wo(u.router,T,A,!0),Do||Dc(T.fullPath)})},b=Do?"popstate":"hashchange";window.addEventListener(b,_),this.listeners.push(function(){window.removeEventListener(b,_)})}},n.prototype.push=function(u,d,h){var g=this,_=this,b=_.current;this.transitionTo(u,function(A){vm(A.fullPath),Wo(g.router,A,b,!1),d&&d(A)},h)},n.prototype.replace=function(u,d,h){var g=this,_=this,b=_.current;this.transitionTo(u,function(A){Dc(A.fullPath),Wo(g.router,A,b,!1),d&&d(A)},h)},n.prototype.go=function(u){window.history.go(u)},n.prototype.ensureURL=function(u){var d=this.current.fullPath;qo()!==d&&(u?vm(d):Dc(d))},n.prototype.getCurrentLocation=function(){return qo()},n}(ca);function mm(e){var n=Ba(e);if(!/^\/#/.test(n))return window.location.replace(Ms(e+"/#"+n)),!0}function n0(){var e=qo();return e.charAt(0)==="/"?!0:(Dc("/"+e),!1)}function qo(){var e=window.location.href,n=e.indexOf("#");return n<0?"":(e=e.slice(n+1),e)}function ba(e){var n=window.location.href,a=n.indexOf("#"),u=a>=0?n.slice(0,a):n;return u+"#"+e}function vm(e){Do?wo(ba(e)):window.location.hash=e}function Dc(e){Do?kl(ba(e)):window.location.replace(ba(e))}var Fc=function(e){function n(a,u){e.call(this,a,u),this.stack=[],this.index=-1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.push=function(u,d,h){var g=this;this.transitionTo(u,function(_){g.stack=g.stack.slice(0,g.index+1).concat(_),g.index++,d&&d(_)},h)},n.prototype.replace=function(u,d,h){var g=this;this.transitionTo(u,function(_){g.stack=g.stack.slice(0,g.index).concat(_),d&&d(_)},h)},n.prototype.go=function(u){var d=this,h=this.index+u;if(!(h<0||h>=this.stack.length)){var g=this.stack[h];this.confirmTransition(g,function(){var _=d.current;d.index=h,d.updateRoute(g),d.router.afterHooks.forEach(function(b){b&&b(g,_)})},function(_){Lc(_,La.duplicated)&&(d.index=h)})}},n.prototype.getCurrentLocation=function(){var u=this.stack[this.stack.length-1];return u?u.fullPath:"/"},n.prototype.ensureURL=function(){},n}(ca),Si=function(n){n===void 0&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Zy(n.routes||[],this);var a=n.mode||"hash";switch(this.fallback=a==="history"&&!Do&&n.fallback!==!1,this.fallback&&(a="hash"),bu||(a="abstract"),this.mode=a,a){case"history":this.history=new pm(this,n.base);break;case"hash":this.history=new t0(this,n.base,this.fallback);break;case"abstract":this.history=new Fc(this,n.base);break;default:}},zc={currentRoute:{configurable:!0}};Si.prototype.match=function(n,a,u){return this.matcher.match(n,a,u)},zc.currentRoute.get=function(){return this.history&&this.history.current},Si.prototype.init=function(n){var a=this;if(this.apps.push(n),n.$once("hook:destroyed",function(){var g=a.apps.indexOf(n);g>-1&&a.apps.splice(g,1),a.app===n&&(a.app=a.apps[0]||null),a.app||a.history.teardown()}),!this.app){this.app=n;var u=this.history;if(u instanceof pm||u instanceof t0){var d=function(g){var _=u.current,b=a.options.scrollBehavior,A=Do&&b;A&&"fullPath"in g&&Wo(a,g,_,!1)},h=function(g){u.setupListeners(),d(g)};u.transitionTo(u.getCurrentLocation(),h,h)}u.listen(function(g){a.apps.forEach(function(_){_._route=g})})}},Si.prototype.beforeEach=function(n){return ts(this.beforeHooks,n)},Si.prototype.beforeResolve=function(n){return ts(this.resolveHooks,n)},Si.prototype.afterEach=function(n){return ts(this.afterHooks,n)},Si.prototype.onReady=function(n,a){this.history.onReady(n,a)},Si.prototype.onError=function(n){this.history.onError(n)},Si.prototype.push=function(n,a,u){var d=this;if(!a&&!u&&typeof Promise<"u")return new Promise(function(h,g){d.history.push(n,h,g)});this.history.push(n,a,u)},Si.prototype.replace=function(n,a,u){var d=this;if(!a&&!u&&typeof Promise<"u")return new Promise(function(h,g){d.history.replace(n,h,g)});this.history.replace(n,a,u)},Si.prototype.go=function(n){this.history.go(n)},Si.prototype.back=function(){this.go(-1)},Si.prototype.forward=function(){this.go(1)},Si.prototype.getMatchedComponents=function(n){var a=n?n.matched?n:this.resolve(n).route:this.currentRoute;return a?[].concat.apply([],a.matched.map(function(u){return Object.keys(u.components).map(function(d){return u.components[d]})})):[]},Si.prototype.resolve=function(n,a,u){a=a||this.history.current;var d=_u(n,a,u,this),h=this.match(d,a),g=h.redirectedFrom||h.fullPath,_=this.history.base,b=ku(_,g,this.mode);return{location:d,route:h,href:b,normalizedTo:d,resolved:h}},Si.prototype.getRoutes=function(){return this.matcher.getRoutes()},Si.prototype.addRoute=function(n,a){this.matcher.addRoute(n,a),this.history.current!==Xa&&this.history.transitionTo(this.history.getCurrentLocation())},Si.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Xa&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Si.prototype,zc);function ts(e,n){return e.push(n),function(){var a=e.indexOf(n);a>-1&&e.splice(a,1)}}function ku(e,n,a){var u=a==="hash"?"#"+n:n;return e?Ms(e+"/"+u):u}Si.install=$o,Si.version="3.5.1",Si.isNavigationFailure=Lc,Si.NavigationFailureType=La,Si.START_LOCATION=Xa,bu&&window.Vue&&window.Vue.use(Si);var r0=Si,Bi=ir(4338);function gm(e,n={}){const a=(0,Ir.ref)(!1),u={render:()=>a.value&&(0,Ir.h)(e,{props:n})},d={mount(h){a.value=!0,new Ir.default(u).$mount(h)},use(h){return h instanceof Bi.default.Store?u.store=h:h instanceof r0?u.router=h:Ir.default.use(h),d},unmount(){a.value=!1}};return d}function ns(e){return[...document.querySelectorAll(e)]}function Ko(e,n,a,u,d){const h=ns(e),g=[];let _={};if(h.length===0)return g;for(const b of h){let A=!0;typeof a=="function"&&(_=a(b)),u&&(b.dataset[u]?A=!1:b.dataset[u]=!0);const T={el:b};if(d&&(T.store=d),A){const I=Object.assign(T,n,{propsData:_}),F=gm(I,_);typeof I.render!="function"&&typeof I.template>"u"&&(I.template=b.outerHTML),typeof I.store<"u"&&(F.use(I.store),delete I.store),delete I.propsData,delete I.el,F.mount(b)}}return g}var xs=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component,attrs:{id:n.shortDiagramId,tabindex:"-1"},on:{blur:n.blur,focus:n.focus,keydown:n.onKeyDown}},[a("div",{class:[n.$style.body,{"diagram-viewer-full-width":!n.simpleDiagram}]},[a("diagram-header",{attrs:{"game-id":n.id}}),n._v(" "),a("diagram-analysis",{attrs:{"game-id":n.id}}),n._v(" "),a("diagram-board",{attrs:{"game-id":n.id,type:n.type},on:{"wrapper-click":n.focusOnWidget}}),n._v(" "),a("diagram-button-bar",{attrs:{"game-id":n.id},on:{"trigger-move-forward":n.triggerMoveForward}}),n._v(" "),n.simpleDiagram?n._e():a("diagram-move-list",{ref:"moveList",attrs:{"game-id":n.id},on:{"focus-on-widget":n.focusOnWidget}}),n._v(" "),n.multiPgnViewer?a("diagram-game-list",{attrs:{"game-id":n.id}}):n._e(),n._v(" "),n.initShareModal?a("diagram-share-modal",{attrs:{"game-id":n.id}}):n._e()],1)])},Is=[];const rs=e=>e.split("_")[0];function Da(e,n){const a=e.getNodeIds();if(!(a.move<0))return Array.from(n.$el.querySelectorAll(".move-node")).find(u=>u.getAttribute("data-id")===`move-node-${a.line}-${a.move}`)}function Uc(e,n,a){let u=a;n&&u!==""&&(u.includes(`
`)&&(u+=`
`),e[n]=u)}function _m(e,n){let a=e;return a!==""&&(a+=`
`),a+=n}const Hc=e=>e.match("&-[a-z]+:");function o2(e){let n=e.substring(2,e.length-1);return n.indexOf(":")===n.length-1&&(n=n.substring(0,n.length-1)),n}function Di(e){const n={};let a=null,u="";return e.split(`
`).forEach(d=>{const h=d.trim();Hc(h)?(Uc(n,a,u),a=o2(h),u=""):a&&(u=_m(u,h))}),Uc(n,a,u),n}function a2(e,n){const a=/([12]\d{3}\.(0[1-9]|1[0-2]|\?\?)\.(0[1-9]|[12]\d|3[01]|\?\?))/g;let u="";if(e.match(a)){const[d,h,g]=e.split(".");if(d!==Ar.YEAR&&(u+=d,n.year=d,h!==Ar.MONTHS)){const _=ot,b=Number(h)-1;_[b]&&(u=`${_[b]} ${u}`,g!==Ar.DAY&&(u=`${g} ${u}`))}}return n.date=u,n}const so=e=>e.replace(/&#(\d+);/g,(n,a)=>String.fromCharCode(a));function s2(e,n,a){let u=Ar.COMMON;return e[n]?(n===Wt.RESULT&&(u=Ar.RESULT),e[n]===u?a[n]="":e[n]===Wt.WHITE||Wt.BLACK||Wt.SITE||Wt.EVENT?a[n]=so(e[n]):a[n]=e[n],a[Wt.RESULT]===Ar.COMMON&&(a[Wt.RESULT]=""),a.whiteElo===Ar.COMMON&&(a.whiteElo=""),a.blackElo===Ar.COMMON&&(a.blackElo=""),a):!1}function l2(e){const n={annotator:e.annotator,black:e.black||"",blackElo:e.blackelo,currentPosition:e.currentposition,date:"",eco:e.eco,eventDate:e.eventdate,fen:e.fen,opening:e.opening,playCount:e.plycount,setUp:e.setup,sourceDate:e.sourcedate,white:e.white||"",whiteElo:e.whiteelo};return[Wt.BLACK,Wt.EVENT,Wt.RESULT,Wt.ROUND,Wt.SITE,Wt.WHITE].forEach(a=>s2(e,a,n)),e.date&&a2(e.date,n),n}function u2(e){const n=e.findIndex(a=>a.trim()==="");return e.slice(0,n)}function c2(e,n){return e.forEach(a=>{const u=a.slice(1,-1).split('"'),d=u[0].toLowerCase().trim(),h=u[1];n[d]=h}),n}const no=e=>e.split(`
`);function Gc(e){const n=no(e),a=u2(n),u=c2(a,{});return l2(u)}function d2(e){const n=Di(e),a={beginNode:Number(n.beginnode)||0,boardCoords:n.coords==="true",boardFlip:n.flip==="true",boardFloat:n.float,boardPrompt:n.prompt==="true",boardSize:Number(n.size),colorScheme:n.colorscheme,diagramType:n.diagramtype,endNode:Number(n.endnode)||0,focusNode:Number(n.focusnode)||0,lastMove:n.lastmove,hideGlobalButtons:n.hideglobalbuttons==="true",pgnBody:n.pgnbody,pieceStyle:n.piecestyle,tags:Gc(n.pgnbody)};return n.movelistcontrol&&(a.moveListControl=n.movelistcontrol),n.commentbox&&(a.commentBox=n.commentbox),a}function Vc(e){const n="&-diagramtype:";let a=e.split(n);return a=a.slice(1),a=a.map(u=>d2(`${n}${u}`)),a.length===1?a:a.filter(u=>Df(u.diagramType))}var Cl=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("form",{attrs:{id:n.formId,method:"POST",target:"_blank",action:n.routes.analysis}},[a("input",{attrs:{name:"pgn",type:"hidden"},domProps:{value:n.setup.pgnBody}}),n._v(" "),a("input",{attrs:{name:"fen",type:"hidden"},domProps:{value:n.fen}})])])},i0=[],fo={props:{gameId:{type:String,required:!0}},computed:{...(0,Bi.mapGetters)("diagramViewer",["getGameById","getViewerById"]),currentGame(){return this.getGameById(this.gameId)},games(){return this.getViewerById(this.gameId).games},setup(){const{setup:e}=this.getGameById(this.gameId);return e}}},f2={name:"DiagramAnalysis",mixins:[fo],data(){return{routes:Tn}},computed:{fen(){return this.setup.tags.fen||""},formId(){return`diagram-${this.gameId}-analysis`}}},ho=f2,Eo={component:"diagram-analysis-component"};function li(e,n,a,u,d,h,g,_){var b=typeof e=="function"?e.options:e;n&&(b.render=n,b.staticRenderFns=a,b._compiled=!0),u&&(b.functional=!0),h&&(b._scopeId="data-v-"+h);var A;if(g?(A=function(F){F=F||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!F&&typeof __VUE_SSR_CONTEXT__<"u"&&(F=__VUE_SSR_CONTEXT__),d&&d.call(this,F),F&&F._registeredComponents&&F._registeredComponents.add(g)},b._ssrRegister=A):d&&(A=_?function(){d.call(this,(b.functional?this.parent:this).$root.$options.shadowRoot)}:d),A)if(b.functional){b._injectStyles=A;var T=b.render;b.render=function(U,z){return A.call(z),T(U,z)}}else{var I=b.beforeCreate;b.beforeCreate=I?[].concat(I,A):[A]}return{exports:e,options:b}}function Pu(e){this.$style=Eo.locals||Eo}var o0=li(ho,Cl,i0,!1,Pu,null,null),a0=o0.exports,bm=function(){var n=this,a=n._self._c;return a("div",{class:[n.$style.component,{[n.$style.cursor]:!n.isPuzzle}],on:{click:n.wrapperClickEvent}},[a("chess-board",{ref:"board",attrs:{mode:n.chessboardMode,identifier:n.gameId,options:n.currentGame.boardOptions,plugins:n.plugins},on:{makeMove:n.makeBoardMove,mounted:n.onBoardMount,nodeChange:function(u){return n.onNodeChange(n.gameId)}}})],1)},s0=[];function h2(e,n,a){const u=e.getRawLines()[0],d=u.find(b=>b.move===a?.move&&b.moveNumber===a?.moveNumber);let h=u[0];if(d){const b=u.indexOf(d)+1,A=u[b];if(!A)return!1;h=A}const _=h.promotion&&n.promotion?h.promotion===n.promotion:!0;return h.from===n.from&&h.to===n.to&&_}let Zi;function Cu(){var e;return(e=window.chesscom)!=null&&e.amplitude?window.chesscom.amplitude:(Zi||(Zi=ir.e(790).then(ir.t.bind(ir,3790,23)).then(({default:n})=>{var a,u,d,h;const{user:g,amplitudeKey:_}=window.context||{},b=g&&!g.isGuest?g.id:null,A={includeUtm:!0,includeReferrer:!0,includeGclid:!0,saveParamsReferrerOncePerSession:!1};if((u=(a=window.chesscom)==null?void 0:a.features)!=null&&u.includes("amplitude_domain_proxy")&&["www.chess.com","www.chess-4.com"].includes(window.location.hostname)&&(A.apiEndpoint=window.location.hostname.replace("www","amplitude")),(h=(d=window.chesscom)==null?void 0:d.features)!=null&&h.includes("marketing_middleware_serverside_device_id_generation")){const T=mp("me");if(T){const I=JSON.parse(decodeURIComponent(T));A.deviceId=I.deviceId}}return n.getInstance().init(_,null,A),n.getInstance().setUserId(b),window.chesscom.amplitude=n,n})),Zi)}function ym(e,n){return e&&Dp(e,n,js)}var wm=ym;function Em(e){return typeof e=="function"?e:_c}var Am=Em;function p2(e,n){return e&&wm(e,Am(n))}var So=p2,m2=So;async function Fa(e){const n=await Cu();if(e==null)return;const a=new n.Identify;m2(e,(u,d)=>{a.add(d,u)}),n.getInstance().identify(a)}async function Sm(e){const n=await Cu();e!=null&&n.getInstance().setUserProperties(e)}async function Tu(e,n,a,u){const d=await Cu();await Sm(a),await Fa(u),d.getInstance().logEvent(e,n||{})}var l0={init:Cu,logEvent:Tu},km=function(){var n=this,a=n._self._c;return a("chess-board",{staticClass:"board",attrs:{id:`board-${n.identifier}`},on:{pointerdown:function(u){return n.$emit("onPointerDown")},click:function(u){return n.$emit("click")}}})},ya=[];const v2=[mn.w.APIEvents.CreateGame,mn.w.APIEvents.DeletePosition,mn.w.APIEvents.Load,mn.w.APIEvents.Move,mn.w.APIEvents.MoveBackward,mn.w.APIEvents.MoveForward,mn.w.APIEvents.MoveVariation,mn.w.APIEvents.PromoteVariation,mn.w.APIEvents.SelectLineEnd,mn.w.APIEvents.SelectLineStart,mn.w.APIEvents.SelectNode,mn.w.APIEvents.ResetToMainLine],Tl={},u0=document.getElementById(ep.NAV_ROOT),Zo=(e,n)=>{var a,u;if((u=(a=window.chesscom)==null?void 0:a.features)==null?void 0:u.includes(e))return!0;const h=n||u0;return Tl[e]||(Tl[e]=!!(h&&h.getAttribute(e))),Tl[e]},Ml={CHESSBOARD_BETA:"chessboard_beta",CHESSBOARD_EFFECTS_SYNC:"chessboard_annotations_effects_sync",CHESSBOARD_RECORDER_PLUGIN:"chessboard_recorder_plugin",LEAGUES_PRODUCT:"leagues_product",UPGRADE_MODAL_COURSE_COMPLETION:"lessons_upgrade_modal_course_completion",WDL_EVAL_BAR_OPTION:"wdl_eval_bar_option"},g2=["boardStyle","coordinates","darkMode","highlightLegalMoves","moveListDisplayType","moveMethod","pieceStyle","real3D","autoPromote","autoClaimDraw","disableUserMarkings","enabled","id","legalPositionCheck","soundTheme","animationType"],c0=(()=>{const e={};return({api:n,options:a})=>{if(!n.getVersion)return;const u=n.getVersion();e[u]||console.log("CHESSBOARD VERSION:",u),e[u]=g2.reduce((d,h)=>(d[h]=a[h],d),{}),window.context.chessboardOptionsByVersion=e}})();var _2={name:"ChessboardOptionsUserSnapPlugin",create:c0,match:[{condition:e=>e.type===mn.w.OptionsEvents.Update,handler:(e,n)=>c0(n)}]};function Pm(e){wf(gc.BodyClass.Real3d,e)}const b2=100;function d0(e,n){setTimeout(()=>{window.toaster&&e in window.toaster?window.toaster[e](n):d0(e,n)},b2)}var ro=window.toaster||{add(e){d0("add",e)},remove(e){d0("remove",e)}},y2=function(){return tn.Date.now()},jc=y2,w2="[object Symbol]";function Yo(e){return typeof e=="symbol"||Cr(e)&&w(e)==w2}var Cm=Yo,Tm=0/0,os=/^\s+|\s+$/g,E2=/^[-+]0x[0-9a-f]+$/i,Mm=/^0b[01]+$/i,A2=/^0o[0-7]+$/i,S2=parseInt;function k2(e){if(typeof e=="number")return e;if(Cm(e))return Tm;if(q(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=q(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(os,"");var a=Mm.test(e);return a||A2.test(e)?S2(e.slice(2),a?2:8):E2.test(e)?Tm:+e}var $c=k2,P2="Expected a function",f0=Math.max,Om=Math.min;function xm(e,n,a){var u,d,h,g,_,b,A=0,T=!1,I=!1,F=!0;if(typeof e!="function")throw new TypeError(P2);n=$c(n)||0,q(a)&&(T=!!a.leading,I="maxWait"in a,h=I?f0($c(a.maxWait)||0,n):h,F="trailing"in a?!!a.trailing:F);function U(Ut){var sn=u,Ln=d;return u=d=void 0,A=Ut,g=e.apply(Ln,sn),g}function z(Ut){return A=Ut,_=setTimeout(Pe,n),T?U(Ut):g}function Q(Ut){var sn=Ut-b,Ln=Ut-A,Hn=n-sn;return I?Om(Hn,h-Ln):Hn}function te(Ut){var sn=Ut-b,Ln=Ut-A;return b===void 0||sn>=n||sn<0||I&&Ln>=h}function Pe(){var Ut=jc();if(te(Ut))return Ce(Ut);_=setTimeout(Pe,Q(Ut))}function Ce(Ut){return _=void 0,F&&u?U(Ut):(u=d=void 0,g)}function He(){_!==void 0&&clearTimeout(_),A=0,u=b=d=_=void 0}function it(){return _===void 0?g:Ce(jc())}function Pt(){var Ut=jc(),sn=te(Ut);if(u=arguments,d=this,b=Ut,sn){if(_===void 0)return z(b);if(I)return clearTimeout(_),_=setTimeout(Pe,n),U(b)}return _===void 0&&(_=setTimeout(Pe,n)),g}return Pt.cancel=He,Pt.flush=it,Pt}var Im=xm,h0="Expected a function";function Rm(e,n,a){var u=!0,d=!0;if(typeof e!="function")throw new TypeError(h0);return q(a)&&(u="leading"in a?!!a.leading:u,d="trailing"in a?!!a.trailing:d),Im(e,n,{leading:u,maxWait:n,trailing:d})}var Mu=Rm,Nm=Mu;async function Wc(e=0){var n;if(!await uu())return;window.chesscom.sudoEnableSentry=!0;const a=await lu();for(;(n=window.chesscom.queuedSentryReports)!=null&&n.length;)a.captureException(window.chesscom.queuedSentryReports.shift());if(e>0){const u=Date.now()+e*24*60*60*1e3;window.localStorage.setItem("enableSentryUntil",u.toString())}}async function Lm(e,n){if(!await uu())return;Wc();const a=await lu(),u=e instanceof Error?e:new Error(e);n?a.withScope(d=>{Object.keys(n).forEach(h=>d.setExtra(h,n[h])),a.captureException(u)}):a.captureException(u)}var T2={name:"RendererSetFailedFallbackPlugin",match:[{condition:e=>e.type===mn.w.InstanceEvents.RendererSetFailed,handler:Nm(e=>{var n,a;Pm(!1),(n=e?.data)!=null&&n.isWebGLRenderError?ro.add({content:x('WebGL is not supported by your browser, so some of your Piece or Animation Type <a href="/settings/board" target="_blank">settings</a> are ignored.'),icon:"circle-x",duration:12e3}):ro.add({content:x('Issue rendering board, some of your <a href="/settings/board" target="_blank">settings</a> will be ignored.'),icon:"circle-x",duration:12e3}),Lm(e.type,(a=e?.data)==null?void 0:a.error)},12500,{trailing:!1})}]},Ao;(e=>{let n;(d=>{d.BoardId="board-id",d.ColorsEnabled="colors-enabled",d.Direction="direction",d.DisableContextMenu="disable-context-menu",d.DisplayType="display-type",d.EngineName="engine-name",d.GameId="game-id",d.IsActive="is-active",d.Lines="lines",d.LinkToExplorer="link-to-explorer",d.MoveListId="move-list-id",d.OpeningIsClickable="opening-is-clickable",d.ExplorerIsClickable="explorer-is-clickable",d.ResultNodeIsSelectable="result-node-is-selectable",d.ScrollContainerId="scroll-container-id",d.TimestampMethod="timestamp-method",d.ToggleTimestamps="toggle-timestamps",d.Color="color",d.UpdateManually="update-manually",d.VerticalLayout="vertical-layout"})(n=e.ObservedAttributes||(e.ObservedAttributes={}));let a;(d=>{d.BoardInitialized="board-initialized",d.BoardAttached="board-attached",d.BoardDetached="board-detached"})(a=e.Events||(e.Events={}));let u;(d=>{d.ChessBoard="chess-board",d.HorizontalMoveList="horizontal-move-list",d.VerticalMoveList="vertical-move-list",d.CapturedPieces="captured-pieces",d.EcoOpening="eco-opening",d.MoveList="move-list"})(u=e.Elements||(e.Elements={}))})(Ao||(Ao={}));var qc=Object.defineProperty,Bm=(e,n,a)=>n in e?qc(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,Dm=(e,n,a)=>(Bm(e,typeof n!="symbol"?n+"":n,a),a);let p0;class M2 extends HTMLElement{constructor(){super(...arguments),Dm(this,"game")}createGame(n){const a=[...n.plugins||[],T2];this.game=(0,mn.ba)({...n,plugins:a}),this.game.on("CheatDetectionError",u=>{Lm(u.type,u.data)}),this.game.plugins.add(_2),Zo(Ml.CHESSBOARD_EFFECTS_SYNC)||(this.game.plugins.remove("effectsHMLSync"),this.game.onMany([mn.w.InstanceEvents.Create,mn.w.InstanceEvents.ModeChanged],()=>this.game.plugins.remove("effectsHMLSync"))),Zo(Ml.CHESSBOARD_RECORDER_PLUGIN)&&this.game.plugins.add((0,mn.c6)()),this.dispatchEvent(new CustomEvent(Ao.Events.BoardInitialized,{detail:this.game.getOptions().id}))}init({boardStyles:n,createRenderer:a,emitter:u,init:d,mode:h,options:g,plugins:_,pieceStyles:b}){this.innerHTML="";const A=Object.assign((0,mn.ce)(),g,{test:!!window.Cypress}),T=this;return this.createGame({el:T,emitter:u,init:d,mode:h,options:A,plugins:O2(_),renderer:a?.({boardStyles:n,el:T,options:A,pieceStyles:b})}),this.game}get options(){var n;return(n=this.game)==null?void 0:n.getOptions()}connectedCallback(){this.dispatchEvent(new CustomEvent(Ao.Events.BoardAttached))}disconnectedCallback(){this.dispatchEvent(new CustomEvent(Ao.Events.BoardDetached))}}function O2(e=[]){const n=Ag((0,mn.b7)(),e);return p0||(p0=(0,mn.c7)()),[...n.filter(a=>a.name!==mn.bu.Sounds.Plugin.Name),p0]}class Fm{constructor(){this.listener=this.handleKeyBindingEvent.bind(this)}handleKeyBindingEvent(n){if(this.keys[n.key]){if(this.excludeInputs){const a=document.activeElement;if(!a||a.isContentEditable||["INPUT","TEXTAREA"].includes(a.tagName))return}this.keys[n.key](n),this.once&&this.unregister()}}register({event:n="keydown",excludeInputs:a=!1,keys:u,once:d=!1,target:h=window}){this.event=n,this.once=d,this.keys=u,this.target=h,this.excludeInputs=a,this.target.addEventListener(this.event,this.listener)}unregister(){var n;(n=this.target)==null||n.removeEventListener(this.event,this.listener)}}var t5=new Fm;typeof customElements<"u"&&!customElements.get("chess-board")&&customElements.define("chess-board",M2);var x2={name:"Board",props:{canAddMovesToMainLine:{type:Boolean,default:!0},canDropPiecesContinuously:{type:Boolean,default:!1},canInteractWithPieces:{type:Boolean,default:!0},canModifyExistingMovesOnMainLine:{type:Boolean,default:!1},canMoveWhenGameIsOver:{type:Boolean,default:!1},hasCustomArrowHandler:{type:Boolean,default:!1},identifier:{type:String,required:!0},mode:{type:String,default:mn.ch.Types.Playing},nodeChangeEvents:{type:Array,default:()=>[...v2,mn.w.APIEvents.NodeUpdated]},options:{type:Object,required:!0},plugins:{type:Array,default:()=>[]},playingAs:{type:Number,default:1,validator:e=>[1,2].includes(e)}},emits:["moveBackward","moveToEnd","moveForward","moveToStart","makeMove","nodeChange","mounted","click","onPointerDown","flipBoard"],data(){return{keyBindings:new Fm}},watch:{canAddMovesToMainLine:"setMode",canModifyExistingMovesOnMainLine:"setMode",playingAs:"setPlayingAs",mode:"setMode",options:{handler:"handleOptionsChange",deep:!0}},created(){Zp(`chessboard-${this.identifier}-mounted`),Ir.default.config.ignoredElements.push("chess-board")},mounted(){this.$el.init({mode:this.getMode(),options:this.getOptions(),plugins:[...this.mode==="playing-with-premoves"?[(0,mn.c3)()]:[],...this.plugins]}),this.$emit("mounted"),wc.emit(`chessboard-${this.identifier}-mounted`);const{game:e}=this.$el;e.resize(),window.addEventListener("resize",e.resize),e.onAll(({type:n})=>{this.nodeChangeEvents.includes(n)&&this.$emit("nodeChange",e)}),e.on(mn.w.APIEvents.Move,n=>{this.$emit("makeMove",n)}),e.on(mn.w.OptionsEvents.Update,({data:n})=>{n.flipped!==void 0&&this.$emit("flipBoard",n.flipped)}),this.handleOptionsChange(),(0,Ir.nextTick)(this.setPlayingAs),this.hasCustomArrowHandler&&(e.plugins.remove(mn.bu.ArrowKeys.Plugin.Name),this.keyBindings.register({excludeInputs:!0,keys:{ArrowUp:n=>this.$emit("moveToStart",n),ArrowRight:n=>this.$emit("moveForward",n),ArrowDown:n=>this.$emit("moveToEnd",n),ArrowLeft:n=>this.$emit("moveBackward",n)}}))},beforeDestroy(){window.removeEventListener("resize",this.$el.game.resize),this.keyBindings.unregister()},methods:{getMode(){const e={canAddMovesToMainLine:this.canAddMovesToMainLine,canInteractWithPieces:this.canInteractWithPieces,canModifyExistingMovesOnMainLine:this.canModifyExistingMovesOnMainLine,canMoveWhenGameIsOver:this.canMoveWhenGameIsOver,canDropPiecesContinuously:this.canDropPiecesContinuously};return{[mn.ch.Types.Analysis]:mn.bv.create(e),[mn.ch.Types.Playing]:mn.bB.create(e),[mn.ch.Types.Explorer]:mn.bx.create(e),[mn.ch.Types.PassiveObserving]:mn.bA.create(e),[mn.ch.Types.Observing]:mn.bz.create(e),"playing-with-premoves":mn.bB.create(e),[mn.ch.Types.Setup]:mn.bC.create(e)}[this.mode]},getOptions(){return{...Ks(this.options),coordinates:this.options.coordinates||"off",id:this.identifier,flipped:this.options.flipBoard}},handleOptionsChange(){var e;(e=this.$el.game)==null||e.setOptions(this.getOptions())},setMode(){const{game:e}=this.$el;e.plugins.remove(mn.bu.Premoves.Plugin.Name),e.setMode(this.getMode()),this.mode==="playing-with-premoves"&&e.plugins.add((0,mn.c3)())},setPlayingAs(){var e,n;(n=(e=this.$el.game).setPlayingAs)==null||n.call(e,this.playingAs)},getGame(){return this.$el.game}}},Ou=x2,zm={};function I2(e){this.$style=zm.locals||zm}var R2=li(Ou,km,ya,!1,I2,null,null),N2=R2.exports,Kc={name:"DiagramBoard",components:{ChessBoard:N2},mixins:[fo],props:{type:{type:String,required:!0}},emits:["wrapper-click"],data(){return{plugins:[(0,mn.bS)()]}},computed:{...(0,Bi.mapGetters)("diagramViewer",["isChessProblem","isWhiteMove"]),lastAvailableUserMove(){const e=this.currentGame,n=e.game,u=e.setup.puzzleSetup.puzzleMoveList.length+1||1,d=n.getRawLines()[0].length,h=u===d,_=!n.canMoveForward(3)&&!dl(e,3);return h||_},lastMovePlayed(){return this.currentGame.setup.puzzleSetup.lastMovePlayed},chessboardMode(){return this.isPuzzle?"analysis":"passive-observing"},isPuzzle(){return this.isChessProblem(this.gameId)}},methods:{...(0,Bi.mapActions)("diagramViewer",["correctMove","loadFromPgn","selectNode","onNodeChange","selectLineStart"]),...(0,Bi.mapMutations)("diagramViewer",["changePuzzleButtonText","firstTryOfLastMove","pushMoveOnPuzzleMoveList","changeSolveState"]),logAmplitude(e){const n=e?Ot.SOLVED:Ot.FAILED;l0.logEvent(at.DAILY_PUZZLE,{result:n})},makeBoardMove(e){var n,a;const u=this.currentGame.game,d=this.gameId,h=(n=e?.data)==null?void 0:n.move;let g;const _={move:0,line:0},b=(a=u.getSelectedNode().ids)!=null?a:_;b.move>0?g=u.getNodeByIds({move:b.move-1,line:0}):g=void 0;const A=h2(u,h,g);if(this.type===pr.DAILY_PUZZLE&&this.lastAvailableUserMove&&!this.lastMovePlayed&&(this.logAmplitude(A),this.firstTryOfLastMove(d)),u.clearMarkings(),this.changeSolveState({id:d,solveState:"none"}),A){const T=u.getSelectedNode();this.pushMoveOnPuzzleMoveList({id:d,move:T}),this.correctMove({id:d,text:ft.CORRECT,type:"board"})}else this.changePuzzleButtonText({id:d,text:ft.INCORRECT}),setTimeout(()=>{this.selectNode({id:d,ids:b}),u.deletePosition(0,1);const T=this.isWhiteMove(d)?ft.WHITE_TO_MOVE:ft.BLACK_TO_MOVE;this.changePuzzleButtonText({id:d,text:T})},kt.TIMEOUT)},wrapperClickEvent(){this.$emit("wrapper-click")},onBoardMount(){Sg(this.$refs.board.getGame(),this.gameId),wc.emit(at.BOARD_INITIALIZED)}}},wa=Kc,Zc={component:"diagram-board-component",cursor:"diagram-board-cursor"};function as(e){this.$style=Zc.locals||Zc}var Um=li(wa,bm,s0,!1,as,null,null),m0=Um.exports,v0=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:n.hideControls,expression:"hideControls"}],class:n.$style["wrapper-actions"]},[a("diagram-button",{class:n.$style["toggle-button"],attrs:{icon:"menu",click:n.toggleControls}}),n._v(" "),n._l(n.filteredButtons(n.mainActions),function(u){return a("diagram-button",{key:u.id,attrs:{click:u.click,icon:u.icon,title:u.title}})}),n._v(" "),a("div",{class:[n.$style.actions,{[n.$style.active]:n.isShowingActions},{[n.$style["empty-controls"]]:n.filteredButtons(n.controls).length===0}]},n._l(n.filteredButtons(n.secondaryActions),function(u){return a("diagram-button",{key:u.id,class:[n.$style["action-button"],n.$style["action-button-"+u.icon]],attrs:{"is-showing-title":"",click:u.click,icon:u.icon,title:u.title},on:{"additional-event":n.hideControls}})}),1)],2),n._v(" "),n.showControlsButtons?a("div",{class:n.$style.wrapper},n._l(n.filteredButtons(n.controls),function(u){return a("diagram-button",{key:u.id,class:[n.$style["action-button"],n.$style["action-button-"+u.icon]],attrs:{click:u.click,icon:u.icon,title:u.title}})}),1):n._e()])},g0=[];const _0=[{click(){this.hint()},icon:Jt.HINT,show:Vo.CHESS_PROBLEM,title:Mn.hint},{click(){this.solution()},icon:Jt.SOLUTION,show:Vo.CHESS_PROBLEM,title:Mn.solution},{click(){this.reset()},icon:Jt.RESET,show:Vo.CHESS_PROBLEM,title:Mn.reset}],b0=[{click(){this.formSubmit()},icon:Jt.ANALYSIS,show:kt.ANALYSIS,title:Mn.analysis},{click(){this.boardFlip()},icon:Jt.FLIPBOARD,show:Vo.CHESS_PROBLEM,title:Mn.flipBoard},{click(){this.openShareModal()},icon:Jt.SHARE,show:"",title:Mn.share},{click(){this.downloadMultiPgn()},icon:Jt.DOWNLOAD,show:kt.MULTI_PGN_VIEWER,title:Mn.download},{click(){this.boardFlip()},icon:Jt.FLIPBOARD,show:Vo.CHESS_GAME,title:Mn.flipBoard}],Rs=[{click(){this.boardFlip()},icon:Jt.FLIPBOARD,show:Vo.CHESS_GAME,title:Mn.flipBoard},{click(){this.triggerPlayPause()},icon:Jt.PLAY,show:"",title:Mn.playPause},{click(){this.triggerMoveToStart()},icon:Jt.PREVIOUS,show:"",title:Mn.firstMove},{click(){this.triggerMoveBackward()},icon:Jt.LEFT,show:"",title:Mn.previousMove},{click(){this.triggerMoveForward()},icon:Jt.RIGHT,show:"",title:Mn.nextMove},{click(){this.triggerMoveToEnd()},icon:Jt.NEXT,show:"",title:Mn.lastMove}];var Hm={name:"click-outside",bind(e,n){let a,u,d=1,h="click";if(yf(n.value)?a=n.value:al(n.value)&&(a=n.value.handler,d=n.value.delay,h=n.value.clickEvent||"click"),!yf(a))throw new Error("must pass function to click-outside");const g=b=>b.stopPropagation(),_=b=>e!==b.target&&a(e,b);e.$unbindClickOutside&&e.$unbindClickOutside(),e.$unbindClickOutside=()=>{clearTimeout(u),e.removeEventListener(h,g),document.removeEventListener(h,_),delete e.$unbindClickOutside},u=setTimeout(()=>{e.addEventListener(h,g),document.addEventListener(h,_)},d)},unbind(e){e.$unbindClickOutside&&e.$unbindClickOutside()}},Gm=ir(3162);function xu(e,n){const a=new Blob([e],{type:"application/x-chess-pgn;charset=utf-8"});(0,Gm.saveAs)(a,n||"download")}function Yc(e,n){return e.map(a=>{const u={...a};return Object.keys(u).filter(d=>typeof u[d]=="function").forEach(d=>u[d]=u[d].bind(n)),u})}var n5={bindFunction:Yc},Vm=function(){var n=this,a=n._self._c;return a("button",{class:n.$style.component,attrs:{"aria-label":n.title,title:n.title},on:{click:n.clickAction}},[a("div",{staticClass:"icon-font-chess",class:[n.$style.icon,n.icon]}),n._v(" "),n.isShowingTitle?a("span",{class:n.$style.title,domProps:{textContent:n._s(n.title)}}):n._e()])},Iu=[],y0={name:"DiagramButton",props:{click:{type:Function,required:!0},icon:{type:String,required:!0},title:String,isShowingTitle:Boolean},emits:["additional-event"],methods:{clickAction(){this.click(),this.$emit("additional-event")}}},L2=y0,jm={component:"diagram-button-component",icon:"diagram-button-icon",title:"diagram-button-title"};function $m(e){this.$style=jm.locals||jm}var B2=li(L2,Vm,Iu,!1,$m,null,null),D2=B2.exports,F2={name:"DiagramButtonBar",components:{DiagramButton:D2},directives:{ClickOutside:Hm},mixins:[fo],emits:["trigger-move-forward"],data(){return{controls:Yc(Rs,this),isShowingActions:!1,mainActions:Yc(_0,this),nextMoveTimeout:null,playing:!1,secondaryActions:Yc(b0,this),screenWidth:0}},computed:{...(0,Bi.mapGetters)("diagramViewer",["getPuzzleButtonText","getPuzzleStart","isChessGame","isChessProblem","isSimpleDiagram","isWhiteMove","getSolutions"]),isVotechessPage(){return window.location.href.includes(Tn.votechess)},multiPgn(){return this.games.map(e=>e.setup.pgnBody).join("")},puzzleStart(){return this.isChessProblem(this.gameId)&&this.getPuzzleStart(this.gameId)},showControlsButtons(){return(this.isChessGame(this.gameId)||!this.puzzleStart)&&!this.isSimpleDiagram(this.gameId)}},watch:{screenWidth(){this.screenWidth>=615&&this.hideControls()}},created(){window.addEventListener("resize",this.handleResize)},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{...(0,Bi.mapActions)("diagramViewer",["correctMove","moveBackward","moveForward","moveToEnd","moveToStart","resetPuzzle"]),...(0,Bi.mapMutations)("diagramViewer",["changePuzzleButtonText","clearPuzzleMoveList","flipBoard","puzzleReset","showShareModal","changeSolveState","pushMoveOnPuzzleMoveList"]),boardFlip(){this.flipBoard(this.gameId)},changeIcon(){this.controls.forEach(e=>{this.playing&&e.icon===Jt.PLAY&&(e.icon=Jt.PAUSE),!this.playing&&e.icon===Jt.PAUSE&&(e.icon=Jt.PLAY)})},delayedMoveForward(){const e=this.currentGame.game,n=this.gameId;this.triggerMoveForward(),this.nextMoveTimeout=setTimeout(this.playNextMove.bind(this),kt.TIMEOUT),this.pushMoveOnPuzzleMoveList({id:n,move:e.getSelectedNode()})},downloadMultiPgn(){xu(this.multiPgn,kt.MULTI_GAMES_PGN)},filteredButtons(e){return e.filter(n=>this.showButton(n))},formSubmit(){document.getElementById(`diagram-${this.gameId}-analysis`).submit()},hint(){const e=this.gameId,n=this.currentGame.game,a=this.currentGame.setup.puzzleSetup.solveState;let u=this.getSolutions(e)[0];if(n.getSelectedNode()){const h=n.getSelectedNode().ids.move;u=this.getSolutions(e)[h+1]}const d=Ft().sanToObj(u,n.getFEN());a==="none"?(n.mark({square:{color:Jg.RETRY_HINT_COLOR_IN_HEX,opacity:.5,square:d.from}}),this.changeSolveState({id:e,solveState:"partial"})):a==="partial"&&(n.mark({arrow:{from:d.from,to:d.to}}),this.changeSolveState({id:e,solveState:"full"}))},notEndNode(e){const n=this.currentGame.setup.endNode,a=e.getSelectedNode();return n&&a?a.moveNumber<n-1:!0},openShareModal(){this.showShareModal(this.gameId)},playNextMove(){clearTimeout(this.nextMoveTimeout);const e=this.currentGame.game,n=this.gameId,a=!e.isAtEndOfLine(),u=this.notEndNode(e),d=dl(this.currentGame,1);a&&u&&d?this.delayedMoveForward():(this.triggerPlayPause(),this.isChessProblem(n)&&!d&&this.changePuzzleButtonText({id:n,text:ft.SOLVED}))},reset(){const e=this.gameId;if(this.changeSolveState({id:e,solveState:"none"}),this.currentGame.game.clearMarkings(),this.clearPuzzleMoveList(e),this.resetPuzzle(e),this.playing=!1,clearTimeout(this.nextMoveTimeout),!this.getPuzzleStart(e)){const n=this.isWhiteMove(e)?ft.WHITE_TO_MOVE:ft.BLACK_TO_MOVE;this.puzzleReset(e),this.changePuzzleButtonText({id:e,text:n})}},showButton(e){return e.show===this.setup.diagramType||e.show===""&&!this.puzzleStart||e.icon===Jt.SHARE||e.show===kt.MULTI_PGN_VIEWER&&this.games.length>1||e.show===kt.ANALYSIS&&!this.isVotechessPage&&!this.puzzleStart},solution(){const e=this.gameId;this.clearPuzzleMoveList(e),this.getPuzzleStart(e)&&(this.changeSolveState({id:e,solveState:"none"}),this.currentGame.game.clearMarkings(),this.resetPuzzle(this.gameId),this.playing=!1,setTimeout(()=>{this.triggerPlayPause()},kt.TIMEOUT))},toggleControls(){this.isShowingActions=!this.isShowingActions},hideControls(){this.isShowingActions=!1},triggerMoveBackward(){this.moveBackward(this.gameId)},triggerMoveForward(){(!this.isChessProblem(this.gameId)||dl(this.currentGame,1))&&this.$emit("trigger-move-forward")},triggerMoveToEnd(){this.moveToEnd(this.gameId)},triggerMoveToStart(){this.moveToStart(this.gameId)},triggerPlayPause(){this.playing=!this.playing,this.changeIcon(),this.playing?this.playNextMove():clearTimeout(this.nextMoveTimeout)},handleResize(){this.screenWidth=window.innerWidth}}},Ol=F2,Wm={component:"diagram-button-bar-component",wrapper:"diagram-button-bar-wrapper","wrapper-actions":"diagram-button-bar-wrapper-actions","action-button-repeat":"diagram-button-bar-action-button-repeat",actions:"diagram-button-bar-actions",active:"diagram-button-bar-active","action-button":"diagram-button-bar-action-button","toggle-button":"diagram-button-bar-toggle-button","empty-controls":"diagram-button-bar-empty-controls"};function qm(e){this.$style=Wm.locals||Wm}var z2=li(Ol,v0,g0,!1,qm,null,null),Km=z2.exports,U2=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("diagram-game-header"),n._v(" "),a("div",{class:n.$style.list},n._l(n.games,function(u,d){return a("diagram-game-row",{key:d,class:[n.$style.item,{[n.$style.selected]:n.selectedGame(u)}],attrs:{game:u},on:{click:function(h){return n.changeSelectedGame(u)}}})}),1)],1)},H2=[],G2=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("div",{class:n.$style.wrapper},[a("div",{class:n.$style.common,domProps:{textContent:n._s(n.$trans("players"))}}),n._v(" "),a("div",{class:n.$style.separate,domProps:{textContent:n._s(n.$trans("white"))}}),n._v(" "),a("div",{class:n.$style.separate,domProps:{textContent:n._s(n.$trans("black"))}})]),n._v(" "),a("div",{class:[n.$style.info,n.$style.center],domProps:{textContent:n._s(n.$trans("result"))}}),n._v(" "),a("div",{class:[n.$style.info,n.$style.right],domProps:{textContent:n._s(n.$trans("round"))}}),n._v(" "),a("div",{class:[n.$style.info,n.$style.right],domProps:{textContent:n._s(n.$trans("year"))}})])},V2=[],j2={name:"DiagramGamesHeader"},$2=j2,Zm={component:"diagram-game-header-component",wrapper:"diagram-game-header-wrapper",common:"diagram-game-header-common",separate:"diagram-game-header-separate",info:"diagram-game-header-info",center:"diagram-game-header-center",right:"diagram-game-header-right"};function W2(e){this.$style=Zm.locals||Zm}var q2=li($2,G2,V2,!1,W2,null,null),w0=q2.exports,K2=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component,on:{click:function(u){return n.$emit("click")}}},[a("div",{class:n.$style.wrapper},[a("div",{class:[n.$style.item,n.$style.big]},[a("span",{class:n.$style.username,domProps:{textContent:n._s(n.player(n.tags.white))}}),n._v(" "),a("span",{class:n.$style.rating,domProps:{textContent:n._s(n.rating(n.tags.whiteElo))}})]),n._v(" "),a("div",{class:[n.$style.item,n.$style.big]},[a("span",{class:n.$style.username,domProps:{textContent:n._s(n.player(n.tags.black))}}),n._v(" "),a("span",{class:n.$style.rating,domProps:{textContent:n._s(n.rating(n.tags.blackElo))}})])]),n._v(" "),a("div",{class:[n.$style.item,n.$style.small,n.$style.center],domProps:{textContent:n._s(n.result)}}),n._v(" "),a("div",{class:[n.$style.item,n.$style.small,n.$style.right],domProps:{textContent:n._s(n.round)}}),n._v(" "),a("div",{class:[n.$style.item,n.$style.small,n.$style.right],domProps:{textContent:n._s(n.year)}})])},E0=[],Z2={name:"DiagramGameRow",props:{game:Object},emits:["click"],computed:{result(){return this.tags.result||""},round(){return this.tags.round||""},tags(){return this.game.setup.tags},year(){return this.tags.year}},methods:{player(e){return e||Mn.unknownPlayer},rating(e){return e?`(${e})`:""}}},Ym=Z2,Xm={component:"diagram-game-row-component",item:"diagram-game-row-item",rating:"diagram-game-row-rating",wrapper:"diagram-game-row-wrapper",big:"diagram-game-row-big",small:"diagram-game-row-small",username:"diagram-game-row-username",center:"diagram-game-row-center",right:"diagram-game-row-right"};function Qm(e){this.$style=Xm.locals||Xm}var A0=li(Ym,K2,E0,!1,Qm,null,null),Ru=A0.exports,xl={name:"DiagramGamesList",components:{DiagramGameHeader:w0,DiagramGameRow:Ru},mixins:[fo],methods:{...(0,Bi.mapActions)("diagramViewer",["setSelectedGame"]),changeSelectedGame(e){this.setSelectedGame({id:this.gameId,game:e})},selectedGame(e){return e.setup.pgnBody===this.currentGame.setup.pgnBody}}},S0=xl,Xc={component:"diagram-game-list-component",selected:"diagram-game-list-selected",item:"diagram-game-list-item",list:"diagram-game-list-list"};function Jm(e){this.$style=Xc.locals||Xc}var ev=li(S0,U2,H2,!1,Jm,null,null),tv=ev.exports,k0=function(){var n=this,a=n._self._c;return n.showHeader?a("div",{class:n.$style.component},[n.tags.white||n.tags.black?a("div",{class:n.$style.title},[n.showPlayerPlaceholder(n.tags.white)?[n._v(`
      `+n._s(n.translations.unknownPlayer)+`
    `)]:[n._v(`
      `+n._s(n.tags.white)+" "+n._s(n.rating(n.tags.whiteElo))+`
    `)],n._v(" "),a("span",{class:n.$style.versus},[n._v(" "+n._s(n.$trans("vs."))+" ")]),n._v(" "),n.showPlayerPlaceholder(n.tags.black)?[n._v(`
      `+n._s(n.translations.unknownPlayer)+`
    `)]:[n._v(`
      `+n._s(n.tags.black)+" "+n._s(n.rating(n.tags.blackElo))+`
    `)]],2):n._e(),n._v(" "),a("div",{class:n.$style.info},[n.tags.result?a("span",{domProps:{textContent:n._s(n.tags.result)}}):n._e(),n._v(" "),n.tags.event||n.tags.site||n.tags.date?a("span",{class:n.$style.separator},[n.tags.event?a("span",{domProps:{textContent:n._s(n.tags.event)}}):n._e(),n._v(" "),n.tags.site?a("span",{domProps:{textContent:n._s(n.tags.site)}}):n._e(),n._v(" "),n.tags.date?a("span",{domProps:{textContent:n._s(n.tags.date)}}):n._e()]):n._e(),n._v(" "),n.tags.opening?a("span",[n._v(`
      `+n._s(n.$trans("Opening"))+": "+n._s(n.tags.opening)+`
    `)]):n._e(),n._v(" "),n.tags.round?a("span",[n._v(`
      `+n._s(n.$trans("Round"))+": "+n._s(n.tags.round)+`
    `)]):n._e(),n._v(" "),n.tags.eco?a("span",[n._v(`
      ECO: `+n._s(n.tags.eco)+`
    `)]):n._e()])]):n._e()},P0=[],Y2={name:"DiagramHeader",mixins:[fo],data(){return{translations:Mn}},computed:{tags(){return this.setup.tags},showHeader(){const e=[Wt.WHITE,Wt.BLACK],n=[Wt.SITE,Wt.ROUND,Wt.DATE,Wt.ECO,Wt.RESULT],a=Ld(this.tags,e),u=Ld(this.tags,n);return a||u}},methods:{rating(e){if(!e)return"";const n=e.replace(/[^\d]/g,"");return n?`(${n})`:""},showPlayerPlaceholder(e){return e===""}}},t=Y2,r={component:"diagram-header-component",title:"diagram-header-title",versus:"diagram-header-versus",info:"diagram-header-info",separator:"diagram-header-separator"};function i(e){this.$style=r.locals||r}var o=li(t,k0,P0,!1,i,null,null),s=o.exports,l=function(){var n=this,a=n._self._c;return a("div",{class:[n.$style.component,{[n.$style["small-screen"]]:n.isSmallMobile}]},[a("horizontal-move-list",{directives:[{name:"show",rawName:"v-show",value:!n.puzzleStart||!n.isPuzzle,expression:"!puzzleStart || !isPuzzle"}],ref:"moveList",class:n.$style.list,attrs:{"disable-context-menu":"",identifier:n.gameId}}),n._v(" "),n.isPuzzle?a("div",{class:[n.$style["puzzle-container"],{"diagram-move-list-puzzle-full-size":n.puzzleStart}]},[n.puzzleStart?a("div",{class:n.$style["puzzle-move-list"]},n._l(n.puzzleMoveList,function(u){return a("span",{key:u.move,class:n.$style["puzzle-node"]},[n.showNumber(u)?a("span",{class:n.$style["puzzle-move-number"],domProps:{innerHTML:n._s(n.moveNumber(u))}}):n._e(),n._v(" "),a("move-text",{directives:[{name:"show",rawName:"v-show",value:!u.isInvisible,expression:"!move.isInvisible"}],class:n.$style["puzzle-move"],attrs:{"move-coords":u.san,"move-display-type":n.boardOptions.moveListDisplayType,"move-figurine-index":n.nodeAdditionalData(u).figurineIndex,"move-icon":n.nodeAdditionalData(u).iconName,"move-is-enpassant":n.nodeAdditionalData(u).isEnPassant,"move-text":u.san}})],1)}),0):n._e(),n._v(" "),a("div",{class:[n.$style["puzzle-progress"],{"black-to-move":n.blackToMove},{solved:n.buttonTextIsSolved||n.buttonTextIsCorrect},{"white-to-move":n.whiteToMove},{failure:n.buttonTextIsIncorrect}],domProps:{textContent:n._s(n.$trans(n.puzzleButtonText))}})]):n._e(),n._v(" "),n.showVariationPopover?a("diagram-variation-popover",{ref:"moveNodeVariationPopover",attrs:{"game-id":n.gameId,"selected-node":n.selectedNode()},on:{"focus-on-widget":function(u){return n.$emit(n.events.FOCUS_ON_WIDGET)}}}):n._e()],1)},c=[],f=function(){var n=this,a=n._self._c;return a("span",n._g({class:[n.$style.component,{[n.$style["contains-figurine"]]:n.showLeadingFigurine||n.showTrailingFigurine,[n.$style.selected]:n.isSelected,[n.$style["dark-mode"]]:n.isDarkMode}]},n.$listeners),[n.showLeadingFigurine?a("span",{class:["icon-font-chess",n.coloredMoveIcon,n.$style.icon]}):n._e(),n._v(n._s(n.coords)),n.showTrailingFigurine?a("span",{class:["icon-font-chess",n.coloredMoveIcon,n.$style.icon]}):n._e(),n._v(" "),n.showEnPassantTooltip?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:n.$trans("En Passant"),position:"top",delay:50},expression:"{ content: $trans('En Passant'), position: 'top', delay: 50 }"}],staticClass:"icon-font-chess circle-question",class:[n.$style.icon,n.$style["en-passant"]],on:{click:n.openEnPassantHelpWindow}}):n._e()])},p=[];const m={FIGURINE:"figurine",TEXT:"text"},v={BLACK:2,WHITE:1},E={BLACK:"black",WHITE:"white"},y={black:"BLACK",white:"WHITE"},M={B:"bishop",K:"king",N:"knight",R:"rook",Q:"queen"};let R;const D=()=>(R||(R={B:an.trans("move_list.algebraic.B",null,"moves")||"B",K:an.trans("move_list.algebraic.K",null,"moves")||"K",N:an.trans("move_list.algebraic.N",null,"moves")||"N",R:an.trans("move_list.algebraic.R",null,"moves")||"R",Q:an.trans("move_list.algebraic.Q",null,"moves")||"Q"}),R);var W=function(){var n=this,a=n._self._c,u=n._self._setupProxy;return a("div",{ref:"containerEl",class:n.$style.component,style:{"--tooltip-padding":`${n.normalizedOptions.padding}px`,height:`${n.targetHeight}px`,left:`${n.targetLeft}px`,opacity:n.isHovering?"100%":"0%",top:`${n.targetTop}px`,transform:n.containerTransform,width:`${n.targetWidth}px`},attrs:{"data-tooltip-content":n.id}},[a("div",{class:[n.$style.content,n.$style[n.position]]},[a("div",{class:n.$style.body,domProps:{textContent:n._s(n.normalizedOptions.content)}})])])},Te=[],dt=!0,Ie=!1,ut=Ir.default,Tt=Ir.default.util.warn;function rr(){}function Fn(e,n){var a,u={},d={config:Vue.config,use:Vue.use.bind(Vue),mixin:Vue.mixin.bind(Vue),component:Vue.component.bind(Vue),provide:function(h,g){return u[h]=g,this},directive:function(h,g){return g?(Vue.directive(h,g),d):Vue.directive(h)},mount:function(h,g){return a||(a=new Vue(Object.assign({propsData:n},e,{provide:Object.assign(u,e.provide)})),a.$mount(h,g),a)},unmount:function(){a&&(a.$destroy(),a=void 0)}};return d}var pn=Object.defineProperty,Dt=Object.defineProperties,Qt=Object.getOwnPropertyDescriptors,Vn=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable,dr=(e,n,a)=>n in e?pn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,Gr=(e,n)=>{for(var a in n||(n={}))ar.call(n,a)&&dr(e,a,n[a]);if(Vn)for(var a of Vn(n))Br.call(n,a)&&dr(e,a,n[a]);return e},lr=(e,n)=>Dt(e,Qt(n));function ki(e,n){var a;const u=shallowRef();return watchEffect(()=>{u.value=e()},lr(Gr({},n),{flush:(a=n?.flush)!=null?a:"sync"})),readonly(u)}var io;const Oi=typeof window<"u",br=e=>typeof e<"u",Ur=(e,...n)=>{e||console.warn(...n)},ri=Object.prototype.toString,xi=e=>typeof e=="boolean",Pi=e=>typeof e=="function",po=e=>typeof e=="number",qi=e=>typeof e=="string",Co=e=>ri.call(e)==="[object Object]",Xo=e=>typeof window<"u"&&ri.call(e)==="[object Window]",un=()=>Date.now(),In=()=>+Date.now(),Mr=(e,n,a)=>Math.min(a,Math.max(n,e)),ii=()=>{},Ii=(e,n)=>(e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e),Fi=Oi&&((io=window?.navigator)==null?void 0:io.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent),wi=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);function fr(e){return typeof e=="function"?e():(0,Ir.unref)(e)}function Yi(e,n){function a(...u){return new Promise((d,h)=>{Promise.resolve(e(()=>n.apply(this,u),{fn:n,thisArg:this,args:u})).then(d).catch(h)})}return a}const Ns=e=>e();function za(e,n={}){let a,u,d=ii;const h=_=>{clearTimeout(_),d(),d=ii};return _=>{const b=fr(e),A=fr(n.maxWait);return a&&h(a),b<=0||A!==void 0&&A<=0?(u&&(h(u),u=null),Promise.resolve(_())):new Promise((T,I)=>{d=n.rejectOnCancel?I:T,A&&!u&&(u=setTimeout(()=>{a&&h(a),u=null,T(_())},A)),a=setTimeout(()=>{u&&h(u),u=null,T(_())},b)})}}function nv(e,n=!0,a=!0,u=!1){let d=0,h,g=!0,_=ii,b;const A=()=>{h&&(clearTimeout(h),h=void 0,_(),_=ii)};return I=>{const F=fr(e),U=Date.now()-d,z=()=>b=I();return A(),F<=0?(d=Date.now(),z()):(U>F&&(a||!g)?(d=Date.now(),z()):n&&(b=new Promise((Q,te)=>{_=u?te:Q,h=setTimeout(()=>{d=Date.now(),g=!0,Q(z()),A()},Math.max(0,F-U))})),!a&&!h&&(h=setTimeout(()=>g=!0,F)),g=!1,b)}}function eE(e=Ns){const n=ref(!0);function a(){n.value=!1}function u(){n.value=!0}const d=(...h)=>{n.value&&e(...h)};return{isActive:readonly(n),pause:a,resume:u,eventFilter:d}}function mM(e="this function"){if(!isVue3)throw new Error(`[VueUse] ${e} is only works on Vue 3.`)}function tE(e="this function"){if(!(isVue3||version.startsWith("2.7.")))throw new Error(`[VueUse] ${e} is only works on Vue 2.7 or above.`)}const vM={mounted:Ie?"mounted":"inserted",updated:Ie?"updated":"componentUpdated",unmounted:Ie?"unmounted":"unbind"};function r5(e,n=!1,a="Timeout"){return new Promise((u,d)=>{setTimeout(n?()=>d(a):u,e)})}function nE(e){return e}function gM(e){let n;function a(){return n||(n=e()),n}return a.reset=async()=>{const u=n;n=void 0,u&&await u},a}function _M(e){return e()}function bM(e,...n){return n.some(a=>a in e)}function yM(e,n){var a;if(typeof e=="number")return e+n;const u=((a=e.match(/^-?[0-9]+\.?[0-9]*/))==null?void 0:a[0])||"",d=e.slice(u.length),h=parseFloat(u)+n;return Number.isNaN(h)?e:h+d}function wM(e,n,a=!1){return n.reduce((u,d)=>(d in e&&(!a||e[d]!==void 0)&&(u[d]=e[d]),u),{})}function EM(e,n){let a,u,d;const h=ref(!0),g=()=>{h.value=!0,d()};watch(e,g,{flush:"sync"});const _=Pi(n)?n:n.get,b=Pi(n)?void 0:n.set,A=customRef((T,I)=>(u=T,d=I,{get(){return h.value&&(a=_(),h.value=!1),u(),a},set(F){b?.(F)}}));return Object.isExtensible(A)&&(A.trigger=g),A}function Il(e){return(0,Ir.getCurrentScope)()?((0,Ir.onScopeDispose)(e),!0):!1}function AM(){const e=[],n=d=>{const h=e.indexOf(d);h!==-1&&e.splice(h,1)};return{on:d=>{e.push(d);const h=()=>n(d);return Il(h),{off:h}},off:n,trigger:d=>{e.forEach(h=>h(d))}}}function SM(e){let n=!1,a;const u=effectScope(!0);return()=>(n||(a=u.run(e),n=!0),a)}function kM(e){const n=Symbol("InjectionState");return[(...d)=>{const h=e(...d);return provide(n,h),h},()=>inject(n)]}function PM(e){let n=0,a,u;const d=()=>{n-=1,u&&n<=0&&(u.stop(),a=void 0,u=void 0)};return(...h)=>(n+=1,a||(u=effectScope(!0),a=u.run(()=>e(...h))),Il(d),a)}function rE(e,n,{enumerable:a=!1,unwrap:u=!0}={}){tE();for(const[d,h]of Object.entries(n))d!=="value"&&(isRef(h)&&u?Object.defineProperty(e,d,{get(){return h.value},set(g){h.value=g},enumerable:a}):Object.defineProperty(e,d,{value:h,enumerable:a}));return e}function CM(e,n){return n==null?unref(e):unref(e)[n]}function TM(e){return unref(e)!=null}var iE=Object.defineProperty,i5=Object.getOwnPropertySymbols,oE=Object.prototype.hasOwnProperty,aE=Object.prototype.propertyIsEnumerable,o5=(e,n,a)=>n in e?iE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,sE=(e,n)=>{for(var a in n||(n={}))oE.call(n,a)&&o5(e,a,n[a]);if(i5)for(var a of i5(n))aE.call(n,a)&&o5(e,a,n[a]);return e};function MM(e,n){if(typeof Symbol<"u"){const a=sE({},e);return Object.defineProperty(a,Symbol.iterator,{enumerable:!1,value(){let u=0;return{next:()=>({value:n[u++],done:u>n.length})}}}),a}else return Object.assign([...n],e)}function lE(e,n){const a=n?.computedGetter===!1?unref:fr;return function(...u){return computed(()=>e.apply(this,u.map(d=>a(d))))}}function OM(e,n={}){let a=[],u;if(Array.isArray(n))a=n;else{u=n;const{includeOwnProperties:d=!0}=n;a.push(...Object.keys(e)),d&&a.push(...Object.getOwnPropertyNames(e))}return Object.fromEntries(a.map(d=>{const h=e[d];return[d,typeof h=="function"?lE(h.bind(e),u):h]}))}function uE(e){if(!isRef(e))return reactive(e);const n=new Proxy({},{get(a,u,d){return unref(Reflect.get(e.value,u,d))},set(a,u,d){return isRef(e.value[u])&&!isRef(d)?e.value[u].value=d:e.value[u]=d,!0},deleteProperty(a,u){return Reflect.deleteProperty(e.value,u)},has(a,u){return Reflect.has(e.value,u)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return reactive(n)}function cE(e){return uE(computed(e))}function xM(e,...n){const a=n.flat();return cE(()=>Object.fromEntries(Object.entries(toRefs$1(e)).filter(u=>!a.includes(u[0]))))}function IM(e,...n){const a=n.flat();return reactive(Object.fromEntries(a.map(u=>[u,toRef(e,u)])))}function RM(e,n=1e4){return customRef((a,u)=>{let d=e,h;const g=()=>setTimeout(()=>{d=e,u()},fr(n));return Il(()=>{clearTimeout(h)}),{get(){return a(),d},set(_){d=_,u(),clearTimeout(h),h=g()}}})}function dE(e,n=200,a={}){return Yi(za(n,a),e)}function NM(e,n=200,a={}){const u=ref(e.value),d=dE(()=>{u.value=e.value},n,a);return watch(e,()=>d()),u}function LM(e,n){return computed({get(){var a;return(a=e.value)!=null?a:n},set(a){e.value=a}})}function fE(e,n=200,a=!1,u=!0,d=!1){return Yi(nv(n,a,u,d),e)}function BM(e,n=200,a=!0,u=!0){if(n<=0)return e;const d=ref(e.value),h=fE(()=>{d.value=e.value},n,a,u);return watch(e,()=>h()),d}function DM(e,n={}){let a=e,u,d;const h=customRef((F,U)=>(u=F,d=U,{get(){return g()},set(z){_(z)}}));function g(F=!0){return F&&u(),a}function _(F,U=!0){var z,Q;if(F===a)return;const te=a;((z=n.onBeforeChange)==null?void 0:z.call(n,F,te))!==!1&&(a=F,(Q=n.onChanged)==null||Q.call(n,F,te),U&&d())}return rE(h,{get:g,set:_,untrackedGet:()=>g(!1),silentSet:F=>_(F,!1),peek:()=>g(!1),lay:F=>_(F,!1)},{enumerable:!0})}const FM=null;function zM(e){return typeof e=="function"?computed(e):ref(e)}function UM(...e){if(e.length===2){const[n,a]=e;n.value=a}if(e.length===3)if(isVue2)set$1(...e);else{const[n,a,u]=e;n[a]=u}}function HM(e,n,a={}){var u,d;const{flush:h="sync",deep:g=!1,immediate:_=!0,direction:b="both",transform:A={}}=a;let T,I;const F=(u=A.ltr)!=null?u:z=>z,U=(d=A.rtl)!=null?d:z=>z;return(b==="both"||b==="ltr")&&(T=watch(e,z=>n.value=F(z),{flush:h,deep:g,immediate:_})),(b==="both"||b==="rtl")&&(I=watch(n,z=>e.value=U(z),{flush:h,deep:g,immediate:_})),()=>{T?.(),I?.()}}function GM(e,n,a={}){const{flush:u="sync",deep:d=!1,immediate:h=!0}=a;return Array.isArray(n)||(n=[n]),watch(e,g=>n.forEach(_=>_.value=g),{flush:u,deep:d,immediate:h})}var hE=Object.defineProperty,pE=Object.defineProperties,mE=Object.getOwnPropertyDescriptors,a5=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,gE=Object.prototype.propertyIsEnumerable,s5=(e,n,a)=>n in e?hE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,_E=(e,n)=>{for(var a in n||(n={}))vE.call(n,a)&&s5(e,a,n[a]);if(a5)for(var a of a5(n))gE.call(n,a)&&s5(e,a,n[a]);return e},bE=(e,n)=>pE(e,mE(n));function VM(e){if(!isRef(e))return toRefs$1(e);const n=Array.isArray(e.value)?new Array(e.value.length):{};for(const a in e.value)n[a]=customRef(()=>({get(){return e.value[a]},set(u){if(Array.isArray(e.value)){const d=[...e.value];d[a]=u,e.value=d}else{const d=bE(_E({},e.value),{[a]:u});Object.setPrototypeOf(d,e.value),e.value=d}}}));return n}function jM(e,n=!0){getCurrentInstance()?onBeforeMount(e):n?e():nextTick(e)}function $M(e){getCurrentInstance()&&onBeforeUnmount(e)}function X2(e,n=!0){(0,Ir.getCurrentInstance)()?(0,Ir.onMounted)(e):n?e():(0,Ir.nextTick)(e)}function WM(e){getCurrentInstance()&&onUnmounted(e)}function Q2(e,n=!1){function a(I,{flush:F="sync",deep:U=!1,timeout:z,throwOnTimeout:Q}={}){let te=null;const Ce=[new Promise(He=>{te=watch(e,it=>{I(it)!==n&&(te?.(),He(it))},{flush:F,deep:U,immediate:!0})})];return z!=null&&Ce.push(r5(z,Q).then(()=>fr(e)).finally(()=>te?.())),Promise.race(Ce)}function u(I,F){if(!isRef(I))return a(it=>it===I,F);const{flush:U="sync",deep:z=!1,timeout:Q,throwOnTimeout:te}=F??{};let Pe=null;const He=[new Promise(it=>{Pe=watch([e,I],([Pt,Ut])=>{n!==(Pt===Ut)&&(Pe?.(),it(Pt))},{flush:U,deep:z,immediate:!0})})];return Q!=null&&He.push(r5(Q,te).then(()=>fr(e)).finally(()=>(Pe?.(),fr(e)))),Promise.race(He)}function d(I){return a(F=>!!F,I)}function h(I){return u(null,I)}function g(I){return u(void 0,I)}function _(I){return a(Number.isNaN,I)}function b(I,F){return a(U=>{const z=Array.from(U);return z.includes(I)||z.includes(fr(I))},F)}function A(I){return T(1,I)}function T(I=1,F){let U=-1;return a(()=>(U+=1,U>=I),F)}return Array.isArray(fr(e))?{toMatch:a,toContains:b,changed:A,changedTimes:T,get not(){return Q2(e,!n)}}:{toMatch:a,toBe:u,toBeTruthy:d,toBeNull:h,toBeNaN:_,toBeUndefined:g,changed:A,changedTimes:T,get not(){return Q2(e,!n)}}}function qM(e){return Q2(e)}function KM(e,n){return computed(()=>fr(e).every((a,u,d)=>n(fr(a),u,d)))}function ZM(e,n){return computed(()=>fr(e).map(a=>fr(a)).filter(n))}function YM(e,n){return computed(()=>fr(fr(e).find((a,u,d)=>n(fr(a),u,d))))}function XM(e,n){return computed(()=>fr(e).findIndex((a,u,d)=>n(fr(a),u,d)))}function yE(e,n){let a=e.length;for(;a-- >0;)if(n(e[a],a,e))return e[a]}function QM(e,n){return computed(()=>fr(Array.prototype.findLast?fr(e).findLast((a,u,d)=>n(fr(a),u,d)):yE(fr(e),(a,u,d)=>n(fr(a),u,d))))}function JM(e,n){return computed(()=>fr(e).map(a=>fr(a)).join(fr(n)))}function eO(e,n){return computed(()=>fr(e).map(a=>fr(a)).map(n))}function tO(e,n,...a){const u=(d,h,g)=>n(fr(d),fr(h),g);return computed(()=>{const d=fr(e);return a.length?d.reduce(u,fr(a[0])):d.reduce(u)})}function nO(e,n){return computed(()=>fr(e).some((a,u,d)=>n(fr(a),u,d)))}function rO(e){return computed(()=>[...new Set(fr(e).map(n=>fr(n)))])}function iO(e=0,n={}){const a=ref(e),{max:u=1/0,min:d=-1/0}=n,h=(T=1)=>a.value=Math.min(u,a.value+T),g=(T=1)=>a.value=Math.max(d,a.value-T),_=()=>a.value,b=T=>a.value=Math.max(d,Math.min(u,T));return{count:a,inc:h,dec:g,get:_,set:b,reset:(T=e)=>(e=T,b(T))}}const wE=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,EE=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g,AE=(e,n,a,u)=>{let d=e<12?"AM":"PM";return u&&(d=d.split("").reduce((h,g)=>h+=`${g}.`,"")),a?d.toLowerCase():d},SE=(e,n,a={})=>{var u;const d=e.getFullYear(),h=e.getMonth(),g=e.getDate(),_=e.getHours(),b=e.getMinutes(),A=e.getSeconds(),T=e.getMilliseconds(),I=e.getDay(),F=(u=a.customMeridiem)!=null?u:AE,U={YY:()=>String(d).slice(-2),YYYY:()=>d,M:()=>h+1,MM:()=>`${h+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(a.locales,{month:"short"}),MMMM:()=>e.toLocaleDateString(a.locales,{month:"long"}),D:()=>String(g),DD:()=>`${g}`.padStart(2,"0"),H:()=>String(_),HH:()=>`${_}`.padStart(2,"0"),h:()=>`${_%12||12}`.padStart(1,"0"),hh:()=>`${_%12||12}`.padStart(2,"0"),m:()=>String(b),mm:()=>`${b}`.padStart(2,"0"),s:()=>String(A),ss:()=>`${A}`.padStart(2,"0"),SSS:()=>`${T}`.padStart(3,"0"),d:()=>I,dd:()=>e.toLocaleDateString(a.locales,{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(a.locales,{weekday:"short"}),dddd:()=>e.toLocaleDateString(a.locales,{weekday:"long"}),A:()=>F(_,b),AA:()=>F(_,b,!1,!0),a:()=>F(_,b,!0),aa:()=>F(_,b,!0,!0)};return n.replace(EE,(z,Q)=>Q||U[z]())},kE=e=>{if(e===null)return new Date(NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const n=e.match(wE);if(n){const a=n[2]-1||0,u=(n[7]||"0").substring(0,3);return new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,u)}}return new Date(e)};function oO(e,n="HH:mm:ss",a={}){return computed(()=>SE(kE(fr(e)),fr(n),a))}function PE(e,n=1e3,a={}){const{immediate:u=!0,immediateCallback:d=!1}=a;let h=null;const g=ref(!1);function _(){h&&(clearInterval(h),h=null)}function b(){g.value=!1,_()}function A(){const T=fr(n);T<=0||(g.value=!0,d&&e(),_(),h=setInterval(e,T))}if(u&&Oi&&A(),isRef(n)||Pi(n)){const T=watch(n,()=>{g.value&&Oi&&A()});Il(T)}return Il(b),{isActive:g,pause:b,resume:A}}var CE=Object.defineProperty,l5=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,ME=Object.prototype.propertyIsEnumerable,u5=(e,n,a)=>n in e?CE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,OE=(e,n)=>{for(var a in n||(n={}))TE.call(n,a)&&u5(e,a,n[a]);if(l5)for(var a of l5(n))ME.call(n,a)&&u5(e,a,n[a]);return e};function aO(e=1e3,n={}){const{controls:a=!1,immediate:u=!0,callback:d}=n,h=ref(0),g=()=>h.value+=1,_=()=>{h.value=0},b=PE(d?()=>{g(),d(h.value)}:g,e,{immediate:u});return a?OE({counter:h,reset:_},b):h}function sO(e,n={}){var a;const u=ref((a=n.initialValue)!=null?a:null);return watch(e,()=>u.value=In(),n),u}function c5(e,n,a={}){const{immediate:u=!0}=a,d=(0,Ir.ref)(!1);let h=null;function g(){h&&(clearTimeout(h),h=null)}function _(){d.value=!1,g()}function b(...A){g(),d.value=!0,h=setTimeout(()=>{d.value=!1,h=null,e(...A)},fr(n))}return u&&(d.value=!0,Oi&&b()),Il(_),{isPending:(0,Ir.readonly)(d),start:b,stop:_}}var xE=Object.defineProperty,d5=Object.getOwnPropertySymbols,IE=Object.prototype.hasOwnProperty,RE=Object.prototype.propertyIsEnumerable,f5=(e,n,a)=>n in e?xE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,NE=(e,n)=>{for(var a in n||(n={}))IE.call(n,a)&&f5(e,a,n[a]);if(d5)for(var a of d5(n))RE.call(n,a)&&f5(e,a,n[a]);return e};function lO(e=1e3,n={}){const{controls:a=!1,callback:u}=n,d=c5(u??ii,e,n),h=computed(()=>!d.isPending.value);return a?NE({ready:h},d):h}function uO(e,n={}){const{method:a="parseFloat",radix:u,nanToZero:d}=n;return computed(()=>{let h=fr(e);return typeof h=="string"&&(h=Number[a](h,u)),d&&isNaN(h)&&(h=0),h})}function cO(e){return computed(()=>`${fr(e)}`)}function dO(e=!1,n={}){const{truthyValue:a=!0,falsyValue:u=!1}=n,d=isRef(e),h=ref(e);function g(_){if(arguments.length)return h.value=_,h.value;{const b=fr(a);return h.value=h.value===b?fr(u):b,h.value}}return d?g:[h,g]}function fO(e,n,a){let u=a?.immediate?[]:[...e instanceof Function?e():Array.isArray(e)?e:unref(e)];return watch(e,(d,h,g)=>{const _=new Array(u.length),b=[];for(const T of d){let I=!1;for(let F=0;F<u.length;F++)if(!_[F]&&T===u[F]){_[F]=!0,I=!0;break}I||b.push(T)}const A=u.filter((T,I)=>!_[I]);n(d,u,b,A,g),u=[...d]},a)}var h5=Object.getOwnPropertySymbols,LE=Object.prototype.hasOwnProperty,BE=Object.prototype.propertyIsEnumerable,DE=(e,n)=>{var a={};for(var u in e)LE.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&h5)for(var u of h5(e))n.indexOf(u)<0&&BE.call(e,u)&&(a[u]=e[u]);return a};function rv(e,n,a={}){const u=a,{eventFilter:d=Ns}=u,h=DE(u,["eventFilter"]);return watch(e,Yi(d,n),h)}var p5=Object.getOwnPropertySymbols,FE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,UE=(e,n)=>{var a={};for(var u in e)FE.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&p5)for(var u of p5(e))n.indexOf(u)<0&&zE.call(e,u)&&(a[u]=e[u]);return a};function hO(e,n,a){const u=a,{count:d}=u,h=UE(u,["count"]),g=ref(0),_=rv(e,(...b)=>{g.value+=1,g.value>=fr(d)&&nextTick(()=>_()),n(...b)},h);return{count:g,stop:_}}var HE=Object.defineProperty,GE=Object.defineProperties,VE=Object.getOwnPropertyDescriptors,iv=Object.getOwnPropertySymbols,m5=Object.prototype.hasOwnProperty,v5=Object.prototype.propertyIsEnumerable,g5=(e,n,a)=>n in e?HE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,jE=(e,n)=>{for(var a in n||(n={}))m5.call(n,a)&&g5(e,a,n[a]);if(iv)for(var a of iv(n))v5.call(n,a)&&g5(e,a,n[a]);return e},$E=(e,n)=>GE(e,VE(n)),WE=(e,n)=>{var a={};for(var u in e)m5.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&iv)for(var u of iv(e))n.indexOf(u)<0&&v5.call(e,u)&&(a[u]=e[u]);return a};function pO(e,n,a={}){const u=a,{debounce:d=0,maxWait:h=void 0}=u,g=WE(u,["debounce","maxWait"]);return rv(e,n,$E(jE({},g),{eventFilter:za(d,{maxWait:h})}))}var qE=Object.defineProperty,KE=Object.defineProperties,ZE=Object.getOwnPropertyDescriptors,ov=Object.getOwnPropertySymbols,_5=Object.prototype.hasOwnProperty,b5=Object.prototype.propertyIsEnumerable,y5=(e,n,a)=>n in e?qE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,YE=(e,n)=>{for(var a in n||(n={}))_5.call(n,a)&&y5(e,a,n[a]);if(ov)for(var a of ov(n))b5.call(n,a)&&y5(e,a,n[a]);return e},XE=(e,n)=>KE(e,ZE(n)),QE=(e,n)=>{var a={};for(var u in e)_5.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&ov)for(var u of ov(e))n.indexOf(u)<0&&b5.call(e,u)&&(a[u]=e[u]);return a};function JE(e,n,a={}){const u=a,{eventFilter:d=Ns}=u,h=QE(u,["eventFilter"]),g=Yi(d,n);let _,b,A;if(h.flush==="sync"){const T=ref(!1);b=()=>{},_=I=>{T.value=!0,I(),T.value=!1},A=watch(e,(...I)=>{T.value||g(...I)},h)}else{const T=[],I=ref(0),F=ref(0);b=()=>{I.value=F.value},T.push(watch(e,()=>{F.value++},XE(YE({},h),{flush:"sync"}))),_=U=>{const z=F.value;U(),I.value+=F.value-z},T.push(watch(e,(...U)=>{const z=I.value>0&&I.value===F.value;I.value=0,F.value=0,!z&&g(...U)},h)),A=()=>{T.forEach(U=>U())}}return{stop:A,ignoreUpdates:_,ignorePrevAsyncUpdates:b}}function mO(e,n,a){const u=watch(e,(...d)=>(nextTick(()=>u()),n(...d)),a)}var eA=Object.defineProperty,tA=Object.defineProperties,nA=Object.getOwnPropertyDescriptors,av=Object.getOwnPropertySymbols,w5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,A5=(e,n,a)=>n in e?eA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,rA=(e,n)=>{for(var a in n||(n={}))w5.call(n,a)&&A5(e,a,n[a]);if(av)for(var a of av(n))E5.call(n,a)&&A5(e,a,n[a]);return e},iA=(e,n)=>tA(e,nA(n)),oA=(e,n)=>{var a={};for(var u in e)w5.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&av)for(var u of av(e))n.indexOf(u)<0&&E5.call(e,u)&&(a[u]=e[u]);return a};function vO(e,n,a={}){const u=a,{eventFilter:d}=u,h=oA(u,["eventFilter"]),{eventFilter:g,pause:_,resume:b,isActive:A}=eE(d);return{stop:rv(e,n,iA(rA({},h),{eventFilter:g})),pause:_,resume:b,isActive:A}}var aA=Object.defineProperty,sA=Object.defineProperties,lA=Object.getOwnPropertyDescriptors,sv=Object.getOwnPropertySymbols,S5=Object.prototype.hasOwnProperty,k5=Object.prototype.propertyIsEnumerable,P5=(e,n,a)=>n in e?aA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,uA=(e,n)=>{for(var a in n||(n={}))S5.call(n,a)&&P5(e,a,n[a]);if(sv)for(var a of sv(n))k5.call(n,a)&&P5(e,a,n[a]);return e},cA=(e,n)=>sA(e,lA(n)),dA=(e,n)=>{var a={};for(var u in e)S5.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&sv)for(var u of sv(e))n.indexOf(u)<0&&k5.call(e,u)&&(a[u]=e[u]);return a};function gO(e,n,a={}){const u=a,{throttle:d=0,trailing:h=!0,leading:g=!0}=u,_=dA(u,["throttle","trailing","leading"]);return rv(e,n,cA(uA({},_),{eventFilter:nv(d,h,g)}))}var fA=Object.defineProperty,hA=Object.defineProperties,pA=Object.getOwnPropertyDescriptors,C5=Object.getOwnPropertySymbols,mA=Object.prototype.hasOwnProperty,vA=Object.prototype.propertyIsEnumerable,T5=(e,n,a)=>n in e?fA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,gA=(e,n)=>{for(var a in n||(n={}))mA.call(n,a)&&T5(e,a,n[a]);if(C5)for(var a of C5(n))vA.call(n,a)&&T5(e,a,n[a]);return e},_A=(e,n)=>hA(e,pA(n));function _O(e,n,a={}){let u;function d(){if(!u)return;const T=u;u=void 0,T()}function h(T){u=T}const g=(T,I)=>(d(),n(T,I,h)),_=JE(e,g,a),{ignoreUpdates:b}=_,A=()=>{let T;return b(()=>{T=g(bA(e),yA(e))}),T};return _A(gA({},_),{trigger:A})}function bA(e){return isReactive(e)?e:Array.isArray(e)?e.map(n=>M5(n)):M5(e)}function M5(e){return typeof e=="function"?e():unref(e)}function yA(e){return Array.isArray(e)?e.map(()=>{}):void 0}function bO(e,n,a){return watch(e,(u,d,h)=>{u&&n(u,d,h)},a)}function yO(e,n,a){let u;isRef(a)?u={evaluating:a}:u=a||{};const{lazy:d=!1,evaluating:h=void 0,shallow:g=!1,onError:_=noop}=u,b=ref(!d),A=g?shallowRef(n):ref(n);let T=0;return watchEffect(async I=>{if(!b.value)return;T++;const F=T;let U=!1;h&&Promise.resolve().then(()=>{h.value=!0});try{const z=await e(Q=>{I(()=>{h&&(h.value=!1),U||Q()})});F===T&&(A.value=z)}catch(z){_(z)}finally{h&&F===T&&(h.value=!1),U=!0}}),d?computed(()=>(b.value=!0,A.value)):A}function wO(e,n,a,u){let d=inject(e);return a&&(d=inject(e,a)),u&&(d=inject(e,a,u)),typeof n=="function"?computed(h=>n(d,h)):computed({get:h=>n.get(d,h),set:n.set})}const EO=e=>function(...n){return e.apply(this,n.map(a=>unref(a)))};function zi(e){var n;const a=fr(e);return(n=a?.$el)!=null?n:a}const Tr=Oi?window:void 0,Qo=Oi?window.document:void 0,Ea=Oi?window.navigator:void 0,AO=Oi?window.location:void 0;function Lt(...e){let n,a,u,d;if(qi(e[0])||Array.isArray(e[0])?([a,u,d]=e,n=Tr):[n,a,u,d]=e,!n)return ii;Array.isArray(a)||(a=[a]),Array.isArray(u)||(u=[u]);const h=[],g=()=>{h.forEach(T=>T()),h.length=0},_=(T,I,F,U)=>(T.addEventListener(I,F,U),()=>T.removeEventListener(I,F,U)),b=(0,Ir.watch)(()=>[zi(n),fr(d)],([T,I])=>{g(),T&&h.push(...a.flatMap(F=>u.map(U=>_(T,F,U,I))))},{immediate:!0,flush:"post"}),A=()=>{b(),g()};return Il(A),A}let O5=!1;function SO(e,n,a={}){const{window:u=Tr,ignore:d=[],capture:h=!0,detectIframe:g=!1}=a;if(!u)return;isIOS&&!O5&&(O5=!0,Array.from(u.document.body.children).forEach(F=>F.addEventListener("click",noop)));let _=!0;const b=F=>d.some(U=>{if(typeof U=="string")return Array.from(u.document.querySelectorAll(U)).some(z=>z===F.target||F.composedPath().includes(z));{const z=zi(U);return z&&(F.target===z||F.composedPath().includes(z))}}),T=[Lt(u,"click",F=>{const U=zi(e);if(!(!U||U===F.target||F.composedPath().includes(U))){if(F.detail===0&&(_=!b(F)),!_){_=!0;return}n(F)}},{passive:!0,capture:h}),Lt(u,"pointerdown",F=>{const U=zi(e);U&&(_=!F.composedPath().includes(U)&&!b(F))},{passive:!0}),g&&Lt(u,"blur",F=>{var U;const z=zi(e);((U=u.document.activeElement)==null?void 0:U.tagName)==="IFRAME"&&!z?.contains(u.document.activeElement)&&n(F)})].filter(Boolean);return()=>T.forEach(F=>F())}var wA=Object.defineProperty,EA=Object.defineProperties,AA=Object.getOwnPropertyDescriptors,x5=Object.getOwnPropertySymbols,SA=Object.prototype.hasOwnProperty,kA=Object.prototype.propertyIsEnumerable,I5=(e,n,a)=>n in e?wA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,J2=(e,n)=>{for(var a in n||(n={}))SA.call(n,a)&&I5(e,a,n[a]);if(x5)for(var a of x5(n))kA.call(n,a)&&I5(e,a,n[a]);return e},e6=(e,n)=>EA(e,AA(n));const PA=e=>typeof e=="function"?e:typeof e=="string"?n=>n.key===e:Array.isArray(e)?n=>e.includes(n.key):()=>!0;function t6(...e){let n,a,u={};e.length===3?(n=e[0],a=e[1],u=e[2]):e.length===2?typeof e[1]=="object"?(n=!0,a=e[0],u=e[1]):(n=e[0],a=e[1]):(n=!0,a=e[0]);const{target:d=Tr,eventName:h="keydown",passive:g=!1}=u,_=PA(n);return Lt(d,h,A=>{_(A)&&a(A)},g)}function kO(e,n,a={}){return t6(e,n,e6(J2({},a),{eventName:"keydown"}))}function PO(e,n,a={}){return t6(e,n,e6(J2({},a),{eventName:"keypress"}))}function CO(e,n,a={}){return t6(e,n,e6(J2({},a),{eventName:"keyup"}))}const CA=500;function TO(e,n,a){var u,d;const h=computed(()=>zi(e));let g;function _(){g&&(clearTimeout(g),g=void 0)}function b(T){var I,F,U,z;(I=a?.modifiers)!=null&&I.self&&T.target!==h.value||(_(),(F=a?.modifiers)!=null&&F.prevent&&T.preventDefault(),(U=a?.modifiers)!=null&&U.stop&&T.stopPropagation(),g=setTimeout(()=>n(T),(z=a?.delay)!=null?z:CA))}const A={capture:(u=a?.modifiers)==null?void 0:u.capture,once:(d=a?.modifiers)==null?void 0:d.once};Lt(h,"pointerdown",b,A),Lt(h,"pointerup",_,A),Lt(h,"pointerleave",_,A)}const TA=()=>{const{activeElement:e,body:n}=document;if(!e||e===n)return!1;switch(e.tagName){case"INPUT":case"TEXTAREA":return!0}return e.hasAttribute("contenteditable")},MA=({keyCode:e,metaKey:n,ctrlKey:a,altKey:u})=>n||a||u?!1:e>=48&&e<=57||e>=96&&e<=105||e>=65&&e<=90;function MO(e,n={}){const{document:a=Qo}=n;a&&Lt(a,"keydown",d=>{!TA()&&MA(d)&&e(d)},{passive:!0})}function OO(e,n=null){const a=getCurrentInstance();let u=()=>{};const d=customRef((h,g)=>(u=g,{get(){var _,b;return h(),(b=(_=a?.proxy)==null?void 0:_.$refs[e])!=null?b:n},set(){}}));return tryOnMounted(u),onUpdated(u),d}function OA(e={}){var n;const{window:a=Tr}=e,u=(n=e.document)!=null?n:a?.document,d=computedWithControl(()=>null,()=>u?.activeElement);return a&&(Lt(a,"blur",h=>{h.relatedTarget===null&&d.trigger()},!0),Lt(a,"focus",d.trigger,!0)),d}function xO(e,n={}){const{interrupt:a=!0,onError:u=noop,onFinished:d=noop}=n,h={pending:"pending",rejected:"rejected",fulfilled:"fulfilled"},g=Array.from(new Array(e.length),()=>({state:h.pending,data:null})),_=reactive(g),b=ref(-1);if(!e||e.length===0)return d(),{activeIndex:b,result:_};function A(T,I){b.value++,_[b.value].data=I,_[b.value].state=T}return e.reduce((T,I)=>T.then(F=>{var U;if(((U=_[b.value])==null?void 0:U.state)===h.rejected&&a){d();return}return I(F).then(z=>(A(h.fulfilled,z),b.value===e.length-1&&d(),z))}).catch(F=>(A(h.rejected,F),u(),F)),Promise.resolve()),{activeIndex:b,result:_}}function xA(e,n,a){const{immediate:u=!0,delay:d=0,onError:h=noop,onSuccess:g=noop,resetOnExecute:_=!0,shallow:b=!0,throwError:A}=a??{},T=b?shallowRef(n):ref(n),I=ref(!1),F=ref(!1),U=ref(void 0);async function z(Q=0,...te){_&&(T.value=n),U.value=void 0,I.value=!1,F.value=!0,Q>0&&await promiseTimeout(Q);const Pe=typeof e=="function"?e(...te):e;try{const Ce=await Pe;T.value=Ce,I.value=!0,g(Ce)}catch(Ce){if(U.value=Ce,h(Ce),A)throw U}finally{F.value=!1}return T.value}return u&&z(d),{state:T,isReady:I,isLoading:F,error:U,execute:z}}const C0={array:e=>JSON.stringify(e),object:e=>JSON.stringify(e),set:e=>JSON.stringify(Array.from(e)),map:e=>JSON.stringify(Object.fromEntries(e)),null:()=>""};function IA(e){return e?e instanceof Map?C0.map:e instanceof Set?C0.set:Array.isArray(e)?C0.array:C0.object:C0.null}function IO(e,n){const a=ref(""),u=ref();function d(){if(isClient)return u.value=new Promise((h,g)=>{try{const _=resolveUnref(e);if(_==null)h("");else if(typeof _=="string")h(n6(new Blob([_],{type:"text/plain"})));else if(_ instanceof Blob)h(n6(_));else if(_ instanceof ArrayBuffer)h(window.btoa(String.fromCharCode(...new Uint8Array(_))));else if(_ instanceof HTMLCanvasElement)h(_.toDataURL(n?.type,n?.quality));else if(_ instanceof HTMLImageElement){const b=_.cloneNode(!1);b.crossOrigin="Anonymous",RA(b).then(()=>{const A=document.createElement("canvas"),T=A.getContext("2d");A.width=b.width,A.height=b.height,T.drawImage(b,0,0,A.width,A.height),h(A.toDataURL(n?.type,n?.quality))}).catch(g)}else if(typeof _=="object"){const A=(n?.serializer||IA(_))(_);return h(n6(new Blob([A],{type:"application/json"})))}else g(new Error("target is unsupported types"))}catch(_){g(_)}}),u.value.then(h=>a.value=h),u.value}return isRef(e)||isFunction(e)?watch(e,d,{immediate:!0}):d(),{base64:a,promise:u,execute:d}}function RA(e){return new Promise((n,a)=>{e.complete?n():(e.onload=()=>{n()},e.onerror=a)})}function n6(e){return new Promise((n,a)=>{const u=new FileReader;u.onload=d=>{n(d.target.result)},u.onerror=a,u.readAsDataURL(e)})}function bi(e,n=!1){const a=(0,Ir.ref)(),u=()=>a.value=!!e();return u(),X2(u,n),a}function RO({navigator:e=Ea}={}){const n=["chargingchange","chargingtimechange","dischargingtimechange","levelchange"],a=bi(()=>e&&"getBattery"in e),u=ref(!1),d=ref(0),h=ref(0),g=ref(1);let _;function b(){u.value=this.charging,d.value=this.chargingTime||0,h.value=this.dischargingTime||0,g.value=this.level}return a.value&&e.getBattery().then(A=>{_=A,b.call(_);for(const T of n)Lt(_,T,b,{passive:!0})}),{isSupported:a,charging:u,chargingTime:d,dischargingTime:h,level:g}}function NO(e){let{acceptAllDevices:n=!1}=e||{};const{filters:a=void 0,optionalServices:u=void 0,navigator:d=Ea}=e||{},h=bi(()=>d&&"bluetooth"in d),g=shallowRef(void 0),_=shallowRef(null);watch(g,()=>{I()});async function b(){if(h.value){_.value=null,a&&a.length>0&&(n=!1);try{g.value=await d?.bluetooth.requestDevice({acceptAllDevices:n,filters:a,optionalServices:u})}catch(F){_.value=F}}}const A=ref(),T=computed(()=>{var F;return((F=A.value)==null?void 0:F.connected)||!1});async function I(){if(_.value=null,g.value&&g.value.gatt){g.value.addEventListener("gattserverdisconnected",()=>{});try{A.value=await g.value.gatt.connect()}catch(F){_.value=F}}}return tryOnMounted(()=>{var F;g.value&&((F=g.value.gatt)==null||F.connect())}),tryOnScopeDispose(()=>{var F;g.value&&((F=g.value.gatt)==null||F.disconnect())}),{isSupported:h,isConnected:T,device:g,requestDevice:b,server:A,error:_}}function Aa(e,n={}){const{window:a=Tr}=n,u=bi(()=>a&&"matchMedia"in a&&typeof a.matchMedia=="function");let d;const h=ref(!1),g=()=>{d&&("removeEventListener"in d?d.removeEventListener("change",_):d.removeListener(_))},_=()=>{u.value&&(g(),d=a.matchMedia(resolveRef(e).value),h.value=d.matches,"addEventListener"in d?d.addEventListener("change",_):d.addListener(_))};return watchEffect(_),tryOnScopeDispose(()=>g()),h}const LO={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},BO={sm:576,md:768,lg:992,xl:1200,xxl:1400},DO={xs:600,sm:960,md:1264,lg:1904},FO={xs:480,sm:576,md:768,lg:992,xl:1200,xxl:1600},zO={xs:600,sm:1024,md:1440,lg:1920},UO={mobileS:320,mobileM:375,mobileL:425,tablet:768,laptop:1024,laptopL:1440,desktop4K:2560},HO={"3xs":360,"2xs":480,xs:600,sm:768,md:1024,lg:1280,xl:1440,"2xl":1600,"3xl":1920,"4xl":2560};var NA=Object.defineProperty,R5=Object.getOwnPropertySymbols,LA=Object.prototype.hasOwnProperty,BA=Object.prototype.propertyIsEnumerable,N5=(e,n,a)=>n in e?NA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,DA=(e,n)=>{for(var a in n||(n={}))LA.call(n,a)&&N5(e,a,n[a]);if(R5)for(var a of R5(n))BA.call(n,a)&&N5(e,a,n[a]);return e};function GO(e,n={}){function a(_,b){let A=e[_];return b!=null&&(A=increaseWithUnit(A,b)),typeof A=="number"&&(A=`${A}px`),A}const{window:u=Tr}=n;function d(_){return u?u.matchMedia(_).matches:!1}const h=_=>Aa(`(min-width: ${a(_)})`,n),g=Object.keys(e).reduce((_,b)=>(Object.defineProperty(_,b,{get:()=>h(b),enumerable:!0,configurable:!0}),_),{});return DA({greater(_){return Aa(`(min-width: ${a(_,.1)})`,n)},greaterOrEqual:h,smaller(_){return Aa(`(max-width: ${a(_,-.1)})`,n)},smallerOrEqual(_){return Aa(`(max-width: ${a(_)})`,n)},between(_,b){return Aa(`(min-width: ${a(_)}) and (max-width: ${a(b,-.1)})`,n)},isGreater(_){return d(`(min-width: ${a(_,.1)})`)},isGreaterOrEqual(_){return d(`(min-width: ${a(_)})`)},isSmaller(_){return d(`(max-width: ${a(_,-.1)})`)},isSmallerOrEqual(_){return d(`(max-width: ${a(_)})`)},isInBetween(_,b){return d(`(min-width: ${a(_)}) and (max-width: ${a(b,-.1)})`)}},g)}const VO=e=>{const{name:n,window:a=Tr}=e,u=bi(()=>a&&"BroadcastChannel"in a),d=ref(!1),h=ref(),g=ref(),_=ref(null),b=T=>{h.value&&h.value.postMessage(T)},A=()=>{h.value&&h.value.close(),d.value=!0};return u.value&&tryOnMounted(()=>{_.value=null,h.value=new BroadcastChannel(n),h.value.addEventListener("message",T=>{g.value=T.data},{passive:!0}),h.value.addEventListener("messageerror",T=>{_.value=T},{passive:!0}),h.value.addEventListener("close",()=>{d.value=!0})}),tryOnScopeDispose(()=>{A()}),{isSupported:u,channel:h,data:g,post:b,close:A,error:_,isClosed:d}};function jO({window:e=Tr}={}){const n=u=>{const{state:d,length:h}=e?.history||{},{hash:g,host:_,hostname:b,href:A,origin:T,pathname:I,port:F,protocol:U,search:z}=e?.location||{};return{trigger:u,state:d,length:h,hash:g,host:_,hostname:b,href:A,origin:T,pathname:I,port:F,protocol:U,search:z}},a=ref(n("load"));return e&&(Lt(e,"popstate",()=>a.value=n("popstate"),{passive:!0}),Lt(e,"hashchange",()=>a.value=n("hashchange"),{passive:!0})),a}function $O(e,n=(u,d)=>u===d,a){const u=ref(e.value);return watch(()=>e.value,d=>{n(d,u.value)||(u.value=d)},a),u}function WO(e={}){const{navigator:n=Ea,read:a=!1,source:u,copiedDuring:d=1500,legacy:h=!1}=e,g=["copy","cut"],_=bi(()=>n&&"clipboard"in n),b=computed(()=>_.value||h),A=ref(""),T=ref(!1),I=useTimeoutFn(()=>T.value=!1,d);function F(){_.value?n.clipboard.readText().then(te=>{A.value=te}):A.value=Q()}if(b.value&&a)for(const te of g)Lt(te,F);async function U(te=resolveUnref(u)){b.value&&te!=null&&(_.value?await n.clipboard.writeText(te):z(te),A.value=te,T.value=!0,I.start())}function z(te){const Pe=document.createElement("textarea");Pe.value=te??"",Pe.style.position="absolute",Pe.style.opacity="0",document.body.appendChild(Pe),Pe.select(),document.execCommand("copy"),Pe.remove()}function Q(){var te,Pe,Ce;return(Ce=(Pe=(te=document?.getSelection)==null?void 0:te.call(document))==null?void 0:Pe.toString())!=null?Ce:""}return{isSupported:b,text:A,copied:T,copy:U}}var FA=Object.defineProperty,zA=Object.defineProperties,UA=Object.getOwnPropertyDescriptors,L5=Object.getOwnPropertySymbols,HA=Object.prototype.hasOwnProperty,GA=Object.prototype.propertyIsEnumerable,B5=(e,n,a)=>n in e?FA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,VA=(e,n)=>{for(var a in n||(n={}))HA.call(n,a)&&B5(e,a,n[a]);if(L5)for(var a of L5(n))GA.call(n,a)&&B5(e,a,n[a]);return e},jA=(e,n)=>zA(e,UA(n));function lv(e){return JSON.parse(JSON.stringify(e))}function qO(e,n={}){const a=ref({}),{manual:u,clone:d=lv,deep:h=!0,immediate:g=!0}=n;function _(){a.value=d(unref(e))}return!u&&isRef(e)?watch(e,_,jA(VA({},n),{deep:h,immediate:g})):_(),{cloned:a,sync:_}}const r6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i6="__vueuse_ssr_handlers__";r6[i6]=r6[i6]||{};const D5=r6[i6];function o6(e,n){return D5[e]||n}function KO(e,n){D5[e]=n}function F5(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var $A=Object.defineProperty,z5=Object.getOwnPropertySymbols,WA=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable,U5=(e,n,a)=>n in e?$A(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,H5=(e,n)=>{for(var a in n||(n={}))WA.call(n,a)&&U5(e,a,n[a]);if(z5)for(var a of z5(n))qA.call(n,a)&&U5(e,a,n[a]);return e};const G5={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},V5="vueuse-storage";function a6(e,n,a,u={}){var d;const{flush:h="pre",deep:g=!0,listenToStorageChanges:_=!0,writeDefaults:b=!0,mergeDefaults:A=!1,shallow:T,window:I=Tr,eventFilter:F,onError:U=Ln=>{console.error(Ln)}}=u,z=(T?shallowRef:ref)(n);if(!a)try{a=o6("getDefaultStorage",()=>{var Ln;return(Ln=Tr)==null?void 0:Ln.localStorage})()}catch(Ln){U(Ln)}if(!a)return z;const Q=resolveUnref(n),te=F5(Q),Pe=(d=u.serializer)!=null?d:G5[te],{pause:Ce,resume:He}=pausableWatch(z,()=>it(z.value),{flush:h,deep:g,eventFilter:F});return I&&_&&(Lt(I,"storage",sn),Lt(I,V5,Ut)),sn(),z;function it(Ln){try{if(Ln==null)a.removeItem(e);else{const Hn=Pe.write(Ln),_n=a.getItem(e);_n!==Hn&&(a.setItem(e,Hn),I&&I.dispatchEvent(new CustomEvent(V5,{detail:{key:e,oldValue:_n,newValue:Hn,storageArea:a}})))}}catch(Hn){U(Hn)}}function Pt(Ln){const Hn=Ln?Ln.newValue:a.getItem(e);if(Hn==null)return b&&Q!==null&&a.setItem(e,Pe.write(Q)),Q;if(!Ln&&A){const _n=Pe.read(Hn);return isFunction(A)?A(_n,Q):te==="object"&&!Array.isArray(_n)?H5(H5({},Q),_n):_n}else return typeof Hn!="string"?Hn:Pe.read(Hn)}function Ut(Ln){sn(Ln.detail)}function sn(Ln){if(!(Ln&&Ln.storageArea!==a)){if(Ln&&Ln.key==null){z.value=Q;return}if(!(Ln&&Ln.key!==e)){Ce();try{z.value=Pt(Ln)}catch(Hn){U(Hn)}finally{Ln?nextTick(He):He()}}}}}function j5(e){return Aa("(prefers-color-scheme: dark)",e)}var KA=Object.defineProperty,$5=Object.getOwnPropertySymbols,ZA=Object.prototype.hasOwnProperty,YA=Object.prototype.propertyIsEnumerable,W5=(e,n,a)=>n in e?KA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,XA=(e,n)=>{for(var a in n||(n={}))ZA.call(n,a)&&W5(e,a,n[a]);if($5)for(var a of $5(n))YA.call(n,a)&&W5(e,a,n[a]);return e};function QA(e={}){const{selector:n="html",attribute:a="class",initialValue:u="auto",window:d=Tr,storage:h,storageKey:g="vueuse-color-scheme",listenToStorageChanges:_=!0,storageRef:b,emitAuto:A}=e,T=XA({auto:"",light:"light",dark:"dark"},e.modes||{}),I=j5({window:d}),F=computed(()=>I.value?"dark":"light"),U=b||(g==null?ref(u):a6(g,u,h,{window:d,listenToStorageChanges:_})),z=computed({get(){return U.value==="auto"&&!A?F.value:U.value},set(Ce){U.value=Ce}}),Q=o6("updateHTMLAttrs",(Ce,He,it)=>{const Pt=d?.document.querySelector(Ce);if(Pt)if(He==="class"){const Ut=it.split(/\s/g);Object.values(T).flatMap(sn=>(sn||"").split(/\s/g)).filter(Boolean).forEach(sn=>{Ut.includes(sn)?Pt.classList.add(sn):Pt.classList.remove(sn)})}else Pt.setAttribute(He,it)});function te(Ce){var He;const it=Ce==="auto"?F.value:Ce;Q(n,a,(He=T[it])!=null?He:it)}function Pe(Ce){e.onChanged?e.onChanged(Ce,te):te(Ce)}return watch(z,Pe,{flush:"post",immediate:!0}),A&&watch(F,()=>Pe(z.value),{flush:"post"}),tryOnMounted(()=>Pe(z.value)),z}function ZO(e=ref(!1)){const n=createEventHook(),a=createEventHook(),u=createEventHook();let d=noop;const h=b=>(u.trigger(b),e.value=!0,new Promise(A=>{d=A})),g=b=>{e.value=!1,n.trigger(b),d({data:b,isCanceled:!1})},_=b=>{e.value=!1,a.trigger(b),d({data:b,isCanceled:!0})};return{isRevealed:computed(()=>e.value),reveal:h,confirm:g,cancel:_,onReveal:u.on,onConfirm:n.on,onCancel:a.on}}function uv(e,n,{window:a=Tr,initialValue:u=""}={}){const d=ref(u),h=computed(()=>{var g;return zi(n)||((g=a?.document)==null?void 0:g.documentElement)});return watch([h,()=>resolveUnref(e)],([g,_])=>{var b;if(g&&a){const A=(b=a.getComputedStyle(g).getPropertyValue(_))==null?void 0:b.trim();d.value=A||u}},{immediate:!0}),watch(d,g=>{var _;(_=h.value)!=null&&_.style&&h.value.style.setProperty(resolveUnref(e),g)}),d}function YO(){const e=getCurrentInstance(),n=computedWithControl(()=>null,()=>e.proxy.$el);return onUpdated(n.trigger),onMounted(n.trigger),n}function XO(e,n){var a;const u=shallowRef((a=n?.initialValue)!=null?a:e[0]),d=computed({get(){var A;let T=n?.getIndexOf?n.getIndexOf(u.value,e):e.indexOf(u.value);return T<0&&(T=(A=n?.fallbackIndex)!=null?A:0),T},set(A){h(A)}});function h(A){const T=e.length,I=(A%T+T)%T,F=e[I];return u.value=F,F}function g(A=1){return h(d.value+A)}function _(A=1){return g(A)}function b(A=1){return g(-A)}return{state:u,index:d,next:_,prev:b}}var JA=Object.defineProperty,eS=Object.defineProperties,tS=Object.getOwnPropertyDescriptors,q5=Object.getOwnPropertySymbols,nS=Object.prototype.hasOwnProperty,rS=Object.prototype.propertyIsEnumerable,K5=(e,n,a)=>n in e?JA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,iS=(e,n)=>{for(var a in n||(n={}))nS.call(n,a)&&K5(e,a,n[a]);if(q5)for(var a of q5(n))rS.call(n,a)&&K5(e,a,n[a]);return e},oS=(e,n)=>eS(e,tS(n));function QO(e={}){const{valueDark:n="dark",valueLight:a="",window:u=Tr}=e,d=QA(oS(iS({},e),{onChanged:(_,b)=>{var A;e.onChanged?(A=e.onChanged)==null||A.call(e,_==="dark"):b(_)},modes:{dark:n,light:a}})),h=j5({window:u});return computed({get(){return d.value==="dark"},set(_){_===h.value?d.value="auto":d.value=_?"dark":"light"}})}const Z5=e=>e,aS=(e,n)=>e.value=n;function sS(e){return e?isFunction(e)?e:lv:Z5}function lS(e){return e?isFunction(e)?e:lv:Z5}function uS(e,n={}){const{clone:a=!1,dump:u=sS(a),parse:d=lS(a),setSource:h=aS}=n;function g(){return markRaw({snapshot:u(e.value),timestamp:timestamp()})}const _=ref(g()),b=ref([]),A=ref([]),T=He=>{h(e,d(He.snapshot)),_.value=He},I=()=>{b.value.unshift(_.value),_.value=g(),n.capacity&&b.value.length>n.capacity&&b.value.splice(n.capacity,1/0),A.value.length&&A.value.splice(0,A.value.length)},F=()=>{b.value.splice(0,b.value.length),A.value.splice(0,A.value.length)},U=()=>{const He=b.value.shift();He&&(A.value.unshift(_.value),T(He))},z=()=>{const He=A.value.shift();He&&(b.value.unshift(_.value),T(He))},Q=()=>{T(_.value)},te=computed(()=>[_.value,...b.value]),Pe=computed(()=>b.value.length>0),Ce=computed(()=>A.value.length>0);return{source:e,undoStack:b,redoStack:A,last:_,history:te,canUndo:Pe,canRedo:Ce,clear:F,commit:I,reset:Q,undo:U,redo:z}}var cS=Object.defineProperty,dS=Object.defineProperties,fS=Object.getOwnPropertyDescriptors,Y5=Object.getOwnPropertySymbols,hS=Object.prototype.hasOwnProperty,pS=Object.prototype.propertyIsEnumerable,X5=(e,n,a)=>n in e?cS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,Q5=(e,n)=>{for(var a in n||(n={}))hS.call(n,a)&&X5(e,a,n[a]);if(Y5)for(var a of Y5(n))pS.call(n,a)&&X5(e,a,n[a]);return e},J5=(e,n)=>dS(e,fS(n));function e9(e,n={}){const{deep:a=!1,flush:u="pre",eventFilter:d}=n,{eventFilter:h,pause:g,resume:_,isActive:b}=pausableFilter(d),{ignoreUpdates:A,ignorePrevAsyncUpdates:T,stop:I}=watchIgnorable(e,te,{deep:a,flush:u,eventFilter:h});function F(it,Pt){T(),A(()=>{it.value=Pt})}const U=uS(e,J5(Q5({},n),{clone:n.clone||a,setSource:F})),{clear:z,commit:Q}=U;function te(){T(),Q()}function Pe(it){_(),it&&te()}function Ce(it){let Pt=!1;const Ut=()=>Pt=!0;A(()=>{it(Ut)}),Pt||te()}function He(){I(),z()}return J5(Q5({},U),{isTracking:b,pause:g,resume:Pe,commit:te,batch:Ce,dispose:He})}var mS=Object.defineProperty,vS=Object.defineProperties,gS=Object.getOwnPropertyDescriptors,t9=Object.getOwnPropertySymbols,_S=Object.prototype.hasOwnProperty,bS=Object.prototype.propertyIsEnumerable,n9=(e,n,a)=>n in e?mS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,r9=(e,n)=>{for(var a in n||(n={}))_S.call(n,a)&&n9(e,a,n[a]);if(t9)for(var a of t9(n))bS.call(n,a)&&n9(e,a,n[a]);return e},yS=(e,n)=>vS(e,gS(n));function JO(e,n={}){const a=n.debounce?debounceFilter(n.debounce):void 0,u=e9(e,yS(r9({},n),{eventFilter:a}));return r9({},u)}function ex(e={}){const{window:n=Tr,eventFilter:a=bypassFilter}=e,u=ref({x:null,y:null,z:null}),d=ref({alpha:null,beta:null,gamma:null}),h=ref(0),g=ref({x:null,y:null,z:null});if(n){const _=createFilterWrapper(a,b=>{u.value=b.acceleration,g.value=b.accelerationIncludingGravity,d.value=b.rotationRate,h.value=b.interval});Lt(n,"devicemotion",_)}return{acceleration:u,accelerationIncludingGravity:g,rotationRate:d,interval:h}}function wS(e={}){const{window:n=Tr}=e,a=bi(()=>n&&"DeviceOrientationEvent"in n),u=ref(!1),d=ref(null),h=ref(null),g=ref(null);return n&&a.value&&Lt(n,"deviceorientation",_=>{u.value=_.absolute,d.value=_.alpha,h.value=_.beta,g.value=_.gamma}),{isSupported:a,isAbsolute:u,alpha:d,beta:h,gamma:g}}function tx({window:e=Tr}={}){const n=ref(1);if(e){let a=function(){n.value=e.devicePixelRatio,u(),d=e.matchMedia(`(resolution: ${n.value}dppx)`),d.addEventListener("change",a,{once:!0})},u=function(){d?.removeEventListener("change",a)},d;a(),tryOnScopeDispose(u)}return{pixelRatio:n}}function ES(e,n={}){const{controls:a=!1,navigator:u=Ea}=n,d=bi(()=>u&&"permissions"in u);let h;const g=typeof e=="string"?{name:e}:e,_=ref(),b=()=>{h&&(_.value=h.state)},A=createSingletonPromise(async()=>{if(d.value){if(!h)try{h=await u.permissions.query(g),Lt(h,"change",b),b()}catch{_.value="prompt"}return h}});return A(),a?{state:_,isSupported:d,query:A}:_}function nx(e={}){const{navigator:n=Ea,requestPermissions:a=!1,constraints:u={audio:!0,video:!0},onUpdated:d}=e,h=ref([]),g=computed(()=>h.value.filter(U=>U.kind==="videoinput")),_=computed(()=>h.value.filter(U=>U.kind==="audioinput")),b=computed(()=>h.value.filter(U=>U.kind==="audiooutput")),A=bi(()=>n&&n.mediaDevices&&n.mediaDevices.enumerateDevices),T=ref(!1);async function I(){A.value&&(h.value=await n.mediaDevices.enumerateDevices(),d?.(h.value))}async function F(){if(!A.value)return!1;if(T.value)return!0;const{state:U,query:z}=ES("camera",{controls:!0});return await z(),U.value!=="granted"&&((await n.mediaDevices.getUserMedia(u)).getTracks().forEach(te=>te.stop()),I()),T.value=!0,T.value}return A.value&&(a&&F(),Lt(n.mediaDevices,"devicechange",I),I()),{devices:h,ensurePermissions:F,permissionGranted:T,videoInputs:g,audioInputs:_,audioOutputs:b,isSupported:A}}function rx(e={}){var n;const a=ref((n=e.enabled)!=null?n:!1),u=e.video,d=e.audio,{navigator:h=Ea}=e,g=bi(()=>{var U;return(U=h?.mediaDevices)==null?void 0:U.getDisplayMedia}),_={audio:d,video:u},b=shallowRef();async function A(){if(!(!g.value||b.value))return b.value=await h.mediaDevices.getDisplayMedia(_),b.value}async function T(){var U;(U=b.value)==null||U.getTracks().forEach(z=>z.stop()),b.value=void 0}function I(){T(),a.value=!1}async function F(){return await A(),b.value&&(a.value=!0),b.value}return watch(a,U=>{U?A():T()},{immediate:!0}),{isSupported:g,stream:b,start:F,stop:I,enabled:a}}function ix({document:e=Qo}={}){if(!e)return ref("visible");const n=ref(e.visibilityState);return Lt(e,"visibilitychange",()=>{n.value=e.visibilityState}),n}var AS=Object.defineProperty,SS=Object.defineProperties,kS=Object.getOwnPropertyDescriptors,i9=Object.getOwnPropertySymbols,PS=Object.prototype.hasOwnProperty,CS=Object.prototype.propertyIsEnumerable,o9=(e,n,a)=>n in e?AS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,TS=(e,n)=>{for(var a in n||(n={}))PS.call(n,a)&&o9(e,a,n[a]);if(i9)for(var a of i9(n))CS.call(n,a)&&o9(e,a,n[a]);return e},MS=(e,n)=>SS(e,kS(n));function ox(e,n={}){var a,u,d;const h=(a=n.draggingElement)!=null?a:Tr,g=(u=n.handle)!=null?u:e,_=ref((d=resolveUnref(n.initialValue))!=null?d:{x:0,y:0}),b=ref(),A=z=>n.pointerTypes?n.pointerTypes.includes(z.pointerType):!0,T=z=>{resolveUnref(n.preventDefault)&&z.preventDefault(),resolveUnref(n.stopPropagation)&&z.stopPropagation()},I=z=>{var Q;if(!A(z)||resolveUnref(n.exact)&&z.target!==resolveUnref(e))return;const te=resolveUnref(e).getBoundingClientRect(),Pe={x:z.clientX-te.left,y:z.clientY-te.top};((Q=n.onStart)==null?void 0:Q.call(n,Pe,z))!==!1&&(b.value=Pe,T(z))},F=z=>{var Q;A(z)&&b.value&&(_.value={x:z.clientX-b.value.x,y:z.clientY-b.value.y},(Q=n.onMove)==null||Q.call(n,_.value,z),T(z))},U=z=>{var Q;A(z)&&b.value&&(b.value=void 0,(Q=n.onEnd)==null||Q.call(n,_.value,z),T(z))};return isClient&&(Lt(g,"pointerdown",I,!0),Lt(h,"pointermove",F,!0),Lt(h,"pointerup",U,!0)),MS(TS({},toRefs(_)),{position:_,isDragging:computed(()=>!!b.value),style:computed(()=>`left:${_.value.x}px;top:${_.value.y}px;`)})}function ax(e,n){const a=ref(!1);let u=0;return isClient&&(Lt(e,"dragenter",d=>{d.preventDefault(),u+=1,a.value=!0}),Lt(e,"dragover",d=>{d.preventDefault()}),Lt(e,"dragleave",d=>{d.preventDefault(),u-=1,u===0&&(a.value=!1)}),Lt(e,"drop",d=>{var h,g;d.preventDefault(),u=0,a.value=!1;const _=Array.from((g=(h=d.dataTransfer)==null?void 0:h.files)!=null?g:[]);n?.(_.length===0?null:_)})),{isOverDropZone:a}}var a9=Object.getOwnPropertySymbols,OS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,IS=(e,n)=>{var a={};for(var u in e)OS.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&a9)for(var u of a9(e))n.indexOf(u)<0&&xS.call(e,u)&&(a[u]=e[u]);return a};function s6(e,n,a={}){const u=a,{window:d=Tr}=u,h=IS(u,["window"]);let g;const _=bi(()=>d&&"ResizeObserver"in d),b=()=>{g&&(g.disconnect(),g=void 0)},A=(0,Ir.watch)(()=>zi(e),I=>{b(),_.value&&d&&I&&(g=new ResizeObserver(n),g.observe(I,h))},{immediate:!0,flush:"post"}),T=()=>{b(),A()};return Il(T),{isSupported:_,stop:T}}function s9(e,n={}){const{reset:a=!0,windowResize:u=!0,windowScroll:d=!0,immediate:h=!0}=n,g=(0,Ir.ref)(0),_=(0,Ir.ref)(0),b=(0,Ir.ref)(0),A=(0,Ir.ref)(0),T=(0,Ir.ref)(0),I=(0,Ir.ref)(0),F=(0,Ir.ref)(0),U=(0,Ir.ref)(0);function z(){const Q=zi(e);if(!Q){a&&(g.value=0,_.value=0,b.value=0,A.value=0,T.value=0,I.value=0,F.value=0,U.value=0);return}const te=Q.getBoundingClientRect();g.value=te.height,_.value=te.bottom,b.value=te.left,A.value=te.right,T.value=te.top,I.value=te.width,F.value=te.x,U.value=te.y}return s6(e,z),(0,Ir.watch)(()=>zi(e),Q=>!Q&&z()),d&&Lt("scroll",z,{capture:!0,passive:!0}),u&&Lt("resize",z,{passive:!0}),X2(()=>{h&&z()}),{height:g,bottom:_,left:b,right:A,top:T,width:I,x:F,y:U,update:z}}function Qc(e,n={}){const{immediate:a=!0,window:u=Tr}=n,d=ref(!1);let h=0,g=null;function _(T){if(!d.value||!u)return;const I=T-h;e({delta:I,timestamp:T}),h=T,g=u.requestAnimationFrame(_)}function b(){!d.value&&u&&(d.value=!0,g=u.requestAnimationFrame(_))}function A(){d.value=!1,g!=null&&u&&(u.cancelAnimationFrame(g),g=null)}return a&&b(),tryOnScopeDispose(A),{isActive:readonly(d),pause:A,resume:b}}var RS=Object.defineProperty,l9=Object.getOwnPropertySymbols,NS=Object.prototype.hasOwnProperty,LS=Object.prototype.propertyIsEnumerable,u9=(e,n,a)=>n in e?RS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,BS=(e,n)=>{for(var a in n||(n={}))NS.call(n,a)&&u9(e,a,n[a]);if(l9)for(var a of l9(n))LS.call(n,a)&&u9(e,a,n[a]);return e};function sx(e){const n=ref(null),{x:a,y:u,document:d=Qo}=e,h=Qc(()=>{n.value=d?.elementFromPoint(resolveUnref(a),resolveUnref(u))||null});return BS({element:n},h)}function DS(e,n={}){const a=n?n.delayEnter:0,u=n?n.delayLeave:0,d=(0,Ir.ref)(!1);let h;const g=_=>{const b=_?a:u;h&&(clearTimeout(h),h=void 0),b?h=setTimeout(()=>d.value=_,b):d.value=_};return window&&(Lt(e,"mouseenter",()=>g(!0),{passive:!0}),Lt(e,"mouseleave",()=>g(!1),{passive:!0})),d}function FS(e,n={width:0,height:0},a={}){const{window:u=Tr,box:d="content-box"}=a,h=computed(()=>{var b,A;return(A=(b=zi(e))==null?void 0:b.namespaceURI)==null?void 0:A.includes("svg")}),g=ref(n.width),_=ref(n.height);return s6(e,([b])=>{const A=d==="border-box"?b.borderBoxSize:d==="content-box"?b.contentBoxSize:b.devicePixelContentBoxSize;if(u&&h.value){const T=zi(e);if(T){const I=u.getComputedStyle(T);g.value=parseFloat(I.width),_.value=parseFloat(I.height)}}else if(A){const T=Array.isArray(A)?A:[A];g.value=T.reduce((I,{inlineSize:F})=>I+F,0),_.value=T.reduce((I,{blockSize:F})=>I+F,0)}else g.value=b.contentRect.width,_.value=b.contentRect.height},a),watch(()=>zi(e),b=>{g.value=b?n.width:0,_.value=b?n.height:0}),{width:g,height:_}}function lx(e,{window:n=Tr,scrollTarget:a}={}){const u=ref(!1),d=()=>{if(!n)return;const h=n.document,g=zi(e);if(!g)u.value=!1;else{const _=g.getBoundingClientRect();u.value=_.top<=(n.innerHeight||h.documentElement.clientHeight)&&_.left<=(n.innerWidth||h.documentElement.clientWidth)&&_.bottom>=0&&_.right>=0}};return watch(()=>zi(e),()=>d(),{immediate:!0,flush:"post"}),n&&Lt(a||n,"scroll",d,{capture:!1,passive:!0}),u}const Jc=new Map;function ux(e){const n=getCurrentScope();function a(_){var b;const A=Jc.get(e)||[];A.push(_),Jc.set(e,A);const T=()=>d(_);return(b=n?.cleanups)==null||b.push(T),T}function u(_){function b(...A){d(b),_(...A)}return a(b)}function d(_){const b=Jc.get(e);if(!b)return;const A=b.indexOf(_);A>-1&&b.splice(A,1),b.length||Jc.delete(e)}function h(){Jc.delete(e)}function g(_,b){var A;(A=Jc.get(e))==null||A.forEach(T=>T(_,b))}return{on:a,once:u,off:d,emit:g,reset:h}}function cx(e,n=[],a={}){const u=ref(null),d=ref(null),h=ref("CONNECTING"),g=ref(null),_=ref(null),{withCredentials:b=!1}=a,A=()=>{g.value&&(g.value.close(),g.value=null,h.value="CLOSED")},T=new EventSource(e,{withCredentials:b});g.value=T,T.onopen=()=>{h.value="OPEN",_.value=null},T.onerror=I=>{h.value="CLOSED",_.value=I},T.onmessage=I=>{u.value=null,d.value=I.data};for(const I of n)Lt(T,I,F=>{u.value=I,d.value=F.data||null});return tryOnScopeDispose(()=>{A()}),{eventSource:g,event:u,data:d,status:h,error:_,close:A}}function dx(e={}){const{initialValue:n=""}=e,a=bi(()=>typeof window<"u"&&"EyeDropper"in window),u=ref(n);async function d(h){if(!a.value)return;const _=await new window.EyeDropper().open(h);return u.value=_.sRGBHex,_}return{isSupported:a,sRGBHex:u,open:d}}function fx(e=null,n={}){const{baseUrl:a="",rel:u="icon",document:d=Qo}=n,h=resolveRef(e),g=_=>{d?.head.querySelectorAll(`link[rel*="${u}"]`).forEach(b=>b.href=`${a}${_}`)};return watch(h,(_,b)=>{isString(_)&&_!==b&&g(_)},{immediate:!0}),h}var zS=Object.defineProperty,US=Object.defineProperties,HS=Object.getOwnPropertyDescriptors,c9=Object.getOwnPropertySymbols,GS=Object.prototype.hasOwnProperty,VS=Object.prototype.propertyIsEnumerable,d9=(e,n,a)=>n in e?zS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,Gi=(e,n)=>{for(var a in n||(n={}))GS.call(n,a)&&d9(e,a,n[a]);if(c9)for(var a of c9(n))VS.call(n,a)&&d9(e,a,n[a]);return e},Rl=(e,n)=>US(e,HS(n));const jS={json:"application/json",text:"text/plain"};function cv(e){return e&&containsProp(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch")}function $S(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function T0(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function ed(e,...n){return e==="overwrite"?async a=>{const u=n[n.length-1];return u!==void 0&&await u(a),a}:async a=>(await n.reduce((u,d)=>u.then(async()=>{d&&(a=Gi(Gi({},a),await d(a)))}),Promise.resolve()),a)}function hx(e={}){const n=e.combination||"chain",a=e.options||{},u=e.fetchOptions||{};function d(h,...g){const _=computed(()=>{const T=resolveUnref(e.baseUrl),I=resolveUnref(h);return T&&!$S(I)?qS(T,I):I});let b=a,A=u;return g.length>0&&(cv(g[0])?b=Rl(Gi(Gi({},b),g[0]),{beforeFetch:ed(n,a.beforeFetch,g[0].beforeFetch),afterFetch:ed(n,a.afterFetch,g[0].afterFetch),onFetchError:ed(n,a.onFetchError,g[0].onFetchError)}):A=Rl(Gi(Gi({},A),g[0]),{headers:Gi(Gi({},T0(A.headers)||{}),T0(g[0].headers)||{})})),g.length>1&&cv(g[1])&&(b=Rl(Gi(Gi({},b),g[1]),{beforeFetch:ed(n,a.beforeFetch,g[1].beforeFetch),afterFetch:ed(n,a.afterFetch,g[1].afterFetch),onFetchError:ed(n,a.onFetchError,g[1].onFetchError)})),WS(_,A,b)}return d}function WS(e,...n){var a;const u=typeof AbortController=="function";let d={},h={immediate:!0,refetch:!1,timeout:0};const g={method:"GET",type:"text",payload:void 0};n.length>0&&(cv(n[0])?h=Gi(Gi({},h),n[0]):d=n[0]),n.length>1&&cv(n[1])&&(h=Gi(Gi({},h),n[1]));const{fetch:_=(a=Tr)==null?void 0:a.fetch,initialData:b,timeout:A}=h,T=createEventHook(),I=createEventHook(),F=createEventHook(),U=ref(!1),z=ref(!1),Q=ref(!1),te=ref(null),Pe=shallowRef(null),Ce=shallowRef(null),He=shallowRef(b),it=computed(()=>u&&z.value);let Pt,Ut;const sn=()=>{u&&Pt&&(Pt.abort(),Pt=void 0)},Ln=Xi=>{z.value=Xi,U.value=!Xi};A&&(Ut=useTimeoutFn(sn,A,{immediate:!1}));const Hn=async(Xi=!1)=>{var ka;Ln(!0),Ce.value=null,te.value=null,Q.value=!1,u&&(sn(),Pt=new AbortController,Pt.signal.onabort=()=>Q.value=!0,d=Rl(Gi({},d),{signal:Pt.signal}));const Jo={method:g.method,headers:{}};if(g.payload){const yv=T0(Jo.headers);g.payloadType&&(yv["Content-Type"]=(ka=jS[g.payloadType])!=null?ka:g.payloadType);const wv=resolveUnref(g.payload);Jo.body=g.payloadType==="json"?JSON.stringify(wv):wv}let ea=!1;const Ds={url:resolveUnref(e),options:Gi(Gi({},Jo),d),cancel:()=>{ea=!0}};if(h.beforeFetch&&Object.assign(Ds,await h.beforeFetch(Ds)),ea||!_)return Ln(!1),Promise.resolve(null);let Fs=null;return Ut&&Ut.start(),new Promise((yv,wv)=>{var q4;_(Ds.url,Rl(Gi(Gi({},Jo),Ds.options),{headers:Gi(Gi({},T0(Jo.headers)),T0((q4=Ds.options)==null?void 0:q4.headers))})).then(async ta=>{if(Pe.value=ta,te.value=ta.status,Fs=await ta[g.type](),h.afterFetch&&te.value>=200&&te.value<300&&({data:Fs}=await h.afterFetch({data:Fs,response:ta})),He.value=Fs,!ta.ok)throw new Error(ta.statusText);return T.trigger(ta),yv(ta)}).catch(async ta=>{let K4=ta.message||ta.name;return h.onFetchError&&({data:Fs,error:K4}=await h.onFetchError({data:Fs,error:ta,response:Pe.value})),He.value=Fs,Ce.value=K4,I.trigger(ta),Xi?wv(ta):yv(null)}).finally(()=>{Ln(!1),Ut&&Ut.stop(),F.trigger(null)})})},_n=resolveRef(h.refetch);watch([_n,resolveRef(e)],([Xi])=>Xi&&Hn(),{deep:!0});const hr={isFinished:U,statusCode:te,response:Pe,error:Ce,data:He,isFetching:z,canAbort:it,aborted:Q,abort:sn,execute:Hn,onFetchResponse:T.on,onFetchError:I.on,onFetchFinally:F.on,get:ui("GET"),put:ui("PUT"),post:ui("POST"),delete:ui("DELETE"),patch:ui("PATCH"),head:ui("HEAD"),options:ui("OPTIONS"),json:Bs("json"),text:Bs("text"),blob:Bs("blob"),arrayBuffer:Bs("arrayBuffer"),formData:Bs("formData")};function ui(Xi){return(ka,Jo)=>{if(!z.value){g.method=Xi,g.payload=ka,g.payloadType=Jo,isRef(g.payload)&&watch([_n,resolveRef(g.payload)],([Ds])=>Ds&&Hn(),{deep:!0});const ea=resolveUnref(g.payload);return!Jo&&ea&&Object.getPrototypeOf(ea)===Object.prototype&&!(ea instanceof FormData)&&(g.payloadType="json"),Rl(Gi({},hr),{then(Ds,Fs){return mo().then(Ds,Fs)}})}}}function mo(){return new Promise((Xi,ka)=>{until(U).toBe(!0).then(()=>Xi(hr)).catch(Jo=>ka(Jo))})}function Bs(Xi){return()=>{if(!z.value)return g.type=Xi,Rl(Gi({},hr),{then(ka,Jo){return mo().then(ka,Jo)}})}}return h.immediate&&setTimeout(Hn,0),Rl(Gi({},hr),{then(Xi,ka){return mo().then(Xi,ka)}})}function qS(e,n){return!e.endsWith("/")&&!n.startsWith("/")?`${e}/${n}`:`${e}${n}`}var KS=Object.defineProperty,f9=Object.getOwnPropertySymbols,ZS=Object.prototype.hasOwnProperty,YS=Object.prototype.propertyIsEnumerable,h9=(e,n,a)=>n in e?KS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,l6=(e,n)=>{for(var a in n||(n={}))ZS.call(n,a)&&h9(e,a,n[a]);if(f9)for(var a of f9(n))YS.call(n,a)&&h9(e,a,n[a]);return e};const XS={multiple:!0,accept:"*"};function px(e={}){const{document:n=Qo}=e,a=ref(null);let u;n&&(u=n.createElement("input"),u.type="file",u.onchange=g=>{const _=g.target;a.value=_.files});const d=g=>{if(!u)return;const _=l6(l6(l6({},XS),e),g);u.multiple=_.multiple,u.accept=_.accept,hasOwn(_,"capture")&&(u.capture=_.capture),u.click()},h=()=>{a.value=null,u&&(u.value="")};return{files:readonly(a),open:d,reset:h}}var QS=Object.defineProperty,p9=Object.getOwnPropertySymbols,JS=Object.prototype.hasOwnProperty,e7=Object.prototype.propertyIsEnumerable,m9=(e,n,a)=>n in e?QS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,td=(e,n)=>{for(var a in n||(n={}))JS.call(n,a)&&m9(e,a,n[a]);if(p9)for(var a of p9(n))e7.call(n,a)&&m9(e,a,n[a]);return e};function mx(e={}){const{window:n=Tr,dataType:a="Text"}=unref(e),u=n,d=bi(()=>u&&"showSaveFilePicker"in u&&"showOpenFilePicker"in u),h=ref(),g=ref(),_=ref(),b=computed(()=>{var Ce,He;return(He=(Ce=_.value)==null?void 0:Ce.name)!=null?He:""}),A=computed(()=>{var Ce,He;return(He=(Ce=_.value)==null?void 0:Ce.type)!=null?He:""}),T=computed(()=>{var Ce,He;return(He=(Ce=_.value)==null?void 0:Ce.size)!=null?He:0}),I=computed(()=>{var Ce,He;return(He=(Ce=_.value)==null?void 0:Ce.lastModified)!=null?He:0});async function F(Ce={}){if(!d.value)return;const[He]=await u.showOpenFilePicker(td(td({},unref(e)),Ce));h.value=He,await te(),await Pe()}async function U(Ce={}){d.value&&(h.value=await u.showSaveFilePicker(td(td({},unref(e)),Ce)),g.value=void 0,await te(),await Pe())}async function z(Ce={}){if(d.value){if(!h.value)return Q(Ce);if(g.value){const He=await h.value.createWritable();await He.write(g.value),await He.close()}await te()}}async function Q(Ce={}){if(d.value){if(h.value=await u.showSaveFilePicker(td(td({},unref(e)),Ce)),g.value){const He=await h.value.createWritable();await He.write(g.value),await He.close()}await te()}}async function te(){var Ce;_.value=await((Ce=h.value)==null?void 0:Ce.getFile())}async function Pe(){var Ce,He;unref(a)==="Text"&&(g.value=await((Ce=_.value)==null?void 0:Ce.text())),unref(a)==="ArrayBuffer"&&(g.value=await((He=_.value)==null?void 0:He.arrayBuffer())),unref(a)==="Blob"&&(g.value=_.value)}return watch(()=>unref(a),Pe),{isSupported:d,data:g,file:_,fileName:b,fileMIME:A,fileSize:T,fileLastModified:I,open:F,create:U,save:z,saveAs:Q,updateData:Pe}}function vx(e,n={}){const{initialValue:a=!1}=n,u=ref(!1),d=computed(()=>zi(e));Lt(d,"focus",()=>u.value=!0),Lt(d,"blur",()=>u.value=!1);const h=computed({get:()=>u.value,set(g){var _,b;!g&&u.value?(_=d.value)==null||_.blur():g&&!u.value&&((b=d.value)==null||b.focus())}});return watch(d,()=>{h.value=a},{immediate:!0,flush:"post"}),{focused:h}}function gx(e,n={}){const a=OA(n),u=computed(()=>zi(e));return{focused:computed(()=>u.value&&a.value?u.value.contains(a.value):!1)}}function _x(e){var n;const a=ref(0);if(typeof performance>"u")return a;const u=(n=e?.every)!=null?n:10;let d=performance.now(),h=0;return Qc(()=>{if(h+=1,h>=u){const g=performance.now(),_=g-d;a.value=Math.round(1e3/(_/h)),d=g,h=0}}),a}const v9=null;function bx(e,n={}){const{document:a=Qo,autoExit:u=!1}=n,d=e||a?.querySelector("html"),h=ref(!1);let g=v9[0];const _=bi(()=>{if(a){for(const Q of v9)if(Q[1]in a)return g=Q,!0}else return!1;return!1}),[b,A,T,,I]=g;async function F(){_.value&&(a?.[T]&&await a[A](),h.value=!1)}async function U(){if(!_.value)return;await F();const Q=zi(d);Q&&(await Q[b](),h.value=!0)}async function z(){h.value?await F():await U()}return a&&Lt(a,I,()=>{h.value=!!a?.[T]},!1),u&&tryOnScopeDispose(F),{isSupported:_,isFullscreen:h,enter:U,exit:F,toggle:z}}function yx(e){return computed(()=>e.value?{buttons:{a:e.value.buttons[0],b:e.value.buttons[1],x:e.value.buttons[2],y:e.value.buttons[3]},bumper:{left:e.value.buttons[4],right:e.value.buttons[5]},triggers:{left:e.value.buttons[6],right:e.value.buttons[7]},stick:{left:{horizontal:e.value.axes[0],vertical:e.value.axes[1],button:e.value.buttons[10]},right:{horizontal:e.value.axes[2],vertical:e.value.axes[3],button:e.value.buttons[11]}},dpad:{up:e.value.buttons[12],down:e.value.buttons[13],left:e.value.buttons[14],right:e.value.buttons[15]},back:e.value.buttons[8],start:e.value.buttons[9]}:null)}function wx(e={}){const{navigator:n=Ea}=e,a=bi(()=>n&&"getGamepads"in n),u=ref([]),d=createEventHook(),h=createEventHook(),g=U=>{const z=[],Q="vibrationActuator"in U?U.vibrationActuator:null;return Q&&z.push(Q),U.hapticActuators&&z.push(...U.hapticActuators),{id:U.id,hapticActuators:z,index:U.index,mapping:U.mapping,connected:U.connected,timestamp:U.timestamp,axes:U.axes.map(te=>te),buttons:U.buttons.map(te=>({pressed:te.pressed,touched:te.touched,value:te.value}))}},_=()=>{const U=n?.getGamepads()||[];for(let z=0;z<U.length;++z){const Q=U[z];if(Q){const te=u.value.findIndex(({index:Pe})=>Pe===Q.index);te>-1&&(u.value[te]=g(Q))}}},{isActive:b,pause:A,resume:T}=Qc(_),I=U=>{u.value.some(({index:z})=>z===U.index)||(u.value.push(g(U)),d.trigger(U.index)),T()},F=U=>{u.value=u.value.filter(z=>z.index!==U.index),h.trigger(U.index)};return Lt("gamepadconnected",U=>I(U.gamepad)),Lt("gamepaddisconnected",U=>F(U.gamepad)),tryOnMounted(()=>{const U=n?.getGamepads()||[];if(U)for(let z=0;z<U.length;++z){const Q=U[z];Q&&I(Q)}}),A(),{isSupported:a,onConnected:d.on,onDisconnected:h.on,gamepads:u,pause:A,resume:T,isActive:b}}function Ex(e={}){const{enableHighAccuracy:n=!0,maximumAge:a=3e4,timeout:u=27e3,navigator:d=Ea,immediate:h=!0}=e,g=bi(()=>d&&"geolocation"in d),_=ref(null),b=ref(null),A=ref({accuracy:0,latitude:1/0,longitude:1/0,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function T(z){_.value=z.timestamp,A.value=z.coords,b.value=null}let I;function F(){g.value&&(I=d.geolocation.watchPosition(T,z=>b.value=z,{enableHighAccuracy:n,maximumAge:a,timeout:u}))}h&&F();function U(){I&&d&&d.geolocation.clearWatch(I)}return tryOnScopeDispose(()=>{U()}),{isSupported:g,coords:A,locatedAt:_,error:b,resume:F,pause:U}}const t7=null,n7=6e4;function Ax(e=n7,n={}){const{initialState:a=!1,listenForVisibilityChange:u=!0,events:d=t7,window:h=Tr,eventFilter:g=throttleFilter(50)}=n,_=ref(a),b=ref(timestamp());let A;const T=createFilterWrapper(g,()=>{_.value=!1,b.value=timestamp(),clearTimeout(A),A=setTimeout(()=>_.value=!0,e)});if(h){const I=h.document;for(const F of d)Lt(h,F,T,{passive:!0});u&&Lt(I,"visibilitychange",()=>{I.hidden||T()})}return A=setTimeout(()=>_.value=!0,e),{idle:_,lastActive:b}}var r7=Object.defineProperty,g9=Object.getOwnPropertySymbols,i7=Object.prototype.hasOwnProperty,o7=Object.prototype.propertyIsEnumerable,_9=(e,n,a)=>n in e?r7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,a7=(e,n)=>{for(var a in n||(n={}))i7.call(n,a)&&_9(e,a,n[a]);if(g9)for(var a of g9(n))o7.call(n,a)&&_9(e,a,n[a]);return e};async function s7(e){return new Promise((n,a)=>{const u=new Image,{src:d,srcset:h,sizes:g}=e;u.src=d,h&&(u.srcset=h),g&&(u.sizes=g),u.onload=()=>n(u),u.onerror=a})}const Sx=(e,n={})=>{const a=xA(()=>s7(resolveUnref(e)),void 0,a7({resetOnExecute:!0},n));return watch(()=>resolveUnref(e),()=>a.execute(n.delay),{deep:!0}),a},b9=1;function l7(e,n={}){const{throttle:a=0,idle:u=200,onStop:d=noop,onScroll:h=noop,offset:g={left:0,right:0,top:0,bottom:0},eventListenerOptions:_={capture:!1,passive:!0},behavior:b="auto"}=n,A=ref(0),T=ref(0),I=computed({get(){return A.value},set(it){U(it,void 0)}}),F=computed({get(){return T.value},set(it){U(void 0,it)}});function U(it,Pt){var Ut,sn,Ln;const Hn=resolveUnref(e);Hn&&((Ln=Hn instanceof Document?document.body:Hn)==null||Ln.scrollTo({top:(Ut=resolveUnref(Pt))!=null?Ut:F.value,left:(sn=resolveUnref(it))!=null?sn:I.value,behavior:resolveUnref(b)}))}const z=ref(!1),Q=reactive({left:!0,right:!1,top:!0,bottom:!1}),te=reactive({left:!1,right:!1,top:!1,bottom:!1}),Pe=it=>{z.value&&(z.value=!1,te.left=!1,te.right=!1,te.top=!1,te.bottom=!1,d(it))},Ce=useDebounceFn(Pe,a+u),He=it=>{const Pt=it.target===document?it.target.documentElement:it.target,Ut=Pt.scrollLeft;te.left=Ut<A.value,te.right=Ut>T.value,Q.left=Ut<=0+(g.left||0),Q.right=Ut+Pt.clientWidth>=Pt.scrollWidth-(g.right||0)-b9,A.value=Ut;let sn=Pt.scrollTop;it.target===document&&!sn&&(sn=document.body.scrollTop),te.top=sn<T.value,te.bottom=sn>T.value,Q.top=sn<=0+(g.top||0),Q.bottom=sn+Pt.clientHeight>=Pt.scrollHeight-(g.bottom||0)-b9,T.value=sn,z.value=!0,Ce(it),h(it)};return Lt(e,"scroll",a?useThrottleFn(He,a,!0,!1):He,_),Lt(e,"scrollend",Pe,_),{x:I,y:F,isScrolling:z,arrivedState:Q,directions:te}}var u7=Object.defineProperty,c7=Object.defineProperties,d7=Object.getOwnPropertyDescriptors,y9=Object.getOwnPropertySymbols,f7=Object.prototype.hasOwnProperty,h7=Object.prototype.propertyIsEnumerable,w9=(e,n,a)=>n in e?u7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,E9=(e,n)=>{for(var a in n||(n={}))f7.call(n,a)&&w9(e,a,n[a]);if(y9)for(var a of y9(n))h7.call(n,a)&&w9(e,a,n[a]);return e},p7=(e,n)=>c7(e,d7(n));function kx(e,n,a={}){var u,d;const h=(u=a.direction)!=null?u:"bottom",g=reactive(l7(e,p7(E9({},a),{offset:E9({[h]:(d=a.distance)!=null?d:0},a.offset)})));watch(()=>g.arrivedState[h],async _=>{var b,A;if(_){const T=resolveUnref(e),I={height:(b=T?.scrollHeight)!=null?b:0,width:(A=T?.scrollWidth)!=null?A:0};await n(g),a.preserveScrollPosition&&T&&nextTick(()=>{T.scrollTo({top:T.scrollHeight-I.height,left:T.scrollWidth-I.width})})}})}function Px(e,n,a={}){const{root:u,rootMargin:d="0px",threshold:h=.1,window:g=Tr}=a,_=bi(()=>g&&"IntersectionObserver"in g);let b=noop;const A=_.value?watch(()=>({el:zi(e),root:zi(u)}),({el:I,root:F})=>{if(b(),!I)return;const U=new IntersectionObserver(n,{root:F,rootMargin:d,threshold:h});U.observe(I),b=()=>{U.disconnect(),b=noop}},{immediate:!0,flush:"post"}):noop,T=()=>{b(),A()};return tryOnScopeDispose(T),{isSupported:_,stop:T}}const m7=null;function Cx(e,n={}){const{events:a=m7,document:u=Qo,initial:d=null}=n,h=ref(d);return u&&a.forEach(g=>{Lt(u,g,_=>{typeof _.getModifierState=="function"&&(h.value=_.getModifierState(e))})}),h}function Tx(e,n,a={}){const{window:u=Tr}=a;return a6(e,n,u?.localStorage,a)}const v7={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function Mx(e={}){const{reactive:n=!1,target:a=Tr,aliasMap:u=v7,passive:d=!0,onEventFired:h=noop}=e,g=reactive(new Set),_={toJSON(){return{}},current:g},b=n?reactive(_):_,A=new Set,T=new Set;function I(Q,te){Q in b&&(n?b[Q]=te:b[Q].value=te)}function F(){g.clear();for(const Q of T)I(Q,!1)}function U(Q,te){var Pe,Ce;const He=(Pe=Q.key)==null?void 0:Pe.toLowerCase(),Pt=[(Ce=Q.code)==null?void 0:Ce.toLowerCase(),He].filter(Boolean);He&&(te?g.add(He):g.delete(He));for(const Ut of Pt)T.add(Ut),I(Ut,te);He==="meta"&&!te?(A.forEach(Ut=>{g.delete(Ut),I(Ut,!1)}),A.clear()):typeof Q.getModifierState=="function"&&Q.getModifierState("Meta")&&te&&[...g,...Pt].forEach(Ut=>A.add(Ut))}Lt(a,"keydown",Q=>(U(Q,!0),h(Q)),{passive:d}),Lt(a,"keyup",Q=>(U(Q,!1),h(Q)),{passive:d}),Lt("blur",F,{passive:!0}),Lt("focus",F,{passive:!0});const z=new Proxy(b,{get(Q,te,Pe){if(typeof te!="string")return Reflect.get(Q,te,Pe);if(te=te.toLowerCase(),te in u&&(te=u[te]),!(te in b))if(/[+_-]/.test(te)){const He=te.split(/[+_-]/g).map(it=>it.trim());b[te]=computed(()=>He.every(it=>unref(z[it])))}else b[te]=ref(!1);const Ce=Reflect.get(Q,te,Pe);return n?unref(Ce):Ce}});return z}var g7=Object.defineProperty,A9=Object.getOwnPropertySymbols,_7=Object.prototype.hasOwnProperty,b7=Object.prototype.propertyIsEnumerable,S9=(e,n,a)=>n in e?g7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,k9=(e,n)=>{for(var a in n||(n={}))_7.call(n,a)&&S9(e,a,n[a]);if(A9)for(var a of A9(n))b7.call(n,a)&&S9(e,a,n[a]);return e};function u6(e,n){resolveUnref(e)&&n(resolveUnref(e))}function y7(e){let n=[];for(let a=0;a<e.length;++a)n=[...n,[e.start(a),e.end(a)]];return n}function c6(e){return Array.from(e).map(({label:n,kind:a,language:u,mode:d,activeCues:h,cues:g,inBandMetadataTrackDispatchType:_},b)=>({id:b,label:n,kind:a,language:u,mode:d,activeCues:h,cues:g,inBandMetadataTrackDispatchType:_}))}const w7={src:"",tracks:[]};function Ox(e,n={}){n=k9(k9({},w7),n);const{document:a=Qo}=n,u=ref(0),d=ref(0),h=ref(!1),g=ref(1),_=ref(!1),b=ref(!1),A=ref(!1),T=ref(1),I=ref(!1),F=ref([]),U=ref([]),z=ref(-1),Q=ref(!1),te=ref(!1),Pe=a&&"pictureInPictureEnabled"in a,Ce=createEventHook(),He=_n=>{u6(e,hr=>{if(_n){const ui=isNumber(_n)?_n:_n.id;hr.textTracks[ui].mode="disabled"}else for(let ui=0;ui<hr.textTracks.length;++ui)hr.textTracks[ui].mode="disabled";z.value=-1})},it=(_n,hr=!0)=>{u6(e,ui=>{const mo=isNumber(_n)?_n:_n.id;hr&&He(),ui.textTracks[mo].mode="showing",z.value=mo})},Pt=()=>new Promise((_n,hr)=>{u6(e,async ui=>{Pe&&(Q.value?a.exitPictureInPicture().then(_n).catch(hr):ui.requestPictureInPicture().then(_n).catch(hr))})});watchEffect(()=>{if(!a)return;const _n=resolveUnref(e);if(!_n)return;const hr=resolveUnref(n.src);let ui=[];hr&&(isString(hr)?ui=[{src:hr}]:Array.isArray(hr)?ui=hr:isObject(hr)&&(ui=[hr]),_n.querySelectorAll("source").forEach(mo=>{mo.removeEventListener("error",Ce.trigger),mo.remove()}),ui.forEach(({src:mo,type:Bs})=>{const Xi=a.createElement("source");Xi.setAttribute("src",mo),Xi.setAttribute("type",Bs||""),Xi.addEventListener("error",Ce.trigger),_n.appendChild(Xi)}),_n.load())}),tryOnScopeDispose(()=>{const _n=resolveUnref(e);_n&&_n.querySelectorAll("source").forEach(hr=>hr.removeEventListener("error",Ce.trigger))}),watch(g,_n=>{const hr=resolveUnref(e);hr&&(hr.volume=_n)}),watch(te,_n=>{const hr=resolveUnref(e);hr&&(hr.muted=_n)}),watch(T,_n=>{const hr=resolveUnref(e);hr&&(hr.playbackRate=_n)}),watchEffect(()=>{if(!a)return;const _n=resolveUnref(n.tracks),hr=resolveUnref(e);!_n||!_n.length||!hr||(hr.querySelectorAll("track").forEach(ui=>ui.remove()),_n.forEach(({default:ui,kind:mo,label:Bs,src:Xi,srcLang:ka},Jo)=>{const ea=a.createElement("track");ea.default=ui||!1,ea.kind=mo,ea.label=Bs,ea.src=Xi,ea.srclang=ka,ea.default&&(z.value=Jo),hr.appendChild(ea)}))});const{ignoreUpdates:Ut}=watchIgnorable(u,_n=>{const hr=resolveUnref(e);hr&&(hr.currentTime=_n)}),{ignoreUpdates:sn}=watchIgnorable(A,_n=>{const hr=resolveUnref(e);hr&&(_n?hr.play():hr.pause())});Lt(e,"timeupdate",()=>Ut(()=>u.value=resolveUnref(e).currentTime)),Lt(e,"durationchange",()=>d.value=resolveUnref(e).duration),Lt(e,"progress",()=>F.value=y7(resolveUnref(e).buffered)),Lt(e,"seeking",()=>h.value=!0),Lt(e,"seeked",()=>h.value=!1),Lt(e,"waiting",()=>_.value=!0),Lt(e,"playing",()=>{_.value=!1,b.value=!1}),Lt(e,"ratechange",()=>T.value=resolveUnref(e).playbackRate),Lt(e,"stalled",()=>I.value=!0),Lt(e,"ended",()=>b.value=!0),Lt(e,"pause",()=>sn(()=>A.value=!1)),Lt(e,"play",()=>sn(()=>A.value=!0)),Lt(e,"enterpictureinpicture",()=>Q.value=!0),Lt(e,"leavepictureinpicture",()=>Q.value=!1),Lt(e,"volumechange",()=>{const _n=resolveUnref(e);_n&&(g.value=_n.volume,te.value=_n.muted)});const Ln=[],Hn=watch([e],()=>{const _n=resolveUnref(e);_n&&(Hn(),Ln[0]=Lt(_n.textTracks,"addtrack",()=>U.value=c6(_n.textTracks)),Ln[1]=Lt(_n.textTracks,"removetrack",()=>U.value=c6(_n.textTracks)),Ln[2]=Lt(_n.textTracks,"change",()=>U.value=c6(_n.textTracks)))});return tryOnScopeDispose(()=>Ln.forEach(_n=>_n())),{currentTime:u,duration:d,waiting:_,seeking:h,ended:b,stalled:I,buffered:F,playing:A,rate:T,volume:g,muted:te,tracks:U,selectedTrack:z,enableTrack:it,disableTrack:He,supportsPictureInPicture:Pe,togglePictureInPicture:Pt,isPictureInPicture:Q,onSourceError:Ce.on}}const E7=()=>{const e=reactive({});return{get:n=>e[n],set:(n,a)=>set(e,n,a),has:n=>hasOwn(e,n),delete:n=>del(e,n),clear:()=>{Object.keys(e).forEach(n=>{del(e,n)})}}};function xx(e,n){const u=(()=>n?.cache?reactive(n.cache):isVue2?E7():reactive(new Map))(),d=(...T)=>n?.getKey?n.getKey(...T):JSON.stringify(T),h=(T,...I)=>(u.set(T,e(...I)),u.get(T)),g=(...T)=>h(d(...T),...T),_=(...T)=>{u.delete(d(...T))},b=()=>{u.clear()},A=(...T)=>{const I=d(...T);return u.has(I)?u.get(I):h(I,...T)};return A.load=g,A.delete=_,A.clear=b,A.generateKey=d,A.cache=u,A}function Ix(e={}){const n=ref(),a=bi(()=>typeof performance<"u"&&"memory"in performance);if(a.value){const{interval:u=1e3}=e;useIntervalFn(()=>{n.value=performance.memory},u,{immediate:e.immediate,immediateCallback:e.immediateCallback})}return{isSupported:a,memory:n}}function Rx(){const e=ref(!1);return onMounted(()=>{e.value=!0}),e}function A7(e={}){const{type:n="page",touch:a=!0,resetOnTouchEnds:u=!1,initialValue:d={x:0,y:0},window:h=Tr,eventFilter:g}=e,_=ref(d.x),b=ref(d.y),A=ref(null),T=Q=>{n==="page"?(_.value=Q.pageX,b.value=Q.pageY):n==="client"?(_.value=Q.clientX,b.value=Q.clientY):n==="movement"&&(_.value=Q.movementX,b.value=Q.movementY),A.value="mouse"},I=()=>{_.value=d.x,b.value=d.y},F=Q=>{if(Q.touches.length>0){const te=Q.touches[0];n==="page"?(_.value=te.pageX,b.value=te.pageY):n==="client"&&(_.value=te.clientX,b.value=te.clientY),A.value="touch"}},U=Q=>g===void 0?T(Q):g(()=>T(Q),{}),z=Q=>g===void 0?F(Q):g(()=>F(Q),{});return h&&(Lt(h,"mousemove",U,{passive:!0}),Lt(h,"dragover",U,{passive:!0}),a&&n!=="movement"&&(Lt(h,"touchstart",z,{passive:!0}),Lt(h,"touchmove",z,{passive:!0}),u&&Lt(h,"touchend",I,{passive:!0}))),{x:_,y:b,sourceType:A}}function S7(e,n={}){const{handleOutside:a=!0,window:u=Tr}=n,{x:d,y:h,sourceType:g}=A7(n),_=ref(e??u?.document.body),b=ref(0),A=ref(0),T=ref(0),I=ref(0),F=ref(0),U=ref(0),z=ref(!0);let Q=()=>{};return u&&(Q=watch([_,d,h],()=>{const te=zi(_);if(!te)return;const{left:Pe,top:Ce,width:He,height:it}=te.getBoundingClientRect();T.value=Pe+u.pageXOffset,I.value=Ce+u.pageYOffset,F.value=it,U.value=He;const Pt=d.value-T.value,Ut=h.value-I.value;z.value=He===0||it===0||Pt<0||Ut<0||Pt>He||Ut>it,(a||!z.value)&&(b.value=Pt,A.value=Ut)},{immediate:!0}),Lt(document,"mouseleave",()=>{z.value=!0})),{x:d,y:h,sourceType:g,elementX:b,elementY:A,elementPositionX:T,elementPositionY:I,elementHeight:F,elementWidth:U,isOutside:z,stop:Q}}function Nx(e={}){const{touch:n=!0,drag:a=!0,initialValue:u=!1,window:d=Tr}=e,h=ref(u),g=ref(null);if(!d)return{pressed:h,sourceType:g};const _=T=>()=>{h.value=!0,g.value=T},b=()=>{h.value=!1,g.value=null},A=computed(()=>zi(e.target)||d);return Lt(A,"mousedown",_("mouse"),{passive:!0}),Lt(d,"mouseleave",b,{passive:!0}),Lt(d,"mouseup",b,{passive:!0}),a&&(Lt(A,"dragstart",_("mouse"),{passive:!0}),Lt(d,"drop",b,{passive:!0}),Lt(d,"dragend",b,{passive:!0})),n&&(Lt(A,"touchstart",_("touch"),{passive:!0}),Lt(d,"touchend",b,{passive:!0}),Lt(d,"touchcancel",b,{passive:!0})),{pressed:h,sourceType:g}}var P9=Object.getOwnPropertySymbols,k7=Object.prototype.hasOwnProperty,P7=Object.prototype.propertyIsEnumerable,C7=(e,n)=>{var a={};for(var u in e)k7.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&P9)for(var u of P9(e))n.indexOf(u)<0&&P7.call(e,u)&&(a[u]=e[u]);return a};function C9(e,n,a={}){const u=a,{window:d=Tr}=u,h=C7(u,["window"]);let g;const _=bi(()=>d&&"MutationObserver"in d),b=()=>{g&&(g.disconnect(),g=void 0)},A=watch(()=>zi(e),I=>{b(),_.value&&d&&I&&(g=new MutationObserver(n),g.observe(I,h))},{immediate:!0}),T=()=>{b(),A()};return tryOnScopeDispose(T),{isSupported:_,stop:T}}const Lx=(e={})=>{const{window:n=Tr}=e,a=n?.navigator,u=bi(()=>a&&"language"in a),d=ref(a?.language);return Lt(n,"languagechange",()=>{a&&(d.value=a.language)}),{isSupported:u,language:d}};function T7(e={}){const{window:n=Tr}=e,a=n?.navigator,u=bi(()=>a&&"connection"in a),d=ref(!0),h=ref(!1),g=ref(void 0),_=ref(void 0),b=ref(void 0),A=ref(void 0),T=ref(void 0),I=ref(void 0),F=ref("unknown"),U=u.value&&a.connection;function z(){a&&(d.value=a.onLine,g.value=d.value?void 0:Date.now(),_.value=d.value?Date.now():void 0,U&&(b.value=U.downlink,A.value=U.downlinkMax,I.value=U.effectiveType,T.value=U.rtt,h.value=U.saveData,F.value=U.type))}return n&&(Lt(n,"offline",()=>{d.value=!1,g.value=Date.now()}),Lt(n,"online",()=>{d.value=!0,_.value=Date.now()})),U&&Lt(U,"change",z,!1),z(),{isSupported:u,isOnline:d,saveData:h,offlineAt:g,onlineAt:_,downlink:b,downlinkMax:A,effectiveType:I,rtt:T,type:F}}var M7=Object.defineProperty,T9=Object.getOwnPropertySymbols,O7=Object.prototype.hasOwnProperty,x7=Object.prototype.propertyIsEnumerable,M9=(e,n,a)=>n in e?M7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,I7=(e,n)=>{for(var a in n||(n={}))O7.call(n,a)&&M9(e,a,n[a]);if(T9)for(var a of T9(n))x7.call(n,a)&&M9(e,a,n[a]);return e};function R7(e={}){const{controls:n=!1,interval:a="requestAnimationFrame"}=e,u=ref(new Date),d=()=>u.value=new Date,h=a==="requestAnimationFrame"?Qc(d,{immediate:!0}):useIntervalFn(d,a,{immediate:!0});return n?I7({now:u},h):u}function Bx(e){const n=ref(),a=()=>{n.value&&URL.revokeObjectURL(n.value),n.value=void 0};return watch(()=>unref(e),u=>{a(),u&&(n.value=URL.createObjectURL(u))},{immediate:!0}),tryOnScopeDispose(a),readonly(n)}function O9(e,n,a){if(isFunction(e)||isReadonly(e))return computed(()=>clamp(resolveUnref(e),resolveUnref(n),resolveUnref(a)));const u=ref(e);return computed({get(){return u.value=clamp(u.value,resolveUnref(n),resolveUnref(a))},set(d){u.value=clamp(d,resolveUnref(n),resolveUnref(a))}})}function Dx(e){const{total:n=1/0,pageSize:a=10,page:u=1,onPageChange:d=noop,onPageSizeChange:h=noop,onPageCountChange:g=noop}=e,_=O9(a,1,1/0),b=computed(()=>Math.max(1,Math.ceil(unref(n)/unref(_)))),A=O9(u,1,b),T=computed(()=>A.value===1),I=computed(()=>A.value===b.value);isRef(u)&&syncRef(u,A),isRef(a)&&syncRef(a,_);function F(){A.value--}function U(){A.value++}const z={currentPage:A,currentPageSize:_,pageCount:b,isFirstPage:T,isLastPage:I,prev:F,next:U};return watch(A,()=>{d(reactive(z))}),watch(_,()=>{h(reactive(z))}),watch(b,()=>{g(reactive(z))}),z}function Fx(e={}){const{isOnline:n}=T7(e);return n}function zx(e={}){const{window:n=Tr}=e,a=ref(!1),u=d=>{if(!n)return;d=d||n.event;const h=d.relatedTarget||d.toElement;a.value=!h};return n&&(Lt(n,"mouseout",u,{passive:!0}),Lt(n.document,"mouseleave",u,{passive:!0}),Lt(n.document,"mouseenter",u,{passive:!0})),a}function Ux(e,n={}){const{deviceOrientationTiltAdjust:a=Q=>Q,deviceOrientationRollAdjust:u=Q=>Q,mouseTiltAdjust:d=Q=>Q,mouseRollAdjust:h=Q=>Q,window:g=Tr}=n,_=reactive(wS({window:g})),{elementX:b,elementY:A,elementWidth:T,elementHeight:I}=S7(e,{handleOutside:!1,window:g}),F=computed(()=>_.isSupported&&(_.alpha!=null&&_.alpha!==0||_.gamma!=null&&_.gamma!==0)?"deviceOrientation":"mouse"),U=computed(()=>{if(F.value==="deviceOrientation"){const Q=-_.beta/90;return u(Q)}else{const Q=-(A.value-I.value/2)/I.value;return h(Q)}}),z=computed(()=>{if(F.value==="deviceOrientation"){const Q=_.gamma/90;return a(Q)}else{const Q=(b.value-T.value/2)/T.value;return d(Q)}});return{roll:U,tilt:z,source:F}}var N7=Object.defineProperty,L7=Object.defineProperties,B7=Object.getOwnPropertyDescriptors,x9=Object.getOwnPropertySymbols,D7=Object.prototype.hasOwnProperty,F7=Object.prototype.propertyIsEnumerable,I9=(e,n,a)=>n in e?N7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,z7=(e,n)=>{for(var a in n||(n={}))D7.call(n,a)&&I9(e,a,n[a]);if(x9)for(var a of x9(n))F7.call(n,a)&&I9(e,a,n[a]);return e},U7=(e,n)=>L7(e,B7(n));const H7={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},G7=null;function Hx(e={}){const{target:n=Tr}=e,a=ref(!1),u=ref(e.initialValue||{});Object.assign(u.value,H7,u.value);const d=h=>{a.value=!0,!(e.pointerTypes&&!e.pointerTypes.includes(h.pointerType))&&(u.value=objectPick(h,G7,!1))};return n&&(Lt(n,"pointerdown",d,{passive:!0}),Lt(n,"pointermove",d,{passive:!0}),Lt(n,"pointerleave",()=>a.value=!1,{passive:!0})),U7(z7({},toRefs(u)),{isInside:a})}function Gx(e,n={}){const{document:a=Qo,pointerLockOptions:u}=n,d=bi(()=>a&&"pointerLockElement"in a),h=ref(),g=ref();let _;d.value&&(Lt(a,"pointerlockchange",()=>{var T;const I=(T=a.pointerLockElement)!=null?T:h.value;_&&I===_&&(h.value=a.pointerLockElement,h.value||(_=g.value=null))}),Lt(a,"pointerlockerror",()=>{var T;const I=(T=a.pointerLockElement)!=null?T:h.value;if(_&&I===_){const F=a.pointerLockElement?"release":"acquire";throw new Error(`Failed to ${F} pointer lock.`)}}));async function b(T,I){var F;if(!d.value)throw new Error("Pointer Lock API is not supported by your browser.");if(g.value=T instanceof Event?T.currentTarget:null,_=T instanceof Event?(F=zi(e))!=null?F:g.value:zi(T),!_)throw new Error("Target element undefined.");return _.requestPointerLock(I??u),await until(h).toBe(_)}async function A(){return h.value?(a.exitPointerLock(),await until(h).toBeNull(),!0):!1}return{isSupported:d,element:h,triggerElement:g,lock:b,unlock:A}}var Sa;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Sa||(Sa={}));function Vx(e,n={}){const{threshold:a=50,onSwipe:u,onSwipeEnd:d,onSwipeStart:h,passive:g=!0,window:_=Tr}=n,b=reactive({x:0,y:0}),A=reactive({x:0,y:0}),T=computed(()=>b.x-A.x),I=computed(()=>b.y-A.y),{max:F,abs:U}=Math,z=computed(()=>F(U(T.value),U(I.value))>=a),Q=ref(!1),te=computed(()=>z.value?U(T.value)>U(I.value)?T.value>0?Sa.LEFT:Sa.RIGHT:I.value>0?Sa.UP:Sa.DOWN:Sa.NONE),Pe=Hn=>[Hn.touches[0].clientX,Hn.touches[0].clientY],Ce=(Hn,_n)=>{b.x=Hn,b.y=_n},He=(Hn,_n)=>{A.x=Hn,A.y=_n};let it;const Pt=V7(_?.document);g?it=Pt?{passive:!0}:{capture:!1}:it=Pt?{passive:!1,capture:!0}:{capture:!0};const Ut=Hn=>{Q.value&&d?.(Hn,te.value),Q.value=!1},sn=[Lt(e,"touchstart",Hn=>{it.capture&&!it.passive&&Hn.preventDefault();const[_n,hr]=Pe(Hn);Ce(_n,hr),He(_n,hr),h?.(Hn)},it),Lt(e,"touchmove",Hn=>{const[_n,hr]=Pe(Hn);He(_n,hr),!Q.value&&z.value&&(Q.value=!0),Q.value&&u?.(Hn)},it),Lt(e,"touchend",Ut,it),Lt(e,"touchcancel",Ut,it)];return{isPassiveEventSupported:Pt,isSwiping:Q,direction:te,coordsStart:b,coordsEnd:A,lengthX:T,lengthY:I,stop:()=>sn.forEach(Hn=>Hn())}}function V7(e){if(!e)return!1;let n=!1;const a={get passive(){return n=!0,!1}};return e.addEventListener("x",noop,a),e.removeEventListener("x",noop),n}function jx(e,n={}){const a=resolveRef(e),{threshold:u=50,onSwipe:d,onSwipeEnd:h,onSwipeStart:g}=n,_=reactive({x:0,y:0}),b=(Ut,sn)=>{_.x=Ut,_.y=sn},A=reactive({x:0,y:0}),T=(Ut,sn)=>{A.x=Ut,A.y=sn},I=computed(()=>_.x-A.x),F=computed(()=>_.y-A.y),{max:U,abs:z}=Math,Q=computed(()=>U(z(I.value),z(F.value))>=u),te=ref(!1),Pe=ref(!1),Ce=computed(()=>Q.value?z(I.value)>z(F.value)?I.value>0?Sa.LEFT:Sa.RIGHT:F.value>0?Sa.UP:Sa.DOWN:Sa.NONE),He=Ut=>{var sn,Ln,Hn;const _n=Ut.buttons===0,hr=Ut.buttons===1;return(Hn=(Ln=(sn=n.pointerTypes)==null?void 0:sn.includes(Ut.pointerType))!=null?Ln:_n||hr)!=null?Hn:!0},it=[Lt(e,"pointerdown",Ut=>{var sn,Ln;if(!He(Ut))return;Pe.value=!0,(Ln=(sn=a.value)==null?void 0:sn.style)==null||Ln.setProperty("touch-action","none");const Hn=Ut.target;Hn?.setPointerCapture(Ut.pointerId);const{clientX:_n,clientY:hr}=Ut;b(_n,hr),T(_n,hr),g?.(Ut)}),Lt(e,"pointermove",Ut=>{if(!He(Ut)||!Pe.value)return;const{clientX:sn,clientY:Ln}=Ut;T(sn,Ln),!te.value&&Q.value&&(te.value=!0),te.value&&d?.(Ut)}),Lt(e,"pointerup",Ut=>{var sn,Ln;He(Ut)&&(te.value&&h?.(Ut,Ce.value),Pe.value=!1,te.value=!1,(Ln=(sn=a.value)==null?void 0:sn.style)==null||Ln.setProperty("touch-action","initial"))})],Pt=()=>it.forEach(Ut=>Ut());return{isSwiping:readonly(te),direction:readonly(Ce),posStart:readonly(_),posEnd:readonly(A),distanceX:I,distanceY:F,stop:Pt}}function $x(e){const n=Aa("(prefers-color-scheme: light)",e),a=Aa("(prefers-color-scheme: dark)",e);return computed(()=>a.value?"dark":n.value?"light":"no-preference")}function Wx(e){const n=Aa("(prefers-contrast: more)",e),a=Aa("(prefers-contrast: less)",e),u=Aa("(prefers-contrast: custom)",e);return computed(()=>n.value?"more":a.value?"less":u.value?"custom":"no-preference")}function qx(e={}){const{window:n=Tr}=e;if(!n)return ref(["en"]);const a=n.navigator,u=ref(a.languages);return Lt(n,"languagechange",()=>{u.value=a.languages}),u}function Kx(e){const n=Aa("(prefers-reduced-motion: reduce)",e);return computed(()=>n.value?"reduce":"no-preference")}function Zx(e,n){const a=shallowRef(n);return watch(resolveRef(e),(u,d)=>{a.value=d},{flush:"sync"}),readonly(a)}const Yx=(e={})=>{const{window:n=Tr}=e,a=bi(()=>n&&"screen"in n&&"orientation"in n.screen),u=a.value?n.screen.orientation:{},d=ref(u.type),h=ref(u.angle||0);return a.value&&Lt(n,"orientationchange",()=>{d.value=u.type,h.value=u.angle}),{isSupported:a,orientation:d,angle:h,lockOrientation:b=>a.value?u.lock(b):Promise.reject(new Error("Not supported")),unlockOrientation:()=>{a.value&&u.unlock()}}},R9="--vueuse-safe-area-top",N9="--vueuse-safe-area-right",L9="--vueuse-safe-area-bottom",B9="--vueuse-safe-area-left";function Xx(){const e=ref(""),n=ref(""),a=ref(""),u=ref("");if(isClient){const h=uv(R9),g=uv(N9),_=uv(L9),b=uv(B9);h.value="env(safe-area-inset-top, 0px)",g.value="env(safe-area-inset-right, 0px)",_.value="env(safe-area-inset-bottom, 0px)",b.value="env(safe-area-inset-left, 0px)",d(),Lt("resize",useDebounceFn(d))}function d(){e.value=dv(R9),n.value=dv(N9),a.value=dv(L9),u.value=dv(B9)}return{top:e,right:n,bottom:a,left:u,update:d}}function dv(e){return getComputedStyle(document.documentElement).getPropertyValue(e)}function Qx(e,n=noop,a={}){const{immediate:u=!0,manual:d=!1,type:h="text/javascript",async:g=!0,crossOrigin:_,referrerPolicy:b,noModule:A,defer:T,document:I=Qo,attrs:F={}}=a,U=ref(null);let z=null;const Q=Ce=>new Promise((He,it)=>{const Pt=Ln=>(U.value=Ln,He(Ln),Ln);if(!I){He(!1);return}let Ut=!1,sn=I.querySelector(`script[src="${resolveUnref(e)}"]`);sn?sn.hasAttribute("data-loaded")&&Pt(sn):(sn=I.createElement("script"),sn.type=h,sn.async=g,sn.src=resolveUnref(e),T&&(sn.defer=T),_&&(sn.crossOrigin=_),A&&(sn.noModule=A),b&&(sn.referrerPolicy=b),Object.entries(F).forEach(([Ln,Hn])=>sn?.setAttribute(Ln,Hn)),Ut=!0),sn.addEventListener("error",Ln=>it(Ln)),sn.addEventListener("abort",Ln=>it(Ln)),sn.addEventListener("load",()=>{sn.setAttribute("data-loaded","true"),n(sn),Pt(sn)}),Ut&&(sn=I.head.appendChild(sn)),Ce||Pt(sn)}),te=(Ce=!0)=>(z||(z=Q(Ce)),z),Pe=()=>{if(!I)return;z=null,U.value&&(U.value=null);const Ce=I.querySelector(`script[src="${resolveUnref(e)}"]`);Ce&&I.head.removeChild(Ce)};return u&&!d&&tryOnMounted(te),d||tryOnUnmounted(Pe),{scriptTag:U,load:te,unload:Pe}}function D9(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientHeight<e.scrollHeight||n.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const a=e.parentNode;return!a||a.tagName==="BODY"?!1:D9(a)}}function j7(e){const n=e||window.event,a=n.target;return D9(a)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}function Jx(e,n=!1){const a=ref(n);let u=null,d;watch(resolveRef(e),_=>{if(_){const b=_;d=b.style.overflow,a.value&&(b.style.overflow="hidden")}},{immediate:!0});const h=()=>{const _=resolveUnref(e);!_||a.value||(isIOS&&(u=Lt(_,"touchmove",b=>{j7(b)},{passive:!1})),_.style.overflow="hidden",a.value=!0)},g=()=>{const _=resolveUnref(e);!_||!a.value||(isIOS&&u?.(),_.style.overflow=d,a.value=!1)};return tryOnScopeDispose(g),computed({get(){return a.value},set(_){_?h():g()}})}function eI(e,n,a={}){const{window:u=Tr}=a;return a6(e,n,u?.sessionStorage,a)}var $7=Object.defineProperty,F9=Object.getOwnPropertySymbols,W7=Object.prototype.hasOwnProperty,q7=Object.prototype.propertyIsEnumerable,z9=(e,n,a)=>n in e?$7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,U9=(e,n)=>{for(var a in n||(n={}))W7.call(n,a)&&z9(e,a,n[a]);if(F9)for(var a of F9(n))q7.call(n,a)&&z9(e,a,n[a]);return e};function tI(e={},n={}){const{navigator:a=Ea}=n,u=a,d=bi(()=>u&&"canShare"in u);return{isSupported:d,share:async(g={})=>{if(d.value){const _=U9(U9({},resolveUnref(e)),resolveUnref(g));let b=!0;if(_.files&&u.canShare&&(b=u.canShare({files:_.files})),b)return u.share(_)}}}}const K7=(e,n)=>e.sort(n),fv=(e,n)=>e-n;function nI(...e){var n,a,u,d;const[h]=e;let g=fv,_={};e.length===2?typeof e[1]=="object"?(_=e[1],g=(n=_.compareFn)!=null?n:fv):g=(a=e[1])!=null?a:fv:e.length>2&&(g=(u=e[1])!=null?u:fv,_=(d=e[2])!=null?d:{});const{dirty:b=!1,sortFn:A=K7}=_;return b?(watchEffect(()=>{const T=A(unref(h),g);isRef(h)?h.value=T:h.splice(0,h.length,...T)}),h):computed(()=>A([...unref(h)],g))}function rI(e={}){const{interimResults:n=!0,continuous:a=!0,window:u=Tr}=e,d=resolveRef(e.lang||"en-US"),h=ref(!1),g=ref(!1),_=ref(""),b=shallowRef(void 0),A=(Q=!h.value)=>{h.value=Q},T=()=>{h.value=!0},I=()=>{h.value=!1},F=u&&(u.SpeechRecognition||u.webkitSpeechRecognition),U=bi(()=>F);let z;return U.value&&(z=new F,z.continuous=a,z.interimResults=n,z.lang=unref(d),z.onstart=()=>{g.value=!1},watch(d,Q=>{z&&!h.value&&(z.lang=Q)}),z.onresult=Q=>{const te=Array.from(Q.results).map(Pe=>(g.value=Pe.isFinal,Pe[0])).map(Pe=>Pe.transcript).join("");_.value=te,b.value=void 0},z.onerror=Q=>{b.value=Q},z.onend=()=>{h.value=!1,z.lang=unref(d)},watch(h,()=>{h.value?z.start():z.stop()})),tryOnScopeDispose(()=>{h.value=!1}),{isSupported:U,isListening:h,isFinal:g,recognition:z,result:_,error:b,toggle:A,start:T,stop:I}}function iI(e,n={}){const{pitch:a=1,rate:u=1,volume:d=1,window:h=Tr}=n,g=h&&h.speechSynthesis,_=bi(()=>g),b=ref(!1),A=ref("init"),T=resolveRef(e||""),I=resolveRef(n.lang||"en-US"),F=shallowRef(void 0),U=(Ce=!b.value)=>{b.value=Ce},z=Ce=>{Ce.lang=unref(I),Ce.voice=unref(n.voice)||null,Ce.pitch=a,Ce.rate=u,Ce.volume=d,Ce.onstart=()=>{b.value=!0,A.value="play"},Ce.onpause=()=>{b.value=!1,A.value="pause"},Ce.onresume=()=>{b.value=!0,A.value="play"},Ce.onend=()=>{b.value=!1,A.value="end"},Ce.onerror=He=>{F.value=He}},Q=computed(()=>{b.value=!1,A.value="init";const Ce=new SpeechSynthesisUtterance(T.value);return z(Ce),Ce}),te=()=>{g.cancel(),Q&&g.speak(Q.value)},Pe=()=>{g.cancel(),b.value=!1};return _.value&&(z(Q.value),watch(I,Ce=>{Q.value&&!b.value&&(Q.value.lang=Ce)}),n.voice&&watch(n.voice,()=>{g.cancel()}),watch(b,()=>{b.value?g.resume():g.pause()})),tryOnScopeDispose(()=>{b.value=!1}),{isSupported:_,isPlaying:b,status:A,utterance:Q,error:F,stop:Pe,toggle:U,speak:te}}function oI(e,n){const a=ref(e),u=computed(()=>Array.isArray(a.value)?a.value:Object.keys(a.value)),d=ref(u.value.indexOf(n??u.value[0])),h=computed(()=>T(d.value)),g=computed(()=>d.value===0),_=computed(()=>d.value===u.value.length-1),b=computed(()=>u.value[d.value+1]),A=computed(()=>u.value[d.value-1]);function T(Pt){return Array.isArray(a.value)?a.value[Pt]:a.value[u.value[Pt]]}function I(Pt){if(u.value.includes(Pt))return T(u.value.indexOf(Pt))}function F(Pt){u.value.includes(Pt)&&(d.value=u.value.indexOf(Pt))}function U(){_.value||d.value++}function z(){g.value||d.value--}function Q(Pt){it(Pt)&&F(Pt)}function te(Pt){return u.value.indexOf(Pt)===d.value+1}function Pe(Pt){return u.value.indexOf(Pt)===d.value-1}function Ce(Pt){return u.value.indexOf(Pt)===d.value}function He(Pt){return d.value<u.value.indexOf(Pt)}function it(Pt){return d.value>u.value.indexOf(Pt)}return{steps:a,stepNames:u,index:d,current:h,next:b,previous:A,isFirst:g,isLast:_,at:T,get:I,goTo:F,goToNext:U,goToPrevious:z,goBackTo:Q,isNext:te,isPrevious:Pe,isCurrent:Ce,isBefore:He,isAfter:it}}var Z7=Object.defineProperty,H9=Object.getOwnPropertySymbols,Y7=Object.prototype.hasOwnProperty,X7=Object.prototype.propertyIsEnumerable,G9=(e,n,a)=>n in e?Z7(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,V9=(e,n)=>{for(var a in n||(n={}))Y7.call(n,a)&&G9(e,a,n[a]);if(H9)for(var a of H9(n))X7.call(n,a)&&G9(e,a,n[a]);return e};function aI(e,n,a,u={}){var d;const{flush:h="pre",deep:g=!0,listenToStorageChanges:_=!0,writeDefaults:b=!0,mergeDefaults:A=!1,shallow:T,window:I=Tr,eventFilter:F,onError:U=He=>{console.error(He)}}=u,z=resolveUnref(n),Q=F5(z),te=(T?shallowRef:ref)(n),Pe=(d=u.serializer)!=null?d:G5[Q];if(!a)try{a=o6("getDefaultStorage",()=>{var He;return(He=Tr)==null?void 0:He.localStorage})()}catch(He){U(He)}async function Ce(He){if(!(!a||He&&He.key!==e))try{const it=He?He.newValue:await a.getItem(e);if(it==null)te.value=z,b&&z!==null&&await a.setItem(e,await Pe.write(z));else if(A){const Pt=await Pe.read(it);isFunction(A)?te.value=A(Pt,z):Q==="object"&&!Array.isArray(Pt)?te.value=V9(V9({},z),Pt):te.value=Pt}else te.value=await Pe.read(it)}catch(it){U(it)}}return Ce(),I&&_&&Lt(I,"storage",He=>setTimeout(()=>Ce(He),0)),a&&watchWithFilter(te,async()=>{try{te.value==null?await a.removeItem(e):await a.setItem(e,await Pe.write(te.value))}catch(He){U(He)}},{flush:h,deep:g,eventFilter:F}),te}let Q7=0;function sI(e,n={}){const a=ref(!1),{document:u=Qo,immediate:d=!0,manual:h=!1,id:g=`vueuse_styletag_${++Q7}`}=n,_=ref(e);let b=()=>{};const A=()=>{if(!u)return;const I=u.getElementById(g)||u.createElement("style");I.isConnected||(I.type="text/css",I.id=g,n.media&&(I.media=n.media),u.head.appendChild(I)),!a.value&&(b=watch(_,F=>{I.textContent=F},{immediate:!0}),a.value=!0)},T=()=>{!u||!a.value||(b(),u.head.removeChild(u.getElementById(g)),a.value=!1)};return d&&!h&&tryOnMounted(A),h||tryOnScopeDispose(T),{id:g,css:_,unload:T,load:A,isLoaded:readonly(a)}}function lI(){const e=ref([]);return e.value.set=n=>{n&&e.value.push(n)},onBeforeUpdate(()=>{e.value.length=0}),e}function uI(e={}){const{document:n=Qo,selector:a="html",observe:u=!1,initialValue:d="ltr"}=e;function h(){var _,b;return(b=(_=n?.querySelector(a))==null?void 0:_.getAttribute("dir"))!=null?b:d}const g=ref(h());return tryOnMounted(()=>g.value=h()),u&&n&&C9(n.querySelector(a),()=>g.value=h(),{attributes:!0}),computed({get(){return g.value},set(_){var b,A;g.value=_,n&&(g.value?(b=n.querySelector(a))==null||b.setAttribute("dir",g.value):(A=n.querySelector(a))==null||A.removeAttribute("dir"))}})}function J7(e){var n;const a=(n=e.rangeCount)!=null?n:0,u=new Array(a);for(let d=0;d<a;d++){const h=e.getRangeAt(d);u[d]=h}return u}function cI(e={}){const{window:n=Tr}=e,a=ref(null),u=computed(()=>{var _,b;return(b=(_=a.value)==null?void 0:_.toString())!=null?b:""}),d=computed(()=>a.value?J7(a.value):[]),h=computed(()=>d.value.map(_=>_.getBoundingClientRect()));function g(){a.value=null,n&&(a.value=n.getSelection())}return n&&Lt(n.document,"selectionchange",g),{text:u,rects:h,ranges:d,selection:a}}function dI(e){const n=ref(e?.element),a=ref(e?.input);function u(){var d,h;n.value&&(n.value.style.height="1px",n.value.style.height=`${(d=n.value)==null?void 0:d.scrollHeight}px`,(h=e?.onResize)==null||h.call(e))}return watch([a,n],u,{immediate:!0}),s6(n,()=>u()),e?.watch&&watch(e.watch,u,{immediate:!0,deep:!0}),{textarea:n,input:a,triggerResize:u}}var ek=Object.defineProperty,tk=Object.defineProperties,nk=Object.getOwnPropertyDescriptors,j9=Object.getOwnPropertySymbols,rk=Object.prototype.hasOwnProperty,ik=Object.prototype.propertyIsEnumerable,$9=(e,n,a)=>n in e?ek(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,W9=(e,n)=>{for(var a in n||(n={}))rk.call(n,a)&&$9(e,a,n[a]);if(j9)for(var a of j9(n))ik.call(n,a)&&$9(e,a,n[a]);return e},ok=(e,n)=>tk(e,nk(n));function fI(e,n={}){const{throttle:a=200,trailing:u=!0}=n,d=throttleFilter(a,u),h=e9(e,ok(W9({},n),{eventFilter:d}));return W9({},h)}var ak=Object.defineProperty,hv=Object.getOwnPropertySymbols,q9=Object.prototype.hasOwnProperty,K9=Object.prototype.propertyIsEnumerable,Z9=(e,n,a)=>n in e?ak(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,sk=(e,n)=>{for(var a in n||(n={}))q9.call(n,a)&&Z9(e,a,n[a]);if(hv)for(var a of hv(n))K9.call(n,a)&&Z9(e,a,n[a]);return e},lk=(e,n)=>{var a={};for(var u in e)q9.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&hv)for(var u of hv(e))n.indexOf(u)<0&&K9.call(e,u)&&(a[u]=e[u]);return a};const uk=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],ck={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,n)=>e===1?n?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,n)=>e===1?n?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,n)=>e===1?n?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,n)=>e===1?n?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""},dk=e=>e.toISOString().slice(0,10);function hI(e,n={}){const{controls:a=!1,updateInterval:u=3e4}=n,d=R7({interval:u,controls:!0}),{now:h}=d,g=lk(d,["now"]),_=computed(()=>fk(new Date(resolveUnref(e)),n,unref(h.value)));return a?sk({timeAgo:_},g):_}function fk(e,n={},a=Date.now()){var u;const{max:d,messages:h=ck,fullDateFormatter:g=dk,units:_=uk,showSecond:b=!1,rounding:A="round"}=n,T=typeof A=="number"?te=>+te.toFixed(A):Math[A],I=+a-+e,F=Math.abs(I);function U(te,Pe){return T(Math.abs(te)/Pe.value)}function z(te,Pe){const Ce=U(te,Pe),He=te>0,it=Q(Pe.name,Ce,He);return Q(He?"past":"future",it,He)}function Q(te,Pe,Ce){const He=h[te];return typeof He=="function"?He(Pe,Ce):He.replace("{0}",Pe.toString())}if(F<6e4&&!b)return h.justNow;if(typeof d=="number"&&F>d)return g(new Date(e));if(typeof d=="string"){const te=(u=_.find(Pe=>Pe.name===d))==null?void 0:u.max;if(te&&F>te)return g(new Date(e))}for(const[te,Pe]of _.entries()){if(U(I,Pe)<=0&&_[te-1])return z(I,_[te-1]);if(F<Pe.max)return z(I,Pe)}return h.invalid}function pI(e,n,a){const{start:u}=useTimeoutFn(h,n),d=ref(!1);async function h(){d.value&&(await e(),u())}function g(){d.value||(d.value=!0,h())}function _(){d.value=!1}return a?.immediate&&g(),tryOnScopeDispose(_),{isActive:d,pause:_,resume:g}}var hk=Object.defineProperty,Y9=Object.getOwnPropertySymbols,pk=Object.prototype.hasOwnProperty,mk=Object.prototype.propertyIsEnumerable,X9=(e,n,a)=>n in e?hk(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,vk=(e,n)=>{for(var a in n||(n={}))pk.call(n,a)&&X9(e,a,n[a]);if(Y9)for(var a of Y9(n))mk.call(n,a)&&X9(e,a,n[a]);return e};function mI(e={}){const{controls:n=!1,offset:a=0,immediate:u=!0,interval:d="requestAnimationFrame",callback:h}=e,g=ref(timestamp()+a),_=()=>g.value=timestamp()+a,b=h?()=>{_(),h(g.value)}:_,A=d==="requestAnimationFrame"?Qc(b,{immediate:u}):useIntervalFn(b,d,{immediate:u});return n?vk({timestamp:g},A):g}function vI(e=null,n={}){var a,u;const{document:d=Qo}=n,h=resolveRef((a=e??d?.title)!=null?a:null),g=e&&isFunction(e);function _(b){if(!("titleTemplate"in n))return b;const A=n.titleTemplate||"%s";return isFunction(A)?A(b):unref(A).replace(/%s/g,b)}return watch(h,(b,A)=>{b!==A&&d&&(d.title=_(isString(b)?b:""))},{immediate:!0}),n.observe&&!n.titleTemplate&&d&&!g&&C9((u=d.head)==null?void 0:u.querySelector("title"),()=>{d&&d.title!==h.value&&(h.value=_(d.title))},{childList:!0}),h}var gk=Object.defineProperty,Q9=Object.getOwnPropertySymbols,_k=Object.prototype.hasOwnProperty,bk=Object.prototype.propertyIsEnumerable,J9=(e,n,a)=>n in e?gk(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,yk=(e,n)=>{for(var a in n||(n={}))_k.call(n,a)&&J9(e,a,n[a]);if(Q9)for(var a of Q9(n))bk.call(n,a)&&J9(e,a,n[a]);return e};const _I=yk({linear:nE},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function wk([e,n,a,u]){const d=(T,I)=>1-3*I+3*T,h=(T,I)=>3*I-6*T,g=T=>3*T,_=(T,I,F)=>((d(I,F)*T+h(I,F))*T+g(I))*T,b=(T,I,F)=>3*d(I,F)*T*T+2*h(I,F)*T+g(I),A=T=>{let I=T;for(let F=0;F<4;++F){const U=b(I,e,a);if(U===0)return I;const z=_(I,e,a)-T;I-=z/U}return I};return T=>e===n&&a===u?T:_(A(T),n,u)}function bI(e,n={}){const{delay:a=0,disabled:u=!1,duration:d=1e3,onFinished:h=noop,onStarted:g=noop,transition:_=identity}=n,b=computed(()=>{const Pt=unref(_);return isFunction(Pt)?Pt:wk(Pt)}),A=computed(()=>{const Pt=unref(e);return isNumber(Pt)?Pt:Pt.map(unref)}),T=computed(()=>isNumber(A.value)?[A.value]:A.value),I=ref(T.value.slice(0));let F,U,z,Q,te;const{resume:Pe,pause:Ce}=Qc(()=>{const Pt=Date.now(),Ut=clamp(1-(z-Pt)/F,0,1);I.value=te.map((sn,Ln)=>{var Hn;return sn+((Hn=U[Ln])!=null?Hn:0)*b.value(Ut)}),Ut>=1&&(Ce(),h())},{immediate:!1}),He=()=>{Ce(),F=unref(d),U=I.value.map((Pt,Ut)=>{var sn,Ln;return((sn=T.value[Ut])!=null?sn:0)-((Ln=I.value[Ut])!=null?Ln:0)}),te=I.value.slice(0),Q=Date.now(),z=Q+F,Pe(),g()},it=useTimeoutFn(He,a,{immediate:!1});return watch(T,()=>{unref(u)||(unref(a)<=0?He():it.start())},{deep:!0}),watch(()=>unref(u),Pt=>{Pt&&(I.value=T.value.slice(0),Ce())}),computed(()=>{const Pt=unref(u)?T:I;return isNumber(A.value)?Pt.value[0]:Pt.value})}function yI(e="history",n={}){const{initialValue:a={},removeNullishValues:u=!0,removeFalsyValues:d=!1,write:h=!0,window:g=Tr}=n;if(!g)return reactive(a);const _=reactive({});function b(){if(e==="history")return g.location.search||"";if(e==="hash"){const Pe=g.location.hash||"",Ce=Pe.indexOf("?");return Ce>0?Pe.slice(Ce):""}else return(g.location.hash||"").replace(/^#/,"")}function A(Pe){const Ce=Pe.toString();if(e==="history")return`${Ce?`?${Ce}`:""}${g.location.hash||""}`;if(e==="hash-params")return`${g.location.search||""}${Ce?`#${Ce}`:""}`;const He=g.location.hash||"#",it=He.indexOf("?");return it>0?`${He.slice(0,it)}${Ce?`?${Ce}`:""}`:`${He}${Ce?`?${Ce}`:""}`}function T(){return new URLSearchParams(b())}function I(Pe){const Ce=new Set(Object.keys(_));for(const He of Pe.keys()){const it=Pe.getAll(He);_[He]=it.length>1?it:Pe.get(He)||"",Ce.delete(He)}Array.from(Ce).forEach(He=>delete _[He])}const{pause:F,resume:U}=pausableWatch(_,()=>{const Pe=new URLSearchParams("");Object.keys(_).forEach(Ce=>{const He=_[Ce];Array.isArray(He)?He.forEach(it=>Pe.append(Ce,it)):u&&He==null||d&&!He?Pe.delete(Ce):Pe.set(Ce,He)}),z(Pe)},{deep:!0});function z(Pe,Ce){F(),Ce&&I(Pe),g.history.replaceState(g.history.state,g.document.title,g.location.pathname+A(Pe)),U()}function Q(){h&&z(T(),!0)}Lt(g,"popstate",Q,!1),e!=="history"&&Lt(g,"hashchange",Q,!1);const te=T();return te.keys().next().value?I(te):Object.assign(_,a),_}function wI(e={}){var n,a;const u=ref((n=e.enabled)!=null?n:!1),d=ref((a=e.autoSwitch)!=null?a:!0),h=ref(e.videoDeviceId),g=ref(e.audioDeviceId),{navigator:_=Ea}=e,b=bi(()=>{var te;return(te=_?.mediaDevices)==null?void 0:te.getUserMedia}),A=shallowRef();function T(te){return te.value==="none"||te.value===!1?!1:te.value==null?!0:{deviceId:te.value}}async function I(){if(!(!b.value||A.value))return A.value=await _.mediaDevices.getUserMedia({video:T(h),audio:T(g)}),A.value}async function F(){var te;(te=A.value)==null||te.getTracks().forEach(Pe=>Pe.stop()),A.value=void 0}function U(){F(),u.value=!1}async function z(){return await I(),A.value&&(u.value=!0),A.value}async function Q(){return F(),await z()}return watch(u,te=>{te?I():F()},{immediate:!0}),watch([h,g],()=>{d.value&&A.value&&Q()},{immediate:!0}),{isSupported:b,stream:A,start:z,stop:U,restart:Q,videoDeviceId:h,audioDeviceId:g,enabled:u,autoSwitch:d}}function Ek(e,n,a,u={}){var d,h,g,_,b;const{clone:A=!1,passive:T=!1,eventName:I,deep:F=!1,defaultValue:U}=u,z=getCurrentInstance(),Q=a||z?.emit||((d=z?.$emit)==null?void 0:d.bind(z))||((g=(h=z?.proxy)==null?void 0:h.$emit)==null?void 0:g.bind(z?.proxy));let te=I;if(!n)if(isVue2){const He=(b=(_=z?.proxy)==null?void 0:_.$options)==null?void 0:b.model;n=He?.value||"value",I||(te=He?.event||"input")}else n="modelValue";te=I||te||`update:${n.toString()}`;const Pe=He=>A?isFunction(A)?A(He):lv(He):He,Ce=()=>isDef(e[n])?Pe(e[n]):U;if(T){const He=Ce(),it=ref(He);return watch(()=>e[n],Pt=>it.value=Pe(Pt)),watch(it,Pt=>{(Pt!==e[n]||F)&&Q(te,Pt)},{deep:F}),it}else return computed({get(){return Ce()},set(He){Q(te,He)}})}function EI(e,n,a={}){const u={};for(const d in e)u[d]=Ek(e,d,n,a);return u}function AI(e){const{pattern:n=[],interval:a=0,navigator:u=Ea}=e||{},d=bi(()=>typeof u<"u"&&"vibrate"in u),h=resolveRef(n);let g;const _=(A=h.value)=>{d.value&&u.vibrate(A)},b=()=>{d.value&&u.vibrate(0),g?.pause()};return a>0&&(g=useIntervalFn(_,a,{immediate:!1,immediateCallback:!1})),{isSupported:d,pattern:n,intervalControls:g,vibrate:_,stop:b}}function SI(e,n){const{containerStyle:a,wrapperProps:u,scrollTo:d,calculateRange:h,currentList:g,containerRef:_}="itemHeight"in n?kk(n,e):Sk(n,e);return{list:g,scrollTo:d,containerProps:{ref:_,onScroll:()=>{h()},style:a},wrapperProps:u}}function e4(e){const n=ref(null),a=FS(n),u=ref([]),d=shallowRef(e);return{state:ref({start:0,end:10}),source:d,currentList:u,size:a,containerRef:n}}function t4(e,n,a){return u=>{if(typeof a=="number")return Math.ceil(u/a);const{start:d=0}=e.value;let h=0,g=0;for(let _=d;_<n.value.length;_++){const b=a(_);if(h+=b,g=_,h>u)break}return g-d}}function n4(e,n){return a=>{if(typeof n=="number")return Math.floor(a/n)+1;let u=0,d=0;for(let h=0;h<e.value.length;h++){const g=n(h);if(u+=g,u>=a){d=h;break}}return d+1}}function r4(e,n,a,u,{containerRef:d,state:h,currentList:g,source:_}){return()=>{const b=d.value;if(b){const A=a(e==="vertical"?b.scrollTop:b.scrollLeft),T=u(e==="vertical"?b.clientHeight:b.clientWidth),I=A-n,F=A+T+n;h.value={start:I<0?0:I,end:F>_.value.length?_.value.length:F},g.value=_.value.slice(h.value.start,h.value.end).map((U,z)=>({data:U,index:z+h.value.start}))}}}function i4(e,n){return a=>typeof e=="number"?a*e:n.value.slice(0,a).reduce((d,h,g)=>d+e(g),0)}function o4(e,n,a){watch([e.width,e.height,n],()=>{a()})}function a4(e,n){return computed(()=>typeof e=="number"?n.value.length*e:n.value.reduce((a,u,d)=>a+e(d),0))}const Ak={horizontal:"scrollLeft",vertical:"scrollTop"};function s4(e,n,a,u){return d=>{u.value&&(u.value[Ak[e]]=a(d),n())}}function Sk(e,n){const a=e4(n),{state:u,source:d,currentList:h,size:g,containerRef:_}=a,b={overflowX:"auto"},{itemWidth:A,overscan:T=5}=e,I=t4(u,d,A),F=n4(d,A),U=r4("horizontal",T,F,I,a),z=i4(A,d),Q=computed(()=>z(u.value.start)),te=a4(A,d);o4(g,n,U);const Pe=s4("horizontal",U,z,_),Ce=computed(()=>({style:{height:"100%",width:`${te.value-Q.value}px`,marginLeft:`${Q.value}px`,display:"flex"}}));return{scrollTo:Pe,calculateRange:U,wrapperProps:Ce,containerStyle:b,currentList:h,containerRef:_}}function kk(e,n){const a=e4(n),{state:u,source:d,currentList:h,size:g,containerRef:_}=a,b={overflowY:"auto"},{itemHeight:A,overscan:T=5}=e,I=t4(u,d,A),F=n4(d,A),U=r4("vertical",T,F,I,a),z=i4(A,d),Q=computed(()=>z(u.value.start)),te=a4(A,d);o4(g,n,U);const Pe=s4("vertical",U,z,_),Ce=computed(()=>({style:{width:"100%",height:`${te.value-Q.value}px`,marginTop:`${Q.value}px`}}));return{calculateRange:U,scrollTo:Pe,containerStyle:b,wrapperProps:Ce,currentList:h,containerRef:_}}const kI=(e={})=>{const{navigator:n=Ea,document:a=Qo}=e;let u;const d=bi(()=>n&&"wakeLock"in n),h=ref(!1);async function g(){!d.value||!u||(a&&a.visibilityState==="visible"&&(u=await n.wakeLock.request("screen")),h.value=!u.released)}a&&Lt(a,"visibilitychange",g,{passive:!0});async function _(A){d.value&&(u=await n.wakeLock.request(A),h.value=!u.released)}async function b(){!d.value||!u||(await u.release(),h.value=!u.released,u=null)}return{isSupported:d,isActive:h,request:_,release:b}},PI=(e={})=>{const{window:n=Tr}=e,a=bi(()=>!!n&&"Notification"in n),u=ref(null),d=async()=>{a.value&&"permission"in Notification&&Notification.permission!=="denied"&&await Notification.requestPermission()},h=createEventHook(),g=createEventHook(),_=createEventHook(),b=createEventHook(),A=async I=>{if(!a.value)return;await d();const F=Object.assign({},e,I);return u.value=new Notification(F.title||"",F),u.value.onclick=U=>h.trigger(U),u.value.onshow=U=>g.trigger(U),u.value.onerror=U=>_.trigger(U),u.value.onclose=U=>b.trigger(U),u.value},T=()=>{u.value&&u.value.close(),u.value=null};if(tryOnMounted(async()=>{a.value&&await d()}),tryOnScopeDispose(T),a.value&&n){const I=n.document;Lt(I,"visibilitychange",F=>{F.preventDefault(),I.visibilityState==="visible"&&T()})}return{isSupported:a,notification:u,show:A,close:T,onClick:h,onShow:g,onError:_,onClose:b}},l4="ping";function d6(e){return e===!0?{}:e}function CI(e,n={}){const{onConnected:a,onDisconnected:u,onError:d,onMessage:h,immediate:g=!0,autoClose:_=!0,protocols:b=[]}=n,A=ref(null),T=ref("CLOSED"),I=ref(),F=resolveRef(e);let U,z,Q=!1,te=0,Pe=[],Ce;const He=(Hn=1e3,_n)=>{I.value&&(Q=!0,U?.(),I.value.close(Hn,_n))},it=()=>{if(Pe.length&&I.value&&T.value==="OPEN"){for(const Hn of Pe)I.value.send(Hn);Pe=[]}},Pt=()=>{clearTimeout(Ce),Ce=void 0},Ut=(Hn,_n=!0)=>!I.value||T.value!=="OPEN"?(_n&&Pe.push(Hn),!1):(it(),I.value.send(Hn),!0),sn=()=>{if(Q||typeof F.value>"u")return;const Hn=new WebSocket(F.value,b);I.value=Hn,T.value="CONNECTING",Hn.onopen=()=>{T.value="OPEN",a?.(Hn),z?.(),it()},Hn.onclose=_n=>{if(T.value="CLOSED",I.value=void 0,u?.(Hn,_n),!Q&&n.autoReconnect){const{retries:hr=-1,delay:ui=1e3,onFailed:mo}=d6(n.autoReconnect);te+=1,typeof hr=="number"&&(hr<0||te<hr)||typeof hr=="function"&&hr()?setTimeout(sn,ui):mo?.()}},Hn.onerror=_n=>{d?.(Hn,_n)},Hn.onmessage=_n=>{if(n.heartbeat){Pt();const{message:hr=l4}=d6(n.heartbeat);if(_n.data===hr)return}A.value=_n.data,h?.(Hn,_n)}};if(n.heartbeat){const{message:Hn=l4,interval:_n=1e3,pongTimeout:hr=1e3}=d6(n.heartbeat),{pause:ui,resume:mo}=useIntervalFn(()=>{Ut(Hn,!1),Ce==null&&(Ce=setTimeout(()=>{He()},hr))},_n,{immediate:!1});U=ui,z=mo}_&&(Lt(window,"beforeunload",()=>He()),tryOnScopeDispose(He));const Ln=()=>{He(),Q=!1,te=0,sn()};return g&&watch(F,Ln,{immediate:!0}),{data:A,status:T,close:He,send:Ut,open:Ln,ws:I}}function TI(e,n,a){const{window:u=Tr}=a??{},d=ref(null),h=shallowRef(),g=function(A){h.value&&h.value.postMessage(A)},_=function(){h.value&&h.value.terminate()};return u&&(isString(e)?h.value=new Worker(e,n):isFunction(e)?h.value=e():h.value=e,h.value.onmessage=b=>{d.value=b.data},tryOnScopeDispose(()=>{h.value&&h.value.terminate()})),{data:d,post:g,terminate:_,worker:h}}const Pk=e=>n=>{const a=n.data[0];return Promise.resolve(e.apply(void 0,a)).then(u=>{postMessage(["SUCCESS",u])}).catch(u=>{postMessage(["ERROR",u])})},Ck=e=>e.length===0?"":`importScripts(${e.map(a=>`'${a}'`).toString()})`,Tk=(e,n)=>{const a=`${Ck(n)}; onmessage=(${Pk})(${e})`,u=new Blob([a],{type:"text/javascript"});return URL.createObjectURL(u)},MI=(e,n={})=>{const{dependencies:a=[],timeout:u,window:d=Tr}=n,h=ref(),g=ref("PENDING"),_=ref({}),b=ref(),A=(U="PENDING")=>{h.value&&h.value._url&&d&&(h.value.terminate(),URL.revokeObjectURL(h.value._url),_.value={},h.value=void 0,d.clearTimeout(b.value),g.value=U)};A(),tryOnScopeDispose(A);const T=()=>{const U=Tk(e,a),z=new Worker(U);return z._url=U,z.onmessage=Q=>{const{resolve:te=()=>{},reject:Pe=()=>{}}=_.value,[Ce,He]=Q.data;switch(Ce){case"SUCCESS":te(He),A(Ce);break;default:Pe(He),A("ERROR");break}},z.onerror=Q=>{const{reject:te=()=>{}}=_.value;te(Q),A("ERROR")},u&&(b.value=setTimeout(()=>A("TIMEOUT_EXPIRED"),u)),z},I=(...U)=>new Promise((z,Q)=>{_.value={resolve:z,reject:Q},h.value&&h.value.postMessage([[...U]]),g.value="RUNNING"});return{workerFn:(...U)=>g.value==="RUNNING"?(console.error("[useWebWorkerFn] You can only run one instance of the worker at a time."),Promise.reject()):(h.value=T(),I(...U)),workerStatus:g,workerTerminate:A}};function OI({window:e=Tr}={}){if(!e)return ref(!1);const n=ref(e.document.hasFocus());return Lt(e,"blur",()=>{n.value=!1}),Lt(e,"focus",()=>{n.value=!0}),n}function xI({window:e=Tr}={}){if(!e)return{x:ref(0),y:ref(0)};const n=ref(e.scrollX),a=ref(e.scrollY);return Lt(e,"scroll",()=>{n.value=e.scrollX,a.value=e.scrollY},{capture:!1,passive:!0}),{x:n,y:a}}function Mk(e={}){const{window:n=Tr,initialWidth:a=1/0,initialHeight:u=1/0,listenOrientation:d=!0,includeScrollbar:h=!0}=e,g=(0,Ir.ref)(a),_=(0,Ir.ref)(u),b=()=>{n&&(h?(g.value=n.innerWidth,_.value=n.innerHeight):(g.value=n.document.documentElement.clientWidth,_.value=n.document.documentElement.clientHeight))};return b(),X2(b),Lt("resize",b,{passive:!0}),d&&Lt("orientationchange",b,{passive:!0}),{width:g,height:_}}var Ok=(0,Ir.defineComponent)({props:{id:{required:!0,type:String},options:{required:!1,type:[String,Object]},target:{required:!0,type:HTMLElement}},setup(e){const n=(0,Ir.ref)(),{height:a,width:u}=s9(n),{bottom:d,height:h,left:g,right:_,top:b,width:A}=s9(e.target),{height:T,width:I}=Mk(),F=(0,Ir.computed)(()=>T.value-d.value),U=(0,Ir.computed)(()=>I.value-_.value),z=(0,Ir.computed)(()=>{const He={delay:400,padding:8,position:"top"};return e.options?typeof e.options=="string"?{...He,content:e.options}:{...He,...e.options}:{...He,content:""}}),Q=(0,Ir.computed)(()=>{if(!Pe.value)switch(z.value.position){case"bottom":return`translate(0, ${1.2}rem)`;case"left":return`translate(${-1.2}rem, 0)`;case"right":return`translate(${1.2}rem, 0)`;default:return`translate(0, ${-1.2}rem)`}return"translate(0, 0)"}),te=(0,Ir.computed)(()=>{switch(z.value.position){case"bottom":return a.value<F.value?"bottom":"top";case"left":return u.value<g.value?"left":"right";case"right":return u.value<U.value?"right":"left";default:return a.value<b.value?"top":"bottom"}}),Pe=DS(e.target,{delayEnter:z.value.delay}),{start:Ce}=c5(()=>{var He;Pe.value=((He=e.target.parentNode)==null?void 0:He.querySelector(":hover"))===e.target},z.value.delay);return(0,Ir.onMounted)(Ce),{containerEl:n,containerTransform:Q,isHovering:Pe,normalizedOptions:z,position:te,targetHeight:h,targetLeft:g,targetTop:b,targetWidth:A}}}),xk=Ok,u4={component:"tooltip-component",content:"tooltip-content",top:"tooltip-top",bottom:"tooltip-bottom",left:"tooltip-left",right:"tooltip-right",body:"tooltip-body"};function Ik(e){this.$style=u4.locals||u4}var Rk=li(xk,W,Te,!1,Ik,null,null),Nk=Rk.exports;function Lk(e,n={}){const a=(0,Ir.ref)(!1),u=document.createElement("div"),d={render:()=>a.value&&(0,Ir.h)(e,{props:n})};let h;const g={mount(_){if(a.value=!0,!h){const b=typeof _=="string"?document.querySelector(_):_;b&&(b.innerHTML="",b.appendChild(u)),h=new Ir.default(d).$mount(u)}},unmount(){a.value=!1},use(_){return _ instanceof Bi.default.Store?d.store=_:_ instanceof r0?d.router=_:Ir.default.use(_),g}};return g}var Bk=function(){var n=this,a=n._self._c;return a("div",{staticClass:"tooltip tip vue-tooltip"},[a("div",{staticClass:"arrow"}),n._v(" "),a("div",{ref:"content",staticClass:"inner"})])},Dk=[];const c4=()=>document.querySelector("html").getAttribute("dir")==="rtl",Ri={top:"top",right:"right",bottom:"bottom",left:"left",bottomLeft:"bottom-left"},II=(e,n,a,u)=>{function d(Ce,He){return Ce.currentStyle?Ce.currentStyle[He]:window.getComputedStyle?window.getComputedStyle(Ce)[He]:Ce.style[He]}function h(Ce){return(d(Ce,"position")||"static")==="static"}function g(Ce){const He=document;let it=Ce.offsetParent||He;for(;it&&it!==He&&h(it);)it=it.offsetParent;return it||He}function _(Ce){const He=Ce.getBoundingClientRect();return{width:He.width||Ce.offsetWidth,height:He.height||Ce.offsetHeight,top:He.top+(window.pageYOffset||document.documentElement.scrollTop),left:He.left+(window.pageXOffset||document.documentElement.scrollLeft)}}function b(Ce){const He=_(Ce);let it={top:0,left:0};const Pt=g(Ce);Pt!==document&&(it=_(Pt),it.top+=Pt.clientTop-Pt.scrollTop,it.left+=Pt.clientLeft-Pt.scrollLeft);const Ut=Ce.getBoundingClientRect();return{width:Ut.width||Ce.offsetWidth,height:Ut.height||Ce.offsetHeight,top:He.top-it.top,left:He.left-it.left}}const A=a.split("-"),T=A[0],I=A[1]||"center";let F;const U=u?_(e):b(e),z=n.offsetWidth,Q=n.offsetHeight,te={center:()=>U.left+U.width/2-z/2,left:()=>U.left,right:()=>U.left+U.width},Pe={center:()=>U.top+U.height/2-Q/2,top:()=>U.top,bottom:()=>U.top+U.height};switch(T){case Ri.right:F={top:Pe[I](),left:te[T]()};break;case Ri.left:F={top:Pe[I](),left:U.left-z};break;case Ri.bottom:F={top:Pe[T](),left:te[I]()};break;case Ri.bottomLeft:F={top:Pe[T](),left:U.left-z};break;default:F={top:U.top-Q,left:te[I]()};break}return F},RI=(e,n=220,a=320)=>{const u={top:null,left:null,right:null,x:null,y:null},d=182,h=310,g=24,_=28,b=g/2,A=e.width/2,T=window;let I=T.innerHeight-h;e.bottom+n>T.innerHeight&&n>h&&(I=T.innerHeight-n);const F=n>d?n:d,U=e.bottom+F<T.innerHeight,z=a-_-b,Q=a-z,te=e.left+A+z<T.innerWidth;return U?(u.top=e.bottom,u.y=Ri.bottom):(u.top=I,u.y=Ri.top),te?(u.left=e.left+A-Q,u.right=window.innerWidth-e.right,u.x=Ri.right):(u.left=e.left+A-z,u.right=window.innerWidth-e.right,u.x=Ri.left),u.top=Math.round(u.top),u.left=Math.round(u.left),u.right=Math.round(u.right),u},Fk=(e,n,a,u=0)=>{if(!e||!n)return null;const d=e.getBoundingClientRect(),h={},g=window.innerWidth-d.x,_=()=>d.top-(n.clientHeight+u)>0,b=()=>d.bottom+n.clientHeight+u<window.innerHeight,A=()=>d.left-(n.clientWidth+u)>0,T=()=>d.right+n.clientWidth+u<window.innerWidth;return a===Ri.top&&_()||a===Ri.bottom&&!b()?(h.left=d.left-(n.clientWidth-d.width)/2,h.rtlLeft=g-n.clientWidth/2-d.width/2,h.top=d.top-n.clientHeight-u,h.placement=Ri.top):a===Ri.bottom||a===Ri.top&&!_()?(h.left=d.left-(n.clientWidth-d.width)/2,h.rtlLeft=g-n.clientWidth/2-d.width/2,h.top=d.bottom+u,h.placement=Ri.bottom):a===Ri.left&&A()||a===Ri.right&&!T()?(h.left=d.left-n.clientWidth-u,h.rtlLeft=d.rtlLeft-n.clientWidth-u,h.top=d.top-(n.clientHeight-d.height)/2,h.placement=Ri.left):a===Ri.right||a===Ri.left&&!A()?(h.left=d.right+u,h.rtlLeft=d.rtlLeft+u,h.top=d.top-(n.clientHeight-d.height)/2,h.placement=Ri.right):a===Ri.bottomLeft&&(h.left=d.right-d.width/2-n.clientWidth-u,h.rtlLeft=d.rtlLeft-n.clientWidth-u,h.top=d.bottom+u,h.placement=Ri.bottomLeft),{left:Math.round(h.left),placement:h.placement,rtlLeft:Math.round(h.rtlLeft),top:Math.round(h.top)}},zk=(e,n,a,u=0)=>{if(!e||!n)return null;const d=Fk(e,n,a,u);return c4()?n.style.transform=`translate(-${d.rtlLeft}px, ${d.top}px)`:n.style.transform=`translate(${d.left}px, ${d.top}px)`,n.classList.add(d.placement),n},Uk=e=>e?(e.style.transform="translate(-100%, -100%)",e.classList.remove(Ri.left,Ri.right,Ri.bottom,Ri.top),e):null;function Hk(e,n){const a=yf(n)?e.findIndex(n):e.indexOf(n);a!==-1&&e.splice(a,1)}const d4=e=>j3(e.value)?{content:e.value}:e.value,f4=()=>{};var Gk={name:"Tooltip",created(){this.active=null,this.hideOnDocumentVisibilityChangeHandler=f4,this.hideOnScrollHandler=f4,this.instances=[]},beforeDestroy(){this.instances=null,this.clearTooltip()},methods:{bind(e,n){this.instances.push({element:e,options:d4(n||{value:e.getAttribute("title")})}),e.removeAttribute("title"),e.addEventListener("mouseenter",this.showTooltip),e.addEventListener("focus",this.showTooltip)},update(e,n){const a=this.instances.find(u=>u.element===e);a&&(a.options=d4(n))},unbind(e){const n=this.instances.find(a=>a.element===e);n&&(this.active===n&&this.hideTooltip({target:n.element}),Hk(this.instances,n),e.removeEventListener("mouseenter",this.showTooltip),e.removeEventListener("focus",this.showTooltip),e.removeEventListener("mouseleave",this.hideTooltip),e.removeEventListener("blur",this.hideTooltip))},showTooltip({target:e}){const n=this.instances.find(h=>h.element===e);if(!n||!n.options||!n.options.content)return;const a=n.options.delay||400,u=n.options.position||"top",d=n.options.padding||0;this.clearTooltip(),n.element.classList.contains(v3.CONFIRM_OPEN)||(this.active=n,n.element.addEventListener("mouseleave",this.hideTooltip),n.element.addEventListener("blur",this.hideTooltip),this.showTimeout=setTimeout(()=>{this.showFrame=window.requestAnimationFrame(()=>{this.$refs&&this.$refs.content&&n.options&&(this.$refs.content.textContent=n.options.content),this.$el.classList.add(u),zk(n.element,this.$el,u,d)})},a)),n.options.closeOnScroll!==!1&&this.hideOnScroll(e),this.hideOnDocumentVisibilityChange(e)},hideOnDocumentVisibilityChange(e){this.hideOnDocumentVisibilityChangeHandler=()=>{this.hideTooltip({target:e})},document.addEventListener("visibilitychange",this.hideOnDocumentVisibilityChangeHandler)},hideOnScroll(e){this.hideOnScrollHandler=()=>{this.hideTooltip({target:e})},window.addEventListener("scroll",this.hideOnScrollHandler)},hideTooltip({target:e}){this.instances.find(a=>a.element===e)&&(this.clearTooltip(),this.hideFrame=window.requestAnimationFrame(()=>{this.$refs&&this.$refs.content&&(this.$refs.content.textContent=null),Uk(this.$el)}))},clearTooltip(){this.active&&(this.active.element.removeEventListener("mouseleave",this.hideTooltip),this.active.element.removeEventListener("blur",this.hideTooltip),this.active=null),clearTimeout(this.showTimeout),window.cancelAnimationFrame(this.hideFrame),window.cancelAnimationFrame(this.showFrame),window.removeEventListener("scroll",this.hideOnScrollHandler),document.removeEventListener("visibilitychange",this.hideOnDocumentVisibilityChangeHandler)}}},Vk=Gk,jk=li(Vk,Bk,Dk,!1,null,null,null),$k=jk.exports;const Wk=Ir.default.extend($k);let Nu,f6=!1;const h6=()=>{if(Nu||(Nu=new Wk),!f6){const e=document.createElement("div");document.body.appendChild(e),Nu?.$mount(e),f6=!0}return Nu};function NI(){Nu.$destroy(),f6=!1,Nu=null}const qk={bind:(e,n)=>h6().bind(e,n),componentUpdated:(e,n)=>h6().update(e,n),unbind:(e,n)=>h6().unbind(e,n)};var h4,p4;const Kk=(p4=(h4=window.chesscom)==null?void 0:h4.features)==null?void 0:p4.includes("vue_3_tooltip_directive");let Zk=0;const pv=[];var m4=Kk?{bind(e,n){if(!e.hasAttribute("data-tooltip-target")){const a=(Zk++).toString(),u=document.createElement("div"),d=Lk(Nk,{id:a,options:n.value,target:e}),h=()=>{document.body.appendChild(u),d.mount(u)},g=()=>{d.unmount(),document.body.removeChild(u)};pv.push({app:d,id:a,mount:h,unmount:g}),e.setAttribute("data-tooltip-target",a),e.addEventListener("mouseenter",h,{once:!0})}},unbind(e){const n=e.getAttribute("data-tooltip-target"),a=pv.find(({id:u})=>u===n);a&&(pv.splice(pv.indexOf(a),1),a.unmount(),e.removeEventListener("mouseenter",a.mount))}}:qk,Yk={name:"MoveText",directives:{Tooltip:m4},props:{moveDisplayType:{type:String,default:m.TEXT},moveCoords:{type:String,required:!1},moveIcon:{type:String,required:!1},moveIsEnpassant:{type:Boolean,default:!1},moveFigurineIndex:{type:Number,required:!1},moveText:{type:String,required:!1},isDarkMode:{type:Boolean,default:!1}},data(){return{coloredMoveIcon:this.moveIcon,coords:"",isSelected:!1,showEnPassantTooltip:!1,showLeadingFigurine:!1,showTrailingFigurine:!1}},watch:{isDarkMode:{handler:"determineIconColor",immediate:!0},moveIcon:{handler:"determineIconColor"},moveDisplayType:function(n,a){n!==a&&(this.setCoordinates(),this.setFigurinesConditions())},moveText:function(n,a){n!==a&&this.setCoordinates()},moveFigurineIndex:function(n,a){n!==a&&this.setFigurinesConditions()}},created(){this.setCoordinates(),this.setFigurinesConditions()},methods:{determineIconColor(){let e=this.moveIcon;this.isDarkMode&&(e=this.moveIcon.includes(E.WHITE)?this.moveIcon.replace(E.WHITE,E.BLACK):this.moveIcon.replace(E.BLACK,E.WHITE)),this.coloredMoveIcon=e},openEnPassantHelpWindow(){window.open(g3.enPassant(),"_blank")},setCoordinates(){this.moveDisplayType===m.TEXT?this.coords=this.moveCoords:this.coords=this.moveText.replace(/[BKNRQ]/g,"")},setFigurinesConditions(){this.moveDisplayType===m.FIGURINE?(this.showLeadingFigurine=this.moveFigurineIndex===0,this.showTrailingFigurine=this.moveFigurineIndex>0):(this.showLeadingFigurine=!1,this.showTrailingFigurine=!1),this.showTrailingFigurine&&(this.coords=this.coords.replace("+",""))},setEnPassantConditions(e=!1){let n;this.moveIsEnpassant?n=e:n=!1,this.showEnPassantTooltip!==n&&(this.showEnPassantTooltip=n)}}},Xk=Yk,v4={component:"move-text-component","dark-mode":"move-text-dark-mode",selected:"move-text-selected","contains-figurine":"move-text-contains-figurine",icon:"move-text-icon","en-passant":"move-text-en-passant"};function Qk(e){this.$style=v4.locals||v4}var Jk=li(Xk,f,p,!1,Qk,null,null),eP=Jk.exports,tP=function(){var n=this,a=n._self._c;return n.isInitialized?a("horizontal-move-list",{staticClass:"move-list",attrs:{"scroll-container-id":n.scrollContainerId,"disable-context-menu":n.disableContextMenu,"board-id":`board-${n.identifier}`}}):n._e()},nP=[];const nd=D(),rP={"%username% won on time":e=>an.trans("%username% won on time",{"%username":e}),"Good move":()=>an.trans("Good move"),"Bad move":()=>an.trans("Bad move"),"Excellent move":()=>an.trans("Excellent move"),Blunder:()=>an.trans("Blunder"),"Speculative move":()=>an.trans("Speculative move"),"Dubious move":()=>an.trans("Dubious move"),Drawish:()=>an.trans("Drawish"),Unclear:()=>an.trans("Unclear"),"White has a slight advantage":()=>an.trans("White has a slight advantage"),"Black has a slight advantage":()=>an.trans("Black has a slight advantage"),"White has a moderate advantage":()=>an.trans("White has a moderate advantage"),"Black has a moderate advantage":()=>an.trans("Black has a moderate advantage"),"White has a decisive advantage":()=>an.trans("White has a decisive advantage"),"Black has a decisive advantage":()=>an.trans("Black has a decisive advantage"),"The position is in zugzwang":()=>an.trans("The position is in zugzwang"),"With initiative":()=>an.trans("With initiative"),"With compensation":()=>an.trans("With compensation"),Novelty:()=>an.trans("Novelty"),"With an attack":()=>an.trans("With an attack"),"Clear All Analysis":()=>an.trans("Clear All Analysis"),"Delete Comment After":()=>an.trans("Delete Comment After"),"Delete Comment Before":()=>an.trans("Delete Comment Before"),"Delete Move":()=>an.trans("Delete Move"),"Delete Entire Variation":()=>an.trans("Delete Entire Variation"),"Comment After":()=>an.trans("Comment After"),"Comment Before":()=>an.trans("Comment Before"),"Insert Continuation":()=>an.trans("Insert Continuation"),Miss:()=>an.trans("Miss"),"Move Variation Down":()=>an.trans("Move Variation Down"),"Move Variation Up":()=>an.trans("Move Variation Up"),Promote:()=>an.trans("Promote"),"Remove Annotation":()=>an.trans("Remove Annotation"),"Remove Begin":()=>an.trans("Remove Begin"),"Remove End":()=>an.trans("Remove End"),"Remove Evaluation Annotation":()=>an.trans("Remove Evaluation Annotation"),"Remove Focus":()=>an.trans("Remove Focus"),"Set Begin":()=>an.trans("Set Begin"),"Set End":()=>an.trans("Set End"),"Set Focus":()=>an.trans("Set Focus"),"Add Comment...":()=>an.trans("Add Comment..."),B:()=>nd.B,K:()=>nd.K,N:()=>nd.N,P:()=>nd.P,Q:()=>nd.Q,R:()=>nd.R,numberOfDays:e=>an.transChoice("{1} 1 day|]1,Inf] %1$s% days",e,{"%1$s%":e}),numberOfHours:e=>an.transChoice("{1} 1 hr|]1,Inf] %1$s% hrs",e,{"%1$s%":e}),numberOfMinutes:e=>an.transChoice("{1} 1 min|]1,Inf] %1$s% mins",e,{"%1$s%":e}),"This game ended in a draw because the same position was repeated three times.":()=>an.trans("This game ended in a draw because the same position was repeated three times."),"En passant is a special pawn move by which a pawn captures another pawn that has advanced two squares.":()=>an.trans("En passant is a special pawn move by which a pawn captures another pawn that has advanced two squares.")};var iP=Object.defineProperty,oP=(e,n,a)=>n in e?iP(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,mv=(e,n,a)=>(oP(e,typeof n!="symbol"?n+"":n,a),a);class aP extends HTMLElement{constructor(){super(),mv(this,"board",null),mv(this,"boardId",null),mv(this,"boardInitializedHandler"),mv(this,"timeout"),this.boardInitializedHandler=this.boardInitialized.bind(this)}static get observedAttributes(){return[Ao.ObservedAttributes.BoardId]}attributeChangedCallback(n){this.createOnNextTick()}boardInitialized({detail:n}){const a=`board-${n}`;this.boardId=a,this.setAttribute(Ao.ObservedAttributes.BoardId,a),this.boardReady()}connectedCallback(){this.createOnNextTick()}disconnectedCallback(){this.destroy(),this.boardId=null,this.board=null}getBoard(){const n=this.boardId&&document.getElementById(this.boardId);n&&(this.board=n)}destroy(){var n,a;clearTimeout(this.timeout),this.componentDestroy(),(a=(n=this.board)==null?void 0:n.removeEventListener)==null||a.call(n,Ao.Events.BoardInitialized,this.boardInitializedHandler)}createOnNextTick(){clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{this.create(),this.attributesChanged()})}create(){var n,a,u,d,h;const g=this.getAttribute(Ao.ObservedAttributes.BoardId);if(!(g&&this.boardId===g)){if(this.boardId=g,this.destroy(),this.componentReady(),this.getBoard(),!((n=this.board)!=null&&n.game)){(u=(a=this.board)==null?void 0:a.addEventListener)==null||u.call(a,Ao.Events.BoardInitialized,this.boardInitializedHandler);return}(h=(d=this.board).removeEventListener)==null||h.call(d,Ao.Events.BoardInitialized,this.boardInitializedHandler),this.boardReady()}}addBoardEventListener(n,a){var u,d;(d=(u=this.board)==null?void 0:u.game)==null||d.on(n,a)}removeBoardEventListener(n,a){var u,d;try{(d=(u=this.board)==null?void 0:u.game)==null||d.off({type:n,handler:a})}catch{}}boardReady(){}componentReady(){}componentDestroy(){}attributesChanged(){}}var sP=Object.defineProperty,lP=(e,n,a)=>n in e?sP(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,uP=(e,n,a)=>(lP(e,typeof n!="symbol"?n+"":n,a),a);class cP extends aP{constructor(){super(...arguments),uP(this,"plugin",null)}static get observedAttributes(){return[Ao.ObservedAttributes.BoardId,Ao.ObservedAttributes.ScrollContainerId]}componentDestroy(){var n,a,u,d;this.plugin&&((d=(a=(n=this.board)==null?void 0:n.game)==null?void 0:(u=a.plugins).remove)==null||d.call(u,this.plugin.name),this.plugin=null)}boardReady(){var n,a;const u=this.getAttribute(Ao.ObservedAttributes.ScrollContainerId);this.plugin=(0,mn.bX)({el:this,enableContextMenu:!this.hasAttribute(Ao.ObservedAttributes.DisableContextMenu),scrollContainer:u&&document.getElementById(u)||void 0,translations:rP}),(a=(n=this.board)==null?void 0:n.game)==null||a.plugins.add(this.plugin)}}customElements.get("horizontal-move-list")||customElements.define("horizontal-move-list",cP);var dP={name:"HorizontalMl",props:{disableContextMenu:{type:Boolean,default:!1},identifier:{type:String,default:""},scrollContainerId:{type:String,default:""}},data(){return{isInitialized:!1}},created(){Ir.default.config.ignoredElements.push("horizontal-move-list")},async mounted(){await Ec(`chessboard-${this.identifier}-mounted`),this.isInitialized=!0}},fP=dP,hP=li(fP,tP,nP,!1,null,null,null),pP=hP.exports,mP=function(){var n=this,a=n._self._c;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:n.close,expression:"close"}],ref:"popover",class:n.$style.component,style:n.positionObj,attrs:{tabindex:"-1"},on:{keydown:n.onKeyDown}},[a("div",{class:n.$style.wrapper},n._l(n.variations,function(u,d){return a("div",{key:u.id,class:[n.$style.row,{[n.$style.selected]:u.selected}],on:{click:function(h){return n.changeSelectedVariation(d)},dblclick:function(h){return n.doubleClickAction(d)}}},[a("span",{class:n.$style["icon-wrap"]},[u.selected?a("div",{staticClass:"icon-font-chess arrow-right",class:n.$style.icon}):n._e()]),n._v(" "),n.moveNumber(u)?a("span",{domProps:{innerHTML:n._s(n.moveNumber(u))}}):n._e(),n._v(`

      `+n._s(u.san)+`
    `)])}),0)])},vP=[],gP={name:"DiagramVariationPopover",directives:{clickOutside:Hm},mixins:[fo],props:{selectedNode:{type:HTMLElement,required:!0}},data(){return{positionObj:{top:0,left:0},scroll:0,startingMoveNumber:1}},computed:{...(0,Bi.mapGetters)("diagramViewer",["getVariations"]),padding(){return{x:-3,y:16,bottom:10}},selectedVariation(){return this.getVariations(this.gameId).find(e=>e.selected===!0)},variations(){return this.getVariations(this.gameId)}},mounted(){this.$el.focus(),this.position()},destroyed(){this.clearVariations(this.gameId)},methods:{...(0,Bi.mapActions)("diagramViewer",["moveBackward","selectVariation","selectNode"]),...(0,Bi.mapMutations)("diagramViewer",["hideVariationPopover","clearSelectedVariations","switchVariation","clearVariations"]),changeSelectedVariation(e){const n=this.gameId;this.clearSelectedVariations(n),this.switchVariation({id:n,index:e})},close(){const e=this.gameId;this.hideVariationPopover(e)},doubleClickAction(e){this.changeSelectedVariation(e);const n=this.gameId,{ids:a}=this.selectedVariation;this.hideVariationPopover(n),this.selectNode({id:n,ids:a}),this.$emit(at.FOCUS_ON_WIDGET)},getPopoverPosition(e,n,a,u={x:0,y:0}){const d={top:0,left:0},h=a.x-e.x+u.x,g=e.width-n.width-1;return d.left=Math.min(h,g),d.top=a.y-e.y+u.y,e.bottom<a.x+u.x+n.height&&(d.maxHeight=e.bottom-a.bottom-u.bottom),d},onKeyDown(e){e.preventDefault(),e.stopPropagation();const n=this.gameId,{ids:a}=this.selectedVariation;switch(e.keyCode){case Et.LEFT:this.hideVariationPopover(n),this.moveBackward(n),this.$emit(at.FOCUS_ON_WIDGET);break;case Et.UP:this.selectVariation({id:n,step:-1}),this.scroll-=kt.VARIATION_HEIGHT,this.$el.scrollTop=this.scroll;break;case Et.RIGHT:this.hideVariationPopover(n),this.selectNode({id:n,ids:a}),this.$emit(at.FOCUS_ON_WIDGET);break;case Et.ENTER:this.hideVariationPopover(n),this.selectNode({id:n,ids:a}),this.$emit(at.FOCUS_ON_WIDGET);break;case Et.DOWN:this.selectVariation({id:n,step:1}),this.scroll+=kt.VARIATION_HEIGHT,this.$el.scrollTop=this.scroll;break;default:break}},moveNumber(e){return O_(e,this.startingMoveNumber)},position(){const{top:e,left:n,maxHeight:a}=this.getPopoverPosition(this.$el.parentNode.getBoundingClientRect(),this.$el.getBoundingClientRect(),this.selectedNode.getBoundingClientRect(),this.padding);this.positionObj.top=`${e}px`,this.positionObj.left=`${n}px`,this.positionObj.maxHeight=`${a}px`}}},_P=gP,g4={component:"diagram-variation-popover-component",wrapper:"diagram-variation-popover-wrapper",row:"diagram-variation-popover-row",icon:"diagram-variation-popover-icon",selected:"diagram-variation-popover-selected","icon-wrap":"diagram-variation-popover-icon-wrap"};function bP(e){this.$style=g4.locals||g4}var yP=li(_P,mP,vP,!1,bP,null,null),wP=yP.exports,EP={name:"DiagramMoveList",components:{DiagramVariationPopover:wP,HorizontalMoveList:pP,MoveText:eP},mixins:[fo],data(){return{events:at}},computed:{...(0,Bi.mapGetters)("diagramViewer",["getPuzzleButtonText","getPuzzleMoveList","getPuzzleStart","getVariationPopover","isBlackAtBottom","isChessProblem"]),...(0,Bi.mapState)({boardOptions:e=>e.diagramViewerBoard.boardOptions}),blackToMove(){return this.puzzleButtonText===ft.BLACK_TO_MOVE},buttonTextIsCorrect(){return this.puzzleButtonText===ft.CORRECT},buttonTextIsIncorrect(){return this.puzzleButtonText===ft.INCORRECT},buttonTextIsSolved(){return this.puzzleButtonText===ft.SOLVED},nextMoveIndex(){const e=this.currentGame.setup;let n=0;return e.beginNode&&(n=e.beginNode),e.focusNode&&(n=e.focusNode),n},isPuzzle(){return this.isChessProblem(this.gameId)},isSmallMobile(){return Op&&window.innerHeight<kt.BIG_SCREEN_HEIGHT},moveList(){let e=[];return Array.from(this.$refs.moveList.lines).forEach(n=>{n.id===0&&(e=e.concat(n.moves))}),e},puzzleButtonText(){return this.getPuzzleButtonText(this.gameId)},puzzleMoveList(){return this.getPuzzleMoveList(this.gameId)},puzzleStart(){return this.getPuzzleStart(this.gameId)},showVariationPopover(){return this.getVariationPopover(this.gameId)},startingMoveNumber(){return this.currentGame.game.getStartingMoveNumber()},whiteToMove(){return this.puzzleButtonText===ft.WHITE_TO_MOVE}},async mounted(){var e;const n=this.gameId;if(this.$refs.moveList.$el.addEventListener("scroll",()=>this.hideVariationPopover(n)),this.isPuzzle){await Ec(at.BOARD_INITIALIZED);let u=!0;const g=((e=this.currentGame.game)==null?void 0:e.getRawLines())[0][this.nextMoveIndex];u=g&&g.color===1,u||(this.changePuzzleButtonText({id:n,text:ft.BLACK_TO_MOVE}),this.setFirstMoveIsWhite({id:n,type:!1}),this.isBlackAtBottom(n)||this.setBlackAtBottom(n))}},beforeDestroy(){const e=this.$refs.moveList,n=this.gameId;e.$el.removeEventListener("scroll",this.hideVariationPopover(n))},methods:{...(0,Bi.mapActions)("diagramViewer",["goToNode"]),...(0,Bi.mapMutations)("diagramViewer",["changePuzzleButtonText","hideVariationPopover","setBlackAtBottom","setFirstMoveIsWhite"]),moveNumber(e){let n="";return e.color===1&&(n+=`${e.wholeMoveNumber+(this.startingMoveNumber-1)}.`),e.color===2&&e.wholeMoveNumber===1&&e.moveNumber===0&&(n+=`${e.wholeMoveNumber+(this.startingMoveNumber-1)}...`),n},nodeAdditionalData(e){const n=this.currentGame.game,a=e.color===1?"white":"black",u=qr[e.piece.toLowerCase()],d=n.getOptions().moveListDisplayType==="figurine"&&e.piece!=="p"?0:-1;return{isEnPassant:!!e.epCapture,figurineIndex:d,iconName:`${u}-${a}`}},showNumber(e){return e.color===1||e.color===2&&e.wholeMoveNumber===1&&e.moveNumber===0},selectedNode(){const e=this.currentGame.game,n=this.$refs.moveList;return Da(e,n)}}},AP=EP,_4={component:"diagram-move-list-component","small-screen":"diagram-move-list-small-screen","puzzle-container":"diagram-move-list-puzzle-container","puzzle-full-size":"diagram-move-list-puzzle-full-size","puzzle-progress":"diagram-move-list-puzzle-progress","puzzle-node":"diagram-move-list-puzzle-node","puzzle-move-number":"diagram-move-list-puzzle-move-number","puzzle-node-space":"diagram-move-list-puzzle-node-space","puzzle-move":"diagram-move-list-puzzle-move","puzzle-move-list":"diagram-move-list-puzzle-move-list",list:"diagram-move-list-list"};function SP(e){this.$style=_4.locals||_4}var kP=li(AP,l,c,!1,SP,null,null),PP=kP.exports,CP=function(){var n=this,a=n._self._c;return a("share-menu",{ref:"shareMenu",attrs:{"board-options":n.currentGame.boardOptions,"board-settings":n.boardSettings,"is-logged-in":n.loggedIn,"initial-diagram-options":n.additionalOptions,"pgn-headers":n.pgnHeaders,tcn:n.tcn,fen:n.fen,pgn:n.pgn,variant:n.variant,"share-url":n.shareUrl},on:{hide:n.hide}})},TP=[];const p6=(e,n)=>e?e.replace(/,/g,"").replace(/\s+/g,n):"";var MP=function(){var n=this,a=n._self._c;return a("Modal",{ref:"modalContainer",attrs:{corners:"rounded-lg","modal-width":"lg"},on:{"modal-did-hide":function(u){return n.$emit("hide",u)}}},[a("outside-close",{on:{click:n.hide}}),n._v(" "),n.fen?a("div",[a("header",{class:n.$style.header},[a("div",{class:n.$style.share},[a("share-link",n._b({class:n.$style.link,attrs:{"share-url":n.generatedShareUrl}},"share-link",n.$attrs,!1)),n._v(" "),a("social-share",{attrs:{url:n.shareUrl}})],1),n._v(" "),a("tab-selector",{ref:"tab-selector",attrs:{"active-tab":n.activeTab,tabs:n.displayableTabs},on:{"tab-selected":n.selectTab}})],1),n._v(" "),a("section",{class:n.$style.content},n._l(n.displayableTabs,function(u){return a(n.getTabComponent(u.key),{directives:[{name:"show",rawName:"v-show",value:n.activeTab===u.key,expression:"activeTab === tab.key"}],key:u.key,tag:"component",class:n.$style.tab,attrs:{"analyzed-pgn":n.analyzedPgn,"board-options":n.boardOptions,"board-settings":n.boardSettings,"diagram-options":n.diagramEditor,"event-filename":n.eventFilename,"event-url":n.eventUrl,"gif-url":n.animatedGifUrl,"has-timestamps":n.hasTimestamps,"is-loading-gif":n.isLoadingGif,"image-size":n.imageSize,"image-url":n.imageUrl,fen:n.normalizedFen,pgn:n.pgn,"pgn-headers":n.pgnHeaders,"tactics-id":n.tacticsId},on:{"update-diagram-option":n.updateDiagramOption}})}),1)]):n._e()],1)},OP=[],Ls=ir(6437);const xP=()=>{let e;const n=window.document.documentElement.lang,a=window.location,u=n.split("-")[0];return a.pathname.split("/")[1]===u||u==="en"?e=a.href:e=`${a.protocol}//${a.hostname}/${u}${a.pathname}`,e},IP=e=>{let n=e;n.indexOf("|")!==-1&&(n=n.split("|")[0].trim());const a=n.split(" "),u=a[0].split("/");return u.length>8&&(u.pop(),a[0]=u.join("/"),n=a.join(" ")),n};var Lu=(e=>(e.Embed="embed",e.Event="event",e.Gif="gif",e.Image="image",e.Pgn="pgn",e))(Lu||{});const Nl={PGN:{key:Lu.Pgn,isVisible:()=>!0,label:"PGN"},IMAGE:{key:Lu.Image,isVisible:()=>!0,label:"Image"},GIF:{key:Lu.Gif,isVisible:({showGif:e})=>e,label:"Animated Gif"},EMBED:{key:Lu.Embed,isVisible:()=>!0,label:"Embed"},EVENT:{key:Lu.Event,isVisible:()=>!0,label:"Event"}},RP=[Nl.PGN.key,Nl.IMAGE.key,Nl.GIF.key,Nl.EMBED.key],NP={gifPageUrl:H.generate("web_content_gifs")},LP={gifPageLinkText:ie.trans('Customize chess gifs at <a href="%link%">%url%</a>',{"%link%":NP.gifPageUrl,"%url%":"chess.com/gifs"})};function BI(e=""){return Oa.post(Sc.getChessDiagram(),{textSetup:e})}function BP(e,n=""){return Oa.post(Sc.getChessDiagram(e),{textSetup:n})}function DI(e){return e!==""&&(Lf.test(e)||Nf.test(e))}function FI(e){return Oa.get(Sc.getSavedAnalysisFromUrl(e))}let m6;function DP(){return m6||(m6=new Promise((e,n)=>{const a=document.createElement("script");a.src=window.Config.pathToTinyMCE,a.async=!0,a.type="text/javascript",a.onload=()=>{e()},a.onerror=u=>{n(u||new Error("failed to load tinymce"))},a.onreadystatechange=()=>{a.readyState==="complete"&&e()},document.body.appendChild(a)})),m6}var b4=class{constructor(e=null){e&&(this.editor=e)}getEditor(){return!this.editor&&window.tinymce&&(this.editor=window.tinymce),this.editor?Promise.resolve(this.editor):DP().then(()=>(this.editor=window.tinymce,this.editor))}init(e){const n=lf()?hp.DARK_MODE:"",a=Object.assign(e,{body_class:n});return this.getEditor().then(u=>u.init(a))}execCommand(...e){this.getEditor().then(n=>n.activeEditor.execCommand(...e))}fire(e){this.getEditor().then(n=>n.activeEditor.fire(e))}getContent(){if(!this.editor)throw new Error("TinyMCE not initialized");return this.editor.activeEditor.getContent()}getParams(){return this.getEditor().then(e=>{if(e.activeEditor)return window.top.tinymceDialogParameters})}insertContent(e){this.getEditor().then(n=>n.activeEditor.insertContent(e))}setContent(e){this.getEditor().then(n=>n.activeEditor.setContent(e))}destroy(){this.editor&&this.editor.activeEditor.destroy()}closePopup(){this.getEditor().then(e=>e.activeEditor.windowManager.close(window))}openPopup(){this.getEditor().then(e=>e.activeEditor.windowManager.open())}};const FP=e=>e.replace(/(<(?!img|\/?iframe)([^>]+)>)/gi,""),zP=e=>e.replace(/&nbsp;/g,""),zI=(e,n,a)=>e.split(n).join(a),UI=e=>{const n=FP(e);return zP(n).trim()},UP=e=>new DOMParser().parseFromString(`<!doctype html><body>${e}`,"text/html").body.textContent,HI=e=>{if(!e)return e;const n=[60,62];let a=e.length;const u=[];for(;a--;){const d=e[a].charCodeAt();n.indexOf(d)>-1?u[a]=`&#${d};`:u[a]=e[a]}return u.join("")},GI=e=>{var n;return(n=window.chesscom)!=null&&n.features.includes("remove_empty_space_for_comments")?String(e).replace(/p>(.*?)<\/p/g,a=>`p>${a.slice(2,-3).replace(/^(\s|&nbsp;)+|(\s|&nbsp;)+$/g,"")}</p`).replace(/>(.*?)<\//g,a=>`>${a.slice(1,-2).replace(/^(\s*<(br|BR)\s*\/?>)*|(<(br|BR)\s*\/?>\s*)*$/gm,"")}</`).replace(/>(.*?)<\//g,a=>`>${a.slice(1,-2).replace(/(\s*<(br|BR)\s*\/?>){2,}/g,"<br />").replace(/( |&nbsp;){2,}/g," ")}</`).replace(/<(div|p)*><\/[^>]+>/gim,"").trim():e},VI=e=>{const n=window.chesscom.features.includes("user_mention_mail_link_issue")?/(^|[^a-zA-Z0-9_!#$%&*@＠/"])([@＠]([a-zA-Z0-9_-]{3,25}))/g:/(^|[^a-zA-Z0-9_!#$%&*@＠/])([@＠]([a-zA-Z0-9_-]{3,25}))/g;return String(e).replace(n,(a,u,d,h)=>`${u}<span class="v-user-popover" v-user-popover="'${h}'" data-username="'${h}'"> ${d}</span>`)};function HP(e){const n=["onerror="];let a=e;return n.forEach(u=>{a=a.replace(u,"")}),n.some(u=>a.includes(u))?HP(a):a}const y4=e=>{if(!(!e.response||e.response.status===401))return(e.response.data&&e.response.data.message?e.response.data.message:iu.badRequest)||e.response.statusText},jI=e=>y4(e)||Translator.trans("An error occurred");var GP=e=>{const n=y4(e);return n&&Xs({type:Es.error,message:n}),Promise.reject(e)};const VP=(e={})=>e&&Object.keys(e).length>0,Ll=(e,n)=>{const a=n?e.trim().split(" ")[0].trim():e.split(`
`)[1];return a?a.trim():""},w4=e=>`<div style="text-align: center;"><img id="chess_com_diagram_0_${e}" class="chessDiagramEditorImg mceItemNonEditable" src="/bundles/web/images/diagram-placeholder.png" name="mce_chessDiagramEditorImg" /></div><br>`,jP=e=>`&-diagramtype:
    ${e.diagramType}
    &-colorscheme:
    ${e.boardStyle}
    &-piecestyle:
    ${e.pieceStyle}
    &-float:
    left
    &-flip:
    ${e.isBoardFlipped}
    &-prompt:
    false
    &-coords:
    ${e.coords}
    &-size:
    45
    &-lastmove:

    &-focusnode:
    ${e.focusNode}
    &-beginnode:
    ${e.beginNode}
    &-endnode:
    ${e.endNode}
    &-hideglobalbuttons:
    false
    &-pgnbody:
    ${e.pgn}`.replace(/^[^\S\r\n]+/gm,""),E4=e=>Yg.pieces.includes(e)?(0,mn.ce)().pieceStyle:e,$P=(e,n=!1)=>e?n?Vo.CHESS_PROBLEM:Vo.CHESS_GAME:Vo.SIMPLE_DIAGRAM,$I=e=>e==="?"?"":e,WI=e=>{if(Nf.test(e)){const n=e.split("/");return n[n.length-1]}return null},qI=e=>{const n=e.data,a=n.match(/\n?(.+)?&amp;(.+)?/g);let u=!1;a&&(u=a.some(g=>!g.includes("[")&&!g.includes("]")));const d=n.split(":"),h={};return h.isPuzzle=Ll(d[1],u)==="chessProblem",h.boardStyle=Ll(d[2],u),h.pieceStyle=Ll(d[3],u),h.flipBoard=Ll(d[5],u)==="true",h.focus=Number(Ll(d[10],u)),h.begin=Number(Ll(d[11],u)),h.end=Number(Ll(d[12],u)),h.coordinates=Ll(d[7],u)==="true",h.pgn=UP(n.substr(n.indexOf("["),n.length).trim()),h},KI=e=>{if(Lf.test(e)){const n=Lf.exec(e);return{id:n[2],gameType:hy[n[1]]}}return{id:null,gameType:null}},WP=e=>e.filter(n=>!Yg.pieces.includes(n.code));function ZI(e){const n=new Editor(window.parent.tinyMCE);createChessDiagram(e).then(a=>{n.insertContent(w4(a.data)),n.closePopup()}).catch(catchError)}function qP(e){const n='[Event "';return e.split(n).slice(1).map(u=>`${n}${u}`)}function KP(e){const n='[Event "';return e.indexOf(n)!==-1?qP(e):[e]}function ZP(e,n){const a=KP(e),u=n;return a.map(d=>(u.pgn=d.replace(/\\/g,""),jP(u))).join("")}const v6=e=>VP(e)?e.ids.move+1:"",YP=({boardOptions:e,hasMoves:n,isPuzzle:a,nodeLimit:u})=>({beginNode:v6(u.begin),boardStyle:e.boardStyle,coords:!!e.coordinates,diagramType:$P(n,a),endNode:v6(u.end),focusNode:v6(u.focus),isBoardFlipped:e.flipBoard,pgn:"",pieceStyle:E4(e.pieceStyle)}),YI=e=>({[mu.KING_OF_THE_HILL]:Bf.KING_OF_THE_HILL,[mu.THREE_CHECK]:Bf.THREE_CHECK,[mu.ODDS_CHESS]:Bf.CHESS})[e]||e.toLowerCase();var XP=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("span",{staticClass:"icon-font-chess link",class:n.$style.icon}),n._v(" "),a("v5-input",{ref:"link",class:n.$style.input,attrs:{readonly:!0,value:n.shareUrl},on:{focus:u=>u.target.select()}}),n._v(" "),a("button",{class:n.$style.action,attrs:{type:"button","aria-label":n.$trans("Copy to Clipboard!")},on:{click:n.copyLink}},[a("span",{staticClass:"icon-font-chess copy",class:n.$style.icon})]),n._v(" "),a("transition",{attrs:{name:n.$style.message}},[n.showCopiedMessage?a("div",{class:n.$style.message,domProps:{textContent:n._s(n.$trans("Copied to Clipboard!"))}}):n._e()])],1)},QP=[];function JP(e){e&&(e.focus({preventScroll:!0}),e.select(),document.execCommand("copy"))}const eC=e=>{const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),JP(n),document.body.removeChild(n)};var tC={name:"ShareLink",components:{V5Input:Ls.V5Input},props:{shareUrl:{type:String,required:!0}},data(){return{showCopiedMessage:!1}},methods:{copyLink(){eC(this.shareUrl),this.showCopiedMessage=!0,setTimeout(()=>{this.showCopiedMessage=!1},1500)}}},nC=tC,A4={component:"share-menu-share-link-component",input:"share-menu-share-link-input",action:"share-menu-share-link-action",icon:"share-menu-share-link-icon",message:"share-menu-share-link-message","message-enter":"share-menu-share-link-message-enter","message-leave-to":"share-menu-share-link-message-leave-to","message-enter-active":"share-menu-share-link-message-enter-active","message-leave-active":"share-menu-share-link-message-leave-active"};function rC(e){this.$style=A4.locals||A4}var iC=li(nC,XP,QP,!1,rC,null,null),oC=iC.exports,aC=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},n._l(n.tabs,function(u){return a("tab-item",{key:u.key,class:n.$style.tab,attrs:{"is-active":n.tabIsActive(u.key),label:u.label},on:{click:function(d){return n.$emit("tab-selected",u.key)}}})}),1)},sC=[],lC=function(){var n=this,a=n._self._c;return a("div",n._g({class:[n.$style.component,{[n.$style.active]:n.isActive}]},n.$listeners),[a("span",{class:n.$style.label,domProps:{textContent:n._s(n.label)}})])},uC=[],cC={name:"BoardTabItem",props:{isActive:{type:Boolean,default:!1},label:{type:String,required:!0}}},dC=cC,S4={component:"board-tab-item-underlined-component",active:"board-tab-item-underlined-active"};function fC(e){this.$style=S4.locals||S4}var hC=li(dC,lC,uC,!1,fC,null,null),pC=hC.exports,mC={name:"TabSelector",components:{TabItem:pC},props:{activeTab:{type:String,required:!0},tabs:{type:Array,required:!0}},emits:["tab-selected"],methods:{tabIsActive(e){return e===this.activeTab}}},vC=mC,k4={component:"share-menu-tab-selector-component",tab:"share-menu-tab-selector-tab"};function gC(e){this.$style=k4.locals||k4}var _C=li(vC,aC,sC,!1,gC,null,null),bC=_C.exports,yC=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("section",{class:[n.$style.section,n.$style.first]},[n.loading&&!n.diagramOptions.diagramId?[a("label",{class:n.$style.heading,attrs:{for:"share-menu-tab-embed-embed"}},[n._v(`
        `+n._s(n.$trans("Embed"))+`
      `)]),n._v(" "),a("v5-input",{attrs:{id:"share-menu-tab-embed-embed",readonly:!0}})]:n._e(),n._v(" "),n.diagramOptions.diagramId?[a("label",{class:n.$style.heading,attrs:{for:"embed"}},[n._v(`
        `+n._s(n.$trans("Embed"))+`
      `)]),n._v(" "),a("v5-input",{attrs:{id:"embed",readonly:!0,value:n.diagramEmbed},on:{focus:u=>u.target.select()}})]:n._e()],2),n._v(" "),a("section",{class:n.$style.section,domProps:{textContent:n._s(n.$trans("To display the diagram, copy/paste the image OR code below into a post on Chess.com."))}}),n._v(" "),a("section",{class:[n.$style.section,n.$style.flex]},[a("div",{class:n.$style.half},[n.diagramOptions.diagramImage?a("div",{class:n.$style.editor},[a("tiny-mce",{attrs:{theme:"analysis","custom-config":n.editorOptions,"init-value":n.diagramOptions.diagramImage}})],1):n._e()]),n._v(" "),a("div",{class:n.$style.half},[a("div",{class:n.$style.code},[n.loading&&!n.diagramOptions.diagramId?a("v5-input",{attrs:{readonly:!0}}):n._e(),n._v(" "),n.diagramOptions.diagramId?a("v5-input",{attrs:{readonly:!0,value:n.diagramCode},on:{focus:u=>u.target.select()}}):n._e()],1),n._v(" "),n._l(n.controls,function(u){return a("div",{key:u.label,class:n.$style.controls},[a("label",{class:n.$style.label,attrs:{for:u.id}},[n._v(`
          `+n._s(u.label)+`
        `)]),n._v(" "),a("v5-select",{class:n.$style.input,attrs:{id:u.id,"label-key":"name","value-key":"code",options:u.options,value:u.value},on:{input:u.action}})],1)}),n._v(" "),a("div",{class:n.$style.toggles},n._l(n.toggles,function(u){return a("div",{key:u.key,class:n.$style.toggle},[u.show?a("div",[a("input",{attrs:{id:u.key,type:"checkbox"},domProps:{checked:u.checked},on:{change:u.action}}),n._v(" "),a("label",{attrs:{for:u.key},domProps:{textContent:n._s(u.label)}})]):n._e()])}),0)],2)])])},wC=[],EC=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("div",{ref:"editor",attrs:{"data-placeholder":n.placeholder},domProps:{innerHTML:n._s(n.initValue)}})])},AC=[];function vv(e){return fb("isNewlyRegistered")?e.replace(/imageuploader|smileys|media|link|unlink/g,""):e}const SC=668;function kC(e){let n=[];return["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].forEach(a=>{parseInt(e.style[a],10)&&n.push(e.style[a])}),n.length>0?(n=n.join(" - "),`calc(100% - ${n})`):"100%"}function PC(e){const n=e.style.marginLeft,a=e.style.marginRight;n&&a&&n===a&&(e.style.marginLeft="auto",e.style.marginRight="auto")}function CC(e){const n=e.style.width,a=parseInt(n,10);n&&n.includes("px")&&a>SC&&(e.style.width=kC(e))}function TC(e,{node:n}){Array.from(n.querySelectorAll("[style]")).forEach(u=>{PC(u),CC(u)})}const P4="chessdiagram imageuploader smileys media bold italic forecolor fontsizeselect bullist numlist hr link unlink",gv="chessdiagram imageuploader smileys media link unlink bullist numlist table hr undo redo fullscreen",C4="bold italic underline alignleft aligncenter alignright alignjustify outdent indent forecolor backcolor fontselect fontsizeselect",MC="blockquote anchor subscript superscript charmap preview code styleselect",T4="chessdiagram imageuploader smileys bold italic link unlink",_v=window.chesscom.features.includes("tinymce_rtl_support")&&c4(),g6=()=>Object.assign(window.TinymceConfig.theme_options,window.TinymceConfig.editor_options,{plugins:"placeholder",paste_postprocess:TC,resize:!0,toolbar1:vv(P4),toolbar:!0,elementpath:!1,contextmenu:!1,height:230,min_height:130,mobile:{toolbar_mode:"wrap"}},_v&&{directionality:"rtl",toolbar1:vv(P4.concat(" ","ltr rtl"))}),OC=()=>Object.assign(g6(),{toolbar1:vv(gv),toolbar2:C4,toolbar3:MC,verify_html:!1,default_link_target:"_blank",height:280},_v&&{toolbar1:vv(gv.concat(" ","ltr rtl"))}),XI=()=>Object.assign(g6(),{toolbar1:filterToolbarButtons(gv),toolbar2:C4,verify_html:!1,height:280},_v&&{toolbar1:filterToolbarButtons(gv.concat(" ","ltr rtl"))}),QI=()=>Object.assign({auto_convert_smileys:!0,browser_spellcheck:!0,convert_urls:!0,relative_urls:!1,toolbar1:filterToolbarButtons(T4)},_v&&{directionality:"rtl",toolbar1:filterToolbarButtons(T4.concat(" ","ltr rtl"))}),xC={MCE_HEADER:"mce-window-head",MCE_DRAG_ELEMENT:"mce-dragh",SUBMIT_BUTTON:"message-submit"},JI={MOBILE:960};function M4(e){const n=ie.trans("Are you sure you want to leave? You have unsaved changes");return e.returnValue=n,n}function IC(){window.removeEventListener("beforeunload",M4)}function RC(e=[]){window.addEventListener("beforeunload",M4),e.forEach(n=>n&&n.addEventListener("click",IC,!0))}function NC(e=[]){return{init_instance_callback(n){n.on("input",()=>RC(e),{once:!0})}}}let Bl={};var LC={name:"Tinymce",props:{customConfig:{type:Object,required:!1},disabled:{type:Boolean,default:!1},initValue:{type:String,default:""},theme:{type:String},placeholder:{type:String},unsavedChangesConfirm:{type:Boolean,default:!1}},emits:["input","content-updated"],watch:{initValue(e){Bl.setContent(`<p>${e}</p>`),this.$emit("input",e)},disabled(){Bl.destroy(),Bl=new b4,this.setupEditor()}},mounted(){Bl=new b4,this.setupEditor()},beforeDestroy(){Bl.destroy()},methods:{getCurrentValue(){return Bl.getContent()},setupEditor(){const e=this,n=this.theme==="advanced"?OC():g6(),a=document.getElementById(xC.SUBMIT_BUTTON),u=this.unsavedChangesConfirm?NC([a]):{},d=Object.assign({},n,e.customConfig,u,{target:e.$refs.editor,setup(h){h.settings.readonly=e.disabled,!e.disabled&&(h.on("blur",()=>{e.$emit("content-updated",h.getContent())}),h.on("KeyUp",()=>{e.$emit("input",h.getContent())}),h.on("Change",()=>{e.$emit("input",h.getContent())}),h.on("BeforeSetContent",g=>{g.content.match(/<a href="http:.*?\.chess\.com.*?a>/)&&(g.content=g.content.replace(/http:/g,"https:"))}),h.shortcuts.add("ctrl+13","submit",()=>{a&&a.click()}))}});Bl.init(d).then(()=>{this.$emit("input",Bl.getContent())})}}},BC=LC,O4={component:"tinymce-component"};function DC(e){this.$style=O4.locals||O4}var FC=li(BC,EC,AC,!1,DC,null,null),zC=FC.exports,UC={name:"TabEmbed",components:{TinyMce:zC,V5Input:Ls.V5Input,V5Select:Ls.V5Select},props:{diagramOptions:{type:Object,required:!0},loading:{default:!0,type:Boolean}},emits:["update-diagram-option"],data(){return{editorOptions:Object.freeze({height:210,resize:!1,toolbar:!1,toolbar1:!1})}},computed:{controls(){return[{action:e=>this.$emit("update-diagram-option",{key:"currentBoardStyle",val:e}),id:"board",label:this.$trans("Board"),options:this.diagramOptions.boardColors,value:this.diagramOptions.currentBoardStyle},{action:e=>this.$emit("update-diagram-option",{key:"currentPieceStyle",val:e}),id:"pieces",label:this.$trans("Pieces"),options:this.diagramOptions.pieceStyles,value:this.diagramOptions.currentPieceStyle}]},diagramCode(){return`[gid=${this.diagramOptions.diagramId}]`},diagramEmbed(){const e='allowtransparency="true" frameborder="0" style="width:100%;border:none;"',{host:n}=window.location,a=`//${n}/emboard?id=${this.diagramOptions.diagramId}`,u=`<script>window.addEventListener("message",e=>{e['data']&&"${this.diagramOptions.diagramId}"===e['data']['id']&&document.getElementById(\`\${e['data']['id']}\`)&&(document.getElementById(\`\${e['data']['id']}\`).style.height=\`\${e['data']['frameHeight']+30}px\`)});<\/script>`;return`<iframe id="${this.diagramOptions.diagramId}" ${e} src="${a}"></iframe>${u}`},toggles(){return[{action:e=>this.$emit("update-diagram-option",{key:"coordinates",val:e.target.checked}),checked:!!this.diagramOptions.coordinates,key:"coordinates",label:this.$trans("Coordinates"),show:!0},{action:e=>this.$emit("update-diagram-option",{key:"isPuzzle",val:e.target.checked}),checked:this.diagramOptions.isPuzzle,key:"puzzle",label:this.$trans("Puzzle"),show:!0},{action:e=>this.$emit("update-diagram-option",{key:"isMultiGame",val:e.target.checked}),checked:this.diagramOptions.isMultiGame,key:"isMultiGame",label:this.$trans("Multi PGN viewer"),show:this.diagramOptions.numberOfGames>1}]}}},HC=UC,x4={bold:"share-menu-tab-embed-bold",header:"share-menu-tab-embed-header",inactive:"share-menu-tab-embed-inactive",scrollable:"share-menu-tab-embed-scrollable",accordion:"share-menu-tab-embed-accordion",controls:"share-menu-tab-embed-controls",stretch:"share-menu-tab-embed-stretch",select:"share-menu-tab-embed-select",component:"share-menu-tab-embed-component",section:"share-menu-tab-embed-section",first:"share-menu-tab-embed-first",flex:"share-menu-tab-embed-flex",half:"share-menu-tab-embed-half",heading:"share-menu-tab-embed-heading",code:"share-menu-tab-embed-code",label:"share-menu-tab-embed-label",input:"share-menu-tab-embed-input",toggles:"share-menu-tab-embed-toggles",toggle:"share-menu-tab-embed-toggle"};function GC(e){this.$style=x4.locals||x4}var VC=li(HC,yC,wC,!1,GC,null,null),jC=VC.exports,$C=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("div",{class:n.$style.section},[a("div",{class:n.$style.heading,domProps:{textContent:n._s("URL")}}),n._v(" "),a("v5-input",{class:n.$style.input,attrs:{readonly:!0,value:n.eventUrl},on:{focus:u=>u.target.select()}})],1),n._v(" "),a("div",{class:n.$style.section},[a("div",{class:n.$style.download},[a("download-button",{on:{download:n.downloadEvent}})],1)])])},WC=[],qC=function(){var n=this,a=n._self._c;return a("v5-button",n._b({class:n.$style.button,attrs:{size:"small",theme:"primary",target:"_blank"},on:n._d({},[n.emitsClick,n.onClick])},"v5-button",n.$props,!1),[a("span",{staticClass:"icon-font-chess ui_v5-button-icon download",attrs:{"aria-hidden":"true"}}),n._v(" "),a("span",{domProps:{textContent:n._s(n.$trans("Download"))}})])},KC=[],ZC={name:"DownloadButton",components:{V5Button:Ls.V5Button},props:{href:{type:String,default:""},download:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["download"],computed:{emitsClick(){return this.href?null:"click"}},methods:{onClick(){return this.$emit("download")}}},YC=ZC,I4={button:"download-button-button"};function XC(e){this.$style=I4.locals||I4}var QC=li(YC,qC,KC,!1,XC,null,null),bv=QC.exports,JC={name:"TabEvent",components:{DownloadButton:bv,V5Input:Ls.V5Input},props:{eventFilename:{type:String},eventUrl:{type:String}},methods:{downloadEvent(){this.eventUrl&&Oa.get(this.eventUrl).then(e=>{this.download(e.data,this.eventFilename)}).catch(e=>{this.download(e,this.eventFilename)})},download(e,n){xu(e,n)}}},eT=JC,R4={download:"share-menu-tab-event-download",heading:"share-menu-tab-event-heading",section:"share-menu-tab-event-section"};function tT(e){this.$style=R4.locals||R4}var nT=li(eT,$C,WC,!1,tT,null,null),rT=nT.exports,iT=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[n.isLoadingGif?a("div",{class:n.$style.square},[a("loader-three-bounce",{attrs:{"is-circle":!0,size:50}})],1):a("img",{class:n.$style.gif,attrs:{alt:n.$trans("Game gif"),height:"248",width:"248",src:n.gifUrl}}),n._v(" "),a("download-button",{attrs:{disabled:n.isLoadingGif},on:{download:n.download}}),n._v(" "),a("p",{class:n.$style.link,domProps:{innerHTML:n._s(n.gifPageLinkText)}})],1)},oT=[],aT=function(){var n=this,a=n._self._c;return a("div",{class:[n.$style.component,{[n.$style.circle]:n.isCircle}],style:{width:`${n.size}px`},attrs:{"data-test-element":"loader-three-bounce"}},[a("div",{class:[n.$style.dot,n.$style.bounce1],style:n.dotCss}),n._v(" "),a("div",{class:[n.$style.dot,n.$style.bounce2],style:n.dotCss}),n._v(" "),a("div",{class:n.$style.dot,style:n.dotCss})])},sT=[],lT={name:"LoaderThreeBounce",props:{isCircle:{type:Boolean,default:!1},size:{type:Number,default:80}},computed:{dotCss(){const e=`${Math.round(this.size/4)}px`;return{width:e,height:e}}}},uT=lT,N4={component:"loader-three-bounce-component",circle:"loader-three-bounce-circle",dot:"loader-three-bounce-dot",animate:"loader-three-bounce-animate",bounce1:"loader-three-bounce-bounce1",bounce2:"loader-three-bounce-bounce2"};function cT(e){this.$style=N4.locals||N4}var dT=li(uT,aT,sT,!1,cT,null,null),fT=dT.exports,hT={name:"TabGif",components:{LoaderThreeBounce:fT,DownloadButton:bv},props:{gifUrl:{type:String,default:null},isLoadingGif:{type:Boolean,default:!1}},computed:{gifPageLinkText(){return LP.gifPageLinkText}},methods:{download(){(0,Gm.saveAs)(this.gifUrl,"board.gif")}}},pT=hT,L4={component:"share-menu-tab-gif-component",link:"share-menu-tab-gif-link",gif:"share-menu-tab-gif-gif",square:"share-menu-tab-gif-square",button:"share-menu-tab-gif-button"};function mT(e){this.$style=L4.locals||L4}var vT=li(pT,iT,oT,!1,mT,null,null),gT=vT.exports,_T=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("img",{class:n.$style.image,attrs:{alt:n.$trans("Chessboard image"),height:n.imageSize.height,width:n.imageSize.width,src:n.dynamicBoardUrl}}),n._v(" "),a("download-button",{attrs:{href:n.dynamicBoardUrl,download:"board.jpeg"}})],1)},bT=[],yT={name:"TabImage",components:{DownloadButton:bv},props:{boardOptions:{type:Object,default:()=>({})},fen:{type:String,required:!0},imageSize:{type:Object,default:()=>({width:248,height:248})},imageUrl:{type:String,required:!1}},data(){const e=(0,mn.ce)();return{boardStyle:this.boardOptions.boardStyle||e.boardStyle,flipped:this.boardOptions.flipBoard||e.flipped,pieceStyle:this.boardOptions.pieceStyle||e.pieceStyle}},computed:{dynamicBoardUrl(){const e=this.flipped?"&flip=true":"",n=`/dynboard?fen=${this.fen}&board=${this.boardStyle}&piece=${this.pieceStyle}&size=3${e}`;return this.imageUrl||n}}},wT=yT,B4={component:"share-menu-tab-image-component",image:"share-menu-tab-image-image"};function ET(e){this.$style=B4.locals||B4}var AT=li(wT,_T,bT,!1,ET,null,null),ST=AT.exports,kT=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("div",{class:n.$style.section},[a("div",{class:n.$style.heading,domProps:{textContent:n._s("FEN")}}),n._v(" "),a("v5-input",{class:n.$style.input,attrs:{readonly:!0,value:n.fen},on:{focus:u=>u.target.select()}})],1),n._v(" "),a("div",{class:n.$style.section},[a("div",{class:n.$style.pgn},[a("div",{class:n.$style.heading,domProps:{textContent:n._s("PGN")}}),n._v(" "),a("div",{class:n.$style.toggles},[n.checkboxUi.isAnalyzedPgnCheckboxVisible?a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.$trans("Annotation"),expression:"$trans('Annotation')"}],class:n.$style.toggle},[a("input",{attrs:{type:"radio",name:"isComputerAnalysisEnabled"},domProps:{checked:!n.checkboxModel.isAnalyzedPgnEnabled},on:{change:function(u){return n.onAnalyzedPgnEnabledChange(!1)}}}),n._v(" "),a("span",{class:["user","icon-font-chess",n.$style.icon]})]):n._e(),n._v(" "),n.checkboxUi.isAnalyzedPgnCheckboxVisible?a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.$trans("Computer Analysis"),expression:"$trans('Computer Analysis')"}],class:n.$style.toggle},[a("input",{attrs:{type:"radio",name:"isComputerAnalysisEnabled"},domProps:{checked:n.checkboxModel.isAnalyzedPgnEnabled},on:{change:function(u){return n.onAnalyzedPgnEnabledChange(!0)}}}),n._v(" "),a("span",{class:["comp-analysis","icon-font-chess",n.$style.icon]})]):n._e(),n._v(" "),n.checkboxUi.isHighlightsCheckboxVisible?a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.$trans("Highlights"),expression:"$trans('Highlights')"}],class:n.$style.toggle},[a("input",{attrs:{disabled:n.checkboxModel.isAnalyzedPgnEnabled,type:"checkbox"},domProps:{checked:!n.checkboxModel.isAnalyzedPgnEnabled&&n.checkboxModel.isHighlightsEnabled},on:{change:n.onHighlightsEnabledChange}}),n._v(" "),a("span",{class:["board-arrow","icon-font-chess",n.$style.icon]})]):n._e(),n._v(" "),n.checkboxUi.isCommentsCheckboxVisible?a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.$trans("Comments"),expression:"$trans('Comments')"}],class:n.$style.toggle},[a("input",{attrs:{disabled:n.checkboxModel.isAnalyzedPgnEnabled,type:"checkbox"},domProps:{checked:n.checkboxModel.isAnalyzedPgnEnabled||n.checkboxModel.isCommentsEnabled},on:{change:n.onCommentsEnabledChange}}),n._v(" "),a("span",{class:["icon-font-chess","chat",n.$style.icon]})]):n._e(),n._v(" "),n.hasTimestamps?a("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.$trans("PGN Timestamps"),expression:"$trans('PGN Timestamps')"}],class:n.$style.toggle},[a("input",{attrs:{disabled:!n.hasTimestampsInUserPgn,type:"checkbox"},domProps:{checked:!n.checkboxModel.isAnalyzedPgnEnabled&&n.checkboxModel.isTimestampsEnabled},on:{change:n.onTimestampsEnabledChange}}),n._v(" "),a("span",{class:["circle-clock","icon-font-chess",n.$style.icon]})]):n._e()])]),n._v(" "),a("v5-textarea",{class:n.$style.textarea,attrs:{name:"pgn",readonly:!0,value:n.displayedPgn},on:{focus:u=>u.target.select()}})],1),n._v(" "),a("download-button",{on:{download:n.download}})],1)},PT=[];const CT=e=>{let n="pgn_data.pgn";return e&&e.White&&e.Black&&(n=`${e.White}_vs_${e.Black}.pgn`,e.Date&&(n=`${e.White}_vs_${e.Black}_${e.Date}.pgn`)),n},TT=e=>{let n;return n=e.replace(/<\/?[^>]+(>|$)/g,""),n=n.replace(/&nbsp;/g," "),n===" "&&(n=""),n},D4=(0,Ir.reactive)({isCommentsCheckboxVisible:!1,isHighlightsCheckboxVisible:!1,isAnalyzedPgnCheckboxVisible:!1}),_6="shareModalPgnOptions",F4=(0,Ir.reactive)(Object.assign({isAnalyzedPgnEnabled:!1,isCommentsEnabled:!0,isHighlightsEnabled:!1,isTimestampsEnabled:!1},ll.get(_6)));function MT(e){Object.keys(e).forEach(n=>{F4[n]=!!e[n]}),ll.set(_6,{...ll.get(_6),...e})}function OT(e){Object.keys(e).forEach(n=>{D4[n]=e[n]})}const eR=({isCommentsEnabled:e,isHighlightsEnabled:n,isTimestampsEnabled:a})=>{const u=!e,d=[];return a&&d.push("clk","timestamp"),n&&d.push("c_effect","c_arrow","c_highlight"),{hideComments:u,restrictCommands:d}};var xT={name:"TabPgn",directives:{tooltip:m4},components:{DownloadButton:bv,V5Input:Ls.V5Input,V5Textarea:Ls.V5Textarea},props:{analyzedPgn:{type:String},fen:{type:String,required:!0},hasTimestamps:{type:Boolean},pgn:{type:String,required:!0},pgnHeaders:{type:Object,default:()=>({})}},setup(){return{checkboxModel:F4,checkboxUi:D4,setCheckboxModel:MT,setCheckboxUi:OT}},computed:{displayedPgn(){const e=this.analyzedPgn&&this.checkboxModel.isAnalyzedPgnEnabled?this.analyzedPgn:this.pgn;return typeof Sh=="function"?Sh(e):e},filename(){return CT(this.pgnHeaders)},sanitizedPgn(){return TT(this.pgn)},hasTimestampsInUserPgn(){return this.hasTimestamps&&!this.checkboxModel.isAnalyzedPgnEnabled}},mounted(){this.showAnalyzedPgnCheckbox(this.analyzedPgn)},methods:{download(){xu(this.displayedPgn,this.filename)},onAnalyzedPgnEnabledChange(e){this.setCheckboxModel({isAnalyzedPgnEnabled:e})},onCommentsEnabledChange(e){this.setCheckboxModel({isCommentsEnabled:e.target.checked})},onHighlightsEnabledChange(e){this.setCheckboxModel({isHighlightsEnabled:e.target.checked})},onTimestampsEnabledChange(e){this.setCheckboxModel({isTimestampsEnabled:e.target.checked})},showAnalyzedPgnCheckbox(e){this.setCheckboxUi({isAnalyzedPgnCheckboxVisible:!!e})}},wach:{analyzedPgn:"showAnalyzedPgnCheckbox"}},IT=xT,z4={component:"share-menu-tab-pgn-component",button:"share-menu-tab-pgn-button",heading:"share-menu-tab-pgn-heading",pgn:"share-menu-tab-pgn-pgn",section:"share-menu-tab-pgn-section",textarea:"share-menu-tab-pgn-textarea",toggle:"share-menu-tab-pgn-toggle",icon:"share-menu-tab-pgn-icon",toggles:"share-menu-tab-pgn-toggles"};function RT(e){this.$style=z4.locals||z4}var NT=li(IT,kT,PT,!1,RT,null,null),LT=NT.exports,BT=function(){var n=this,a=n._self._c;return a("div",{class:n.$style.component},[a("div",{class:[n.$style.wrapper,{[n.$style.expanded]:n.isExpanded}]},[a("div",{class:n.$style.primary},[a("button",{class:[n.$style.link,n.$style.facebook],attrs:{type:"button","aria-label":n.translations.shareFacebook,title:n.translations.shareFacebook},on:{click:function(u){return n.shareWindow("facebook")}}},[a("span",{staticClass:"icon-font-chess facebook",class:n.$style.icon})]),n._v(" "),a("button",{class:[n.$style.link,n.$style.twitter],attrs:{type:"button","aria-label":n.translations.shareTwitter,title:n.translations.shareTwitter},on:{click:function(u){return n.shareWindow("twitter")}}},[a("span",{staticClass:"icon-font-chess twitter",class:n.$style.icon})]),n._v(" "),a("button",{class:[n.$style.link,n.$style.reddit],attrs:{type:"button","aria-label":n.translations.shareReddit,title:n.translations.shareReddit},on:{click:function(u){return n.shareWindow("reddit")}}},[a("span",{staticClass:"icon-font-chess reddit",class:n.$style.icon})]),n._v(" "),n.isShowMoreVisible?a("button",{class:[n.$style.link,n.$style.more],attrs:{type:"button","aria-label":n.translations.showMore,title:n.translations.showMore},on:{click:n.toggleExpanded}},[a("span",{staticClass:"icon-font-chess",class:[n.$style.icon,n.isExpanded?"x":"circle-3-dots"]})]):n._e()]),n._v(" "),a("div",{class:[n.$style.secondary,{[n.$style.visible]:n.isExpanded}]},[a("button",{class:n.$style.link,attrs:{type:"button","aria-label":n.translations.shareLinkedIn,title:n.translations.shareLinkedIn},on:{click:function(u){return n.shareWindow("linkedin")}}},[a("span",{staticClass:"icon-font-chess linkedin",class:n.$style.icon})]),n._v(" "),a("button",{class:n.$style.link,attrs:{type:"button","aria-label":n.translations.shareMix,title:n.translations.shareMix},on:{click:function(u){return n.shareWindow("mix")}}},[a("span",{staticClass:"icon-font-chess mix",class:n.$style.icon})]),n._v(" "),a("button",{class:n.$style.link,attrs:{type:"button","aria-label":n.translations.shareTumblr,title:n.translations.shareTumblr},on:{click:function(u){return n.shareWindow("tumblr")}}},[a("span",{staticClass:"icon-font-chess tumblr",class:n.$style.icon})]),n._v(" "),a("button",{class:n.$style.link,attrs:{type:"button","aria-label":n.translations.addFavorites,title:n.translations.addFavorites},on:{click:n.bookmarkPage}},[a("span",{staticClass:"icon-font-chess favorites",class:n.$style.icon})]),n._v(" "),a("button",{class:n.$style.link,attrs:{type:"button","aria-label":n.translations.sendEmail,title:n.translations.sendEmail},on:{click:function(u){return n.sendInvitation(n.userId,n.username)}}},[a("span",{staticClass:"icon-font-chess mail",class:n.$style.icon})]),n._v(" "),a("button",{class:n.$style.link,attrs:{type:"button","aria-label":n.translations.print,title:n.translations.print},on:{click:n.printWindow}},[a("span",{staticClass:"icon-font-chess printer",class:n.$style.icon})])])])])},DT=[];const FT=e=>Oa.post(H.generate("web_game_callback_shared",{type:e})),tR=e=>http.post(Router.generate("web_tv_callback_set_watched",{url:e})),nR=e=>http.post(Router.generate("web_video_callback_set_watched",{video:e})),zT=Za().slice(0,-13),rR={SOCIAL_SHARE:"social-share"},b6={android:()=>H.generate("web_play_app_view",{type:"android"},!0),ios:()=>H.generate("web_play_app_view",{type:"ios"},!0),index:()=>H.generate("web_index",{},!0),register:()=>H.generate("web_security_register",{},!0),windows:()=>H.generate("web_play_app_view",{type:"windows-phone"},!0)},y6={discord:()=>"https://go.chess.com/Discord",facebook:e=>{var n;return`http://www.facebook.com/sharer.php?u=${(n=encodeURIComponent(e))!=null?n:Ya()}`},linkedin:e=>{var n;return`https://www.linkedin.com/shareArticle?mini=true&url=${(n=encodeURIComponent(e))!=null?n:Ya()}&title=${Za()}&summary=${Za()}&source=Chess.com`},mix:e=>{var n;return`http://www.mix.com/submit?url=${(n=encodeURIComponent(e))!=null?n:Ya()}&title=${Za()}`},reddit:e=>{var n;return`http://reddit.com/r/Chesscom/submit?url=${(n=encodeURIComponent(e))!=null?n:Ya()}&title=${Za()}`},tumblr:e=>{var n;return`http://www.tumblr.com/share/link?url=${(n=encodeURIComponent(e))!=null?n:Ya()}&name=${Za()}&description=${Za()}`},twitch:()=>"https://www.chess.com/twitch",twitter:e=>{var n;return`https://twitter.com/intent/tweet?text=${zT}&url=${(n=encodeURIComponent(e))!=null?n:Ya()}`}},iR={FACEBOOK:"facebook",MAIL:"mail",TWITTER:"twitter"},UT={addFavorites:ie.trans("Add to Favorites"),android:ie.trans("Android App"),discord:ie.trans("Discord"),facebook:ie.trans("Facebook"),gamesToday:ie.trans("Games Today"),google:ie.trans("Google+"),instagram:ie.trans("Instagram"),ios:ie.trans("iOS App"),members:ie.trans("Members"),playersOnline:ie.trans("Players Online"),print:ie.trans("Print"),report:ie.trans("Report"),sendEmail:ie.trans("Send by Mail"),titledOnline:ie.trans("Titled Online"),twitch:ie.trans("Twitch"),twitter:ie.trans("Twitter"),windows:ie.trans("Windows App"),youtube:ie.trans("Youtube"),shareFacebook:ie.trans("Share on Facebook"),shareGplus:ie.trans("Share on Google Plus"),shareLinkedIn:ie.trans("Share on LinkedIn"),shareMix:ie.trans("Share on Mix"),shareReddit:ie.trans("Share on Reddit"),shareTumblr:ie.trans("Post to Tumblr"),shareTwitter:ie.trans("Share on Twitter"),showMore:ie.trans("More")},HT={facebook:"https://www.facebook.com/chess",instagram:"https://www.instagram.com/wwwchesscom/",twitch:"https://www.twitch.tv/chess",twitter:"https://twitter.com/chesscom",youtube:"https://www.youtube.com/user/wwwChesscom"},oR=e=>{const n=Router.generate("web_friend_accept_request_callback",{user:e});return http.put(n)},aR=e=>{const n=Router.generate("web_friend_cancel_request_callback",{user:e});return http.post(n)},sR=(e,n=!1)=>n?http.get(Router.generate("web_user_callback_username_search",e)):http.get(Router.generate("web_friend_callback_friends_search",e)),lR=e=>http.get(Router.generate("web_user_callback_custom_criteria_search",{query:e})),uR=e=>http.get(Router.generate("web_user_callback_username_search",{query:e,onlyFriendsOfMine:1})),cR=e=>{const n=Router.generate("web_friend_decline_request_callback",{user:e});return http.delete(n)},dR=(e=null,n=null)=>http.get(Router.generate("web_friend_registration_invite_link_callback",{source:n,device:e}));async function GT(){await Tu("Social - SocialShare",null,null,{numSocialShares:1})}const VT=e=>{GT();const n=510,a=560,u=window.screen.width/2-a/2,d=window.screen.height/2-n/1.5,h=`width=${a}, height=${n}`,g=`left=${u}, top=${d}`,_="resizable=no, status=no, menubar=no, scrollbars=no";window.open(e,"_blank",`${h},${g},${_}`)},jT=(e,n)=>{const a=rb==="/settings"?"":`${Sf} ${kf} %0D%0A%0D%0A`,u=e?`?friend=${e}`:"",d="subject=Check out Chess.com";let h=`body=${a}I play at Chess.com! Download their free app:%0D%0A%0D%0A
      \u2026 for Android - ${b6.android()}
      \u2026 for iPhone %26 iPad - ${b6.ios()} %0D%0A
      \u2026 or sign up online at ${b6.register()}${u}
      %0D%0A%0D%0A ... %0D%0A%0D%0A`;n&&(h+=`Then challenge me! %22${n}%22 is my username! %0D%0A
            http://www.chess.com/members/view/${n}`),vc(d,h)},fR=async e=>{const{data:{registrationInviteLink:n}}=await generateFriendInviteLink("web",e),a=n;if(a){let u;if(e==="twitter")if(hasFeatureAccess("friends_invite_links_update_metadata"))u=`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}`;else{const d=Translator.trans("Use this link to friend me on %websiteName% and let's play sometime!",{"%websiteName%":"Chess.com"});u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(d)}&url=${encodeURIComponent(a)}`}else u=`http://www.facebook.com/sharer.php?u=${encodeURIComponent(a)}`;openWindow(u)}};var $T={name:"SocialShare",props:{isShowMoreVisible:{type:Boolean,default:!0},url:{type:String,required:!1},userId:{type:String,required:!1},username:{type:String,required:!1}},data(){return{isExpanded:!1,translations:UT,share:y6,web:HT}},methods:{bookmarkPage:xp,printWindow:ib,sendInvitation:jT,shareWindow(e){(e==="facebook"||e==="twitter")&&FT(e),typeof y6[e]=="function"&&VT(y6[e](this.url||window.location.href))},toggleExpanded(){this.isExpanded=!this.isExpanded}}},WT=$T,U4={component:"social-share-component",preloader:"social-share-preloader",wrapper:"social-share-wrapper",expanded:"social-share-expanded",primary:"social-share-primary",link:"social-share-link",icon:"social-share-icon",secondary:"social-share-secondary",visible:"social-share-visible",facebook:"social-share-facebook",twitter:"social-share-twitter",reddit:"social-share-reddit",google:"social-share-google",more:"social-share-more","more-icon":"social-share-more-icon"};function qT(e){this.$style=U4.locals||U4}var KT=li(WT,BT,DT,!1,qT,null,null),ZT=KT.exports;const H4="shareModalDiagramEditorOptions",YT={currentPieceStyle:"",currentBoardStyle:"",coordinates:!1,isPuzzle:!1,isMultiGame:!1};function G4(){return ll.get(H4,{})}function XT({key:e,val:n}){Object.keys(YT).includes(e)&&QT({...G4(),[e]:n})}function QT(e){ll.set(H4,e)}var JT={name:"ShareMenu",components:{Modal:Ls.Modal,OutsideClose:Ls.OutsideClose,ShareLink:oC,SocialShare:ZT,TabEmbed:jC,TabEvent:rT,TabGif:gT,TabImage:ST,TabPgn:LT,TabSelector:bC},props:{analyzedPgn:{type:String},boardOptions:{type:Object,default:()=>({})},boardSettings:{type:Object,default:()=>({})},eventFilename:{type:String},eventUrl:{type:String},initialDiagramOptions:{type:Object,default:()=>({})},includedTabs:{type:Array,default:()=>RP},excludedTabs:{type:Array,default:()=>[]},imageSize:{type:Object},imageUrl:{type:String,required:!1},isLoggedIn:{type:Boolean,default:!1},initialActiveTab:{type:String,default:Nl.PGN.key},hasTimestamps:{type:Boolean,default:!1},variant:{type:String,default:""},tcn:{type:String},fen:{type:String},pgn:{type:String},pgnHeaders:{type:Object},shareUrl:{type:String},tacticsId:{type:Number}},emits:["hide","mounted"],data(){return{activeTab:this.initialActiveTab,animatedGifUrl:null,diagramEditor:{boardColors:null,coordinates:!1,currentBoardStyle:null,currentPieceStyle:null,diagramId:null,diagramImage:null,isMultiGame:!1,isPuzzle:null,numberOfGames:1,pieceStyles:null},savedEmbedProps:{currentBoardStyle:"",currentPieceStyle:"",pgn:""},isLoadingGif:!1}},computed:{diagramOptions(){return{boardOptions:{...this.boardOptions,boardStyle:this.diagramEditor.currentBoardStyle,coordinates:this.diagramEditor.coordinates,pieceStyle:this.diagramEditor.currentPieceStyle},diagramId:this.diagramEditor.diagramId,hasMoves:!!this.tcn.length,isPuzzle:this.diagramEditor.isPuzzle,nodeLimit:this.initialDiagramOptions.nodeLimit||{}}},displayableTabs(){let e=this.includedTabs;return Tf()||(e=e.filter(n=>n!==Lu.Embed)),e.map(n=>Nl[n.toUpperCase()]).filter(n=>!this.excludedTabs.includes(n.key)&&n.isVisible({showGif:this.showGif}))},gamePgn(){return this.initialDiagramOptions&&this.initialDiagramOptions.games&&this.diagramEditor.isMultiGame?this.initialDiagramOptions.games.map(({setup:e})=>e.pgnBody).join(""):this.pgn},generatedShareUrl(){return this.shareUrl||xP(this.tacticsId)},isUpdatedDiagram(){return!["coordinates","currentPieceStyle","currentBoardStyle","isPuzzle","pgn"].every(n=>this.diagramEditor[n]===this.savedEmbedProps[n])},needsDiagramUpdate(){return this.activeTab===Nl.EMBED.key&&this.isUpdatedDiagram},normalizedFen(){return IP(this.fen)},showGif(){return this.isLoggedIn&&this.tcn.length>1&&["chess","chess960"].includes(this.variant.toLowerCase())}},watch:{boardSettings:"buildInitialDiagram","diagramEditor.coordinates":"postDiagram","diagramEditor.currentBoardStyle":"postDiagram","diagramEditor.currentPieceStyle":"postDiagram","diagramEditor.isPuzzle":"postDiagram","diagramEditor.isMultiGame":"postDiagram"},created(){this.getAnimatedGifUrl(),this.buildInitialDiagram()},mounted(){this.$emit("mounted",this.show)},methods:{buildInitialDiagram(){const{boardColors:e=[],pieceStyles:n=[]}=this.boardSettings||{};this.diagramEditor.boardColors=e,this.diagramEditor.coordinates=this.boardOptions.coordinates,this.diagramEditor.currentBoardStyle=this.boardOptions.boardStyle,this.diagramEditor.currentPieceStyle=E4(this.boardOptions.pieceStyle),this.diagramEditor.isPuzzle=this.initialDiagramOptions.isPuzzle,this.diagramEditor.isMultiGame=this.initialDiagramOptions.games&&this.initialDiagramOptions.games.length>1,this.diagramEditor.numberOfGames=this.initialDiagramOptions.games?this.initialDiagramOptions.games.length:1,this.diagramEditor.pieceStyles=WP(n),Object.assign(this.diagramEditor,G4())},getAnimatedGifUrl(){var e;if(this.showGif&&!this.animatedGifUrl&&this.activeTab===Nl.GIF.key){this.isLoadingGif=!0;const n={tcn:this.tcn,flip:this.boardOptions.flipBoard,isChess960:this.variant.toLowerCase()==="chess960",initialPosition:((e=this.initialDiagramOptions)==null?void 0:e.initialPosition)||this.pgnHeaders.FEN||null};nf(n).then(a=>{this.animatedGifUrl=a,this.isLoadingGif=!1})}},getTabComponent(e){return`tab-${e}`},getDiagramInfo(){const e=YP(this.diagramOptions),n=ZP(this.gamePgn,e),a=this.diagramEditor.diagramId;return BP(a,n).then(u=>u.data).catch(GP)},postDiagram(){if(!this.needsDiagramUpdate)return;const{currentBoardStyle:e,currentPieceStyle:n}=this.diagramEditor;this.getDiagramInfo().then(a=>{a&&a>0&&(this.diagramEditor.diagramId=a,this.diagramEditor.diagramImage=w4(a)),this.savedEmbedProps={pgn:this.gamePgn,currentBoardStyle:e,currentPieceStyle:n}})},hide(){this.$refs.modalContainer&&this.$refs.modalContainer.hide(),this.animatedGifUrl=null},selectTab(e){this.activeTab=e,this.postDiagram(),this.getAnimatedGifUrl()},show(){this.fen&&this.pgn&&this.$refs.modalContainer.show()},updateDiagramOption({key:e,val:n}){XT({key:e,val:n}),this.diagramEditor[e]=n}}},eM=JT,V4={content:"share-menu-content",header:"share-menu-header",share:"share-menu-share",tab:"share-menu-tab"};function tM(e){this.$style=V4.locals||V4}var nM=li(eM,MP,OP,!1,tM,null,null),rM=nM.exports,iM={name:"DiagramShareModal",components:{ShareMenu:rM},mixins:[fo],computed:{...(0,Bi.mapGetters)({isChessProblem:"diagramViewer/isChessProblem",loggedIn:"user/isLoggedIn"}),...(0,Bi.mapState)({boardSettings:e=>e.diagramViewerBoard.settings}),additionalOptions(){var e;const a=(e=this.currentGame.game.getRawLines()[0][0])==null?void 0:e.beforeFen;return{games:this.games,initialPosition:a,isPuzzle:this.isChessProblem(this.gameId),parentViewerId:rs(this.gameId)}},fen(){return this.currentGame.game.getFEN()},pgn(){return this.currentGame.game.getPGN()},pgnHeaders(){return{Black:p6(this.currentGame.setup.tags.black,"-").toLowerCase(),Date:p6(this.currentGame.setup.tags.date,"-").toLowerCase(),FEN:this.fen,White:p6(this.currentGame.setup.tags.white,"-").toLowerCase()}},shareUrl(){return window.location.href},tcn(){return this.currentGame.game.getTCN()},variant(){return this.currentGame.game.getVariant()}},mounted(){this.$refs.shareMenu.selectTab("image"),this.$refs.shareMenu.show()},methods:{...(0,Bi.mapMutations)("diagramViewer",["hideShareModal"]),hide(){this.hideShareModal(this.gameId)}}},oM=iM,j4={modal:"diagram-share-modal-modal"};function aM(e){this.$style=j4.locals||j4}var sM=li(oM,CP,TP,!1,aM,null,null),lM=sM.exports,uM={name:"DiagramViewer",components:{DiagramAnalysis:a0,DiagramBoard:m0,DiagramButtonBar:Km,DiagramGameList:tv,DiagramMoveList:PP,DiagramHeader:s,DiagramShareModal:lM},props:{id:{type:String,required:!0},data:{type:String,required:!0},type:{type:String,required:!0}},data(){return{setup:Vc(this.data),shortDiagramId:rs(this.id)}},computed:{...(0,Bi.mapGetters)("diagramViewer",["getGameById","getPuzzleStart","getViewerById","isChessGame","isChessProblem","isSimpleDiagram","getShareModal","getVariationPopover"]),currentGame(){return this.getGameById(this.id)},games(){return this.getViewerById(this.id).games},initShareModal(){return this.getShareModal(this.id)},multiPgnViewer(){return this.games.length>1},puzzleStart(){return this.isChessProblem(this.id)&&this.getPuzzleStart(this.id)},simpleDiagram(){return this.isSimpleDiagram(this.id)}},created(){this.init({id:this.id,setup:this.setup})},methods:{...(0,Bi.mapActions)("diagramViewer",["init","moveBackward","moveForward","moveToEnd","moveToStart","selectNode","setVariations"]),...(0,Bi.mapMutations)("diagramViewer",["clearVariationParentNode","flipBoard","setVariationParentNode","showVariationPopover"]),blur(){window.postMessage(at.DIAGRAM_VIEWER_BLUR,window.location.origin)},focus(){window.postMessage(at.DIAGRAM_VIEWER_FOCUS,window.location.origin)},focusOnWidget(){this.$el.focus()},hasVariations(){const{game:e}=this.currentGame;return e.getSelectedNode()?e.getRawLines().some(n=>e.getSelectedNode().fen===n[0].beforeFen):!1},isVariation(){const{game:e}=this.currentGame;return e.getNodeIds().line!==0},onKeyDown(e){if(this.getViewerById(this.id).shareModal||this.getVariationPopover(this.id))return;e.preventDefault();const n=this.id,d=this.currentGame.game.getNodeIds().move-1;if((this.isChessGame(n)||!this.puzzleStart)&&!this.isSimpleDiagram(n))switch(e.keyCode){case Et.LEFT:this.isVariation()&&d<0?this.selectParentMove(fi.BACKWARD):this.moveBackward(n);break;case Et.UP:this.isVariation()?this.selectParentMove(fi.BACKWARD):this.moveToStart(n);break;case Et.RIGHT:this.triggerMoveForward();break;case Et.DOWN:this.isVariation()?this.selectParentMove():this.moveToEnd(n);break;case Et.X:this.flipBoard(n);break;default:break}},selectParentMove(e=fi.FORWARD){const n=this.currentGame.game,a=this.id,u=n.getNodeIds().line,d=n.getRawLines(),h=d[u].length-1,g=this.currentGame.setup,_=n.getNodeIds();this.setVariationParentNode({id:a,game:n});const b={line:u,move:e===fi.FORWARD?h:0};if(_.move===b.move){if(!g.variationParentNode)return;const A=g.variationParentNode.ids;if(b.line=A.line,e===fi.FORWARD){const T=d[A.line];b.move=A.move+1>T.length-1?A.move:A.move+1}else b.move=A.move}this.selectNode({game:n,id:a,ids:b}),this.clearVariationParentNode(a)},selectedNodeIsVisible(){const e=this.currentGame.game,n=this.$refs.moveList.$refs.moveList,a=n.$el.getBoundingClientRect().top,u=Da(e,n)?Da(e,n).getBoundingClientRect().top:void 0;return u?a<u:!0},triggerMoveForward(){const e=this.id,n=this.currentGame.game,a=n.getRawLines(),u=n.getNodeIds(),d=u.move+1,h=a[u.line].length-1;this.hasVariations()&&!Op()&&window.innerWidth>kt.DESKTOP_WIDTH&&this.selectedNodeIsVisible()&&!this.isChessProblem(e)?this.getVariationPopover(e)?this.moveForward(e):(this.setVariations({id:e,lines:a}),this.showVariationPopover(e)):d>h&&this.isVariation()?this.selectParentMove():this.moveForward(e)}}},cM=uM,$4={component:"diagram-viewer-component",body:"diagram-viewer-body","full-width":"diagram-viewer-full-width"};function dM(e){this.$style=$4.locals||$4}var fM=li(cM,xs,Is,!1,dM,null,null),hM=fM.exports;function W4(e){return Ko(e,hM,n=>({data:xy(n),id:Cn(n),type:Uf(e)}),"",Lo.default)}document.addEventListener("DOMContentLoaded",()=>{xg({diagramViewerBoard:Cs,diagramViewer:ky}),Lo.default.dispatch("diagramViewerBoard/loadOptions",!0);const e=zf(Ve.CHESS_DIAGRAM),n=zf(Ve.CHESS_DAILY_PUZZLE);e.length>0&&(Array.from(e).forEach(a=>{Ph(a)}),W4(`.${Ve.CHESS_DIAGRAM}`)),n.length>0&&(Array.from(n).forEach(a=>{Ph(a)}),W4(`.${Ve.CHESS_DAILY_PUZZLE}`)),window.onload=()=>Th(),window.onresize=()=>Th()})}()}();
