window.chesscom=window.chesscom||{},window.chesscom.routes=window.chesscom.routes||{},Object.assign(window.chesscom.routes,{web_play_new:{tokens:[["text","/play/online/new"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_play_new:{tokens:[["text","/play/online/new"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_archive_index:{tokens:[["variable","/","[^/]++","username"],["text","/games/archive"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"af_ZA|ar_AR|az_AZ|be_BY|bg_BG|bn_BD|bs_BA|ca|cs_CZ|da_DK|de_DE|el_GR|en_US|es_ES|et_EE|eu_ES|fa_IR|fi_FI|fil_PH|fr_FR|gl_ES|he_IL|hi_IN|hr_HR|hu_HU|hy_AM|id_ID|is_IS|it_IT|ja_JP|ka_GE|ko_KR|lt_LT|lv_LV|nl_BE|ms_MY|nl_NL|no_NO|pl_PL|pt_BR|pt_PT|ro_RO|ru_RU|sk_SK|sl_SI|sq_AL|sr_RS|sv_SE|tk_TM|tr_TR|uk_UA|ur_PK|vi_VN|zh_CN|zh_HK|zh_TW"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_archive_index:{tokens:[["variable","/","[^/]++","username"],["text","/games/archive"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]}}),((typeof self<"u"?self:this).wpChessCom_U1oS=(typeof self<"u"?self:this).wpChessCom_U1oS||[]).push([[33225,47881,88739],{96849:function(l,t){t.Z={"placeholder-popover":"user-popover-placeholder-popover",bottom:"user-popover-bottom",top:"user-popover-top","placeholder-component":"user-popover-placeholder-component","placeholder-profile":"user-popover-placeholder-profile","placeholder-avatar":"user-popover-placeholder-avatar","placeholder-info":"user-popover-placeholder-info"}},88837:function(l,t,s){s.d(t,{s:function(){return i},x:function(){return u}});var i=function(){var e=this,o=e._self._c;return o("div",[e.user.userNotExist?e._e():o("div",{attrs:{id:"user-popover"}},[e.show?o("user-popover",{ref:"userPopover",attrs:{"dynamic-actions":e.dynamicActions,avatar:e.user.avatarUrl,"is-fide-verified":e.user.isFideVerified,"can-add-friend":e.canAddFriend,"can-block-user":e.canBlockUser,"can-create-challenge":e.canCreateChallenge,"can-follow-user":e.canFollowUser,"can-gift-membership":e.canGiftMembership,"can-remove-friend":e.canRemoveFriend,"can-report-user":e.canReportUser,"can-send-message":e.canSendMessage,"can-send-trophy":e.canSendTrophy,"can-unblock-user":e.canUnblockUser,"can-unfollow-user":e.canUnfollowUser,"can-use-global-chat":e.canUseGlobalChat,"can-cancel-friend-request":e.canCancelFriendRequest,"can-accept-friend-request":e.canAcceptFriendRequest,"chess-title":e.user.chessTitle,country:{name:e.user.countryName,code:e.user.countryId},flair:e.user.flair,"full-name":e.fullName,"club-chat-id-for-moderator-actions":e.clubChatIdForModeratorActions,"is-enabled":e.user.isEnabled,"is-guest":e.isGuest,"is-loading":e.isLoading,"joined-date":e.user.joinDate,"last-login-date":e.user.lastLoginDate,"logged-as-another":e.loggedAsAnother,membership:e.membershipNumber,"popover-position":e.position,"presence-details":e.presenceDetails,ratings:e.ratings,username:e.user.username,"username-element-ref":e.elementRef,"user-already-muted-on-chat":e.userAlreadyMutedOnChat,uuid:e.user.uuid,"league-code":e.leagueData.leagueCode,"league-division":e.leagueData.leagueDivision,"league-name":e.leagueData.leagueName,"lifetime-score":e.lifetimeScore,opponent:e.currentUser},on:{"accept-friend-request":e.acceptFriendRequest,"add-friend":e.addFriend,"block-user":e.blockUser,"cancel-friend-request":e.cancelFriendRequest,"create-challenge":e.onChallenge,"follow-user":e.trackUser,"remove-friend":e.deleteFriend,"send-message":e.onMessage,"show-archive":e.showArchive,"show-gift":e.showGiftModal,"show-report":e.showReportModal,"show-trophy":e.onTrophy,"start-direct-chat":e.startDirectChat,"unblock-user":e.unblockUser,"unfollow-user":e.untrackUser,"user-popover-hide":e.hideUserPopup}}):e._e(),e._v(" "),e.isUserReportModalVisible?[o("user-report-modal",{attrs:{username:e.user.username},on:{"hide-modal":e.hideUserReportModal}})]:e._e(),e._v(" "),e.showGiftMembershipModal?o("gift-membership-modal",{attrs:{"receiver-username":e.user.username,"receiver-id":e.user.userId,"sender-username":e.username},on:{"hide-modal":e.hideGiftMembershipModal}}):e._e(),e._v(" "),e.isTrophyPopoverVisible?o("trophy-popover",{on:{hide:e.hideTrophyPopover}}):e._e()],2),e._v(" "),e.user.userNotExist&&e.show?o("div",{class:[e.$style["placeholder-popover"],e.$style[e.position.x],e.$style[e.position.y]],style:e.inlineStyles},[o("div",{class:e.$style["placeholder-component"]},[o("div",{class:e.$style["placeholder-profile"]},[o("div",{class:e.$style["placeholder-avatar"]}),e._v(" "),o("div",{class:e.$style["placeholder-info"],domProps:{textContent:e._s(e.$trans("Member name does not exist"))}})])])]):e._e()])},u=[]},70949:function(l,t,s){var i=s(20237),u=s(35917),d=s(60747),e=s(6407),o=s(63112),c=s(10588),p=s(55475),b=s(86852),E=s(33348),m=s(94124),v=s(46452),f=s(74338);t.Z={name:"UserPopoverWidget",components:{giftMembershipModal:()=>({component:Promise.all([s.e(77682),s.e(45062),s.e(17472),s.e(20614)]).then(s.bind(s,17472))}),UserReportModal:()=>({component:s.e(72210).then(s.bind(s,53087))}),UserPopover:c.Z,TrophyPopover:()=>({component:Promise.all([s.e(7672),s.e(12284)]).then(s.bind(s,7672))})},data(){return{clubChatIdForModeratorActions:!1,clickListener:null,dynamicActions:null,isLoading:!1,showGiftMembershipModal:!1,isUserReportModalVisible:!1,isChallengePopoverVisible:!1,isTrophyPopoverVisible:!1,scrollContainer:null,elementRef:null,userAlreadyMutedOnChat:!1}},computed:{...(0,f.mapState)({currentUser:r=>r.user,currentUserIsGuest:r=>r.user.isGuest,show:r=>r.userPopover.show,user:r=>r.userPopover.user,username:r=>r.user.username,lifetimeScore:r=>r.userPopover.lifetimeScore,position:r=>r.userPopover.position,presenceDetails:r=>r.userPopover.presenceDetails}),fullName(){return`${this.user.firstName||""}  ${this.user.lastName||""}`.trim()},leagueData(){var r;const n={leagueCode:"",leagueDivision:"",leagueName:""},{isOptedIn:h,division:a}=(r=this.user.userLeagueData)!=null?r:{};return h&&a&&Object.assign(n,{leagueCode:a.league.code,leagueDivision:a.name.slice(1),leagueName:a.league.name}),n},ratings(){const{bestRating:r,bestRatingType:n,topPuzzleRushScore:h}=this.user,a=[{type:n,icon:n,value:r}];return h&&a.push({type:"puzzle",icon:"fire-puzzle",value:h}),a},canAddFriend(){return this.loggedAsAnother&&!this.user.areFriends&&!this.user.isFriendRequestFromUserExists&&!this.user.isFriendRequestExists&&this.user.isEnabled},canBlockUser(){return this.loggedAsAnother&&!this.user.areFriends&&!this.user.isBlocked&&this.user.isEnabled&&this.user.membership&&this.user.membership.level<u.p0.moderator},canUseGlobalChat(){return this.loggedAsAnother&&this.user.isEnabled},canCreateChallenge(){return this.loggedAsAnother&&this.user.isEnabled},canFollowUser(){return this.loggedAsAnother&&!this.user.isTracked&&this.user.isEnabled},canGiftMembership(){return this.user.canReceiveGiftMembership&&this.user.isEnabled},canRemoveFriend(){return this.loggedAsAnother&&this.user.areFriends},canReportUser(){return this.loggedAsAnother&&!this.user.isModerator&&!this.user.isStaff},canSendMessage(){return this.loggedAsAnother&&this.user.isMessageable&&this.user.isEnabled},canSendTrophy(){return this.canSendMessage&&this.user.isEnabled},canUnblockUser(){return this.loggedAsAnother&&this.user.isBlocked&&this.user.isEnabled},canUnfollowUser(){return this.loggedAsAnother&&this.user.isTracked&&this.user.isEnabled},hasInboundFriendRequest(){return this.loggedAsAnother&&this.user.isFriendRequestFromUserExists},hasOutboundFriendRequest(){return this.loggedAsAnother&&this.user.isFriendRequestExists},canCancelFriendRequest(){return this.hasOutboundFriendRequest&&!this.hasInboundFriendRequest},canAcceptFriendRequest(){return this.hasInboundFriendRequest},loggedAsAnother(){return this.username&&this.username!==this.user.username},membershipNumber(){return(0,d.yO)(this.user.membership?this.user.membership.level:null,this.user.isEnabled)},inlineStyles(){return(0,e.M)(this.position)},areFriends(){return this.user.areFriends},isGuest(){return this.currentUserIsGuest||this.user.isGuest}},created(){(0,p.X)({modalMessages:b.Z,trophies:E.Z})},mounted(){this.scrollContainer=window,m.Z.on("userPopover/show",({actions:r,clubChatIdForModeratorActions:n,userAlreadyMutedOnChat:h,username:a},g)=>{if(this.dynamicActions=r,this.clubChatIdForModeratorActions=n,this.userAlreadyMutedOnChat=h,this.$store.dispatch("userPopover/fetchUserPopover",a).then(()=>{this.isLoading=!1}),this.$store.commit("userPopover/resetUser"),a==null)return;this.clickListener=document.addEventListener("click",_=>{(this.user.userNotExist||this.$refs.userPopover&&_.target!==this.$refs.userPopover.$el&&!this.$refs.userPopover.$el.contains(_.target)&&!document.getElementById(u.xL.USER_POPOVER_CONTAINER).contains(_.target))&&this.hideUserPopup()},!0),setTimeout(()=>{!this.user.username&&!this.user.userNotExist&&(this.isLoading=!0)},500),this.scrollContainer.addEventListener("scroll",this.hideUserPopup),this.elementRef=g;const P=(0,i.MD)(g.getBoundingClientRect());this.$store.commit("userPopover/setPosition",P),this.$store.commit("userPopover/showUserPopover")}),m.Z.on("userPopover/hide",this.hideUserPopup)},beforeDestroy(){this.removeListeners()},methods:{...(0,f.mapMutations)({hideUserPopover:"userPopover/hideUserPopover",setRecipientIsFriend:"trophies/setRecipientIsFriend",setRecipientUsername:"trophies/setRecipientUsername"}),onChallenge({username:r}){window.location=v.Z.generate("web_play_new",{opponent:r})},onMessage(r){this.hideUserPopup(),window.postMessage({event:"SHOW_MESSAGE_MODAL",user:{avatar_url:r.avatar,username:r.username}},window.location.origin)},onTrophy(r){this.hideUserPopup(),this.setRecipientUsername(r.username),this.isTrophyPopoverVisible=!0},acceptFriendRequest(){this.$store.dispatch("user/approveFriendRequest",this.user.userId).then(this.reload)},addFriend(){this.$store.dispatch("user/addFriend",this.user.userId).then(this.reload)},blockUser(){this.$store.dispatch("user/blockUser",this.user.username).then(this.reload)},cancelFriendRequest(){this.$store.dispatch("user/cancelFriendRequest",this.user.userId).then(this.reload)},deleteFriend(){this.$store.dispatch("user/deleteFriend",this.user.userId).then(this.reload)},hideUserPopup(){this.setRecipientIsFriend(this.areFriends),this.hideUserPopover(),this.removeListeners(),this.isLoading=!1},reload(){return this.$store.dispatch("userPopover/fetchUserPopover",this.user.username)},removeListeners(){document.removeEventListener("click",this.clickListener,!0),this.scrollContainer.removeEventListener("scroll",this.hideUserPopup)},trackUser(){this.$store.dispatch("user/trackUser",this.user.username).then(this.reload)},unblockUser(){this.$store.dispatch("user/unblockUser",this.user.username).then(this.reload)},untrackUser(){this.$store.dispatch("user/untrackUser",this.user.username).then(this.reload)},showGiftModal(){this.hideUserPopup(),this.showGiftMembershipModal=!0},hideGiftMembershipModal(){this.showGiftMembershipModal=!1},showReportModal(){this.hideUserPopup(),this.isUserReportModalVisible=!0},hideUserReportModal(){this.isUserReportModalVisible=!1},hideChallengePopover(){this.isChallengePopoverVisible=!1},hideTrophyPopover(){this.isTrophyPopoverVisible=!1},showArchive(r){window.location.href=v.Z.generate("web_archive_index",{username:r.username})},startDirectChat(){const r=o.U3.START_DIRECT_CHAT,n={avatarUrl:this.user.avatarUrl,id:this.user.uuid,username:this.user.username};window.postMessage({key:r,payload:n},window.location.origin)}}}},86852:function(l,t,s){var i=s(83017),u=s(84681);t.Z={namespaced:!0,mutations:i.Z,state:u.Z}},83017:function(l,t){t.Z={newMessage:(s,i)=>{s.message=i}}},84681:function(l,t){t.Z={message:null}},12041:function(l,t,s){s.r(t);var i=s(88837),u=s(91805),d=s(87283),e=s(51900);function o(p){this.$style=d.Z.locals||d.Z}var c=(0,e.Z)(u.Z,i.s,i.x,!1,o,null,null);t.default=c.exports},87283:function(l,t,s){s.d(t,{Z:function(){return i.Z}});var i=s(96849)},91805:function(l,t,s){var i=s(70949);t.Z=i.Z}}]);
